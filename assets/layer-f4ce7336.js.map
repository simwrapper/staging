{"version":3,"file":"layer-f4ce7336.js","sources":["../../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../../node_modules/gl-matrix/esm/common.js","../../node_modules/gl-matrix/esm/vec4.js","../../node_modules/@math.gl/web-mercator/dist/esm/math-utils.js","../../node_modules/gl-matrix/esm/mat4.js","../../node_modules/gl-matrix/esm/vec2.js","../../node_modules/gl-matrix/esm/vec3.js","../../node_modules/@math.gl/web-mercator/dist/esm/assert.js","../../node_modules/@math.gl/web-mercator/dist/esm/web-mercator-utils.js","../../node_modules/@math.gl/web-mercator/dist/esm/fit-bounds.js","../../node_modules/@math.gl/web-mercator/dist/esm/get-bounds.js","../../node_modules/@math.gl/web-mercator/dist/esm/normalize-viewport-props.js","../../node_modules/hammerjs/hammer.js","../../node_modules/mjolnir.js/dist/esm/utils/hammer-overrides.js","../../node_modules/mjolnir.js/dist/esm/utils/hammer.browser.js","../../node_modules/mjolnir.js/dist/esm/inputs/input.js","../../node_modules/mjolnir.js/dist/esm/constants.js","../../node_modules/mjolnir.js/dist/esm/utils/globals.js","../../node_modules/mjolnir.js/dist/esm/inputs/wheel-input.js","../../node_modules/mjolnir.js/dist/esm/inputs/move-input.js","../../node_modules/mjolnir.js/dist/esm/inputs/key-input.js","../../node_modules/mjolnir.js/dist/esm/inputs/contextmenu-input.js","../../node_modules/mjolnir.js/dist/esm/utils/event-utils.js","../../node_modules/mjolnir.js/dist/esm/utils/event-registrar.js","../../node_modules/mjolnir.js/dist/esm/event-manager.js","../../node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/assert.js","../../node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/globals.js","../../node_modules/@loaders.gl/worker-utils/dist/esm/lib/env-utils/version.js","../../node_modules/@loaders.gl/worker-utils/dist/esm/lib/env-utils/assert.js","../../node_modules/@loaders.gl/worker-utils/dist/esm/lib/env-utils/globals.js","../../node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-farm/worker-job.js","../../node_modules/@loaders.gl/worker-utils/dist/esm/lib/node/worker_threads-browser.js","../../node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-utils/get-loadable-worker-url.js","../../node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-utils/get-transfer-list.js","../../node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-farm/worker-thread.js","../../node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-farm/worker-pool.js","../../node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-farm/worker-farm.js","../../node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-api/get-worker-url.js","../../node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-api/validate-worker-version.js","../../node_modules/@loaders.gl/loader-utils/dist/esm/lib/worker-loader-utils/parse-with-worker.js","../../node_modules/@loaders.gl/loader-utils/dist/esm/lib/binary-utils/buffer-utils.js","../../node_modules/@loaders.gl/loader-utils/dist/esm/lib/binary-utils/array-buffer-utils.js","../../node_modules/@loaders.gl/loader-utils/dist/esm/lib/iterators/async-iteration.js","../../node_modules/@probe.gl/stats/dist/esm/utils/hi-res-timestamp.js","../../node_modules/@probe.gl/stats/dist/esm/lib/stat.js","../../node_modules/@probe.gl/stats/dist/esm/lib/stats.js","../../node_modules/@loaders.gl/loader-utils/dist/esm/lib/path-utils/file-aliases.js","../../node_modules/@loaders.gl/loader-utils/dist/esm/lib/path-utils/path.js","../../node_modules/@loaders.gl/core/dist/esm/javascript-utils/is-type.js","../../node_modules/@loaders.gl/core/dist/esm/lib/utils/mime-type-utils.js","../../node_modules/@loaders.gl/core/dist/esm/lib/utils/resource-utils.js","../../node_modules/@loaders.gl/core/dist/esm/lib/utils/response-utils.js","../../node_modules/@loaders.gl/core/dist/esm/lib/fetch/fetch-file.js","../../node_modules/@probe.gl/env/dist/esm/lib/is-electron.js","../../node_modules/@probe.gl/env/dist/esm/lib/is-browser.js","../../node_modules/@probe.gl/env/dist/esm/lib/globals.js","../../node_modules/@probe.gl/env/dist/esm/utils/globals.js","../../node_modules/@probe.gl/env/dist/esm/lib/get-browser.js","../../node_modules/@probe.gl/log/dist/esm/utils/local-storage.js","../../node_modules/@probe.gl/log/dist/esm/utils/formatters.js","../../node_modules/@probe.gl/log/dist/esm/utils/color.js","../../node_modules/@probe.gl/log/dist/esm/utils/autobind.js","../../node_modules/@probe.gl/log/dist/esm/utils/assert.js","../../node_modules/@probe.gl/log/dist/esm/utils/hi-res-timestamp.js","../../node_modules/@probe.gl/log/dist/esm/log.js","../../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/loggers.js","../../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/option-defaults.js","../../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/option-utils.js","../../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/normalize-loader.js","../../node_modules/@loaders.gl/core/dist/esm/lib/api/register-loaders.js","../../node_modules/@loaders.gl/core/dist/esm/lib/utils/log.js","../../node_modules/@loaders.gl/core/dist/esm/lib/api/select-loader.js","../../node_modules/@loaders.gl/core/dist/esm/iterators/make-iterator/make-string-iterator.js","../../node_modules/@loaders.gl/core/dist/esm/iterators/make-iterator/make-array-buffer-iterator.js","../../node_modules/@loaders.gl/core/dist/esm/iterators/make-iterator/make-blob-iterator.js","../../node_modules/@loaders.gl/core/dist/esm/iterators/make-iterator/make-stream-iterator.js","../../node_modules/@loaders.gl/core/dist/esm/iterators/make-iterator/make-iterator.js","../../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/get-data.js","../../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/loader-context.js","../../node_modules/@loaders.gl/core/dist/esm/lib/api/parse.js","../../node_modules/@loaders.gl/core/dist/esm/lib/api/load.js","../../node_modules/@loaders.gl/images/dist/esm/lib/utils/version.js","../../node_modules/@loaders.gl/images/node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/assert.js","../../node_modules/@loaders.gl/images/node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/globals.js","../../node_modules/@loaders.gl/images/dist/esm/lib/category-api/image-type.js","../../node_modules/@loaders.gl/images/dist/esm/lib/category-api/parsed-image-api.js","../../node_modules/@loaders.gl/images/dist/esm/lib/parsers/svg-utils.js","../../node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-image.js","../../node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-image-bitmap.js","../../node_modules/@loaders.gl/images/dist/esm/lib/category-api/binary-image-api.js","../../node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-node-image.js","../../node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-image.js","../../node_modules/@loaders.gl/images/dist/esm/image-loader.js","../../node_modules/@deck.gl/core/dist/esm/utils/log.js","../../node_modules/@deck.gl/core/dist/esm/debug/index.js","../../node_modules/@deck.gl/core/dist/esm/utils/json-loader.js","../../node_modules/@deck.gl/core/dist/esm/lib/init.js","../../node_modules/@luma.gl/gltools/dist/esm/utils/log.js","../../node_modules/@luma.gl/gltools/dist/esm/utils/assert.js","../../node_modules/@luma.gl/gltools/dist/esm/utils/webgl-checks.js","../../node_modules/@luma.gl/gltools/dist/esm/polyfill/polyfill-vertex-array-object.js","../../node_modules/@luma.gl/gltools/dist/esm/polyfill/get-parameter-polyfill.js","../../node_modules/@luma.gl/gltools/dist/esm/polyfill/polyfill-table.js","../../node_modules/@luma.gl/gltools/dist/esm/polyfill/polyfill-context.js","../../node_modules/@luma.gl/gltools/dist/esm/state-tracker/webgl-parameter-tables.js","../../node_modules/@luma.gl/gltools/dist/esm/utils/utils.js","../../node_modules/@luma.gl/gltools/dist/esm/state-tracker/track-context-state.js","../../node_modules/@luma.gl/gltools/dist/esm/state-tracker/unified-parameter-api.js","../../node_modules/@luma.gl/gltools/dist/esm/utils/device-pixels.js","../../node_modules/@luma.gl/gltools/dist/esm/context/context.js","../../node_modules/@luma.gl/webgl/dist/esm/init.js","../../node_modules/@luma.gl/webgl/dist/esm/webgl-utils/request-animation-frame.js","../../node_modules/@luma.gl/webgl/dist/esm/utils/assert.js","../../node_modules/@luma.gl/webgl/dist/esm/webgl-utils/constants-to-keys.js","../../node_modules/@luma.gl/webgl/dist/esm/utils/utils.js","../../node_modules/@luma.gl/webgl/dist/esm/utils/stub-methods.js","../../node_modules/@luma.gl/webgl/dist/esm/classes/resource.js","../../node_modules/@luma.gl/webgl/dist/esm/webgl-utils/typed-array-utils.js","../../node_modules/@luma.gl/webgl/dist/esm/utils/check-props.js","../../node_modules/@luma.gl/webgl/dist/esm/classes/accessor.js","../../node_modules/@luma.gl/webgl/dist/esm/classes/buffer.js","../../node_modules/@luma.gl/webgl/dist/esm/classes/texture-formats.js","../../node_modules/@luma.gl/webgl/dist/esm/classes/texture.js","../../node_modules/@luma.gl/webgl/dist/esm/utils/load-file.js","../../node_modules/@luma.gl/webgl/dist/esm/classes/texture-2d.js","../../node_modules/@luma.gl/webgl/dist/esm/classes/texture-cube.js","../../node_modules/@luma.gl/webgl/dist/esm/classes/texture-3d.js","../../node_modules/@luma.gl/webgl/dist/esm/classes/renderbuffer-formats.js","../../node_modules/@luma.gl/webgl/dist/esm/classes/renderbuffer.js","../../node_modules/@luma.gl/webgl/dist/esm/classes/clear.js","../../node_modules/@luma.gl/webgl/dist/esm/webgl-utils/format-utils.js","../../node_modules/@luma.gl/webgl/dist/esm/classes/copy-and-blit.js","../../node_modules/@luma.gl/webgl/dist/esm/features/webgl-features-table.js","../../node_modules/@luma.gl/webgl/dist/esm/features/features.js","../../node_modules/@luma.gl/webgl/dist/esm/classes/framebuffer.js","../../node_modules/@luma.gl/webgl/dist/esm/webgl-utils/texture-utils.js","../../node_modules/@luma.gl/webgl/dist/esm/glsl-utils/get-shader-name.js","../../node_modules/@luma.gl/webgl/dist/esm/glsl-utils/get-shader-type-name.js","../../node_modules/@luma.gl/webgl/dist/esm/glsl-utils/format-glsl-error.js","../../node_modules/@luma.gl/webgl/dist/esm/glsl-utils/get-shader-version.js","../../node_modules/@luma.gl/webgl/dist/esm/classes/shader.js","../../node_modules/@luma.gl/webgl/dist/esm/classes/uniforms.js","../../node_modules/@luma.gl/webgl/dist/esm/webgl-utils/attribute-utils.js","../../node_modules/@luma.gl/webgl/dist/esm/classes/program-configuration.js","../../node_modules/@luma.gl/webgl/dist/esm/classes/program.js","../../node_modules/@luma.gl/webgl/dist/esm/classes/query.js","../../node_modules/@luma.gl/webgl/dist/esm/classes/transform-feedback.js","../../node_modules/@luma.gl/webgl/dist/esm/utils/array-utils-flat.js","../../node_modules/@luma.gl/webgl/dist/esm/classes/vertex-array-object.js","../../node_modules/@luma.gl/webgl/dist/esm/classes/vertex-array.js","../../node_modules/@luma.gl/webgl/dist/esm/utils/format-value.js","../../node_modules/@luma.gl/webgl/dist/esm/debug/debug-uniforms.js","../../node_modules/@luma.gl/webgl/dist/esm/debug/debug-vertex-array.js","../../node_modules/@luma.gl/webgl/dist/esm/debug/debug-program-configuration.js","../../node_modules/@luma.gl/engine/dist/esm/lib/animation-loop.js","../../node_modules/@luma.gl/shadertools/dist/esm/lib/constants.js","../../node_modules/@luma.gl/shadertools/dist/esm/utils/assert.js","../../node_modules/@luma.gl/shadertools/dist/esm/lib/filters/prop-types.js","../../node_modules/@luma.gl/shadertools/dist/esm/lib/shader-module.js","../../node_modules/@luma.gl/shadertools/dist/esm/lib/resolve-modules.js","../../node_modules/@luma.gl/shadertools/dist/esm/utils/is-old-ie.js","../../node_modules/@luma.gl/shadertools/dist/esm/utils/webgl-info.js","../../node_modules/@luma.gl/shadertools/dist/esm/lib/platform-defines.js","../../node_modules/@luma.gl/shadertools/dist/esm/modules/module-injectors.js","../../node_modules/@luma.gl/shadertools/dist/esm/lib/inject-shader.js","../../node_modules/@luma.gl/shadertools/dist/esm/lib/transpile-shader.js","../../node_modules/@luma.gl/shadertools/dist/esm/lib/assemble-shaders.js","../../node_modules/@luma.gl/shadertools/dist/esm/utils/shader-utils.js","../../node_modules/@luma.gl/shadertools/dist/esm/modules/fp32/fp32.js","../../node_modules/@math.gl/core/dist/esm/lib/assert.js","../../node_modules/@math.gl/core/dist/esm/lib/common.js","../../node_modules/@math.gl/core/dist/esm/classes/base/math-array.js","../../node_modules/@math.gl/core/dist/esm/lib/validators.js","../../node_modules/@math.gl/core/dist/esm/classes/base/vector.js","../../node_modules/@math.gl/core/dist/esm/lib/gl-matrix-extras.js","../../node_modules/@math.gl/core/dist/esm/classes/vector3.js","../../node_modules/@math.gl/core/dist/esm/classes/base/matrix.js","../../node_modules/@math.gl/core/dist/esm/classes/matrix4.js","../../node_modules/@luma.gl/shadertools/dist/esm/modules/picking/picking.js","../../node_modules/@luma.gl/shadertools/dist/esm/modules/transform/transform.js","../../node_modules/@luma.gl/engine/dist/esm/lib/program-manager.js","../../node_modules/@luma.gl/engine/dist/esm/lib/model-utils.js","../../node_modules/@luma.gl/engine/dist/esm/lib/model.js","../../node_modules/@luma.gl/engine/dist/esm/transform/buffer-transform.js","../../node_modules/@luma.gl/engine/dist/esm/transform/transform-shader-utils.js","../../node_modules/@luma.gl/engine/dist/esm/transform/texture-transform.js","../../node_modules/@luma.gl/engine/dist/esm/transform/transform.js","../../node_modules/@luma.gl/engine/dist/esm/geometry/geometry.js","../../node_modules/@luma.gl/engine/dist/esm/animation/timeline.js","../../node_modules/@deck.gl/core/dist/esm/shaderlib/misc/geometry.js","../../node_modules/@deck.gl/core/dist/esm/lib/constants.js","../../node_modules/@deck.gl/core/dist/esm/shaderlib/project/project.glsl.js","../../node_modules/@deck.gl/core/dist/esm/utils/memoize.js","../../node_modules/@deck.gl/core/dist/esm/shaderlib/project/viewport-uniforms.js","../../node_modules/@deck.gl/core/dist/esm/shaderlib/project/project.js","../../node_modules/@deck.gl/core/dist/esm/shaderlib/project32/project32.js","../../node_modules/@deck.gl/core/dist/esm/shaderlib/shadow/shadow.js","../../node_modules/@deck.gl/core/dist/esm/shaderlib/picking/picking.js","../../node_modules/@deck.gl/core/dist/esm/shaderlib/index.js","../../node_modules/@deck.gl/core/dist/esm/effects/lighting/ambient-light.js","../../node_modules/@deck.gl/core/dist/esm/effects/lighting/directional-light.js","../../node_modules/@deck.gl/core/dist/esm/passes/pass.js","../../node_modules/@deck.gl/core/dist/esm/passes/layers-pass.js","../../node_modules/@deck.gl/core/dist/esm/passes/shadow-pass.js","../../node_modules/@deck.gl/core/dist/esm/effects/lighting/lighting-effect.js","../../node_modules/@deck.gl/core/dist/esm/utils/typed-array-manager.js","../../node_modules/@deck.gl/core/dist/esm/utils/math-utils.js","../../node_modules/@deck.gl/core/dist/esm/viewports/viewport.js","../../node_modules/@deck.gl/core/dist/esm/viewports/web-mercator-viewport.js","../../node_modules/@deck.gl/core/dist/esm/shaderlib/project/project-functions.js","../../node_modules/@deck.gl/core/dist/esm/lifecycle/constants.js","../../node_modules/@deck.gl/core/dist/esm/utils/flatten.js","../../node_modules/@deck.gl/core/dist/esm/lib/resource/resource.js","../../node_modules/@deck.gl/core/dist/esm/lib/resource/resource-manager.js","../../node_modules/@deck.gl/core/dist/esm/lib/layer-manager.js","../../node_modules/@deck.gl/core/dist/esm/utils/deep-equal.js","../../node_modules/@deck.gl/core/dist/esm/lib/view-manager.js","../../node_modules/@deck.gl/core/dist/esm/utils/positions.js","../../node_modules/@deck.gl/core/dist/esm/utils/assert.js","../../node_modules/@deck.gl/core/dist/esm/views/view.js","../../node_modules/@deck.gl/core/dist/esm/transitions/transition.js","../../node_modules/@deck.gl/core/dist/esm/controllers/transition-manager.js","../../node_modules/@deck.gl/core/dist/esm/transitions/transition-interpolator.js","../../node_modules/@deck.gl/core/dist/esm/transitions/linear-interpolator.js","../../node_modules/@deck.gl/core/dist/esm/controllers/controller.js","../../node_modules/@deck.gl/core/dist/esm/controllers/view-state.js","../../node_modules/@deck.gl/core/dist/esm/controllers/map-controller.js","../../node_modules/@deck.gl/core/dist/esm/views/map-view.js","../../node_modules/@deck.gl/core/dist/esm/passes/mask-pass.js","../../node_modules/@deck.gl/core/dist/esm/viewports/orthographic-viewport.js","../../node_modules/@deck.gl/core/dist/esm/controllers/orbit-controller.js","../../node_modules/@deck.gl/core/dist/esm/controllers/orthographic-controller.js","../../node_modules/@deck.gl/core/dist/esm/views/orthographic-view.js","../../node_modules/@deck.gl/core/dist/esm/effects/mask/utils.js","../../node_modules/@deck.gl/core/dist/esm/effects/mask/mask-effect.js","../../node_modules/@deck.gl/core/dist/esm/lib/effect-manager.js","../../node_modules/@deck.gl/core/dist/esm/passes/draw-layers-pass.js","../../node_modules/@deck.gl/core/dist/esm/passes/pick-layers-pass.js","../../node_modules/@deck.gl/core/dist/esm/lib/deck-renderer.js","../../node_modules/@deck.gl/core/dist/esm/lib/picking/query-object.js","../../node_modules/@deck.gl/core/dist/esm/lib/picking/pick-info.js","../../node_modules/@deck.gl/core/dist/esm/lib/deck-picker.js","../../node_modules/@deck.gl/core/dist/esm/lib/tooltip.js","../../node_modules/@deck.gl/core/dist/esm/lib/deck.js","../../node_modules/@deck.gl/core/dist/esm/lib/attribute/shader-attribute.js","../../node_modules/@deck.gl/core/dist/esm/lib/attribute/gl-utils.js","../../node_modules/@deck.gl/core/dist/esm/lib/attribute/data-column.js","../../node_modules/@deck.gl/core/dist/esm/utils/iterable-utils.js","../../node_modules/@deck.gl/core/dist/esm/utils/range.js","../../node_modules/@deck.gl/core/dist/esm/utils/array-utils.js","../../node_modules/@deck.gl/core/dist/esm/lib/attribute/attribute-transition-utils.js","../../node_modules/@deck.gl/core/dist/esm/lib/attribute/attribute.js","../../node_modules/@deck.gl/core/dist/esm/transitions/gpu-interpolation-transition.js","../../node_modules/@deck.gl/core/dist/esm/transitions/gpu-spring-transition.js","../../node_modules/@deck.gl/core/dist/esm/lib/attribute/attribute-transition-manager.js","../../node_modules/@deck.gl/core/dist/esm/lib/attribute/attribute-manager.js","../../node_modules/@deck.gl/core/dist/esm/transitions/cpu-interpolation-transition.js","../../node_modules/@deck.gl/core/dist/esm/transitions/cpu-spring-transition.js","../../node_modules/@deck.gl/core/dist/esm/lib/uniform-transition-manager.js","../../node_modules/@deck.gl/core/dist/esm/lifecycle/props.js","../../node_modules/@deck.gl/core/dist/esm/utils/count.js","../../node_modules/@deck.gl/core/dist/esm/utils/shader.js","../../node_modules/@deck.gl/core/dist/esm/utils/texture.js","../../node_modules/@deck.gl/core/dist/esm/lifecycle/prop-types.js","../../node_modules/@deck.gl/core/dist/esm/lifecycle/create-props.js","../../node_modules/@deck.gl/core/dist/esm/lifecycle/component.js","../../node_modules/@deck.gl/core/dist/esm/lifecycle/component-state.js","../../node_modules/@deck.gl/core/dist/esm/lib/layer-state.js","../../node_modules/@deck.gl/core/dist/esm/lib/layer.js"],"sourcesContent":["export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","/**\n * Common utilities\n * @module glMatrix\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\n * Sets the type of array used when creating new vectors and matrices\n *\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\n * Convert Degree To Radian\n *\n * @param {Number} a Angle in Degrees\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\n * Tests whether or not the arguments have approximately the same value, within an absolute\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\n * than or equal to 1.0, and a relative tolerance is used for larger values)\n *\n * @param {Number} a The first number to test.\n * @param {Number} b The second number to test.\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","import * as glMatrix from \"./common.js\";\n/**\n * 4 Dimensional Vector\n * @module vec4\n */\n\n/**\n * Creates a new, empty vec4\n *\n * @returns {vec4} a new 4D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec4 initialized with values from an existing vector\n *\n * @param {ReadonlyVec4} a vector to clone\n * @returns {vec4} a new 4D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Creates a new vec4 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} a new 4D vector\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Copy the values from one vec4 to another\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the source vector\n * @returns {vec4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to the given values\n *\n * @param {vec4} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} out\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Adds two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\n * Multiplies two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\n * Divides two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\n * Math.ceil the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to ceil\n * @returns {vec4} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\n * Math.floor the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to floor\n * @returns {vec4} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\n * Returns the minimum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\n * Returns the maximum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\n * Math.round the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to round\n * @returns {vec4} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\n * Scales a vec4 by a scalar number\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec4} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\n * Adds two vec4's after scaling the second operand by a scalar value\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec4} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Calculates the length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Negates the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to negate\n * @returns {vec4} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to invert\n * @returns {vec4} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\n * Normalize a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to normalize\n * @returns {vec4} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\n * Returns the cross-product of three vectors in a 4-dimensional space\n *\n * @param {ReadonlyVec4} result the receiving vector\n * @param {ReadonlyVec4} U the first vector\n * @param {ReadonlyVec4} V the second vector\n * @param {ReadonlyVec4} W the third vector\n * @returns {vec4} result\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec4} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec4} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec4} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\n * Transforms the vec4 with a mat4.\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec4} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\n * Transforms the vec4 with a quat\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec4} out\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to zero\n *\n * @param {vec4} out the receiving vector\n * @returns {vec4} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec4} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\n * Alias for {@link vec4.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec4.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec4.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec4.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec4.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec4.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec4s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();","import { transformMat4, scale } from 'gl-matrix/vec4';\nexport function createMat4() {\n  return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n}\nexport function transformVector(matrix, vector) {\n  const result = transformMat4([], vector, matrix);\n  scale(result, result, 1 / result[3]);\n  return result;\n}\nexport function mod(value, divisor) {\n  const modulus = value % divisor;\n  return modulus < 0 ? divisor + modulus : modulus;\n}\nexport function lerp(start, end, step) {\n  return step * end + (1 - step) * start;\n}\nexport function clamp(x, min, max) {\n  return x < min ? min : x > max ? max : x;\n}\n\nfunction ieLog2(x) {\n  return Math.log(x) * Math.LOG2E;\n}\n\nexport const log2 = Math.log2 || ieLog2;\n//# sourceMappingURL=math-utils.js.map","import * as glMatrix from \"./common.js\";\n/**\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\n * @module mat4\n */\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat4} a matrix to clone\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Create a new mat4 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} A new mat4\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set the components of a mat4 to the given values\n *\n * @param {mat4} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} out\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\n * Calculates the determinant of a mat4\n *\n * @param {ReadonlyMat4} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\n * Multiplies two mat4s\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to translate\n * @param {ReadonlyVec3} v vector to translate by\n * @returns {mat4} out\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Rotates a mat4 by the given angle around the given axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the X axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Y axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Z axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.scale(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle around a given axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotate(dest, dest, rad, axis);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the X axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateX(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Y axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateY(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Z axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateZ(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation and vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 from a dual quat.\n *\n * @param {mat4} out Matrix\n * @param {ReadonlyQuat2} a Dual Quaternion\n * @returns {mat4} mat4 receiving operation result\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\n * Returns the translation vector component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslation,\n *  the returned vector will be the same as the translation vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive translation component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\n * Returns the scaling factor component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslationScale\n *  with a normalized Quaternion paramter, the returned vector will be\n *  the same as the scaling vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive scaling factor component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\n * Returns a quaternion representing the rotational component\n *  of a transformation matrix. If a matrix is built with\n *  fromRotationTranslation, the returned quaternion will be the\n *  same as the quaternion originally supplied.\n * @param {quat} out Quaternion to receive the rotation component\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {quat} out\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     mat4.translate(dest, origin);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *     mat4.translate(dest, negativeOrigin);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\n * Calculates a 4x4 matrix from the given quaternion\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat4} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a frustum matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Number} left Left bound of the frustum\n * @param {Number} right Right bound of the frustum\n * @param {Number} bottom Bottom bound of the frustum\n * @param {Number} top Top bound of the frustum\n * @param {Number} near Near bound of the frustum\n * @param {Number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveNO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\n * Alias for {@link mat4.perspectiveNO}\n * @function\n */\n\nexport var perspective = perspectiveNO;\n/**\n * Generates a perspective projection matrix suitable for WebGPU with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveZO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = far * nf;\n    out[14] = far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -near;\n  }\n\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given field of view.\n * This is primarily useful for generating projection matrices to be used\n * with the still experiemental WebVR API.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoNO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Alias for {@link mat4.orthoNO}\n * @function\n */\n\nexport var ortho = orthoNO;\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoZO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = near * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a matrix that makes something look at something else.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat4\n *\n * @param {ReadonlyMat4} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat4\n *\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\n * Adds two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat4} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat4} out the receiving vector\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat4} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\n * Alias for {@link mat4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat4.subtract}\n * @function\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\n * 2 Dimensional Vector\n * @module vec2\n */\n\n/**\n * Creates a new, empty vec2\n *\n * @returns {vec2} a new 2D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(2);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec2 initialized with values from an existing vector\n *\n * @param {ReadonlyVec2} a vector to clone\n * @returns {vec2} a new 2D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\n * Creates a new vec2 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} a new 2D vector\n */\n\nexport function fromValues(x, y) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\n * Copy the values from one vec2 to another\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the source vector\n * @returns {vec2} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\n * Set the components of a vec2 to the given values\n *\n * @param {vec2} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} out\n */\n\nexport function set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\n * Adds two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n/**\n * Multiplies two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n/**\n * Divides two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n/**\n * Math.ceil the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to ceil\n * @returns {vec2} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n}\n/**\n * Math.floor the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to floor\n * @returns {vec2} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n}\n/**\n * Returns the minimum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n}\n/**\n * Returns the maximum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n}\n/**\n * Math.round the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to round\n * @returns {vec2} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  return out;\n}\n/**\n * Scales a vec2 by a scalar number\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec2} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n}\n/**\n * Adds two vec2's after scaling the second operand by a scalar value\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec2} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return Math.hypot(x, y);\n}\n/**\n * Calculates the squared euclidian distance between two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return x * x + y * y;\n}\n/**\n * Calculates the length of a vec2\n *\n * @param {ReadonlyVec2} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0],\n      y = a[1];\n  return Math.hypot(x, y);\n}\n/**\n * Calculates the squared length of a vec2\n *\n * @param {ReadonlyVec2} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0],\n      y = a[1];\n  return x * x + y * y;\n}\n/**\n * Negates the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to negate\n * @returns {vec2} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to invert\n * @returns {vec2} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n}\n/**\n * Normalize a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to normalize\n * @returns {vec2} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0],\n      y = a[1];\n  var len = x * x + y * y;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n}\n/**\n * Computes the cross product of two vec2's\n * Note that the cross product must by definition produce a 3D vector\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec3} out\n */\n\nexport function cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec2} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0],\n      ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec2} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec2} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n}\n/**\n * Transforms the vec2 with a mat2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat2} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat2(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n}\n/**\n * Transforms the vec2 with a mat2d\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat2d} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat2d(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n/**\n * Transforms the vec2 with a mat3\n * 3rd vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat3} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n}\n/**\n * Transforms the vec2 with a mat4\n * 3rd vector component is implicitly '0'\n * 4th vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n/**\n * Rotate a 2D vector\n * @param {vec2} out The receiving vec2\n * @param {ReadonlyVec2} a The vec2 point to rotate\n * @param {ReadonlyVec2} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec2} out\n */\n\nexport function rotate(out, a, b, rad) {\n  //Translate point to the origin\n  var p0 = a[0] - b[0],\n      p1 = a[1] - b[1],\n      sinC = Math.sin(rad),\n      cosC = Math.cos(rad); //perform rotation and translate to correct position\n\n  out[0] = p0 * cosC - p1 * sinC + b[0];\n  out[1] = p0 * sinC + p1 * cosC + b[1];\n  return out;\n}\n/**\n * Get the angle between two 2D vectors\n * @param {ReadonlyVec2} a The first operand\n * @param {ReadonlyVec2} b The second operand\n * @returns {Number} The angle in radians\n */\n\nexport function angle(a, b) {\n  var x1 = a[0],\n      y1 = a[1],\n      x2 = b[0],\n      y2 = b[1],\n      // mag is the product of the magnitudes of a and b\n  mag = Math.sqrt(x1 * x1 + y1 * y1) * Math.sqrt(x2 * x2 + y2 * y2),\n      // mag &&.. short circuits if mag == 0\n  cosine = mag && (x1 * x2 + y1 * y2) / mag; // Math.min(Math.max(cosine, -1), 1) clamps the cosine between -1 and 1\n\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec2 to zero\n *\n * @param {vec2} out the receiving vector\n * @returns {vec2} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec2} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec2(\" + a[0] + \", \" + a[1] + \")\";\n}\n/**\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec2} a The first vector.\n * @param {ReadonlyVec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec2} a The first vector.\n * @param {ReadonlyVec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1];\n  var b0 = b[0],\n      b1 = b[1];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));\n}\n/**\n * Alias for {@link vec2.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec2.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec2.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec2.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec2.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec2.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec2.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec2s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 2;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\n/**\n * 3 Dimensional Vector\n * @module vec3\n */\n\n/**\n * Creates a new, empty vec3\n *\n * @returns {vec3} a new 3D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec3 initialized with values from an existing vector\n *\n * @param {ReadonlyVec3} a vector to clone\n * @returns {vec3} a new 3D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Calculates the length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Creates a new vec3 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} a new 3D vector\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the source vector\n * @returns {vec3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Set the components of a vec3 to the given values\n *\n * @param {vec3} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} out\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\n * Multiplies two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\n * Divides two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\n * Math.ceil the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to ceil\n * @returns {vec3} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\n * Math.floor the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to floor\n * @returns {vec3} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\n * Returns the minimum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\n * Returns the maximum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\n * Math.round the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to round\n * @returns {vec3} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\n * Scales a vec3 by a scalar number\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec3} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\n * Adds two vec3's after scaling the second operand by a scalar value\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec3} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Calculates the squared euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Calculates the squared length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to negate\n * @returns {vec3} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to invert\n * @returns {vec3} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to normalize\n * @returns {vec3} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\n * Computes the cross product of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\n * Performs a hermite interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Performs a bezier interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec3} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec3} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat3.\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\n * Transforms the vec3 with a quat\n * Can also be used for dual quaternions. (Multiply it with the real part)\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec3} out\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\n * Rotate a 3D vector around the x-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateX(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the y-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateY(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the z-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateZ(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Get the angle between two 3D vectors\n * @param {ReadonlyVec3} a The first operand\n * @param {ReadonlyVec3} b The second operand\n * @returns {Number} The angle in radians\n */\n\nexport function angle(a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      bx = b[0],\n      by = b[1],\n      bz = b[2],\n      mag1 = Math.sqrt(ax * ax + ay * ay + az * az),\n      mag2 = Math.sqrt(bx * bx + by * by + bz * bz),\n      mag = mag1 * mag2,\n      cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec3 to zero\n *\n * @param {vec3} out the receiving vector\n * @returns {vec3} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec3} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\n * Alias for {@link vec3.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec3.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec3.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec3.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec3.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec3.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec3s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || '@math.gl/web-mercator: assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","import { createMat4, transformVector, clamp, log2 } from './math-utils';\nimport * as mat4 from 'gl-matrix/mat4';\nimport * as vec2 from 'gl-matrix/vec2';\nimport * as vec3 from 'gl-matrix/vec3';\nimport assert from './assert';\nconst PI = Math.PI;\nconst PI_4 = PI / 4;\nconst DEGREES_TO_RADIANS = PI / 180;\nconst RADIANS_TO_DEGREES = 180 / PI;\nconst TILE_SIZE = 512;\nconst EARTH_CIRCUMFERENCE = 40.03e6;\nexport const MAX_LATITUDE = 85.051129;\nexport const DEFAULT_ALTITUDE = 1.5;\nexport function zoomToScale(zoom) {\n  return Math.pow(2, zoom);\n}\nexport function scaleToZoom(scale) {\n  return log2(scale);\n}\nexport function lngLatToWorld(lngLat) {\n  const [lng, lat] = lngLat;\n  assert(Number.isFinite(lng));\n  assert(Number.isFinite(lat) && lat >= -90 && lat <= 90, 'invalid latitude');\n  const lambda2 = lng * DEGREES_TO_RADIANS;\n  const phi2 = lat * DEGREES_TO_RADIANS;\n  const x = TILE_SIZE * (lambda2 + PI) / (2 * PI);\n  const y = TILE_SIZE * (PI + Math.log(Math.tan(PI_4 + phi2 * 0.5))) / (2 * PI);\n  return [x, y];\n}\nexport function worldToLngLat(xy) {\n  const [x, y] = xy;\n  const lambda2 = x / TILE_SIZE * (2 * PI) - PI;\n  const phi2 = 2 * (Math.atan(Math.exp(y / TILE_SIZE * (2 * PI) - PI)) - PI_4);\n  return [lambda2 * RADIANS_TO_DEGREES, phi2 * RADIANS_TO_DEGREES];\n}\nexport function getMeterZoom(options) {\n  const {\n    latitude\n  } = options;\n  assert(Number.isFinite(latitude));\n  const latCosine = Math.cos(latitude * DEGREES_TO_RADIANS);\n  return scaleToZoom(EARTH_CIRCUMFERENCE * latCosine) - 9;\n}\nexport function unitsPerMeter(latitude) {\n  const latCosine = Math.cos(latitude * DEGREES_TO_RADIANS);\n  return TILE_SIZE / EARTH_CIRCUMFERENCE / latCosine;\n}\nexport function getDistanceScales(options) {\n  const {\n    latitude,\n    longitude,\n    highPrecision = false\n  } = options;\n  assert(Number.isFinite(latitude) && Number.isFinite(longitude));\n  const worldSize = TILE_SIZE;\n  const latCosine = Math.cos(latitude * DEGREES_TO_RADIANS);\n  const unitsPerDegreeX = worldSize / 360;\n  const unitsPerDegreeY = unitsPerDegreeX / latCosine;\n  const altUnitsPerMeter = worldSize / EARTH_CIRCUMFERENCE / latCosine;\n  const result = {\n    unitsPerMeter: [altUnitsPerMeter, altUnitsPerMeter, altUnitsPerMeter],\n    metersPerUnit: [1 / altUnitsPerMeter, 1 / altUnitsPerMeter, 1 / altUnitsPerMeter],\n    unitsPerDegree: [unitsPerDegreeX, unitsPerDegreeY, altUnitsPerMeter],\n    degreesPerUnit: [1 / unitsPerDegreeX, 1 / unitsPerDegreeY, 1 / altUnitsPerMeter]\n  };\n\n  if (highPrecision) {\n    const latCosine2 = DEGREES_TO_RADIANS * Math.tan(latitude * DEGREES_TO_RADIANS) / latCosine;\n    const unitsPerDegreeY2 = unitsPerDegreeX * latCosine2 / 2;\n    const altUnitsPerDegree2 = worldSize / EARTH_CIRCUMFERENCE * latCosine2;\n    const altUnitsPerMeter2 = altUnitsPerDegree2 / unitsPerDegreeY * altUnitsPerMeter;\n    result.unitsPerDegree2 = [0, unitsPerDegreeY2, altUnitsPerDegree2];\n    result.unitsPerMeter2 = [altUnitsPerMeter2, 0, altUnitsPerMeter2];\n  }\n\n  return result;\n}\nexport function addMetersToLngLat(lngLatZ, xyz) {\n  const [longitude, latitude, z0] = lngLatZ;\n  const [x, y, z] = xyz;\n  const {\n    unitsPerMeter,\n    unitsPerMeter2\n  } = getDistanceScales({\n    longitude,\n    latitude,\n    highPrecision: true\n  });\n  const worldspace = lngLatToWorld(lngLatZ);\n  worldspace[0] += x * (unitsPerMeter[0] + unitsPerMeter2[0] * y);\n  worldspace[1] += y * (unitsPerMeter[1] + unitsPerMeter2[1] * y);\n  const newLngLat = worldToLngLat(worldspace);\n  const newZ = (z0 || 0) + (z || 0);\n  return Number.isFinite(z0) || Number.isFinite(z) ? [newLngLat[0], newLngLat[1], newZ] : newLngLat;\n}\nexport function getViewMatrix(options) {\n  const {\n    height,\n    pitch,\n    bearing,\n    altitude,\n    scale,\n    center\n  } = options;\n  const vm = createMat4();\n  mat4.translate(vm, vm, [0, 0, -altitude]);\n  mat4.rotateX(vm, vm, -pitch * DEGREES_TO_RADIANS);\n  mat4.rotateZ(vm, vm, bearing * DEGREES_TO_RADIANS);\n  const relativeScale = scale / height;\n  mat4.scale(vm, vm, [relativeScale, relativeScale, relativeScale]);\n\n  if (center) {\n    mat4.translate(vm, vm, vec3.negate([], center));\n  }\n\n  return vm;\n}\nexport function getProjectionParameters(options) {\n  const {\n    width,\n    height,\n    altitude,\n    pitch = 0,\n    offset,\n    center,\n    scale,\n    nearZMultiplier = 1,\n    farZMultiplier = 1\n  } = options;\n  let {\n    fovy = altitudeToFovy(DEFAULT_ALTITUDE)\n  } = options;\n\n  if (altitude !== undefined) {\n    fovy = altitudeToFovy(altitude);\n  }\n\n  const fovRadians = fovy * DEGREES_TO_RADIANS;\n  const pitchRadians = pitch * DEGREES_TO_RADIANS;\n  const focalDistance = fovyToAltitude(fovy);\n  let cameraToSeaLevelDistance = focalDistance;\n\n  if (center) {\n    cameraToSeaLevelDistance += center[2] * scale / Math.cos(pitchRadians) / height;\n  }\n\n  const fovAboveCenter = fovRadians * (0.5 + (offset ? offset[1] : 0) / height);\n  const topHalfSurfaceDistance = Math.sin(fovAboveCenter) * cameraToSeaLevelDistance / Math.sin(clamp(Math.PI / 2 - pitchRadians - fovAboveCenter, 0.01, Math.PI - 0.01));\n  const furthestDistance = Math.sin(pitchRadians) * topHalfSurfaceDistance + cameraToSeaLevelDistance;\n  const horizonDistance = cameraToSeaLevelDistance * 10;\n  const farZ = Math.min(furthestDistance * farZMultiplier, horizonDistance);\n  return {\n    fov: fovRadians,\n    aspect: width / height,\n    focalDistance,\n    near: nearZMultiplier,\n    far: farZ\n  };\n}\nexport function getProjectionMatrix(options) {\n  const {\n    fov,\n    aspect,\n    near,\n    far\n  } = getProjectionParameters(options);\n  const projectionMatrix = mat4.perspective([], fov, aspect, near, far);\n  return projectionMatrix;\n}\nexport function altitudeToFovy(altitude) {\n  return 2 * Math.atan(0.5 / altitude) * RADIANS_TO_DEGREES;\n}\nexport function fovyToAltitude(fovy) {\n  return 0.5 / Math.tan(0.5 * fovy * DEGREES_TO_RADIANS);\n}\nexport function worldToPixels(xyz, pixelProjectionMatrix) {\n  const [x, y, z = 0] = xyz;\n  assert(Number.isFinite(x) && Number.isFinite(y) && Number.isFinite(z));\n  return transformVector(pixelProjectionMatrix, [x, y, z, 1]);\n}\nexport function pixelsToWorld(xyz, pixelUnprojectionMatrix, targetZ = 0) {\n  const [x, y, z] = xyz;\n  assert(Number.isFinite(x) && Number.isFinite(y), 'invalid pixel coordinate');\n\n  if (Number.isFinite(z)) {\n    const coord = transformVector(pixelUnprojectionMatrix, [x, y, z, 1]);\n    return coord;\n  }\n\n  const coord0 = transformVector(pixelUnprojectionMatrix, [x, y, 0, 1]);\n  const coord1 = transformVector(pixelUnprojectionMatrix, [x, y, 1, 1]);\n  const z0 = coord0[2];\n  const z1 = coord1[2];\n  const t = z0 === z1 ? 0 : ((targetZ || 0) - z0) / (z1 - z0);\n  return vec2.lerp([], coord0, coord1, t);\n}\n//# sourceMappingURL=web-mercator-utils.js.map","import assert from './assert';\nimport { log2, clamp } from './math-utils';\nimport { MAX_LATITUDE, lngLatToWorld, worldToLngLat } from './web-mercator-utils';\nexport default function fitBounds(options) {\n  const {\n    width,\n    height,\n    bounds,\n    minExtent = 0,\n    maxZoom = 24,\n    offset = [0, 0]\n  } = options;\n  const [[west, south], [east, north]] = bounds;\n  const padding = getPaddingObject(options.padding);\n  const nw = lngLatToWorld([west, clamp(north, -MAX_LATITUDE, MAX_LATITUDE)]);\n  const se = lngLatToWorld([east, clamp(south, -MAX_LATITUDE, MAX_LATITUDE)]);\n  const size = [Math.max(Math.abs(se[0] - nw[0]), minExtent), Math.max(Math.abs(se[1] - nw[1]), minExtent)];\n  const targetSize = [width - padding.left - padding.right - Math.abs(offset[0]) * 2, height - padding.top - padding.bottom - Math.abs(offset[1]) * 2];\n  assert(targetSize[0] > 0 && targetSize[1] > 0);\n  const scaleX = targetSize[0] / size[0];\n  const scaleY = targetSize[1] / size[1];\n  const offsetX = (padding.right - padding.left) / 2 / scaleX;\n  const offsetY = (padding.top - padding.bottom) / 2 / scaleY;\n  const center = [(se[0] + nw[0]) / 2 + offsetX, (se[1] + nw[1]) / 2 + offsetY];\n  const centerLngLat = worldToLngLat(center);\n  const zoom = Math.min(maxZoom, log2(Math.abs(Math.min(scaleX, scaleY))));\n  assert(Number.isFinite(zoom));\n  return {\n    longitude: centerLngLat[0],\n    latitude: centerLngLat[1],\n    zoom\n  };\n}\n\nfunction getPaddingObject(padding = 0) {\n  if (typeof padding === 'number') {\n    return {\n      top: padding,\n      bottom: padding,\n      left: padding,\n      right: padding\n    };\n  }\n\n  assert(Number.isFinite(padding.top) && Number.isFinite(padding.bottom) && Number.isFinite(padding.left) && Number.isFinite(padding.right));\n  return padding;\n}\n//# sourceMappingURL=fit-bounds.js.map","import { worldToLngLat } from './web-mercator-utils';\nimport * as vec2 from 'gl-matrix/vec2';\nimport { transformVector } from './math-utils';\nconst DEGREES_TO_RADIANS = Math.PI / 180;\nexport default function getBounds(viewport, z = 0) {\n  const {\n    width,\n    height,\n    unproject\n  } = viewport;\n  const unprojectOps = {\n    targetZ: z\n  };\n  const bottomLeft = unproject([0, height], unprojectOps);\n  const bottomRight = unproject([width, height], unprojectOps);\n  let topLeft;\n  let topRight;\n  const halfFov = viewport.fovy ? 0.5 * viewport.fovy * DEGREES_TO_RADIANS : Math.atan(0.5 / viewport.altitude);\n  const angleToGround = (90 - viewport.pitch) * DEGREES_TO_RADIANS;\n\n  if (halfFov > angleToGround - 0.01) {\n    topLeft = unprojectOnFarPlane(viewport, 0, z);\n    topRight = unprojectOnFarPlane(viewport, width, z);\n  } else {\n    topLeft = unproject([0, 0], unprojectOps);\n    topRight = unproject([width, 0], unprojectOps);\n  }\n\n  return [bottomLeft, bottomRight, topRight, topLeft];\n}\n\nfunction unprojectOnFarPlane(viewport, x, targetZ) {\n  const {\n    pixelUnprojectionMatrix\n  } = viewport;\n  const coord0 = transformVector(pixelUnprojectionMatrix, [x, 0, 1, 1]);\n  const coord1 = transformVector(pixelUnprojectionMatrix, [x, viewport.height, 1, 1]);\n  const z = targetZ * viewport.distanceScales.unitsPerMeter[2];\n  const t = (z - coord0[2]) / (coord1[2] - coord0[2]);\n  const coord = vec2.lerp([], coord0, coord1, t);\n  const result = worldToLngLat(coord);\n  result.push(targetZ);\n  return result;\n}\n//# sourceMappingURL=get-bounds.js.map","import { worldToLngLat } from './web-mercator-utils';\nimport { mod, log2 } from './math-utils';\nconst TILE_SIZE = 512;\nexport default function normalizeViewportProps(props) {\n  const {\n    width,\n    height,\n    pitch = 0\n  } = props;\n  let {\n    longitude,\n    latitude,\n    zoom,\n    bearing = 0\n  } = props;\n\n  if (longitude < -180 || longitude > 180) {\n    longitude = mod(longitude + 180, 360) - 180;\n  }\n\n  if (bearing < -180 || bearing > 180) {\n    bearing = mod(bearing + 180, 360) - 180;\n  }\n\n  const minZoom = log2(height / TILE_SIZE);\n\n  if (zoom <= minZoom) {\n    zoom = minZoom;\n    latitude = 0;\n  } else {\n    const halfHeightPixels = height / 2 / Math.pow(2, zoom);\n    const minLatitude = worldToLngLat([0, halfHeightPixels])[1];\n\n    if (latitude < minLatitude) {\n      latitude = minLatitude;\n    } else {\n      const maxLatitude = worldToLngLat([0, TILE_SIZE - halfHeightPixels])[1];\n\n      if (latitude > maxLatitude) {\n        latitude = maxLatitude;\n      }\n    }\n  }\n\n  return {\n    width,\n    height,\n    longitude,\n    latitude,\n    zoom,\n    pitch,\n    bearing\n  };\n}\n//# sourceMappingURL=normalize-viewport-props.js.map","/*! Hammer.JS - v2.0.7 - 2016-04-22\n * http://hammerjs.github.io/\n *\n * Copyright (c) 2016 Jorik Tangelder;\n * Licensed under the MIT license */\n(function(window, document, exportName, undefined) {\n  'use strict';\n\nvar VENDOR_PREFIXES = ['', 'webkit', 'Moz', 'MS', 'ms', 'o'];\nvar TEST_ELEMENT = document.createElement('div');\n\nvar TYPE_FUNCTION = 'function';\n\nvar round = Math.round;\nvar abs = Math.abs;\nvar now = Date.now;\n\n/**\n * set a timeout with a given scope\n * @param {Function} fn\n * @param {Number} timeout\n * @param {Object} context\n * @returns {number}\n */\nfunction setTimeoutContext(fn, timeout, context) {\n    return setTimeout(bindFn(fn, context), timeout);\n}\n\n/**\n * if the argument is an array, we want to execute the fn on each entry\n * if it aint an array we don't want to do a thing.\n * this is used by all the methods that accept a single and array argument.\n * @param {*|Array} arg\n * @param {String} fn\n * @param {Object} [context]\n * @returns {Boolean}\n */\nfunction invokeArrayArg(arg, fn, context) {\n    if (Array.isArray(arg)) {\n        each(arg, context[fn], context);\n        return true;\n    }\n    return false;\n}\n\n/**\n * walk objects and arrays\n * @param {Object} obj\n * @param {Function} iterator\n * @param {Object} context\n */\nfunction each(obj, iterator, context) {\n    var i;\n\n    if (!obj) {\n        return;\n    }\n\n    if (obj.forEach) {\n        obj.forEach(iterator, context);\n    } else if (obj.length !== undefined) {\n        i = 0;\n        while (i < obj.length) {\n            iterator.call(context, obj[i], i, obj);\n            i++;\n        }\n    } else {\n        for (i in obj) {\n            obj.hasOwnProperty(i) && iterator.call(context, obj[i], i, obj);\n        }\n    }\n}\n\n/**\n * wrap a method with a deprecation warning and stack trace\n * @param {Function} method\n * @param {String} name\n * @param {String} message\n * @returns {Function} A new function wrapping the supplied method.\n */\nfunction deprecate(method, name, message) {\n    var deprecationMessage = 'DEPRECATED METHOD: ' + name + '\\n' + message + ' AT \\n';\n    return function() {\n        var e = new Error('get-stack-trace');\n        var stack = e && e.stack ? e.stack.replace(/^[^\\(]+?[\\n$]/gm, '')\n            .replace(/^\\s+at\\s+/gm, '')\n            .replace(/^Object.<anonymous>\\s*\\(/gm, '{anonymous}()@') : 'Unknown Stack Trace';\n\n        var log = window.console && (window.console.warn || window.console.log);\n        if (log) {\n            log.call(window.console, deprecationMessage, stack);\n        }\n        return method.apply(this, arguments);\n    };\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} target\n * @param {...Object} objects_to_assign\n * @returns {Object} target\n */\nvar assign;\nif (typeof Object.assign !== 'function') {\n    assign = function assign(target) {\n        if (target === undefined || target === null) {\n            throw new TypeError('Cannot convert undefined or null to object');\n        }\n\n        var output = Object(target);\n        for (var index = 1; index < arguments.length; index++) {\n            var source = arguments[index];\n            if (source !== undefined && source !== null) {\n                for (var nextKey in source) {\n                    if (source.hasOwnProperty(nextKey)) {\n                        output[nextKey] = source[nextKey];\n                    }\n                }\n            }\n        }\n        return output;\n    };\n} else {\n    assign = Object.assign;\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} dest\n * @param {Object} src\n * @param {Boolean} [merge=false]\n * @returns {Object} dest\n */\nvar extend = deprecate(function extend(dest, src, merge) {\n    var keys = Object.keys(src);\n    var i = 0;\n    while (i < keys.length) {\n        if (!merge || (merge && dest[keys[i]] === undefined)) {\n            dest[keys[i]] = src[keys[i]];\n        }\n        i++;\n    }\n    return dest;\n}, 'extend', 'Use `assign`.');\n\n/**\n * merge the values from src in the dest.\n * means that properties that exist in dest will not be overwritten by src\n * @param {Object} dest\n * @param {Object} src\n * @returns {Object} dest\n */\nvar merge = deprecate(function merge(dest, src) {\n    return extend(dest, src, true);\n}, 'merge', 'Use `assign`.');\n\n/**\n * simple class inheritance\n * @param {Function} child\n * @param {Function} base\n * @param {Object} [properties]\n */\nfunction inherit(child, base, properties) {\n    var baseP = base.prototype,\n        childP;\n\n    childP = child.prototype = Object.create(baseP);\n    childP.constructor = child;\n    childP._super = baseP;\n\n    if (properties) {\n        assign(childP, properties);\n    }\n}\n\n/**\n * simple function bind\n * @param {Function} fn\n * @param {Object} context\n * @returns {Function}\n */\nfunction bindFn(fn, context) {\n    return function boundFn() {\n        return fn.apply(context, arguments);\n    };\n}\n\n/**\n * let a boolean value also be a function that must return a boolean\n * this first item in args will be used as the context\n * @param {Boolean|Function} val\n * @param {Array} [args]\n * @returns {Boolean}\n */\nfunction boolOrFn(val, args) {\n    if (typeof val == TYPE_FUNCTION) {\n        return val.apply(args ? args[0] || undefined : undefined, args);\n    }\n    return val;\n}\n\n/**\n * use the val2 when val1 is undefined\n * @param {*} val1\n * @param {*} val2\n * @returns {*}\n */\nfunction ifUndefined(val1, val2) {\n    return (val1 === undefined) ? val2 : val1;\n}\n\n/**\n * addEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction addEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.addEventListener(type, handler, false);\n    });\n}\n\n/**\n * removeEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction removeEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.removeEventListener(type, handler, false);\n    });\n}\n\n/**\n * find if a node is in the given parent\n * @method hasParent\n * @param {HTMLElement} node\n * @param {HTMLElement} parent\n * @return {Boolean} found\n */\nfunction hasParent(node, parent) {\n    while (node) {\n        if (node == parent) {\n            return true;\n        }\n        node = node.parentNode;\n    }\n    return false;\n}\n\n/**\n * small indexOf wrapper\n * @param {String} str\n * @param {String} find\n * @returns {Boolean} found\n */\nfunction inStr(str, find) {\n    return str.indexOf(find) > -1;\n}\n\n/**\n * split string on whitespace\n * @param {String} str\n * @returns {Array} words\n */\nfunction splitStr(str) {\n    return str.trim().split(/\\s+/g);\n}\n\n/**\n * find if a array contains the object using indexOf or a simple polyFill\n * @param {Array} src\n * @param {String} find\n * @param {String} [findByKey]\n * @return {Boolean|Number} false when not found, or the index\n */\nfunction inArray(src, find, findByKey) {\n    if (src.indexOf && !findByKey) {\n        return src.indexOf(find);\n    } else {\n        var i = 0;\n        while (i < src.length) {\n            if ((findByKey && src[i][findByKey] == find) || (!findByKey && src[i] === find)) {\n                return i;\n            }\n            i++;\n        }\n        return -1;\n    }\n}\n\n/**\n * convert array-like objects to real arrays\n * @param {Object} obj\n * @returns {Array}\n */\nfunction toArray(obj) {\n    return Array.prototype.slice.call(obj, 0);\n}\n\n/**\n * unique array with objects based on a key (like 'id') or just by the array's value\n * @param {Array} src [{id:1},{id:2},{id:1}]\n * @param {String} [key]\n * @param {Boolean} [sort=False]\n * @returns {Array} [{id:1},{id:2}]\n */\nfunction uniqueArray(src, key, sort) {\n    var results = [];\n    var values = [];\n    var i = 0;\n\n    while (i < src.length) {\n        var val = key ? src[i][key] : src[i];\n        if (inArray(values, val) < 0) {\n            results.push(src[i]);\n        }\n        values[i] = val;\n        i++;\n    }\n\n    if (sort) {\n        if (!key) {\n            results = results.sort();\n        } else {\n            results = results.sort(function sortUniqueArray(a, b) {\n                return a[key] > b[key];\n            });\n        }\n    }\n\n    return results;\n}\n\n/**\n * get the prefixed property\n * @param {Object} obj\n * @param {String} property\n * @returns {String|Undefined} prefixed\n */\nfunction prefixed(obj, property) {\n    var prefix, prop;\n    var camelProp = property[0].toUpperCase() + property.slice(1);\n\n    var i = 0;\n    while (i < VENDOR_PREFIXES.length) {\n        prefix = VENDOR_PREFIXES[i];\n        prop = (prefix) ? prefix + camelProp : property;\n\n        if (prop in obj) {\n            return prop;\n        }\n        i++;\n    }\n    return undefined;\n}\n\n/**\n * get a unique id\n * @returns {number} uniqueId\n */\nvar _uniqueId = 1;\nfunction uniqueId() {\n    return _uniqueId++;\n}\n\n/**\n * get the window object of an element\n * @param {HTMLElement} element\n * @returns {DocumentView|Window}\n */\nfunction getWindowForElement(element) {\n    var doc = element.ownerDocument || element;\n    return (doc.defaultView || doc.parentWindow || window);\n}\n\nvar MOBILE_REGEX = /mobile|tablet|ip(ad|hone|od)|android/i;\n\nvar SUPPORT_TOUCH = ('ontouchstart' in window);\nvar SUPPORT_POINTER_EVENTS = prefixed(window, 'PointerEvent') !== undefined;\nvar SUPPORT_ONLY_TOUCH = SUPPORT_TOUCH && MOBILE_REGEX.test(navigator.userAgent);\n\nvar INPUT_TYPE_TOUCH = 'touch';\nvar INPUT_TYPE_PEN = 'pen';\nvar INPUT_TYPE_MOUSE = 'mouse';\nvar INPUT_TYPE_KINECT = 'kinect';\n\nvar COMPUTE_INTERVAL = 25;\n\nvar INPUT_START = 1;\nvar INPUT_MOVE = 2;\nvar INPUT_END = 4;\nvar INPUT_CANCEL = 8;\n\nvar DIRECTION_NONE = 1;\nvar DIRECTION_LEFT = 2;\nvar DIRECTION_RIGHT = 4;\nvar DIRECTION_UP = 8;\nvar DIRECTION_DOWN = 16;\n\nvar DIRECTION_HORIZONTAL = DIRECTION_LEFT | DIRECTION_RIGHT;\nvar DIRECTION_VERTICAL = DIRECTION_UP | DIRECTION_DOWN;\nvar DIRECTION_ALL = DIRECTION_HORIZONTAL | DIRECTION_VERTICAL;\n\nvar PROPS_XY = ['x', 'y'];\nvar PROPS_CLIENT_XY = ['clientX', 'clientY'];\n\n/**\n * create new input type manager\n * @param {Manager} manager\n * @param {Function} callback\n * @returns {Input}\n * @constructor\n */\nfunction Input(manager, callback) {\n    var self = this;\n    this.manager = manager;\n    this.callback = callback;\n    this.element = manager.element;\n    this.target = manager.options.inputTarget;\n\n    // smaller wrapper around the handler, for the scope and the enabled state of the manager,\n    // so when disabled the input events are completely bypassed.\n    this.domHandler = function(ev) {\n        if (boolOrFn(manager.options.enable, [manager])) {\n            self.handler(ev);\n        }\n    };\n\n    this.init();\n\n}\n\nInput.prototype = {\n    /**\n     * should handle the inputEvent data and trigger the callback\n     * @virtual\n     */\n    handler: function() { },\n\n    /**\n     * bind the events\n     */\n    init: function() {\n        this.evEl && addEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && addEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && addEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    },\n\n    /**\n     * unbind the events\n     */\n    destroy: function() {\n        this.evEl && removeEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && removeEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && removeEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    }\n};\n\n/**\n * create new input type manager\n * called by the Manager constructor\n * @param {Hammer} manager\n * @returns {Input}\n */\nfunction createInputInstance(manager) {\n    var Type;\n    var inputClass = manager.options.inputClass;\n\n    if (inputClass) {\n        Type = inputClass;\n    } else if (SUPPORT_POINTER_EVENTS) {\n        Type = PointerEventInput;\n    } else if (SUPPORT_ONLY_TOUCH) {\n        Type = TouchInput;\n    } else if (!SUPPORT_TOUCH) {\n        Type = MouseInput;\n    } else {\n        Type = TouchMouseInput;\n    }\n    return new (Type)(manager, inputHandler);\n}\n\n/**\n * handle input events\n * @param {Manager} manager\n * @param {String} eventType\n * @param {Object} input\n */\nfunction inputHandler(manager, eventType, input) {\n    var pointersLen = input.pointers.length;\n    var changedPointersLen = input.changedPointers.length;\n    var isFirst = (eventType & INPUT_START && (pointersLen - changedPointersLen === 0));\n    var isFinal = (eventType & (INPUT_END | INPUT_CANCEL) && (pointersLen - changedPointersLen === 0));\n\n    input.isFirst = !!isFirst;\n    input.isFinal = !!isFinal;\n\n    if (isFirst) {\n        manager.session = {};\n    }\n\n    // source event is the normalized value of the domEvents\n    // like 'touchstart, mouseup, pointerdown'\n    input.eventType = eventType;\n\n    // compute scale, rotation etc\n    computeInputData(manager, input);\n\n    // emit secret event\n    manager.emit('hammer.input', input);\n\n    manager.recognize(input);\n    manager.session.prevInput = input;\n}\n\n/**\n * extend the data with some usable properties like scale, rotate, velocity etc\n * @param {Object} manager\n * @param {Object} input\n */\nfunction computeInputData(manager, input) {\n    var session = manager.session;\n    var pointers = input.pointers;\n    var pointersLength = pointers.length;\n\n    // store the first input to calculate the distance and direction\n    if (!session.firstInput) {\n        session.firstInput = simpleCloneInputData(input);\n    }\n\n    // to compute scale and rotation we need to store the multiple touches\n    if (pointersLength > 1 && !session.firstMultiple) {\n        session.firstMultiple = simpleCloneInputData(input);\n    } else if (pointersLength === 1) {\n        session.firstMultiple = false;\n    }\n\n    var firstInput = session.firstInput;\n    var firstMultiple = session.firstMultiple;\n    var offsetCenter = firstMultiple ? firstMultiple.center : firstInput.center;\n\n    var center = input.center = getCenter(pointers);\n    input.timeStamp = now();\n    input.deltaTime = input.timeStamp - firstInput.timeStamp;\n\n    input.angle = getAngle(offsetCenter, center);\n    input.distance = getDistance(offsetCenter, center);\n\n    computeDeltaXY(session, input);\n    input.offsetDirection = getDirection(input.deltaX, input.deltaY);\n\n    var overallVelocity = getVelocity(input.deltaTime, input.deltaX, input.deltaY);\n    input.overallVelocityX = overallVelocity.x;\n    input.overallVelocityY = overallVelocity.y;\n    input.overallVelocity = (abs(overallVelocity.x) > abs(overallVelocity.y)) ? overallVelocity.x : overallVelocity.y;\n\n    input.scale = firstMultiple ? getScale(firstMultiple.pointers, pointers) : 1;\n    input.rotation = firstMultiple ? getRotation(firstMultiple.pointers, pointers) : 0;\n\n    input.maxPointers = !session.prevInput ? input.pointers.length : ((input.pointers.length >\n        session.prevInput.maxPointers) ? input.pointers.length : session.prevInput.maxPointers);\n\n    computeIntervalInputData(session, input);\n\n    // find the correct target\n    var target = manager.element;\n    if (hasParent(input.srcEvent.target, target)) {\n        target = input.srcEvent.target;\n    }\n    input.target = target;\n}\n\nfunction computeDeltaXY(session, input) {\n    var center = input.center;\n    var offset = session.offsetDelta || {};\n    var prevDelta = session.prevDelta || {};\n    var prevInput = session.prevInput || {};\n\n    if (input.eventType === INPUT_START || prevInput.eventType === INPUT_END) {\n        prevDelta = session.prevDelta = {\n            x: prevInput.deltaX || 0,\n            y: prevInput.deltaY || 0\n        };\n\n        offset = session.offsetDelta = {\n            x: center.x,\n            y: center.y\n        };\n    }\n\n    input.deltaX = prevDelta.x + (center.x - offset.x);\n    input.deltaY = prevDelta.y + (center.y - offset.y);\n}\n\n/**\n * velocity is calculated every x ms\n * @param {Object} session\n * @param {Object} input\n */\nfunction computeIntervalInputData(session, input) {\n    var last = session.lastInterval || input,\n        deltaTime = input.timeStamp - last.timeStamp,\n        velocity, velocityX, velocityY, direction;\n\n    if (input.eventType != INPUT_CANCEL && (deltaTime > COMPUTE_INTERVAL || last.velocity === undefined)) {\n        var deltaX = input.deltaX - last.deltaX;\n        var deltaY = input.deltaY - last.deltaY;\n\n        var v = getVelocity(deltaTime, deltaX, deltaY);\n        velocityX = v.x;\n        velocityY = v.y;\n        velocity = (abs(v.x) > abs(v.y)) ? v.x : v.y;\n        direction = getDirection(deltaX, deltaY);\n\n        session.lastInterval = input;\n    } else {\n        // use latest velocity info if it doesn't overtake a minimum period\n        velocity = last.velocity;\n        velocityX = last.velocityX;\n        velocityY = last.velocityY;\n        direction = last.direction;\n    }\n\n    input.velocity = velocity;\n    input.velocityX = velocityX;\n    input.velocityY = velocityY;\n    input.direction = direction;\n}\n\n/**\n * create a simple clone from the input used for storage of firstInput and firstMultiple\n * @param {Object} input\n * @returns {Object} clonedInputData\n */\nfunction simpleCloneInputData(input) {\n    // make a simple copy of the pointers because we will get a reference if we don't\n    // we only need clientXY for the calculations\n    var pointers = [];\n    var i = 0;\n    while (i < input.pointers.length) {\n        pointers[i] = {\n            clientX: round(input.pointers[i].clientX),\n            clientY: round(input.pointers[i].clientY)\n        };\n        i++;\n    }\n\n    return {\n        timeStamp: now(),\n        pointers: pointers,\n        center: getCenter(pointers),\n        deltaX: input.deltaX,\n        deltaY: input.deltaY\n    };\n}\n\n/**\n * get the center of all the pointers\n * @param {Array} pointers\n * @return {Object} center contains `x` and `y` properties\n */\nfunction getCenter(pointers) {\n    var pointersLength = pointers.length;\n\n    // no need to loop when only one touch\n    if (pointersLength === 1) {\n        return {\n            x: round(pointers[0].clientX),\n            y: round(pointers[0].clientY)\n        };\n    }\n\n    var x = 0, y = 0, i = 0;\n    while (i < pointersLength) {\n        x += pointers[i].clientX;\n        y += pointers[i].clientY;\n        i++;\n    }\n\n    return {\n        x: round(x / pointersLength),\n        y: round(y / pointersLength)\n    };\n}\n\n/**\n * calculate the velocity between two points. unit is in px per ms.\n * @param {Number} deltaTime\n * @param {Number} x\n * @param {Number} y\n * @return {Object} velocity `x` and `y`\n */\nfunction getVelocity(deltaTime, x, y) {\n    return {\n        x: x / deltaTime || 0,\n        y: y / deltaTime || 0\n    };\n}\n\n/**\n * get the direction between two points\n * @param {Number} x\n * @param {Number} y\n * @return {Number} direction\n */\nfunction getDirection(x, y) {\n    if (x === y) {\n        return DIRECTION_NONE;\n    }\n\n    if (abs(x) >= abs(y)) {\n        return x < 0 ? DIRECTION_LEFT : DIRECTION_RIGHT;\n    }\n    return y < 0 ? DIRECTION_UP : DIRECTION_DOWN;\n}\n\n/**\n * calculate the absolute distance between two points\n * @param {Object} p1 {x, y}\n * @param {Object} p2 {x, y}\n * @param {Array} [props] containing x and y keys\n * @return {Number} distance\n */\nfunction getDistance(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n\n    return Math.sqrt((x * x) + (y * y));\n}\n\n/**\n * calculate the angle between two coordinates\n * @param {Object} p1\n * @param {Object} p2\n * @param {Array} [props] containing x and y keys\n * @return {Number} angle\n */\nfunction getAngle(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n    return Math.atan2(y, x) * 180 / Math.PI;\n}\n\n/**\n * calculate the rotation degrees between two pointersets\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} rotation\n */\nfunction getRotation(start, end) {\n    return getAngle(end[1], end[0], PROPS_CLIENT_XY) + getAngle(start[1], start[0], PROPS_CLIENT_XY);\n}\n\n/**\n * calculate the scale factor between two pointersets\n * no scale is 1, and goes down to 0 when pinched together, and bigger when pinched out\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} scale\n */\nfunction getScale(start, end) {\n    return getDistance(end[0], end[1], PROPS_CLIENT_XY) / getDistance(start[0], start[1], PROPS_CLIENT_XY);\n}\n\nvar MOUSE_INPUT_MAP = {\n    mousedown: INPUT_START,\n    mousemove: INPUT_MOVE,\n    mouseup: INPUT_END\n};\n\nvar MOUSE_ELEMENT_EVENTS = 'mousedown';\nvar MOUSE_WINDOW_EVENTS = 'mousemove mouseup';\n\n/**\n * Mouse events input\n * @constructor\n * @extends Input\n */\nfunction MouseInput() {\n    this.evEl = MOUSE_ELEMENT_EVENTS;\n    this.evWin = MOUSE_WINDOW_EVENTS;\n\n    this.pressed = false; // mousedown state\n\n    Input.apply(this, arguments);\n}\n\ninherit(MouseInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function MEhandler(ev) {\n        var eventType = MOUSE_INPUT_MAP[ev.type];\n\n        // on start we want to have the left mouse button down\n        if (eventType & INPUT_START && ev.button === 0) {\n            this.pressed = true;\n        }\n\n        if (eventType & INPUT_MOVE && ev.which !== 1) {\n            eventType = INPUT_END;\n        }\n\n        // mouse must be down\n        if (!this.pressed) {\n            return;\n        }\n\n        if (eventType & INPUT_END) {\n            this.pressed = false;\n        }\n\n        this.callback(this.manager, eventType, {\n            pointers: [ev],\n            changedPointers: [ev],\n            pointerType: INPUT_TYPE_MOUSE,\n            srcEvent: ev\n        });\n    }\n});\n\nvar POINTER_INPUT_MAP = {\n    pointerdown: INPUT_START,\n    pointermove: INPUT_MOVE,\n    pointerup: INPUT_END,\n    pointercancel: INPUT_CANCEL,\n    pointerout: INPUT_CANCEL\n};\n\n// in IE10 the pointer types is defined as an enum\nvar IE10_POINTER_TYPE_ENUM = {\n    2: INPUT_TYPE_TOUCH,\n    3: INPUT_TYPE_PEN,\n    4: INPUT_TYPE_MOUSE,\n    5: INPUT_TYPE_KINECT // see https://twitter.com/jacobrossi/status/480596438489890816\n};\n\nvar POINTER_ELEMENT_EVENTS = 'pointerdown';\nvar POINTER_WINDOW_EVENTS = 'pointermove pointerup pointercancel';\n\n// IE10 has prefixed support, and case-sensitive\nif (window.MSPointerEvent && !window.PointerEvent) {\n    POINTER_ELEMENT_EVENTS = 'MSPointerDown';\n    POINTER_WINDOW_EVENTS = 'MSPointerMove MSPointerUp MSPointerCancel';\n}\n\n/**\n * Pointer events input\n * @constructor\n * @extends Input\n */\nfunction PointerEventInput() {\n    this.evEl = POINTER_ELEMENT_EVENTS;\n    this.evWin = POINTER_WINDOW_EVENTS;\n\n    Input.apply(this, arguments);\n\n    this.store = (this.manager.session.pointerEvents = []);\n}\n\ninherit(PointerEventInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function PEhandler(ev) {\n        var store = this.store;\n        var removePointer = false;\n\n        var eventTypeNormalized = ev.type.toLowerCase().replace('ms', '');\n        var eventType = POINTER_INPUT_MAP[eventTypeNormalized];\n        var pointerType = IE10_POINTER_TYPE_ENUM[ev.pointerType] || ev.pointerType;\n\n        var isTouch = (pointerType == INPUT_TYPE_TOUCH);\n\n        // get index of the event in the store\n        var storeIndex = inArray(store, ev.pointerId, 'pointerId');\n\n        // start and mouse must be down\n        if (eventType & INPUT_START && (ev.button === 0 || isTouch)) {\n            if (storeIndex < 0) {\n                store.push(ev);\n                storeIndex = store.length - 1;\n            }\n        } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n            removePointer = true;\n        }\n\n        // it not found, so the pointer hasn't been down (so it's probably a hover)\n        if (storeIndex < 0) {\n            return;\n        }\n\n        // update the event in the store\n        store[storeIndex] = ev;\n\n        this.callback(this.manager, eventType, {\n            pointers: store,\n            changedPointers: [ev],\n            pointerType: pointerType,\n            srcEvent: ev\n        });\n\n        if (removePointer) {\n            // remove from the store\n            store.splice(storeIndex, 1);\n        }\n    }\n});\n\nvar SINGLE_TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar SINGLE_TOUCH_TARGET_EVENTS = 'touchstart';\nvar SINGLE_TOUCH_WINDOW_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Touch events input\n * @constructor\n * @extends Input\n */\nfunction SingleTouchInput() {\n    this.evTarget = SINGLE_TOUCH_TARGET_EVENTS;\n    this.evWin = SINGLE_TOUCH_WINDOW_EVENTS;\n    this.started = false;\n\n    Input.apply(this, arguments);\n}\n\ninherit(SingleTouchInput, Input, {\n    handler: function TEhandler(ev) {\n        var type = SINGLE_TOUCH_INPUT_MAP[ev.type];\n\n        // should we handle the touch events?\n        if (type === INPUT_START) {\n            this.started = true;\n        }\n\n        if (!this.started) {\n            return;\n        }\n\n        var touches = normalizeSingleTouches.call(this, ev, type);\n\n        // when done, reset the started state\n        if (type & (INPUT_END | INPUT_CANCEL) && touches[0].length - touches[1].length === 0) {\n            this.started = false;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction normalizeSingleTouches(ev, type) {\n    var all = toArray(ev.touches);\n    var changed = toArray(ev.changedTouches);\n\n    if (type & (INPUT_END | INPUT_CANCEL)) {\n        all = uniqueArray(all.concat(changed), 'identifier', true);\n    }\n\n    return [all, changed];\n}\n\nvar TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar TOUCH_TARGET_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Multi-user touch events input\n * @constructor\n * @extends Input\n */\nfunction TouchInput() {\n    this.evTarget = TOUCH_TARGET_EVENTS;\n    this.targetIds = {};\n\n    Input.apply(this, arguments);\n}\n\ninherit(TouchInput, Input, {\n    handler: function MTEhandler(ev) {\n        var type = TOUCH_INPUT_MAP[ev.type];\n        var touches = getTouches.call(this, ev, type);\n        if (!touches) {\n            return;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction getTouches(ev, type) {\n    var allTouches = toArray(ev.touches);\n    var targetIds = this.targetIds;\n\n    // when there is only one touch, the process can be simplified\n    if (type & (INPUT_START | INPUT_MOVE) && allTouches.length === 1) {\n        targetIds[allTouches[0].identifier] = true;\n        return [allTouches, allTouches];\n    }\n\n    var i,\n        targetTouches,\n        changedTouches = toArray(ev.changedTouches),\n        changedTargetTouches = [],\n        target = this.target;\n\n    // get target touches from touches\n    targetTouches = allTouches.filter(function(touch) {\n        return hasParent(touch.target, target);\n    });\n\n    // collect touches\n    if (type === INPUT_START) {\n        i = 0;\n        while (i < targetTouches.length) {\n            targetIds[targetTouches[i].identifier] = true;\n            i++;\n        }\n    }\n\n    // filter changed touches to only contain touches that exist in the collected target ids\n    i = 0;\n    while (i < changedTouches.length) {\n        if (targetIds[changedTouches[i].identifier]) {\n            changedTargetTouches.push(changedTouches[i]);\n        }\n\n        // cleanup removed touches\n        if (type & (INPUT_END | INPUT_CANCEL)) {\n            delete targetIds[changedTouches[i].identifier];\n        }\n        i++;\n    }\n\n    if (!changedTargetTouches.length) {\n        return;\n    }\n\n    return [\n        // merge targetTouches with changedTargetTouches so it contains ALL touches, including 'end' and 'cancel'\n        uniqueArray(targetTouches.concat(changedTargetTouches), 'identifier', true),\n        changedTargetTouches\n    ];\n}\n\n/**\n * Combined touch and mouse input\n *\n * Touch has a higher priority then mouse, and while touching no mouse events are allowed.\n * This because touch devices also emit mouse events while doing a touch.\n *\n * @constructor\n * @extends Input\n */\n\nvar DEDUP_TIMEOUT = 2500;\nvar DEDUP_DISTANCE = 25;\n\nfunction TouchMouseInput() {\n    Input.apply(this, arguments);\n\n    var handler = bindFn(this.handler, this);\n    this.touch = new TouchInput(this.manager, handler);\n    this.mouse = new MouseInput(this.manager, handler);\n\n    this.primaryTouch = null;\n    this.lastTouches = [];\n}\n\ninherit(TouchMouseInput, Input, {\n    /**\n     * handle mouse and touch events\n     * @param {Hammer} manager\n     * @param {String} inputEvent\n     * @param {Object} inputData\n     */\n    handler: function TMEhandler(manager, inputEvent, inputData) {\n        var isTouch = (inputData.pointerType == INPUT_TYPE_TOUCH),\n            isMouse = (inputData.pointerType == INPUT_TYPE_MOUSE);\n\n        if (isMouse && inputData.sourceCapabilities && inputData.sourceCapabilities.firesTouchEvents) {\n            return;\n        }\n\n        // when we're in a touch event, record touches to  de-dupe synthetic mouse event\n        if (isTouch) {\n            recordTouches.call(this, inputEvent, inputData);\n        } else if (isMouse && isSyntheticEvent.call(this, inputData)) {\n            return;\n        }\n\n        this.callback(manager, inputEvent, inputData);\n    },\n\n    /**\n     * remove the event listeners\n     */\n    destroy: function destroy() {\n        this.touch.destroy();\n        this.mouse.destroy();\n    }\n});\n\nfunction recordTouches(eventType, eventData) {\n    if (eventType & INPUT_START) {\n        this.primaryTouch = eventData.changedPointers[0].identifier;\n        setLastTouch.call(this, eventData);\n    } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n        setLastTouch.call(this, eventData);\n    }\n}\n\nfunction setLastTouch(eventData) {\n    var touch = eventData.changedPointers[0];\n\n    if (touch.identifier === this.primaryTouch) {\n        var lastTouch = {x: touch.clientX, y: touch.clientY};\n        this.lastTouches.push(lastTouch);\n        var lts = this.lastTouches;\n        var removeLastTouch = function() {\n            var i = lts.indexOf(lastTouch);\n            if (i > -1) {\n                lts.splice(i, 1);\n            }\n        };\n        setTimeout(removeLastTouch, DEDUP_TIMEOUT);\n    }\n}\n\nfunction isSyntheticEvent(eventData) {\n    var x = eventData.srcEvent.clientX, y = eventData.srcEvent.clientY;\n    for (var i = 0; i < this.lastTouches.length; i++) {\n        var t = this.lastTouches[i];\n        var dx = Math.abs(x - t.x), dy = Math.abs(y - t.y);\n        if (dx <= DEDUP_DISTANCE && dy <= DEDUP_DISTANCE) {\n            return true;\n        }\n    }\n    return false;\n}\n\nvar PREFIXED_TOUCH_ACTION = prefixed(TEST_ELEMENT.style, 'touchAction');\nvar NATIVE_TOUCH_ACTION = PREFIXED_TOUCH_ACTION !== undefined;\n\n// magical touchAction value\nvar TOUCH_ACTION_COMPUTE = 'compute';\nvar TOUCH_ACTION_AUTO = 'auto';\nvar TOUCH_ACTION_MANIPULATION = 'manipulation'; // not implemented\nvar TOUCH_ACTION_NONE = 'none';\nvar TOUCH_ACTION_PAN_X = 'pan-x';\nvar TOUCH_ACTION_PAN_Y = 'pan-y';\nvar TOUCH_ACTION_MAP = getTouchActionProps();\n\n/**\n * Touch Action\n * sets the touchAction property or uses the js alternative\n * @param {Manager} manager\n * @param {String} value\n * @constructor\n */\nfunction TouchAction(manager, value) {\n    this.manager = manager;\n    this.set(value);\n}\n\nTouchAction.prototype = {\n    /**\n     * set the touchAction value on the element or enable the polyfill\n     * @param {String} value\n     */\n    set: function(value) {\n        // find out the touch-action by the event handlers\n        if (value == TOUCH_ACTION_COMPUTE) {\n            value = this.compute();\n        }\n\n        if (NATIVE_TOUCH_ACTION && this.manager.element.style && TOUCH_ACTION_MAP[value]) {\n            this.manager.element.style[PREFIXED_TOUCH_ACTION] = value;\n        }\n        this.actions = value.toLowerCase().trim();\n    },\n\n    /**\n     * just re-set the touchAction value\n     */\n    update: function() {\n        this.set(this.manager.options.touchAction);\n    },\n\n    /**\n     * compute the value for the touchAction property based on the recognizer's settings\n     * @returns {String} value\n     */\n    compute: function() {\n        var actions = [];\n        each(this.manager.recognizers, function(recognizer) {\n            if (boolOrFn(recognizer.options.enable, [recognizer])) {\n                actions = actions.concat(recognizer.getTouchAction());\n            }\n        });\n        return cleanTouchActions(actions.join(' '));\n    },\n\n    /**\n     * this method is called on each input cycle and provides the preventing of the browser behavior\n     * @param {Object} input\n     */\n    preventDefaults: function(input) {\n        var srcEvent = input.srcEvent;\n        var direction = input.offsetDirection;\n\n        // if the touch action did prevented once this session\n        if (this.manager.session.prevented) {\n            srcEvent.preventDefault();\n            return;\n        }\n\n        var actions = this.actions;\n        var hasNone = inStr(actions, TOUCH_ACTION_NONE) && !TOUCH_ACTION_MAP[TOUCH_ACTION_NONE];\n        var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_Y];\n        var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_X];\n\n        if (hasNone) {\n            //do not prevent defaults if this is a tap gesture\n\n            var isTapPointer = input.pointers.length === 1;\n            var isTapMovement = input.distance < 2;\n            var isTapTouchTime = input.deltaTime < 250;\n\n            if (isTapPointer && isTapMovement && isTapTouchTime) {\n                return;\n            }\n        }\n\n        if (hasPanX && hasPanY) {\n            // `pan-x pan-y` means browser handles all scrolling/panning, do not prevent\n            return;\n        }\n\n        if (hasNone ||\n            (hasPanY && direction & DIRECTION_HORIZONTAL) ||\n            (hasPanX && direction & DIRECTION_VERTICAL)) {\n            return this.preventSrc(srcEvent);\n        }\n    },\n\n    /**\n     * call preventDefault to prevent the browser's default behavior (scrolling in most cases)\n     * @param {Object} srcEvent\n     */\n    preventSrc: function(srcEvent) {\n        this.manager.session.prevented = true;\n        srcEvent.preventDefault();\n    }\n};\n\n/**\n * when the touchActions are collected they are not a valid value, so we need to clean things up. *\n * @param {String} actions\n * @returns {*}\n */\nfunction cleanTouchActions(actions) {\n    // none\n    if (inStr(actions, TOUCH_ACTION_NONE)) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X);\n    var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y);\n\n    // if both pan-x and pan-y are set (different recognizers\n    // for different directions, e.g. horizontal pan but vertical swipe?)\n    // we need none (as otherwise with pan-x pan-y combined none of these\n    // recognizers will work, since the browser would handle all panning\n    if (hasPanX && hasPanY) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    // pan-x OR pan-y\n    if (hasPanX || hasPanY) {\n        return hasPanX ? TOUCH_ACTION_PAN_X : TOUCH_ACTION_PAN_Y;\n    }\n\n    // manipulation\n    if (inStr(actions, TOUCH_ACTION_MANIPULATION)) {\n        return TOUCH_ACTION_MANIPULATION;\n    }\n\n    return TOUCH_ACTION_AUTO;\n}\n\nfunction getTouchActionProps() {\n    if (!NATIVE_TOUCH_ACTION) {\n        return false;\n    }\n    var touchMap = {};\n    var cssSupports = window.CSS && window.CSS.supports;\n    ['auto', 'manipulation', 'pan-y', 'pan-x', 'pan-x pan-y', 'none'].forEach(function(val) {\n\n        // If css.supports is not supported but there is native touch-action assume it supports\n        // all values. This is the case for IE 10 and 11.\n        touchMap[val] = cssSupports ? window.CSS.supports('touch-action', val) : true;\n    });\n    return touchMap;\n}\n\n/**\n * Recognizer flow explained; *\n * All recognizers have the initial state of POSSIBLE when a input session starts.\n * The definition of a input session is from the first input until the last input, with all it's movement in it. *\n * Example session for mouse-input: mousedown -> mousemove -> mouseup\n *\n * On each recognizing cycle (see Manager.recognize) the .recognize() method is executed\n * which determines with state it should be.\n *\n * If the recognizer has the state FAILED, CANCELLED or RECOGNIZED (equals ENDED), it is reset to\n * POSSIBLE to give it another change on the next cycle.\n *\n *               Possible\n *                  |\n *            +-----+---------------+\n *            |                     |\n *      +-----+-----+               |\n *      |           |               |\n *   Failed      Cancelled          |\n *                          +-------+------+\n *                          |              |\n *                      Recognized       Began\n *                                         |\n *                                      Changed\n *                                         |\n *                                  Ended/Recognized\n */\nvar STATE_POSSIBLE = 1;\nvar STATE_BEGAN = 2;\nvar STATE_CHANGED = 4;\nvar STATE_ENDED = 8;\nvar STATE_RECOGNIZED = STATE_ENDED;\nvar STATE_CANCELLED = 16;\nvar STATE_FAILED = 32;\n\n/**\n * Recognizer\n * Every recognizer needs to extend from this class.\n * @constructor\n * @param {Object} options\n */\nfunction Recognizer(options) {\n    this.options = assign({}, this.defaults, options || {});\n\n    this.id = uniqueId();\n\n    this.manager = null;\n\n    // default is enable true\n    this.options.enable = ifUndefined(this.options.enable, true);\n\n    this.state = STATE_POSSIBLE;\n\n    this.simultaneous = {};\n    this.requireFail = [];\n}\n\nRecognizer.prototype = {\n    /**\n     * @virtual\n     * @type {Object}\n     */\n    defaults: {},\n\n    /**\n     * set options\n     * @param {Object} options\n     * @return {Recognizer}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // also update the touchAction, in case something changed about the directions/enabled state\n        this.manager && this.manager.touchAction.update();\n        return this;\n    },\n\n    /**\n     * recognize simultaneous with an other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    recognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'recognizeWith', this)) {\n            return this;\n        }\n\n        var simultaneous = this.simultaneous;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (!simultaneous[otherRecognizer.id]) {\n            simultaneous[otherRecognizer.id] = otherRecognizer;\n            otherRecognizer.recognizeWith(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the simultaneous link. it doesnt remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRecognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRecognizeWith', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        delete this.simultaneous[otherRecognizer.id];\n        return this;\n    },\n\n    /**\n     * recognizer can only run when an other is failing\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    requireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'requireFailure', this)) {\n            return this;\n        }\n\n        var requireFail = this.requireFail;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (inArray(requireFail, otherRecognizer) === -1) {\n            requireFail.push(otherRecognizer);\n            otherRecognizer.requireFailure(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the requireFailure link. it does not remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRequireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRequireFailure', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        var index = inArray(this.requireFail, otherRecognizer);\n        if (index > -1) {\n            this.requireFail.splice(index, 1);\n        }\n        return this;\n    },\n\n    /**\n     * has require failures boolean\n     * @returns {boolean}\n     */\n    hasRequireFailures: function() {\n        return this.requireFail.length > 0;\n    },\n\n    /**\n     * if the recognizer can recognize simultaneous with an other recognizer\n     * @param {Recognizer} otherRecognizer\n     * @returns {Boolean}\n     */\n    canRecognizeWith: function(otherRecognizer) {\n        return !!this.simultaneous[otherRecognizer.id];\n    },\n\n    /**\n     * You should use `tryEmit` instead of `emit` directly to check\n     * that all the needed recognizers has failed before emitting.\n     * @param {Object} input\n     */\n    emit: function(input) {\n        var self = this;\n        var state = this.state;\n\n        function emit(event) {\n            self.manager.emit(event, input);\n        }\n\n        // 'panstart' and 'panmove'\n        if (state < STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n\n        emit(self.options.event); // simple 'eventName' events\n\n        if (input.additionalEvent) { // additional event(panleft, panright, pinchin, pinchout...)\n            emit(input.additionalEvent);\n        }\n\n        // panend and pancancel\n        if (state >= STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n    },\n\n    /**\n     * Check that all the require failure recognizers has failed,\n     * if true, it emits a gesture event,\n     * otherwise, setup the state to FAILED.\n     * @param {Object} input\n     */\n    tryEmit: function(input) {\n        if (this.canEmit()) {\n            return this.emit(input);\n        }\n        // it's failing anyway\n        this.state = STATE_FAILED;\n    },\n\n    /**\n     * can we emit?\n     * @returns {boolean}\n     */\n    canEmit: function() {\n        var i = 0;\n        while (i < this.requireFail.length) {\n            if (!(this.requireFail[i].state & (STATE_FAILED | STATE_POSSIBLE))) {\n                return false;\n            }\n            i++;\n        }\n        return true;\n    },\n\n    /**\n     * update the recognizer\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        // make a new copy of the inputData\n        // so we can change the inputData without messing up the other recognizers\n        var inputDataClone = assign({}, inputData);\n\n        // is is enabled and allow recognizing?\n        if (!boolOrFn(this.options.enable, [this, inputDataClone])) {\n            this.reset();\n            this.state = STATE_FAILED;\n            return;\n        }\n\n        // reset when we've reached the end\n        if (this.state & (STATE_RECOGNIZED | STATE_CANCELLED | STATE_FAILED)) {\n            this.state = STATE_POSSIBLE;\n        }\n\n        this.state = this.process(inputDataClone);\n\n        // the recognizer has recognized a gesture\n        // so trigger an event\n        if (this.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED | STATE_CANCELLED)) {\n            this.tryEmit(inputDataClone);\n        }\n    },\n\n    /**\n     * return the state of the recognizer\n     * the actual recognizing happens in this method\n     * @virtual\n     * @param {Object} inputData\n     * @returns {Const} STATE\n     */\n    process: function(inputData) { }, // jshint ignore:line\n\n    /**\n     * return the preferred touch-action\n     * @virtual\n     * @returns {Array}\n     */\n    getTouchAction: function() { },\n\n    /**\n     * called when the gesture isn't allowed to recognize\n     * like when another is being recognized or it is disabled\n     * @virtual\n     */\n    reset: function() { }\n};\n\n/**\n * get a usable string, used as event postfix\n * @param {Const} state\n * @returns {String} state\n */\nfunction stateStr(state) {\n    if (state & STATE_CANCELLED) {\n        return 'cancel';\n    } else if (state & STATE_ENDED) {\n        return 'end';\n    } else if (state & STATE_CHANGED) {\n        return 'move';\n    } else if (state & STATE_BEGAN) {\n        return 'start';\n    }\n    return '';\n}\n\n/**\n * direction cons to string\n * @param {Const} direction\n * @returns {String}\n */\nfunction directionStr(direction) {\n    if (direction == DIRECTION_DOWN) {\n        return 'down';\n    } else if (direction == DIRECTION_UP) {\n        return 'up';\n    } else if (direction == DIRECTION_LEFT) {\n        return 'left';\n    } else if (direction == DIRECTION_RIGHT) {\n        return 'right';\n    }\n    return '';\n}\n\n/**\n * get a recognizer by name if it is bound to a manager\n * @param {Recognizer|String} otherRecognizer\n * @param {Recognizer} recognizer\n * @returns {Recognizer}\n */\nfunction getRecognizerByNameIfManager(otherRecognizer, recognizer) {\n    var manager = recognizer.manager;\n    if (manager) {\n        return manager.get(otherRecognizer);\n    }\n    return otherRecognizer;\n}\n\n/**\n * This recognizer is just used as a base for the simple attribute recognizers.\n * @constructor\n * @extends Recognizer\n */\nfunction AttrRecognizer() {\n    Recognizer.apply(this, arguments);\n}\n\ninherit(AttrRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof AttrRecognizer\n     */\n    defaults: {\n        /**\n         * @type {Number}\n         * @default 1\n         */\n        pointers: 1\n    },\n\n    /**\n     * Used to check if it the recognizer receives valid input, like input.distance > 10.\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {Boolean} recognized\n     */\n    attrTest: function(input) {\n        var optionPointers = this.options.pointers;\n        return optionPointers === 0 || input.pointers.length === optionPointers;\n    },\n\n    /**\n     * Process the input and return the state for the recognizer\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {*} State\n     */\n    process: function(input) {\n        var state = this.state;\n        var eventType = input.eventType;\n\n        var isRecognized = state & (STATE_BEGAN | STATE_CHANGED);\n        var isValid = this.attrTest(input);\n\n        // on cancel input and we've recognized before, return STATE_CANCELLED\n        if (isRecognized && (eventType & INPUT_CANCEL || !isValid)) {\n            return state | STATE_CANCELLED;\n        } else if (isRecognized || isValid) {\n            if (eventType & INPUT_END) {\n                return state | STATE_ENDED;\n            } else if (!(state & STATE_BEGAN)) {\n                return STATE_BEGAN;\n            }\n            return state | STATE_CHANGED;\n        }\n        return STATE_FAILED;\n    }\n});\n\n/**\n * Pan\n * Recognized when the pointer is down and moved in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PanRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n\n    this.pX = null;\n    this.pY = null;\n}\n\ninherit(PanRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PanRecognizer\n     */\n    defaults: {\n        event: 'pan',\n        threshold: 10,\n        pointers: 1,\n        direction: DIRECTION_ALL\n    },\n\n    getTouchAction: function() {\n        var direction = this.options.direction;\n        var actions = [];\n        if (direction & DIRECTION_HORIZONTAL) {\n            actions.push(TOUCH_ACTION_PAN_Y);\n        }\n        if (direction & DIRECTION_VERTICAL) {\n            actions.push(TOUCH_ACTION_PAN_X);\n        }\n        return actions;\n    },\n\n    directionTest: function(input) {\n        var options = this.options;\n        var hasMoved = true;\n        var distance = input.distance;\n        var direction = input.direction;\n        var x = input.deltaX;\n        var y = input.deltaY;\n\n        // lock to axis?\n        if (!(direction & options.direction)) {\n            if (options.direction & DIRECTION_HORIZONTAL) {\n                direction = (x === 0) ? DIRECTION_NONE : (x < 0) ? DIRECTION_LEFT : DIRECTION_RIGHT;\n                hasMoved = x != this.pX;\n                distance = Math.abs(input.deltaX);\n            } else {\n                direction = (y === 0) ? DIRECTION_NONE : (y < 0) ? DIRECTION_UP : DIRECTION_DOWN;\n                hasMoved = y != this.pY;\n                distance = Math.abs(input.deltaY);\n            }\n        }\n        input.direction = direction;\n        return hasMoved && distance > options.threshold && direction & options.direction;\n    },\n\n    attrTest: function(input) {\n        return AttrRecognizer.prototype.attrTest.call(this, input) &&\n            (this.state & STATE_BEGAN || (!(this.state & STATE_BEGAN) && this.directionTest(input)));\n    },\n\n    emit: function(input) {\n\n        this.pX = input.deltaX;\n        this.pY = input.deltaY;\n\n        var direction = directionStr(input.direction);\n\n        if (direction) {\n            input.additionalEvent = this.options.event + direction;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Pinch\n * Recognized when two or more pointers are moving toward (zoom-in) or away from each other (zoom-out).\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PinchRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(PinchRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'pinch',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.scale - 1) > this.options.threshold || this.state & STATE_BEGAN);\n    },\n\n    emit: function(input) {\n        if (input.scale !== 1) {\n            var inOut = input.scale < 1 ? 'in' : 'out';\n            input.additionalEvent = this.options.event + inOut;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Press\n * Recognized when the pointer is down for x ms without any movement.\n * @constructor\n * @extends Recognizer\n */\nfunction PressRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    this._timer = null;\n    this._input = null;\n}\n\ninherit(PressRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PressRecognizer\n     */\n    defaults: {\n        event: 'press',\n        pointers: 1,\n        time: 251, // minimal time of the pointer to be pressed\n        threshold: 9 // a minimal movement is ok, but keep it low\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_AUTO];\n    },\n\n    process: function(input) {\n        var options = this.options;\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTime = input.deltaTime > options.time;\n\n        this._input = input;\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (!validMovement || !validPointers || (input.eventType & (INPUT_END | INPUT_CANCEL) && !validTime)) {\n            this.reset();\n        } else if (input.eventType & INPUT_START) {\n            this.reset();\n            this._timer = setTimeoutContext(function() {\n                this.state = STATE_RECOGNIZED;\n                this.tryEmit();\n            }, options.time, this);\n        } else if (input.eventType & INPUT_END) {\n            return STATE_RECOGNIZED;\n        }\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function(input) {\n        if (this.state !== STATE_RECOGNIZED) {\n            return;\n        }\n\n        if (input && (input.eventType & INPUT_END)) {\n            this.manager.emit(this.options.event + 'up', input);\n        } else {\n            this._input.timeStamp = now();\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Rotate\n * Recognized when two or more pointer are moving in a circular motion.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction RotateRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(RotateRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof RotateRecognizer\n     */\n    defaults: {\n        event: 'rotate',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.rotation) > this.options.threshold || this.state & STATE_BEGAN);\n    }\n});\n\n/**\n * Swipe\n * Recognized when the pointer is moving fast (velocity), with enough distance in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction SwipeRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(SwipeRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof SwipeRecognizer\n     */\n    defaults: {\n        event: 'swipe',\n        threshold: 10,\n        velocity: 0.3,\n        direction: DIRECTION_HORIZONTAL | DIRECTION_VERTICAL,\n        pointers: 1\n    },\n\n    getTouchAction: function() {\n        return PanRecognizer.prototype.getTouchAction.call(this);\n    },\n\n    attrTest: function(input) {\n        var direction = this.options.direction;\n        var velocity;\n\n        if (direction & (DIRECTION_HORIZONTAL | DIRECTION_VERTICAL)) {\n            velocity = input.overallVelocity;\n        } else if (direction & DIRECTION_HORIZONTAL) {\n            velocity = input.overallVelocityX;\n        } else if (direction & DIRECTION_VERTICAL) {\n            velocity = input.overallVelocityY;\n        }\n\n        return this._super.attrTest.call(this, input) &&\n            direction & input.offsetDirection &&\n            input.distance > this.options.threshold &&\n            input.maxPointers == this.options.pointers &&\n            abs(velocity) > this.options.velocity && input.eventType & INPUT_END;\n    },\n\n    emit: function(input) {\n        var direction = directionStr(input.offsetDirection);\n        if (direction) {\n            this.manager.emit(this.options.event + direction, input);\n        }\n\n        this.manager.emit(this.options.event, input);\n    }\n});\n\n/**\n * A tap is ecognized when the pointer is doing a small tap/click. Multiple taps are recognized if they occur\n * between the given interval and position. The delay option can be used to recognize multi-taps without firing\n * a single tap.\n *\n * The eventData from the emitted event contains the property `tapCount`, which contains the amount of\n * multi-taps being recognized.\n * @constructor\n * @extends Recognizer\n */\nfunction TapRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    // previous time and center,\n    // used for tap counting\n    this.pTime = false;\n    this.pCenter = false;\n\n    this._timer = null;\n    this._input = null;\n    this.count = 0;\n}\n\ninherit(TapRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'tap',\n        pointers: 1,\n        taps: 1,\n        interval: 300, // max time between the multi-tap taps\n        time: 250, // max time of the pointer to be down (like finger on the screen)\n        threshold: 9, // a minimal movement is ok, but keep it low\n        posThreshold: 10 // a multi-tap can be a bit off the initial position\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_MANIPULATION];\n    },\n\n    process: function(input) {\n        var options = this.options;\n\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTouchTime = input.deltaTime < options.time;\n\n        this.reset();\n\n        if ((input.eventType & INPUT_START) && (this.count === 0)) {\n            return this.failTimeout();\n        }\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (validMovement && validTouchTime && validPointers) {\n            if (input.eventType != INPUT_END) {\n                return this.failTimeout();\n            }\n\n            var validInterval = this.pTime ? (input.timeStamp - this.pTime < options.interval) : true;\n            var validMultiTap = !this.pCenter || getDistance(this.pCenter, input.center) < options.posThreshold;\n\n            this.pTime = input.timeStamp;\n            this.pCenter = input.center;\n\n            if (!validMultiTap || !validInterval) {\n                this.count = 1;\n            } else {\n                this.count += 1;\n            }\n\n            this._input = input;\n\n            // if tap count matches we have recognized it,\n            // else it has began recognizing...\n            var tapCount = this.count % options.taps;\n            if (tapCount === 0) {\n                // no failing requirements, immediately trigger the tap event\n                // or wait as long as the multitap interval to trigger\n                if (!this.hasRequireFailures()) {\n                    return STATE_RECOGNIZED;\n                } else {\n                    this._timer = setTimeoutContext(function() {\n                        this.state = STATE_RECOGNIZED;\n                        this.tryEmit();\n                    }, options.interval, this);\n                    return STATE_BEGAN;\n                }\n            }\n        }\n        return STATE_FAILED;\n    },\n\n    failTimeout: function() {\n        this._timer = setTimeoutContext(function() {\n            this.state = STATE_FAILED;\n        }, this.options.interval, this);\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function() {\n        if (this.state == STATE_RECOGNIZED) {\n            this._input.tapCount = this.count;\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Simple way to create a manager with a default set of recognizers.\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Hammer(element, options) {\n    options = options || {};\n    options.recognizers = ifUndefined(options.recognizers, Hammer.defaults.preset);\n    return new Manager(element, options);\n}\n\n/**\n * @const {string}\n */\nHammer.VERSION = '2.0.7';\n\n/**\n * default settings\n * @namespace\n */\nHammer.defaults = {\n    /**\n     * set if DOM events are being triggered.\n     * But this is slower and unused by simple implementations, so disabled by default.\n     * @type {Boolean}\n     * @default false\n     */\n    domEvents: false,\n\n    /**\n     * The value for the touchAction property/fallback.\n     * When set to `compute` it will magically set the correct value based on the added recognizers.\n     * @type {String}\n     * @default compute\n     */\n    touchAction: TOUCH_ACTION_COMPUTE,\n\n    /**\n     * @type {Boolean}\n     * @default true\n     */\n    enable: true,\n\n    /**\n     * EXPERIMENTAL FEATURE -- can be removed/changed\n     * Change the parent input target element.\n     * If Null, then it is being set the to main element.\n     * @type {Null|EventTarget}\n     * @default null\n     */\n    inputTarget: null,\n\n    /**\n     * force an input class\n     * @type {Null|Function}\n     * @default null\n     */\n    inputClass: null,\n\n    /**\n     * Default recognizer setup when calling `Hammer()`\n     * When creating a new Manager these will be skipped.\n     * @type {Array}\n     */\n    preset: [\n        // RecognizerClass, options, [recognizeWith, ...], [requireFailure, ...]\n        [RotateRecognizer, {enable: false}],\n        [PinchRecognizer, {enable: false}, ['rotate']],\n        [SwipeRecognizer, {direction: DIRECTION_HORIZONTAL}],\n        [PanRecognizer, {direction: DIRECTION_HORIZONTAL}, ['swipe']],\n        [TapRecognizer],\n        [TapRecognizer, {event: 'doubletap', taps: 2}, ['tap']],\n        [PressRecognizer]\n    ],\n\n    /**\n     * Some CSS properties can be used to improve the working of Hammer.\n     * Add them to this method and they will be set when creating a new Manager.\n     * @namespace\n     */\n    cssProps: {\n        /**\n         * Disables text selection to improve the dragging gesture. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userSelect: 'none',\n\n        /**\n         * Disable the Windows Phone grippers when pressing an element.\n         * @type {String}\n         * @default 'none'\n         */\n        touchSelect: 'none',\n\n        /**\n         * Disables the default callout shown when you touch and hold a touch target.\n         * On iOS, when you touch and hold a touch target such as a link, Safari displays\n         * a callout containing information about the link. This property allows you to disable that callout.\n         * @type {String}\n         * @default 'none'\n         */\n        touchCallout: 'none',\n\n        /**\n         * Specifies whether zooming is enabled. Used by IE10>\n         * @type {String}\n         * @default 'none'\n         */\n        contentZooming: 'none',\n\n        /**\n         * Specifies that an entire element should be draggable instead of its contents. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userDrag: 'none',\n\n        /**\n         * Overrides the highlight color shown when the user taps a link or a JavaScript\n         * clickable element in iOS. This property obeys the alpha value, if specified.\n         * @type {String}\n         * @default 'rgba(0,0,0,0)'\n         */\n        tapHighlightColor: 'rgba(0,0,0,0)'\n    }\n};\n\nvar STOP = 1;\nvar FORCED_STOP = 2;\n\n/**\n * Manager\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Manager(element, options) {\n    this.options = assign({}, Hammer.defaults, options || {});\n\n    this.options.inputTarget = this.options.inputTarget || element;\n\n    this.handlers = {};\n    this.session = {};\n    this.recognizers = [];\n    this.oldCssProps = {};\n\n    this.element = element;\n    this.input = createInputInstance(this);\n    this.touchAction = new TouchAction(this, this.options.touchAction);\n\n    toggleCssProps(this, true);\n\n    each(this.options.recognizers, function(item) {\n        var recognizer = this.add(new (item[0])(item[1]));\n        item[2] && recognizer.recognizeWith(item[2]);\n        item[3] && recognizer.requireFailure(item[3]);\n    }, this);\n}\n\nManager.prototype = {\n    /**\n     * set options\n     * @param {Object} options\n     * @returns {Manager}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // Options that need a little more setup\n        if (options.touchAction) {\n            this.touchAction.update();\n        }\n        if (options.inputTarget) {\n            // Clean up existing event listeners and reinitialize\n            this.input.destroy();\n            this.input.target = options.inputTarget;\n            this.input.init();\n        }\n        return this;\n    },\n\n    /**\n     * stop recognizing for this session.\n     * This session will be discarded, when a new [input]start event is fired.\n     * When forced, the recognizer cycle is stopped immediately.\n     * @param {Boolean} [force]\n     */\n    stop: function(force) {\n        this.session.stopped = force ? FORCED_STOP : STOP;\n    },\n\n    /**\n     * run the recognizers!\n     * called by the inputHandler function on every movement of the pointers (touches)\n     * it walks through all the recognizers and tries to detect the gesture that is being made\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        var session = this.session;\n        if (session.stopped) {\n            return;\n        }\n\n        // run the touch-action polyfill\n        this.touchAction.preventDefaults(inputData);\n\n        var recognizer;\n        var recognizers = this.recognizers;\n\n        // this holds the recognizer that is being recognized.\n        // so the recognizer's state needs to be BEGAN, CHANGED, ENDED or RECOGNIZED\n        // if no recognizer is detecting a thing, it is set to `null`\n        var curRecognizer = session.curRecognizer;\n\n        // reset when the last recognizer is recognized\n        // or when we're in a new session\n        if (!curRecognizer || (curRecognizer && curRecognizer.state & STATE_RECOGNIZED)) {\n            curRecognizer = session.curRecognizer = null;\n        }\n\n        var i = 0;\n        while (i < recognizers.length) {\n            recognizer = recognizers[i];\n\n            // find out if we are allowed try to recognize the input for this one.\n            // 1.   allow if the session is NOT forced stopped (see the .stop() method)\n            // 2.   allow if we still haven't recognized a gesture in this session, or the this recognizer is the one\n            //      that is being recognized.\n            // 3.   allow if the recognizer is allowed to run simultaneous with the current recognized recognizer.\n            //      this can be setup with the `recognizeWith()` method on the recognizer.\n            if (session.stopped !== FORCED_STOP && ( // 1\n                    !curRecognizer || recognizer == curRecognizer || // 2\n                    recognizer.canRecognizeWith(curRecognizer))) { // 3\n                recognizer.recognize(inputData);\n            } else {\n                recognizer.reset();\n            }\n\n            // if the recognizer has been recognizing the input as a valid gesture, we want to store this one as the\n            // current active recognizer. but only if we don't already have an active recognizer\n            if (!curRecognizer && recognizer.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED)) {\n                curRecognizer = session.curRecognizer = recognizer;\n            }\n            i++;\n        }\n    },\n\n    /**\n     * get a recognizer by its event name.\n     * @param {Recognizer|String} recognizer\n     * @returns {Recognizer|Null}\n     */\n    get: function(recognizer) {\n        if (recognizer instanceof Recognizer) {\n            return recognizer;\n        }\n\n        var recognizers = this.recognizers;\n        for (var i = 0; i < recognizers.length; i++) {\n            if (recognizers[i].options.event == recognizer) {\n                return recognizers[i];\n            }\n        }\n        return null;\n    },\n\n    /**\n     * add a recognizer to the manager\n     * existing recognizers with the same event name will be removed\n     * @param {Recognizer} recognizer\n     * @returns {Recognizer|Manager}\n     */\n    add: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'add', this)) {\n            return this;\n        }\n\n        // remove existing\n        var existing = this.get(recognizer.options.event);\n        if (existing) {\n            this.remove(existing);\n        }\n\n        this.recognizers.push(recognizer);\n        recognizer.manager = this;\n\n        this.touchAction.update();\n        return recognizer;\n    },\n\n    /**\n     * remove a recognizer by name or instance\n     * @param {Recognizer|String} recognizer\n     * @returns {Manager}\n     */\n    remove: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'remove', this)) {\n            return this;\n        }\n\n        recognizer = this.get(recognizer);\n\n        // let's make sure this recognizer exists\n        if (recognizer) {\n            var recognizers = this.recognizers;\n            var index = inArray(recognizers, recognizer);\n\n            if (index !== -1) {\n                recognizers.splice(index, 1);\n                this.touchAction.update();\n            }\n        }\n\n        return this;\n    },\n\n    /**\n     * bind event\n     * @param {String} events\n     * @param {Function} handler\n     * @returns {EventEmitter} this\n     */\n    on: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n        if (handler === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            handlers[event] = handlers[event] || [];\n            handlers[event].push(handler);\n        });\n        return this;\n    },\n\n    /**\n     * unbind event, leave emit blank to remove all handlers\n     * @param {String} events\n     * @param {Function} [handler]\n     * @returns {EventEmitter} this\n     */\n    off: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            if (!handler) {\n                delete handlers[event];\n            } else {\n                handlers[event] && handlers[event].splice(inArray(handlers[event], handler), 1);\n            }\n        });\n        return this;\n    },\n\n    /**\n     * emit event to the listeners\n     * @param {String} event\n     * @param {Object} data\n     */\n    emit: function(event, data) {\n        // we also want to trigger dom events\n        if (this.options.domEvents) {\n            triggerDomEvent(event, data);\n        }\n\n        // no handlers, so skip it all\n        var handlers = this.handlers[event] && this.handlers[event].slice();\n        if (!handlers || !handlers.length) {\n            return;\n        }\n\n        data.type = event;\n        data.preventDefault = function() {\n            data.srcEvent.preventDefault();\n        };\n\n        var i = 0;\n        while (i < handlers.length) {\n            handlers[i](data);\n            i++;\n        }\n    },\n\n    /**\n     * destroy the manager and unbinds all events\n     * it doesn't unbind dom events, that is the user own responsibility\n     */\n    destroy: function() {\n        this.element && toggleCssProps(this, false);\n\n        this.handlers = {};\n        this.session = {};\n        this.input.destroy();\n        this.element = null;\n    }\n};\n\n/**\n * add/remove the css properties as defined in manager.options.cssProps\n * @param {Manager} manager\n * @param {Boolean} add\n */\nfunction toggleCssProps(manager, add) {\n    var element = manager.element;\n    if (!element.style) {\n        return;\n    }\n    var prop;\n    each(manager.options.cssProps, function(value, name) {\n        prop = prefixed(element.style, name);\n        if (add) {\n            manager.oldCssProps[prop] = element.style[prop];\n            element.style[prop] = value;\n        } else {\n            element.style[prop] = manager.oldCssProps[prop] || '';\n        }\n    });\n    if (!add) {\n        manager.oldCssProps = {};\n    }\n}\n\n/**\n * trigger dom event\n * @param {String} event\n * @param {Object} data\n */\nfunction triggerDomEvent(event, data) {\n    var gestureEvent = document.createEvent('Event');\n    gestureEvent.initEvent(event, true, true);\n    gestureEvent.gesture = data;\n    data.target.dispatchEvent(gestureEvent);\n}\n\nassign(Hammer, {\n    INPUT_START: INPUT_START,\n    INPUT_MOVE: INPUT_MOVE,\n    INPUT_END: INPUT_END,\n    INPUT_CANCEL: INPUT_CANCEL,\n\n    STATE_POSSIBLE: STATE_POSSIBLE,\n    STATE_BEGAN: STATE_BEGAN,\n    STATE_CHANGED: STATE_CHANGED,\n    STATE_ENDED: STATE_ENDED,\n    STATE_RECOGNIZED: STATE_RECOGNIZED,\n    STATE_CANCELLED: STATE_CANCELLED,\n    STATE_FAILED: STATE_FAILED,\n\n    DIRECTION_NONE: DIRECTION_NONE,\n    DIRECTION_LEFT: DIRECTION_LEFT,\n    DIRECTION_RIGHT: DIRECTION_RIGHT,\n    DIRECTION_UP: DIRECTION_UP,\n    DIRECTION_DOWN: DIRECTION_DOWN,\n    DIRECTION_HORIZONTAL: DIRECTION_HORIZONTAL,\n    DIRECTION_VERTICAL: DIRECTION_VERTICAL,\n    DIRECTION_ALL: DIRECTION_ALL,\n\n    Manager: Manager,\n    Input: Input,\n    TouchAction: TouchAction,\n\n    TouchInput: TouchInput,\n    MouseInput: MouseInput,\n    PointerEventInput: PointerEventInput,\n    TouchMouseInput: TouchMouseInput,\n    SingleTouchInput: SingleTouchInput,\n\n    Recognizer: Recognizer,\n    AttrRecognizer: AttrRecognizer,\n    Tap: TapRecognizer,\n    Pan: PanRecognizer,\n    Swipe: SwipeRecognizer,\n    Pinch: PinchRecognizer,\n    Rotate: RotateRecognizer,\n    Press: PressRecognizer,\n\n    on: addEventListeners,\n    off: removeEventListeners,\n    each: each,\n    merge: merge,\n    extend: extend,\n    assign: assign,\n    inherit: inherit,\n    bindFn: bindFn,\n    prefixed: prefixed\n});\n\n// this prevents errors when Hammer is loaded in the presence of an AMD\n//  style loader but by script tag, not by the loader.\nvar freeGlobal = (typeof window !== 'undefined' ? window : (typeof self !== 'undefined' ? self : {})); // jshint ignore:line\nfreeGlobal.Hammer = Hammer;\n\nif (typeof define === 'function' && define.amd) {\n    define(function() {\n        return Hammer;\n    });\n} else if (typeof module != 'undefined' && module.exports) {\n    module.exports = Hammer;\n} else {\n    window[exportName] = Hammer;\n}\n\n})(window, document, 'Hammer');\n","/**\n * This file contains overrides the default\n * hammer.js functions to add our own utility\n */\n/* eslint-disable */\n/* Hammer.js constants */\nconst INPUT_START = 1;\nconst INPUT_MOVE = 2;\nconst INPUT_END = 4;\nconst MOUSE_INPUT_MAP = {\n    mousedown: INPUT_START,\n    mousemove: INPUT_MOVE,\n    mouseup: INPUT_END\n};\n/**\n * Helper function that returns true if any element in an array meets given criteria.\n * Because older browsers do not support `Array.prototype.some`\n * @params array {Array}\n * @params predict {Function}\n */\nfunction some(array, predict) {\n    for (let i = 0; i < array.length; i++) {\n        if (predict(array[i])) {\n            return true;\n        }\n    }\n    return false;\n}\n/* eslint-disable no-invalid-this */\nexport function enhancePointerEventInput(PointerEventInput) {\n    const oldHandler = PointerEventInput.prototype.handler;\n    // overrides PointerEventInput.handler to accept right mouse button\n    PointerEventInput.prototype.handler = function handler(ev) {\n        const store = this.store;\n        // Allow non-left mouse buttons through\n        if (ev.button > 0 && ev.type === 'pointerdown') {\n            if (!some(store, e => e.pointerId === ev.pointerId)) {\n                store.push(ev);\n            }\n        }\n        oldHandler.call(this, ev);\n    };\n}\n// overrides MouseInput.handler to accept right mouse button\nexport function enhanceMouseInput(MouseInput) {\n    MouseInput.prototype.handler = function handler(ev) {\n        let eventType = MOUSE_INPUT_MAP[ev.type];\n        // on start we want to have the mouse button down\n        if (eventType & INPUT_START && ev.button >= 0) {\n            this.pressed = true;\n        }\n        if (eventType & INPUT_MOVE && ev.which === 0) {\n            eventType = INPUT_END;\n        }\n        // mouse must be down\n        if (!this.pressed) {\n            return;\n        }\n        if (eventType & INPUT_END) {\n            this.pressed = false;\n        }\n        this.callback(this.manager, eventType, {\n            pointers: [ev],\n            changedPointers: [ev],\n            pointerType: 'mouse',\n            srcEvent: ev\n        });\n    };\n}\n//# sourceMappingURL=hammer-overrides.js.map","import * as hammerjs from 'hammerjs';\nimport { enhancePointerEventInput, enhanceMouseInput } from './hammer-overrides';\nenhancePointerEventInput(hammerjs.PointerEventInput);\nenhanceMouseInput(hammerjs.MouseInput);\nexport const Manager = hammerjs.Manager;\nexport default hammerjs;\n//# sourceMappingURL=hammer.browser.js.map","export default class Input {\n    constructor(element, callback, options) {\n        this.element = element;\n        this.callback = callback;\n        this.options = { enable: true, ...options };\n    }\n}\n//# sourceMappingURL=input.js.map","import Hammer from './utils/hammer';\n// This module contains constants that must be conditionally required\n// due to `window`/`document` references downstream.\nexport const RECOGNIZERS = Hammer\n    ? [\n        [Hammer.Pan, { event: 'tripan', pointers: 3, threshold: 0, enable: false }],\n        [Hammer.Rotate, { enable: false }],\n        [Hammer.Pinch, { enable: false }],\n        [Hammer.Swipe, { enable: false }],\n        [Hammer.Pan, { threshold: 0, enable: false }],\n        [Hammer.Press, { enable: false }],\n        [Hammer.Tap, { event: 'doubletap', taps: 2, enable: false }],\n        // TODO - rename to 'tap' and 'singletap' in the next major release\n        [Hammer.Tap, { event: 'anytap', enable: false }],\n        [Hammer.Tap, { enable: false }]\n    ]\n    : null;\n// Recognize the following gestures even if a given recognizer succeeds\nexport const RECOGNIZER_COMPATIBLE_MAP = {\n    tripan: ['rotate', 'pinch', 'pan'],\n    rotate: ['pinch'],\n    pinch: ['pan'],\n    pan: ['press', 'doubletap', 'anytap', 'tap'],\n    doubletap: ['anytap'],\n    anytap: ['tap']\n};\n// Recognize the folling gestures only if a given recognizer fails\nexport const RECOGNIZER_FALLBACK_MAP = {\n    doubletap: ['tap']\n};\n/**\n * Only one set of basic input events will be fired by Hammer.js:\n * either pointer, touch, or mouse, depending on system support.\n * In order to enable an application to be agnostic of system support,\n * alias basic input events into \"classes\" of events: down, move, and up.\n * See `_onBasicInput()` for usage of these aliases.\n */\nexport const BASIC_EVENT_ALIASES = {\n    pointerdown: 'pointerdown',\n    pointermove: 'pointermove',\n    pointerup: 'pointerup',\n    touchstart: 'pointerdown',\n    touchmove: 'pointermove',\n    touchend: 'pointerup',\n    mousedown: 'pointerdown',\n    mousemove: 'pointermove',\n    mouseup: 'pointerup'\n};\nexport const INPUT_EVENT_TYPES = {\n    KEY_EVENTS: ['keydown', 'keyup'],\n    MOUSE_EVENTS: ['mousedown', 'mousemove', 'mouseup', 'mouseover', 'mouseout', 'mouseleave'],\n    WHEEL_EVENTS: [\n        // Chrome, Safari\n        'wheel',\n        // IE\n        'mousewheel'\n    ]\n};\n/**\n * \"Gestural\" events are those that have semantic meaning beyond the basic input event,\n * e.g. a click or tap is a sequence of `down` and `up` events with no `move` event in between.\n * Hammer.js handles these with its Recognizer system;\n * this block maps event names to the Recognizers required to detect the events.\n */\nexport const EVENT_RECOGNIZER_MAP = {\n    tap: 'tap',\n    anytap: 'anytap',\n    doubletap: 'doubletap',\n    press: 'press',\n    pinch: 'pinch',\n    pinchin: 'pinch',\n    pinchout: 'pinch',\n    pinchstart: 'pinch',\n    pinchmove: 'pinch',\n    pinchend: 'pinch',\n    pinchcancel: 'pinch',\n    rotate: 'rotate',\n    rotatestart: 'rotate',\n    rotatemove: 'rotate',\n    rotateend: 'rotate',\n    rotatecancel: 'rotate',\n    tripan: 'tripan',\n    tripanstart: 'tripan',\n    tripanmove: 'tripan',\n    tripanup: 'tripan',\n    tripandown: 'tripan',\n    tripanleft: 'tripan',\n    tripanright: 'tripan',\n    tripanend: 'tripan',\n    tripancancel: 'tripan',\n    pan: 'pan',\n    panstart: 'pan',\n    panmove: 'pan',\n    panup: 'pan',\n    pandown: 'pan',\n    panleft: 'pan',\n    panright: 'pan',\n    panend: 'pan',\n    pancancel: 'pan',\n    swipe: 'swipe',\n    swipeleft: 'swipe',\n    swiperight: 'swipe',\n    swipeup: 'swipe',\n    swipedown: 'swipe'\n};\n/**\n * Map gestural events typically provided by browsers\n * that are not reported in 'hammer.input' events\n * to corresponding Hammer.js gestures.\n */\nexport const GESTURE_EVENT_ALIASES = {\n    click: 'tap',\n    anyclick: 'anytap',\n    dblclick: 'doubletap',\n    mousedown: 'pointerdown',\n    mousemove: 'pointermove',\n    mouseup: 'pointerup',\n    mouseover: 'pointerover',\n    mouseout: 'pointerout',\n    mouseleave: 'pointerleave'\n};\n//# sourceMappingURL=constants.js.map","// Purpose: include this in your module to avoids adding dependencies on\n// micro modules like 'global'\n/* global window, global, document, navigator */\nexport const userAgent = typeof navigator !== 'undefined' && navigator.userAgent ? navigator.userAgent.toLowerCase() : '';\nconst window_ = typeof window !== 'undefined' ? window : global;\nconst global_ = typeof global !== 'undefined' ? global : window;\nconst document_ = typeof document !== 'undefined' ? document : {};\nexport { window_ as window, global_ as global, document_ as document };\n/*\n * Detect whether passive option is supported by the current browser.\n * https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\n   #Safely_detecting_option_support\n */\nlet passiveSupported = false;\n/* eslint-disable accessor-pairs, no-empty */\ntry {\n    const options = {\n        // This function will be called when the browser\n        // attempts to access the passive property.\n        get passive() {\n            passiveSupported = true;\n            return true;\n        }\n    };\n    window_.addEventListener('test', null, options);\n    window_.removeEventListener('test', null);\n}\ncatch (err) {\n    passiveSupported = false;\n}\nexport { passiveSupported };\n//# sourceMappingURL=globals.js.map","import Input from './input';\nimport { INPUT_EVENT_TYPES } from '../constants';\nimport { window, userAgent, passiveSupported } from '../utils/globals';\nconst firefox = userAgent.indexOf('firefox') !== -1;\nconst { WHEEL_EVENTS } = INPUT_EVENT_TYPES;\nconst EVENT_TYPE = 'wheel';\n// Constants for normalizing input delta\nconst WHEEL_DELTA_MAGIC_SCALER = 4.000244140625;\nconst WHEEL_DELTA_PER_LINE = 40;\n// Slow down zoom if shift key is held for more precise zooming\nconst SHIFT_MULTIPLIER = 0.25;\nexport default class WheelInput extends Input {\n    constructor(element, callback, options) {\n        super(element, callback, options);\n        /* eslint-disable complexity, max-statements */\n        this.handleEvent = (event) => {\n            if (!this.options.enable) {\n                return;\n            }\n            let value = event.deltaY;\n            if (window.WheelEvent) {\n                // Firefox doubles the values on retina screens...\n                if (firefox && event.deltaMode === window.WheelEvent.DOM_DELTA_PIXEL) {\n                    value /= window.devicePixelRatio;\n                }\n                if (event.deltaMode === window.WheelEvent.DOM_DELTA_LINE) {\n                    value *= WHEEL_DELTA_PER_LINE;\n                }\n            }\n            if (value !== 0 && value % WHEEL_DELTA_MAGIC_SCALER === 0) {\n                // This one is definitely a mouse wheel event.\n                // Normalize this value to match trackpad.\n                value = Math.floor(value / WHEEL_DELTA_MAGIC_SCALER);\n            }\n            if (event.shiftKey && value) {\n                value = value * SHIFT_MULTIPLIER;\n            }\n            this.callback({\n                type: EVENT_TYPE,\n                center: {\n                    x: event.clientX,\n                    y: event.clientY\n                },\n                delta: -value,\n                srcEvent: event,\n                pointerType: 'mouse',\n                target: event.target\n            });\n        };\n        this.events = (this.options.events || []).concat(WHEEL_EVENTS);\n        this.events.forEach(event => element.addEventListener(event, this.handleEvent, passiveSupported ? { passive: false } : false));\n    }\n    destroy() {\n        this.events.forEach(event => this.element.removeEventListener(event, this.handleEvent));\n    }\n    /**\n     * Enable this input (begin processing events)\n     * if the specified event type is among those handled by this input.\n     */\n    enableEventType(eventType, enabled) {\n        if (eventType === EVENT_TYPE) {\n            this.options.enable = enabled;\n        }\n    }\n}\n//# sourceMappingURL=wheel-input.js.map","import Input from './input';\nimport { INPUT_EVENT_TYPES } from '../constants';\nconst { MOUSE_EVENTS } = INPUT_EVENT_TYPES;\nconst MOVE_EVENT_TYPE = 'pointermove';\nconst OVER_EVENT_TYPE = 'pointerover';\nconst OUT_EVENT_TYPE = 'pointerout';\nconst ENTER_EVENT_TYPE = 'pointerenter';\nconst LEAVE_EVENT_TYPE = 'pointerleave';\n/**\n * Hammer.js swallows 'move' events (for pointer/touch/mouse)\n * when the pointer is not down. This class sets up a handler\n * specifically for these events to work around this limitation.\n * Note that this could be extended to more intelligently handle\n * move events across input types, e.g. storing multiple simultaneous\n * pointer/touch events, calculating speed/direction, etc.\n */\nexport default class MoveInput extends Input {\n    constructor(element, callback, options) {\n        super(element, callback, options);\n        this.handleEvent = (event) => {\n            this.handleOverEvent(event);\n            this.handleOutEvent(event);\n            this.handleEnterEvent(event);\n            this.handleLeaveEvent(event);\n            this.handleMoveEvent(event);\n        };\n        this.pressed = false;\n        const { enable } = this.options;\n        this.enableMoveEvent = enable;\n        this.enableLeaveEvent = enable;\n        this.enableEnterEvent = enable;\n        this.enableOutEvent = enable;\n        this.enableOverEvent = enable;\n        this.events = (this.options.events || []).concat(MOUSE_EVENTS);\n        this.events.forEach(event => element.addEventListener(event, this.handleEvent));\n    }\n    destroy() {\n        this.events.forEach(event => this.element.removeEventListener(event, this.handleEvent));\n    }\n    /**\n     * Enable this input (begin processing events)\n     * if the specified event type is among those handled by this input.\n     */\n    enableEventType(eventType, enabled) {\n        if (eventType === MOVE_EVENT_TYPE) {\n            this.enableMoveEvent = enabled;\n        }\n        if (eventType === OVER_EVENT_TYPE) {\n            this.enableOverEvent = enabled;\n        }\n        if (eventType === OUT_EVENT_TYPE) {\n            this.enableOutEvent = enabled;\n        }\n        if (eventType === ENTER_EVENT_TYPE) {\n            this.enableEnterEvent = enabled;\n        }\n        if (eventType === LEAVE_EVENT_TYPE) {\n            this.enableLeaveEvent = enabled;\n        }\n    }\n    handleOverEvent(event) {\n        if (this.enableOverEvent) {\n            if (event.type === 'mouseover') {\n                this._emit(OVER_EVENT_TYPE, event);\n            }\n        }\n    }\n    handleOutEvent(event) {\n        if (this.enableOutEvent) {\n            if (event.type === 'mouseout') {\n                this._emit(OUT_EVENT_TYPE, event);\n            }\n        }\n    }\n    handleEnterEvent(event) {\n        if (this.enableEnterEvent) {\n            if (event.type === 'mouseenter') {\n                this._emit(ENTER_EVENT_TYPE, event);\n            }\n        }\n    }\n    handleLeaveEvent(event) {\n        if (this.enableLeaveEvent) {\n            if (event.type === 'mouseleave') {\n                this._emit(LEAVE_EVENT_TYPE, event);\n            }\n        }\n    }\n    handleMoveEvent(event) {\n        if (this.enableMoveEvent) {\n            switch (event.type) {\n                case 'mousedown':\n                    if (event.button >= 0) {\n                        // Button is down\n                        this.pressed = true;\n                    }\n                    break;\n                case 'mousemove':\n                    // Move events use `which` to track the button being pressed\n                    if (event.which === 0) {\n                        // Button is not down\n                        this.pressed = false;\n                    }\n                    if (!this.pressed) {\n                        // Drag events are emitted by hammer already\n                        // we just need to emit the move event on hover\n                        this._emit(MOVE_EVENT_TYPE, event);\n                    }\n                    break;\n                case 'mouseup':\n                    this.pressed = false;\n                    break;\n                default:\n            }\n        }\n    }\n    _emit(type, event) {\n        this.callback({\n            type,\n            center: {\n                x: event.clientX,\n                y: event.clientY\n            },\n            srcEvent: event,\n            pointerType: 'mouse',\n            target: event.target\n        });\n    }\n}\n//# sourceMappingURL=move-input.js.map","import Input from './input';\nimport { INPUT_EVENT_TYPES } from '../constants';\nconst { KEY_EVENTS } = INPUT_EVENT_TYPES;\nconst DOWN_EVENT_TYPE = 'keydown';\nconst UP_EVENT_TYPE = 'keyup';\nexport default class KeyInput extends Input {\n    constructor(element, callback, options) {\n        super(element, callback, options);\n        this.handleEvent = (event) => {\n            // Ignore if focused on text input\n            const targetElement = (event.target || event.srcElement);\n            if ((targetElement.tagName === 'INPUT' && targetElement.type === 'text') ||\n                targetElement.tagName === 'TEXTAREA') {\n                return;\n            }\n            if (this.enableDownEvent && event.type === 'keydown') {\n                this.callback({\n                    type: DOWN_EVENT_TYPE,\n                    srcEvent: event,\n                    key: event.key,\n                    target: event.target\n                });\n            }\n            if (this.enableUpEvent && event.type === 'keyup') {\n                this.callback({\n                    type: UP_EVENT_TYPE,\n                    srcEvent: event,\n                    key: event.key,\n                    target: event.target\n                });\n            }\n        };\n        this.enableDownEvent = this.options.enable;\n        this.enableUpEvent = this.options.enable;\n        this.events = (this.options.events || []).concat(KEY_EVENTS);\n        element.tabIndex = this.options.tabIndex || 0;\n        element.style.outline = 'none';\n        this.events.forEach(event => element.addEventListener(event, this.handleEvent));\n    }\n    destroy() {\n        this.events.forEach(event => this.element.removeEventListener(event, this.handleEvent));\n    }\n    /**\n     * Enable this input (begin processing events)\n     * if the specified event type is among those handled by this input.\n     */\n    enableEventType(eventType, enabled) {\n        if (eventType === DOWN_EVENT_TYPE) {\n            this.enableDownEvent = enabled;\n        }\n        if (eventType === UP_EVENT_TYPE) {\n            this.enableUpEvent = enabled;\n        }\n    }\n}\n//# sourceMappingURL=key-input.js.map","import Input from './input';\nconst EVENT_TYPE = 'contextmenu';\nexport default class ContextmenuInput extends Input {\n    constructor(element, callback, options) {\n        super(element, callback, options);\n        this.handleEvent = (event) => {\n            if (!this.options.enable) {\n                return;\n            }\n            this.callback({\n                type: EVENT_TYPE,\n                center: {\n                    x: event.clientX,\n                    y: event.clientY\n                },\n                srcEvent: event,\n                pointerType: 'mouse',\n                target: event.target\n            });\n        };\n        element.addEventListener('contextmenu', this.handleEvent);\n    }\n    destroy() {\n        this.element.removeEventListener('contextmenu', this.handleEvent);\n    }\n    /**\n     * Enable this input (begin processing events)\n     * if the specified event type is among those handled by this input.\n     */\n    enableEventType(eventType, enabled) {\n        if (eventType === EVENT_TYPE) {\n            this.options.enable = enabled;\n        }\n    }\n}\n//# sourceMappingURL=contextmenu-input.js.map","/* Constants */\nconst DOWN_EVENT = 1;\nconst MOVE_EVENT = 2;\nconst UP_EVENT = 4;\nconst MOUSE_EVENTS = {\n    pointerdown: DOWN_EVENT,\n    pointermove: MOVE_EVENT,\n    pointerup: UP_EVENT,\n    mousedown: DOWN_EVENT,\n    mousemove: MOVE_EVENT,\n    mouseup: UP_EVENT\n};\n// MouseEvent.which https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/which\nconst MOUSE_EVENT_WHICH_LEFT = 1;\nconst MOUSE_EVENT_WHICH_MIDDLE = 2;\nconst MOUSE_EVENT_WHICH_RIGHT = 3;\n// MouseEvent.button https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/button\nconst MOUSE_EVENT_BUTTON_LEFT = 0;\nconst MOUSE_EVENT_BUTTON_MIDDLE = 1;\nconst MOUSE_EVENT_BUTTON_RIGHT = 2;\n// MouseEvent.buttons https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/buttons\nconst MOUSE_EVENT_BUTTONS_LEFT_MASK = 1;\nconst MOUSE_EVENT_BUTTONS_RIGHT_MASK = 2;\nconst MOUSE_EVENT_BUTTONS_MIDDLE_MASK = 4;\n/**\n * Extract the involved mouse button\n */\nexport function whichButtons(event) {\n    const eventType = MOUSE_EVENTS[event.srcEvent.type];\n    if (!eventType) {\n        // Not a mouse evet\n        return null;\n    }\n    const { buttons, button, which } = event.srcEvent;\n    let leftButton = false;\n    let middleButton = false;\n    let rightButton = false;\n    if (\n    // button is up, need to find out which one was pressed before\n    eventType === UP_EVENT ||\n        // moving but does not support `buttons` API\n        (eventType === MOVE_EVENT && !Number.isFinite(buttons))) {\n        leftButton = which === MOUSE_EVENT_WHICH_LEFT;\n        middleButton = which === MOUSE_EVENT_WHICH_MIDDLE;\n        rightButton = which === MOUSE_EVENT_WHICH_RIGHT;\n    }\n    else if (eventType === MOVE_EVENT) {\n        leftButton = Boolean(buttons & MOUSE_EVENT_BUTTONS_LEFT_MASK);\n        middleButton = Boolean(buttons & MOUSE_EVENT_BUTTONS_MIDDLE_MASK);\n        rightButton = Boolean(buttons & MOUSE_EVENT_BUTTONS_RIGHT_MASK);\n    }\n    else if (eventType === DOWN_EVENT) {\n        leftButton = button === MOUSE_EVENT_BUTTON_LEFT;\n        middleButton = button === MOUSE_EVENT_BUTTON_MIDDLE;\n        rightButton = button === MOUSE_EVENT_BUTTON_RIGHT;\n    }\n    return { leftButton, middleButton, rightButton };\n}\n/**\n * Calculate event position relative to the root element\n */\nexport function getOffsetPosition(event, rootElement) {\n    const center = event.center;\n    // `center` is a hammer.js event property\n    if (!center) {\n        // Not a gestural event\n        return null;\n    }\n    const rect = rootElement.getBoundingClientRect();\n    // Fix scale for map affected by a CSS transform.\n    // See https://stackoverflow.com/a/26893663/3528533\n    const scaleX = rect.width / rootElement.offsetWidth || 1;\n    const scaleY = rect.height / rootElement.offsetHeight || 1;\n    // Calculate center relative to the root element\n    const offsetCenter = {\n        x: (center.x - rect.left - rootElement.clientLeft) / scaleX,\n        y: (center.y - rect.top - rootElement.clientTop) / scaleY\n    };\n    return { center, offsetCenter };\n}\n//# sourceMappingURL=event-utils.js.map","import { whichButtons, getOffsetPosition } from './event-utils';\nconst DEFAULT_OPTIONS = {\n    srcElement: 'root',\n    priority: 0\n};\nexport default class EventRegistrar {\n    constructor(eventManager) {\n        /**\n         * Handles hammerjs event\n         */\n        this.handleEvent = (event) => {\n            if (this.isEmpty()) {\n                return;\n            }\n            const mjolnirEvent = this._normalizeEvent(event);\n            let target = event.srcEvent.target;\n            while (target && target !== mjolnirEvent.rootElement) {\n                this._emit(mjolnirEvent, target);\n                if (mjolnirEvent.handled) {\n                    return;\n                }\n                target = target.parentNode;\n            }\n            this._emit(mjolnirEvent, 'root');\n        };\n        this.eventManager = eventManager;\n        this.handlers = [];\n        // Element -> handler map\n        this.handlersByElement = new Map();\n        this._active = false;\n    }\n    // Returns true if there are no non-passive handlers\n    isEmpty() {\n        return !this._active;\n    }\n    add(type, handler, options, once = false, passive = false) {\n        const { handlers, handlersByElement } = this;\n        let opts = DEFAULT_OPTIONS;\n        if (typeof options === 'string' || (options && options.addEventListener)) {\n            // is DOM element, backward compatibility\n            // @ts-ignore\n            opts = { ...DEFAULT_OPTIONS, srcElement: options };\n        }\n        else if (options) {\n            opts = { ...DEFAULT_OPTIONS, ...options };\n        }\n        let entries = handlersByElement.get(opts.srcElement);\n        if (!entries) {\n            entries = [];\n            handlersByElement.set(opts.srcElement, entries);\n        }\n        const entry = {\n            type,\n            handler,\n            srcElement: opts.srcElement,\n            priority: opts.priority\n        };\n        if (once) {\n            entry.once = true;\n        }\n        if (passive) {\n            entry.passive = true;\n        }\n        handlers.push(entry);\n        this._active = this._active || !entry.passive;\n        // Sort handlers by descending priority\n        // Handlers with the same priority are excuted in the order of registration\n        let insertPosition = entries.length - 1;\n        while (insertPosition >= 0) {\n            if (entries[insertPosition].priority >= entry.priority) {\n                break;\n            }\n            insertPosition--;\n        }\n        entries.splice(insertPosition + 1, 0, entry);\n    }\n    remove(type, handler) {\n        const { handlers, handlersByElement } = this;\n        for (let i = handlers.length - 1; i >= 0; i--) {\n            const entry = handlers[i];\n            if (entry.type === type && entry.handler === handler) {\n                handlers.splice(i, 1);\n                const entries = handlersByElement.get(entry.srcElement);\n                entries.splice(entries.indexOf(entry), 1);\n                if (entries.length === 0) {\n                    handlersByElement.delete(entry.srcElement);\n                }\n            }\n        }\n        this._active = handlers.some(entry => !entry.passive);\n    }\n    /**\n     * Invoke handlers on a particular element\n     */\n    _emit(event, srcElement) {\n        const entries = this.handlersByElement.get(srcElement);\n        if (entries) {\n            let immediatePropagationStopped = false;\n            // Prevents the current event from bubbling up\n            const stopPropagation = () => {\n                event.handled = true;\n            };\n            // Prevent any remaining listeners from being called\n            const stopImmediatePropagation = () => {\n                event.handled = true;\n                immediatePropagationStopped = true;\n            };\n            const entriesToRemove = [];\n            for (let i = 0; i < entries.length; i++) {\n                const { type, handler, once } = entries[i];\n                handler({\n                    ...event,\n                    // @ts-ignore\n                    type,\n                    stopPropagation,\n                    stopImmediatePropagation\n                });\n                if (once) {\n                    entriesToRemove.push(entries[i]);\n                }\n                if (immediatePropagationStopped) {\n                    break;\n                }\n            }\n            for (let i = 0; i < entriesToRemove.length; i++) {\n                const { type, handler } = entriesToRemove[i];\n                this.remove(type, handler);\n            }\n        }\n    }\n    /**\n     * Normalizes hammerjs and custom events to have predictable fields.\n     */\n    _normalizeEvent(event) {\n        const rootElement = this.eventManager.getElement();\n        return {\n            ...event,\n            ...whichButtons(event),\n            ...getOffsetPosition(event, rootElement),\n            preventDefault: () => {\n                event.srcEvent.preventDefault();\n            },\n            stopImmediatePropagation: null,\n            stopPropagation: null,\n            handled: false,\n            rootElement\n        };\n    }\n}\n//# sourceMappingURL=event-registrar.js.map","import { Manager } from './utils/hammer';\nimport WheelInput from './inputs/wheel-input';\nimport MoveInput from './inputs/move-input';\nimport KeyInput from './inputs/key-input';\nimport ContextmenuInput from './inputs/contextmenu-input';\nimport EventRegistrar from './utils/event-registrar';\nimport { BASIC_EVENT_ALIASES, EVENT_RECOGNIZER_MAP, GESTURE_EVENT_ALIASES, RECOGNIZERS, RECOGNIZER_COMPATIBLE_MAP, RECOGNIZER_FALLBACK_MAP } from './constants';\nconst DEFAULT_OPTIONS = {\n    // event handlers\n    events: null,\n    // custom recognizers\n    recognizers: null,\n    recognizerOptions: {},\n    // Manager class\n    Manager,\n    // allow browser default touch action\n    // https://github.com/uber/react-map-gl/issues/506\n    touchAction: 'none',\n    tabIndex: 0\n};\n// Unified API for subscribing to events about both\n// basic input events (e.g. 'mousemove', 'touchstart', 'wheel')\n// and gestural input (e.g. 'click', 'tap', 'panstart').\n// Delegates gesture related event registration and handling to Hammer.js.\nexport default class EventManager {\n    constructor(element = null, options) {\n        /**\n         * Handle basic events using the 'hammer.input' Hammer.js API:\n         * Before running Recognizers, Hammer emits a 'hammer.input' event\n         * with the basic event info. This function emits all basic events\n         * aliased to the \"class\" of event received.\n         * See constants.BASIC_EVENT_CLASSES basic event class definitions.\n         */\n        this._onBasicInput = (event) => {\n            const { srcEvent } = event;\n            const alias = BASIC_EVENT_ALIASES[srcEvent.type];\n            if (alias) {\n                // fire all events aliased to srcEvent.type\n                this.manager.emit(alias, event);\n            }\n        };\n        /**\n         * Handle events not supported by Hammer.js,\n         * and pipe back out through same (Hammer) channel used by other events.\n         */\n        this._onOtherEvent = (event) => {\n            // console.log('onotherevent', event.type, event)\n            this.manager.emit(event.type, event);\n        };\n        this.options = { ...DEFAULT_OPTIONS, ...options };\n        this.events = new Map();\n        this.setElement(element);\n        // Register all passed events.\n        const { events } = this.options;\n        if (events) {\n            this.on(events);\n        }\n    }\n    getElement() {\n        return this.element;\n    }\n    setElement(element) {\n        if (this.element) {\n            // unregister all events\n            this.destroy();\n        }\n        this.element = element;\n        if (!element) {\n            return;\n        }\n        const { options } = this;\n        const ManagerClass = options.Manager;\n        this.manager = new ManagerClass(element, {\n            touchAction: options.touchAction,\n            recognizers: options.recognizers || RECOGNIZERS\n        }).on('hammer.input', this._onBasicInput);\n        if (!options.recognizers) {\n            // Set default recognize withs\n            // http://hammerjs.github.io/recognize-with/\n            Object.keys(RECOGNIZER_COMPATIBLE_MAP).forEach(name => {\n                const recognizer = this.manager.get(name);\n                if (recognizer) {\n                    RECOGNIZER_COMPATIBLE_MAP[name].forEach(otherName => {\n                        recognizer.recognizeWith(otherName);\n                    });\n                }\n            });\n        }\n        // Set recognizer options\n        for (const recognizerName in options.recognizerOptions) {\n            const recognizer = this.manager.get(recognizerName);\n            if (recognizer) {\n                const recognizerOption = options.recognizerOptions[recognizerName];\n                // `enable` is managed by the event registrations\n                delete recognizerOption.enable;\n                recognizer.set(recognizerOption);\n            }\n        }\n        // Handle events not handled by Hammer.js:\n        // - mouse wheel\n        // - pointer/touch/mouse move\n        this.wheelInput = new WheelInput(element, this._onOtherEvent, {\n            enable: false\n        });\n        this.moveInput = new MoveInput(element, this._onOtherEvent, {\n            enable: false\n        });\n        this.keyInput = new KeyInput(element, this._onOtherEvent, {\n            enable: false,\n            tabIndex: options.tabIndex\n        });\n        this.contextmenuInput = new ContextmenuInput(element, this._onOtherEvent, {\n            enable: false\n        });\n        // Register all existing events\n        for (const [eventAlias, eventRegistrar] of this.events) {\n            if (!eventRegistrar.isEmpty()) {\n                // Enable recognizer for this event.\n                this._toggleRecognizer(eventRegistrar.recognizerName, true);\n                this.manager.on(eventAlias, eventRegistrar.handleEvent);\n            }\n        }\n    }\n    // Tear down internal event management implementations.\n    destroy() {\n        if (this.element) {\n            // wheelInput etc. are created in setElement() and therefore\n            // cannot exist if there is no element\n            this.wheelInput.destroy();\n            this.moveInput.destroy();\n            this.keyInput.destroy();\n            this.contextmenuInput.destroy();\n            this.manager.destroy();\n            this.wheelInput = null;\n            this.moveInput = null;\n            this.keyInput = null;\n            this.contextmenuInput = null;\n            this.manager = null;\n            this.element = null;\n        }\n    }\n    /** Register an event handler function to be called on `event` */\n    on(event, handler, opts) {\n        this._addEventHandler(event, handler, opts, false);\n    }\n    once(event, handler, opts) {\n        this._addEventHandler(event, handler, opts, true);\n    }\n    watch(event, handler, opts) {\n        this._addEventHandler(event, handler, opts, false, true);\n    }\n    off(event, handler) {\n        this._removeEventHandler(event, handler);\n    }\n    /*\n     * Enable/disable recognizer for the given event\n     */\n    _toggleRecognizer(name, enabled) {\n        const { manager } = this;\n        if (!manager) {\n            return;\n        }\n        const recognizer = manager.get(name);\n        // @ts-ignore\n        if (recognizer && recognizer.options.enable !== enabled) {\n            recognizer.set({ enable: enabled });\n            const fallbackRecognizers = RECOGNIZER_FALLBACK_MAP[name];\n            if (fallbackRecognizers && !this.options.recognizers) {\n                // Set default require failures\n                // http://hammerjs.github.io/require-failure/\n                fallbackRecognizers.forEach(otherName => {\n                    const otherRecognizer = manager.get(otherName);\n                    if (enabled) {\n                        // Wait for this recognizer to fail\n                        otherRecognizer.requireFailure(name);\n                        /**\n                         * This seems to be a bug in hammerjs:\n                         * requireFailure() adds both ways\n                         * dropRequireFailure() only drops one way\n                         * https://github.com/hammerjs/hammer.js/blob/master/src/recognizerjs/\n                           recognizer-constructor.js#L136\n                         */\n                        recognizer.dropRequireFailure(otherName);\n                    }\n                    else {\n                        // Do not wait for this recognizer to fail\n                        otherRecognizer.dropRequireFailure(name);\n                    }\n                });\n            }\n        }\n        this.wheelInput.enableEventType(name, enabled);\n        this.moveInput.enableEventType(name, enabled);\n        this.keyInput.enableEventType(name, enabled);\n        this.contextmenuInput.enableEventType(name, enabled);\n    }\n    /**\n     * Process the event registration for a single event + handler.\n     */\n    _addEventHandler(event, handler, opts, once, passive) {\n        if (typeof event !== 'string') {\n            // @ts-ignore\n            opts = handler;\n            // If `event` is a map, call `on()` for each entry.\n            for (const eventName in event) {\n                this._addEventHandler(eventName, event[eventName], opts, once, passive);\n            }\n            return;\n        }\n        const { manager, events } = this;\n        // Alias to a recognized gesture as necessary.\n        const eventAlias = GESTURE_EVENT_ALIASES[event] || event;\n        let eventRegistrar = events.get(eventAlias);\n        if (!eventRegistrar) {\n            eventRegistrar = new EventRegistrar(this);\n            events.set(eventAlias, eventRegistrar);\n            // Enable recognizer for this event.\n            eventRegistrar.recognizerName = EVENT_RECOGNIZER_MAP[eventAlias] || eventAlias;\n            // Listen to the event\n            if (manager) {\n                manager.on(eventAlias, eventRegistrar.handleEvent);\n            }\n        }\n        eventRegistrar.add(event, handler, opts, once, passive);\n        if (!eventRegistrar.isEmpty()) {\n            this._toggleRecognizer(eventRegistrar.recognizerName, true);\n        }\n    }\n    /**\n     * Process the event deregistration for a single event + handler.\n     */\n    _removeEventHandler(event, handler) {\n        if (typeof event !== 'string') {\n            // If `event` is a map, call `off()` for each entry.\n            for (const eventName in event) {\n                this._removeEventHandler(eventName, event[eventName]);\n            }\n            return;\n        }\n        const { events } = this;\n        // Alias to a recognized gesture as necessary.\n        const eventAlias = GESTURE_EVENT_ALIASES[event] || event;\n        const eventRegistrar = events.get(eventAlias);\n        if (!eventRegistrar) {\n            return;\n        }\n        eventRegistrar.remove(event, handler);\n        if (eventRegistrar.isEmpty()) {\n            const { recognizerName } = eventRegistrar;\n            // Disable recognizer if no more handlers are attached to its events\n            let isRecognizerUsed = false;\n            for (const eh of events.values()) {\n                if (eh.recognizerName === recognizerName && !eh.isEmpty()) {\n                    isRecognizerUsed = true;\n                    break;\n                }\n            }\n            if (!isRecognizerUsed) {\n                this._toggleRecognizer(recognizerName, false);\n            }\n        }\n    }\n}\n//# sourceMappingURL=event-manager.js.map","export function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'loader assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","const globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nconst self_ = globals.self || globals.window || globals.global || {};\nconst window_ = globals.window || globals.self || globals.global || {};\nconst global_ = globals.global || globals.self || globals.window || {};\nconst document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\nexport const isBrowser = Boolean(typeof process !== 'object' || String(process) !== '[object process]' || process.browser);\nexport const isWorker = typeof importScripts === 'function';\nconst matches = typeof process !== 'undefined' && process.version && /v([0-9]*)/.exec(process.version);\nexport const nodeVersion = matches && parseFloat(matches[1]) || 0;\n//# sourceMappingURL=globals.js.map","const DEFAULT_VERSION = 'latest';\nexport const VERSION = typeof \"3.2.11\" !== 'undefined' ? \"3.2.11\" : DEFAULT_VERSION;\n\nif (typeof \"3.2.11\" === 'undefined') {\n  console.error('loaders.gl: The __VERSION__ variable is not injected using babel plugin. Latest unstable workers would be fetched from the CDN.');\n}\n//# sourceMappingURL=version.js.map","export function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'loaders.gl assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","const globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nconst self_ = globals.self || globals.window || globals.global || {};\nconst window_ = globals.window || globals.self || globals.global || {};\nconst global_ = globals.global || globals.self || globals.window || {};\nconst document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\nexport const isBrowser = typeof process !== 'object' || String(process) !== '[object process]' || process.browser;\nexport const isWorker = typeof importScripts === 'function';\nexport const isMobile = typeof window !== 'undefined' && typeof window.orientation !== 'undefined';\nconst matches = typeof process !== 'undefined' && process.version && /v([0-9]*)/.exec(process.version);\nexport const nodeVersion = matches && parseFloat(matches[1]) || 0;\n//# sourceMappingURL=globals.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { assert } from '../env-utils/assert';\nexport default class WorkerJob {\n  constructor(jobName, workerThread) {\n    _defineProperty(this, \"name\", void 0);\n\n    _defineProperty(this, \"workerThread\", void 0);\n\n    _defineProperty(this, \"isRunning\", true);\n\n    _defineProperty(this, \"result\", void 0);\n\n    _defineProperty(this, \"_resolve\", () => {});\n\n    _defineProperty(this, \"_reject\", () => {});\n\n    this.name = jobName;\n    this.workerThread = workerThread;\n    this.result = new Promise((resolve, reject) => {\n      this._resolve = resolve;\n      this._reject = reject;\n    });\n  }\n\n  postMessage(type, payload) {\n    this.workerThread.postMessage({\n      source: 'loaders.gl',\n      type,\n      payload\n    });\n  }\n\n  done(value) {\n    assert(this.isRunning);\n    this.isRunning = false;\n\n    this._resolve(value);\n  }\n\n  error(error) {\n    assert(this.isRunning);\n    this.isRunning = false;\n\n    this._reject(error);\n  }\n\n}\n//# sourceMappingURL=worker-job.js.map","export class Worker {}\nexport const parentPort = null;\n//# sourceMappingURL=worker_threads-browser.js.map","import { assert } from '../env-utils/assert';\nconst workerURLCache = new Map();\nexport function getLoadableWorkerURL(props) {\n  assert(props.source && !props.url || !props.source && props.url);\n  let workerURL = workerURLCache.get(props.source || props.url);\n\n  if (!workerURL) {\n    if (props.url) {\n      workerURL = getLoadableWorkerURLFromURL(props.url);\n      workerURLCache.set(props.url, workerURL);\n    }\n\n    if (props.source) {\n      workerURL = getLoadableWorkerURLFromSource(props.source);\n      workerURLCache.set(props.source, workerURL);\n    }\n  }\n\n  assert(workerURL);\n  return workerURL;\n}\n\nfunction getLoadableWorkerURLFromURL(url) {\n  if (!url.startsWith('http')) {\n    return url;\n  }\n\n  const workerSource = buildScriptSource(url);\n  return getLoadableWorkerURLFromSource(workerSource);\n}\n\nfunction getLoadableWorkerURLFromSource(workerSource) {\n  const blob = new Blob([workerSource], {\n    type: 'application/javascript'\n  });\n  return URL.createObjectURL(blob);\n}\n\nfunction buildScriptSource(workerUrl) {\n  return \"try {\\n  importScripts('\".concat(workerUrl, \"');\\n} catch (error) {\\n  console.error(error);\\n  throw error;\\n}\");\n}\n//# sourceMappingURL=get-loadable-worker-url.js.map","export function getTransferList(object, recursive = true, transfers) {\n  const transfersSet = transfers || new Set();\n\n  if (!object) {} else if (isTransferable(object)) {\n    transfersSet.add(object);\n  } else if (isTransferable(object.buffer)) {\n    transfersSet.add(object.buffer);\n  } else if (ArrayBuffer.isView(object)) {} else if (recursive && typeof object === 'object') {\n    for (const key in object) {\n      getTransferList(object[key], recursive, transfersSet);\n    }\n  }\n\n  return transfers === undefined ? Array.from(transfersSet) : [];\n}\n\nfunction isTransferable(object) {\n  if (!object) {\n    return false;\n  }\n\n  if (object instanceof ArrayBuffer) {\n    return true;\n  }\n\n  if (typeof MessagePort !== 'undefined' && object instanceof MessagePort) {\n    return true;\n  }\n\n  if (typeof ImageBitmap !== 'undefined' && object instanceof ImageBitmap) {\n    return true;\n  }\n\n  if (typeof OffscreenCanvas !== 'undefined' && object instanceof OffscreenCanvas) {\n    return true;\n  }\n\n  return false;\n}\n\nexport function getTransferListForWriter(object) {\n  if (object === null) {\n    return {};\n  }\n\n  const clone = Object.assign({}, object);\n  Object.keys(clone).forEach(key => {\n    if (typeof object[key] === 'object' && !ArrayBuffer.isView(object[key])) {\n      clone[key] = getTransferListForWriter(object[key]);\n    } else if (typeof clone[key] === 'function' || clone[key] instanceof RegExp) {\n      clone[key] = {};\n    } else {\n      clone[key] = object[key];\n    }\n  });\n  return clone;\n}\n//# sourceMappingURL=get-transfer-list.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { Worker as NodeWorker } from '../node/worker_threads';\nimport { isBrowser } from '../env-utils/globals';\nimport { assert } from '../env-utils/assert';\nimport { getLoadableWorkerURL } from '../worker-utils/get-loadable-worker-url';\nimport { getTransferList } from '../worker-utils/get-transfer-list';\n\nconst NOOP = () => {};\n\nexport default class WorkerThread {\n  static isSupported() {\n    return typeof Worker !== 'undefined' && isBrowser || typeof NodeWorker !== 'undefined' && !isBrowser;\n  }\n\n  constructor(props) {\n    _defineProperty(this, \"name\", void 0);\n\n    _defineProperty(this, \"source\", void 0);\n\n    _defineProperty(this, \"url\", void 0);\n\n    _defineProperty(this, \"terminated\", false);\n\n    _defineProperty(this, \"worker\", void 0);\n\n    _defineProperty(this, \"onMessage\", void 0);\n\n    _defineProperty(this, \"onError\", void 0);\n\n    _defineProperty(this, \"_loadableURL\", '');\n\n    const {\n      name,\n      source,\n      url\n    } = props;\n    assert(source || url);\n    this.name = name;\n    this.source = source;\n    this.url = url;\n    this.onMessage = NOOP;\n\n    this.onError = error => console.log(error);\n\n    this.worker = isBrowser ? this._createBrowserWorker() : this._createNodeWorker();\n  }\n\n  destroy() {\n    this.onMessage = NOOP;\n    this.onError = NOOP;\n    this.worker.terminate();\n    this.terminated = true;\n  }\n\n  get isRunning() {\n    return Boolean(this.onMessage);\n  }\n\n  postMessage(data, transferList) {\n    transferList = transferList || getTransferList(data);\n    this.worker.postMessage(data, transferList);\n  }\n\n  _getErrorFromErrorEvent(event) {\n    let message = 'Failed to load ';\n    message += \"worker \".concat(this.name, \" from \").concat(this.url, \". \");\n\n    if (event.message) {\n      message += \"\".concat(event.message, \" in \");\n    }\n\n    if (event.lineno) {\n      message += \":\".concat(event.lineno, \":\").concat(event.colno);\n    }\n\n    return new Error(message);\n  }\n\n  _createBrowserWorker() {\n    this._loadableURL = getLoadableWorkerURL({\n      source: this.source,\n      url: this.url\n    });\n    const worker = new Worker(this._loadableURL, {\n      name: this.name\n    });\n\n    worker.onmessage = event => {\n      if (!event.data) {\n        this.onError(new Error('No data received'));\n      } else {\n        this.onMessage(event.data);\n      }\n    };\n\n    worker.onerror = error => {\n      this.onError(this._getErrorFromErrorEvent(error));\n      this.terminated = true;\n    };\n\n    worker.onmessageerror = event => console.error(event);\n\n    return worker;\n  }\n\n  _createNodeWorker() {\n    let worker;\n\n    if (this.url) {\n      const absolute = this.url.includes(':/') || this.url.startsWith('/');\n      const url = absolute ? this.url : \"./\".concat(this.url);\n      worker = new NodeWorker(url, {\n        eval: false\n      });\n    } else if (this.source) {\n      worker = new NodeWorker(this.source, {\n        eval: true\n      });\n    } else {\n      throw new Error('no worker');\n    }\n\n    worker.on('message', data => {\n      this.onMessage(data);\n    });\n    worker.on('error', error => {\n      this.onError(error);\n    });\n    worker.on('exit', code => {});\n    return worker;\n  }\n\n}\n//# sourceMappingURL=worker-thread.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { isMobile } from '../env-utils/globals';\nimport WorkerThread from './worker-thread';\nimport WorkerJob from './worker-job';\nexport default class WorkerPool {\n  static isSupported() {\n    return WorkerThread.isSupported();\n  }\n\n  constructor(props) {\n    _defineProperty(this, \"name\", 'unnamed');\n\n    _defineProperty(this, \"source\", void 0);\n\n    _defineProperty(this, \"url\", void 0);\n\n    _defineProperty(this, \"maxConcurrency\", 1);\n\n    _defineProperty(this, \"maxMobileConcurrency\", 1);\n\n    _defineProperty(this, \"onDebug\", () => {});\n\n    _defineProperty(this, \"reuseWorkers\", true);\n\n    _defineProperty(this, \"props\", {});\n\n    _defineProperty(this, \"jobQueue\", []);\n\n    _defineProperty(this, \"idleQueue\", []);\n\n    _defineProperty(this, \"count\", 0);\n\n    _defineProperty(this, \"isDestroyed\", false);\n\n    this.source = props.source;\n    this.url = props.url;\n    this.setProps(props);\n  }\n\n  destroy() {\n    this.idleQueue.forEach(worker => worker.destroy());\n    this.isDestroyed = true;\n  }\n\n  setProps(props) {\n    this.props = { ...this.props,\n      ...props\n    };\n\n    if (props.name !== undefined) {\n      this.name = props.name;\n    }\n\n    if (props.maxConcurrency !== undefined) {\n      this.maxConcurrency = props.maxConcurrency;\n    }\n\n    if (props.maxMobileConcurrency !== undefined) {\n      this.maxMobileConcurrency = props.maxMobileConcurrency;\n    }\n\n    if (props.reuseWorkers !== undefined) {\n      this.reuseWorkers = props.reuseWorkers;\n    }\n\n    if (props.onDebug !== undefined) {\n      this.onDebug = props.onDebug;\n    }\n  }\n\n  async startJob(name, onMessage = (job, type, data) => job.done(data), onError = (job, error) => job.error(error)) {\n    const startPromise = new Promise(onStart => {\n      this.jobQueue.push({\n        name,\n        onMessage,\n        onError,\n        onStart\n      });\n      return this;\n    });\n\n    this._startQueuedJob();\n\n    return await startPromise;\n  }\n\n  async _startQueuedJob() {\n    if (!this.jobQueue.length) {\n      return;\n    }\n\n    const workerThread = this._getAvailableWorker();\n\n    if (!workerThread) {\n      return;\n    }\n\n    const queuedJob = this.jobQueue.shift();\n\n    if (queuedJob) {\n      this.onDebug({\n        message: 'Starting job',\n        name: queuedJob.name,\n        workerThread,\n        backlog: this.jobQueue.length\n      });\n      const job = new WorkerJob(queuedJob.name, workerThread);\n\n      workerThread.onMessage = data => queuedJob.onMessage(job, data.type, data.payload);\n\n      workerThread.onError = error => queuedJob.onError(job, error);\n\n      queuedJob.onStart(job);\n\n      try {\n        await job.result;\n      } finally {\n        this.returnWorkerToQueue(workerThread);\n      }\n    }\n  }\n\n  returnWorkerToQueue(worker) {\n    const shouldDestroyWorker = this.isDestroyed || !this.reuseWorkers || this.count > this._getMaxConcurrency();\n\n    if (shouldDestroyWorker) {\n      worker.destroy();\n      this.count--;\n    } else {\n      this.idleQueue.push(worker);\n    }\n\n    if (!this.isDestroyed) {\n      this._startQueuedJob();\n    }\n  }\n\n  _getAvailableWorker() {\n    if (this.idleQueue.length > 0) {\n      return this.idleQueue.shift() || null;\n    }\n\n    if (this.count < this._getMaxConcurrency()) {\n      this.count++;\n      const name = \"\".concat(this.name.toLowerCase(), \" (#\").concat(this.count, \" of \").concat(this.maxConcurrency, \")\");\n      return new WorkerThread({\n        name,\n        source: this.source,\n        url: this.url\n      });\n    }\n\n    return null;\n  }\n\n  _getMaxConcurrency() {\n    return isMobile ? this.maxMobileConcurrency : this.maxConcurrency;\n  }\n\n}\n//# sourceMappingURL=worker-pool.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport WorkerPool from './worker-pool';\nimport WorkerThread from './worker-thread';\nconst DEFAULT_PROPS = {\n  maxConcurrency: 3,\n  maxMobileConcurrency: 1,\n  reuseWorkers: true,\n  onDebug: () => {}\n};\nexport default class WorkerFarm {\n  static isSupported() {\n    return WorkerThread.isSupported();\n  }\n\n  static getWorkerFarm(props = {}) {\n    WorkerFarm._workerFarm = WorkerFarm._workerFarm || new WorkerFarm({});\n\n    WorkerFarm._workerFarm.setProps(props);\n\n    return WorkerFarm._workerFarm;\n  }\n\n  constructor(props) {\n    _defineProperty(this, \"props\", void 0);\n\n    _defineProperty(this, \"workerPools\", new Map());\n\n    this.props = { ...DEFAULT_PROPS\n    };\n    this.setProps(props);\n    this.workerPools = new Map();\n  }\n\n  destroy() {\n    for (const workerPool of this.workerPools.values()) {\n      workerPool.destroy();\n    }\n\n    this.workerPools = new Map();\n  }\n\n  setProps(props) {\n    this.props = { ...this.props,\n      ...props\n    };\n\n    for (const workerPool of this.workerPools.values()) {\n      workerPool.setProps(this._getWorkerPoolProps());\n    }\n  }\n\n  getWorkerPool(options) {\n    const {\n      name,\n      source,\n      url\n    } = options;\n    let workerPool = this.workerPools.get(name);\n\n    if (!workerPool) {\n      workerPool = new WorkerPool({\n        name,\n        source,\n        url\n      });\n      workerPool.setProps(this._getWorkerPoolProps());\n      this.workerPools.set(name, workerPool);\n    }\n\n    return workerPool;\n  }\n\n  _getWorkerPoolProps() {\n    return {\n      maxConcurrency: this.props.maxConcurrency,\n      maxMobileConcurrency: this.props.maxMobileConcurrency,\n      reuseWorkers: this.props.reuseWorkers,\n      onDebug: this.props.onDebug\n    };\n  }\n\n}\n\n_defineProperty(WorkerFarm, \"_workerFarm\", void 0);\n//# sourceMappingURL=worker-farm.js.map","import { assert } from '../env-utils/assert';\nimport { VERSION as __VERSION__ } from '../env-utils/version';\nconst NPM_TAG = 'latest';\nconst VERSION = typeof \"3.2.11\" !== 'undefined' ? \"3.2.11\" : NPM_TAG;\nexport function getWorkerName(worker) {\n  const warning = worker.version !== VERSION ? \" (worker-utils@\".concat(VERSION, \")\") : '';\n  return \"\".concat(worker.name, \"@\").concat(worker.version).concat(warning);\n}\nexport function getWorkerURL(worker, options = {}) {\n  const workerOptions = options[worker.id] || {};\n  const workerFile = \"\".concat(worker.id, \"-worker.js\");\n  let url = workerOptions.workerUrl;\n\n  if (!url && worker.id === 'compression') {\n    url = options.workerUrl;\n  }\n\n  if (options._workerType === 'test') {\n    url = \"modules/\".concat(worker.module, \"/dist/\").concat(workerFile);\n  }\n\n  if (!url) {\n    let version = worker.version;\n\n    if (version === 'latest') {\n      version = NPM_TAG;\n    }\n\n    const versionTag = version ? \"@\".concat(version) : '';\n    url = \"https://unpkg.com/@loaders.gl/\".concat(worker.module).concat(versionTag, \"/dist/\").concat(workerFile);\n  }\n\n  assert(url);\n  return url;\n}\n//# sourceMappingURL=get-worker-url.js.map","import { assert } from '../env-utils/assert';\nimport { VERSION } from '../env-utils/version';\nexport function validateWorkerVersion(worker, coreVersion = VERSION) {\n  assert(worker, 'no worker provided');\n  const workerVersion = worker.version;\n\n  if (!coreVersion || !workerVersion) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction parseVersion(version) {\n  const parts = version.split('.').map(Number);\n  return {\n    major: parts[0],\n    minor: parts[1]\n  };\n}\n//# sourceMappingURL=validate-worker-version.js.map","import { isBrowser } from '@loaders.gl/worker-utils';\nimport { WorkerFarm, getWorkerURL } from '@loaders.gl/worker-utils';\nexport function canParseWithWorker(loader, options) {\n  if (!WorkerFarm.isSupported()) {\n    return false;\n  }\n\n  if (!isBrowser && !(options !== null && options !== void 0 && options._nodeWorkers)) {\n    return false;\n  }\n\n  return loader.worker && (options === null || options === void 0 ? void 0 : options.worker);\n}\nexport async function parseWithWorker(loader, data, options, context, parseOnMainThread) {\n  const name = loader.id;\n  const url = getWorkerURL(loader, options);\n  const workerFarm = WorkerFarm.getWorkerFarm(options);\n  const workerPool = workerFarm.getWorkerPool({\n    name,\n    url\n  });\n  options = JSON.parse(JSON.stringify(options));\n  context = JSON.parse(JSON.stringify(context || {}));\n  const job = await workerPool.startJob('process-on-worker', onMessage.bind(null, parseOnMainThread));\n  job.postMessage('process', {\n    input: data,\n    options,\n    context\n  });\n  const result = await job.result;\n  return await result.result;\n}\n\nasync function onMessage(parseOnMainThread, job, type, payload) {\n  switch (type) {\n    case 'done':\n      job.done(payload);\n      break;\n\n    case 'error':\n      job.error(new Error(payload.error));\n      break;\n\n    case 'process':\n      const {\n        id,\n        input,\n        options\n      } = payload;\n\n      try {\n        const result = await parseOnMainThread(input, options);\n        job.postMessage('done', {\n          id,\n          result\n        });\n      } catch (error) {\n        const message = error instanceof Error ? error.message : 'unknown error';\n        job.postMessage('error', {\n          id,\n          error: message\n        });\n      }\n\n      break;\n\n    default:\n      console.warn(\"parse-with-worker unknown message \".concat(type));\n  }\n}\n//# sourceMappingURL=parse-with-worker.js.map","import * as node from '../node/buffer';\nexport function isBuffer(value) {\n  return value && typeof value === 'object' && value.isBuffer;\n}\nexport function toBuffer(data) {\n  return node.toBuffer ? node.toBuffer(data) : data;\n}\nexport function bufferToArrayBuffer(buffer) {\n  if (isBuffer(buffer)) {\n    const typedArray = new Uint8Array(buffer.buffer, buffer.byteOffset, buffer.length);\n    return typedArray.slice().buffer;\n  }\n\n  return buffer;\n}\n//# sourceMappingURL=buffer-utils.js.map","import { isBuffer, bufferToArrayBuffer } from './buffer-utils';\nexport function toArrayBuffer(data) {\n  if (isBuffer(data)) {\n    return bufferToArrayBuffer(data);\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return data;\n  }\n\n  if (ArrayBuffer.isView(data)) {\n    if (data.byteOffset === 0 && data.byteLength === data.buffer.byteLength) {\n      return data.buffer;\n    }\n\n    return data.buffer.slice(data.byteOffset, data.byteOffset + data.byteLength);\n  }\n\n  if (typeof data === 'string') {\n    const text = data;\n    const uint8Array = new TextEncoder().encode(text);\n    return uint8Array.buffer;\n  }\n\n  if (data && typeof data === 'object' && data._toArrayBuffer) {\n    return data._toArrayBuffer();\n  }\n\n  throw new Error('toArrayBuffer');\n}\nexport function compareArrayBuffers(arrayBuffer1, arrayBuffer2, byteLength) {\n  byteLength = byteLength || arrayBuffer1.byteLength;\n\n  if (arrayBuffer1.byteLength < byteLength || arrayBuffer2.byteLength < byteLength) {\n    return false;\n  }\n\n  const array1 = new Uint8Array(arrayBuffer1);\n  const array2 = new Uint8Array(arrayBuffer2);\n\n  for (let i = 0; i < array1.length; ++i) {\n    if (array1[i] !== array2[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\nexport function concatenateArrayBuffers(...sources) {\n  const sourceArrays = sources.map(source2 => source2 instanceof ArrayBuffer ? new Uint8Array(source2) : source2);\n  const byteLength = sourceArrays.reduce((length, typedArray) => length + typedArray.byteLength, 0);\n  const result = new Uint8Array(byteLength);\n  let offset = 0;\n\n  for (const sourceArray of sourceArrays) {\n    result.set(sourceArray, offset);\n    offset += sourceArray.byteLength;\n  }\n\n  return result.buffer;\n}\nexport function concatenateTypedArrays(...typedArrays) {\n  const arrays = typedArrays;\n  const TypedArrayConstructor = arrays && arrays.length > 1 && arrays[0].constructor || null;\n\n  if (!TypedArrayConstructor) {\n    throw new Error('\"concatenateTypedArrays\" - incorrect quantity of arguments or arguments have incompatible data types');\n  }\n\n  const sumLength = arrays.reduce((acc, value) => acc + value.length, 0);\n  const result = new TypedArrayConstructor(sumLength);\n  let offset = 0;\n\n  for (const array of arrays) {\n    result.set(array, offset);\n    offset += array.length;\n  }\n\n  return result;\n}\nexport function sliceArrayBuffer(arrayBuffer, byteOffset, byteLength) {\n  const subArray = byteLength !== undefined ? new Uint8Array(arrayBuffer).subarray(byteOffset, byteOffset + byteLength) : new Uint8Array(arrayBuffer).subarray(byteOffset);\n  const arrayCopy = new Uint8Array(subArray);\n  return arrayCopy.buffer;\n}\n//# sourceMappingURL=array-buffer-utils.js.map","import { concatenateArrayBuffers } from '../binary-utils/array-buffer-utils';\nexport async function forEach(iterator, visitor) {\n  while (true) {\n    const {\n      done,\n      value\n    } = await iterator.next();\n\n    if (done) {\n      iterator.return();\n      return;\n    }\n\n    const cancel = visitor(value);\n\n    if (cancel) {\n      return;\n    }\n  }\n}\nexport async function concatenateArrayBuffersAsync(asyncIterator) {\n  const arrayBuffers = [];\n\n  for await (const chunk of asyncIterator) {\n    arrayBuffers.push(chunk);\n  }\n\n  return concatenateArrayBuffers(...arrayBuffers);\n}\nexport async function concatenateStringsAsync(asyncIterator) {\n  const strings = [];\n\n  for await (const chunk of asyncIterator) {\n    strings.push(chunk);\n  }\n\n  return strings.join('');\n}\n//# sourceMappingURL=async-iteration.js.map","export default function getHiResTimestamp() {\n  let timestamp;\n\n  if (typeof window !== 'undefined' && window.performance) {\n    timestamp = window.performance.now();\n  } else if (typeof process !== 'undefined' && process.hrtime) {\n    const timeParts = process.hrtime();\n    timestamp = timeParts[0] * 1000 + timeParts[1] / 1e6;\n  } else {\n    timestamp = Date.now();\n  }\n\n  return timestamp;\n}\n//# sourceMappingURL=hi-res-timestamp.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport getHiResTimestamp from '../utils/hi-res-timestamp';\nexport default class Stat {\n  constructor(name, type) {\n    _defineProperty(this, \"name\", void 0);\n\n    _defineProperty(this, \"type\", void 0);\n\n    _defineProperty(this, \"sampleSize\", 1);\n\n    _defineProperty(this, \"time\", void 0);\n\n    _defineProperty(this, \"count\", void 0);\n\n    _defineProperty(this, \"samples\", void 0);\n\n    _defineProperty(this, \"lastTiming\", void 0);\n\n    _defineProperty(this, \"lastSampleTime\", void 0);\n\n    _defineProperty(this, \"lastSampleCount\", void 0);\n\n    _defineProperty(this, \"_count\", 0);\n\n    _defineProperty(this, \"_time\", 0);\n\n    _defineProperty(this, \"_samples\", 0);\n\n    _defineProperty(this, \"_startTime\", 0);\n\n    _defineProperty(this, \"_timerPending\", false);\n\n    this.name = name;\n    this.type = type;\n    this.reset();\n  }\n\n  setSampleSize(samples) {\n    this.sampleSize = samples;\n    return this;\n  }\n\n  incrementCount() {\n    this.addCount(1);\n    return this;\n  }\n\n  decrementCount() {\n    this.subtractCount(1);\n    return this;\n  }\n\n  addCount(value) {\n    this._count += value;\n    this._samples++;\n\n    this._checkSampling();\n\n    return this;\n  }\n\n  subtractCount(value) {\n    this._count -= value;\n    this._samples++;\n\n    this._checkSampling();\n\n    return this;\n  }\n\n  addTime(time) {\n    this._time += time;\n    this.lastTiming = time;\n    this._samples++;\n\n    this._checkSampling();\n\n    return this;\n  }\n\n  timeStart() {\n    this._startTime = getHiResTimestamp();\n    this._timerPending = true;\n    return this;\n  }\n\n  timeEnd() {\n    if (!this._timerPending) {\n      return this;\n    }\n\n    this.addTime(getHiResTimestamp() - this._startTime);\n    this._timerPending = false;\n\n    this._checkSampling();\n\n    return this;\n  }\n\n  getSampleAverageCount() {\n    return this.sampleSize > 0 ? this.lastSampleCount / this.sampleSize : 0;\n  }\n\n  getSampleAverageTime() {\n    return this.sampleSize > 0 ? this.lastSampleTime / this.sampleSize : 0;\n  }\n\n  getSampleHz() {\n    return this.lastSampleTime > 0 ? this.sampleSize / (this.lastSampleTime / 1000) : 0;\n  }\n\n  getAverageCount() {\n    return this.samples > 0 ? this.count / this.samples : 0;\n  }\n\n  getAverageTime() {\n    return this.samples > 0 ? this.time / this.samples : 0;\n  }\n\n  getHz() {\n    return this.time > 0 ? this.samples / (this.time / 1000) : 0;\n  }\n\n  reset() {\n    this.time = 0;\n    this.count = 0;\n    this.samples = 0;\n    this.lastTiming = 0;\n    this.lastSampleTime = 0;\n    this.lastSampleCount = 0;\n    this._count = 0;\n    this._time = 0;\n    this._samples = 0;\n    this._startTime = 0;\n    this._timerPending = false;\n    return this;\n  }\n\n  _checkSampling() {\n    if (this._samples === this.sampleSize) {\n      this.lastSampleTime = this._time;\n      this.lastSampleCount = this._count;\n      this.count += this._count;\n      this.time += this._time;\n      this.samples += this._samples;\n      this._time = 0;\n      this._count = 0;\n      this._samples = 0;\n    }\n  }\n\n}\n//# sourceMappingURL=stat.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport Stat from './stat';\nexport default class Stats {\n  constructor(options) {\n    _defineProperty(this, \"id\", void 0);\n\n    _defineProperty(this, \"stats\", {});\n\n    this.id = options.id;\n    this.stats = {};\n\n    this._initializeStats(options.stats);\n\n    Object.seal(this);\n  }\n\n  get(name) {\n    let type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'count';\n    return this._getOrCreate({\n      name,\n      type\n    });\n  }\n\n  get size() {\n    return Object.keys(this.stats).length;\n  }\n\n  reset() {\n    for (const key in this.stats) {\n      this.stats[key].reset();\n    }\n\n    return this;\n  }\n\n  forEach(fn) {\n    for (const key in this.stats) {\n      fn(this.stats[key]);\n    }\n  }\n\n  getTable() {\n    const table = {};\n    this.forEach(stat => {\n      table[stat.name] = {\n        time: stat.time || 0,\n        count: stat.count || 0,\n        average: stat.getAverageTime() || 0,\n        hz: stat.getHz() || 0\n      };\n    });\n    return table;\n  }\n\n  _initializeStats() {\n    let stats = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    stats.forEach(stat => this._getOrCreate(stat));\n  }\n\n  _getOrCreate(stat) {\n    if (!stat || !stat.name) {\n      return null;\n    }\n\n    const {\n      name,\n      type\n    } = stat;\n\n    if (!this.stats[name]) {\n      if (stat instanceof Stat) {\n        this.stats[name] = stat;\n      } else {\n        this.stats[name] = new Stat(name, type);\n      }\n    }\n\n    return this.stats[name];\n  }\n\n}\n//# sourceMappingURL=stats.js.map","let pathPrefix = '';\nconst fileAliases = {};\nexport function setPathPrefix(prefix) {\n  pathPrefix = prefix;\n}\nexport function getPathPrefix() {\n  return pathPrefix;\n}\nexport function addAliases(aliases) {\n  Object.assign(fileAliases, aliases);\n}\nexport function resolvePath(filename) {\n  for (const alias in fileAliases) {\n    if (filename.startsWith(alias)) {\n      const replacement = fileAliases[alias];\n      filename = filename.replace(alias, replacement);\n    }\n  }\n\n  if (!filename.startsWith('http://') && !filename.startsWith('https://')) {\n    filename = \"\".concat(pathPrefix).concat(filename);\n  }\n\n  return filename;\n}\n//# sourceMappingURL=file-aliases.js.map","export function filename(url) {\n  const slashIndex = url && url.lastIndexOf('/');\n  return slashIndex >= 0 ? url.substr(slashIndex + 1) : '';\n}\nexport function dirname(url) {\n  const slashIndex = url && url.lastIndexOf('/');\n  return slashIndex >= 0 ? url.substr(0, slashIndex) : '';\n}\nexport function join(...parts) {\n  const separator = '/';\n  parts = parts.map((part, index) => {\n    if (index) {\n      part = part.replace(new RegExp(\"^\".concat(separator)), '');\n    }\n\n    if (index !== parts.length - 1) {\n      part = part.replace(new RegExp(\"\".concat(separator, \"$\")), '');\n    }\n\n    return part;\n  });\n  return parts.join(separator);\n}\n//# sourceMappingURL=path.js.map","const isBoolean = x => typeof x === 'boolean';\n\nconst isFunction = x => typeof x === 'function';\n\nexport const isObject = x => x !== null && typeof x === 'object';\nexport const isPureObject = x => isObject(x) && x.constructor === {}.constructor;\nexport const isPromise = x => isObject(x) && isFunction(x.then);\nexport const isIterable = x => x && typeof x[Symbol.iterator] === 'function';\nexport const isAsyncIterable = x => x && typeof x[Symbol.asyncIterator] === 'function';\nexport const isIterator = x => x && isFunction(x.next);\nexport const isResponse = x => typeof Response !== 'undefined' && x instanceof Response || x && x.arrayBuffer && x.text && x.json;\nexport const isFile = x => typeof File !== 'undefined' && x instanceof File;\nexport const isBlob = x => typeof Blob !== 'undefined' && x instanceof Blob;\nexport const isBuffer = x => x && typeof x === 'object' && x.isBuffer;\nexport const isWritableDOMStream = x => isObject(x) && isFunction(x.abort) && isFunction(x.getWriter);\nexport const isReadableDOMStream = x => typeof ReadableStream !== 'undefined' && x instanceof ReadableStream || isObject(x) && isFunction(x.tee) && isFunction(x.cancel) && isFunction(x.getReader);\nexport const isWritableNodeStream = x => isObject(x) && isFunction(x.end) && isFunction(x.write) && isBoolean(x.writable);\nexport const isReadableNodeStream = x => isObject(x) && isFunction(x.read) && isFunction(x.pipe) && isBoolean(x.readable);\nexport const isReadableStream = x => isReadableDOMStream(x) || isReadableNodeStream(x);\nexport const isWritableStream = x => isWritableDOMStream(x) || isWritableNodeStream(x);\n//# sourceMappingURL=is-type.js.map","const DATA_URL_PATTERN = /^data:([-\\w.]+\\/[-\\w.+]+)(;|,)/;\nconst MIME_TYPE_PATTERN = /^([-\\w.]+\\/[-\\w.+]+)/;\nexport function parseMIMEType(mimeString) {\n  const matches = MIME_TYPE_PATTERN.exec(mimeString);\n\n  if (matches) {\n    return matches[1];\n  }\n\n  return mimeString;\n}\nexport function parseMIMETypeFromURL(url) {\n  const matches = DATA_URL_PATTERN.exec(url);\n\n  if (matches) {\n    return matches[1];\n  }\n\n  return '';\n}\n//# sourceMappingURL=mime-type-utils.js.map","import { isResponse, isBlob } from '../../javascript-utils/is-type';\nimport { parseMIMEType, parseMIMETypeFromURL } from './mime-type-utils';\nconst QUERY_STRING_PATTERN = /\\?.*/;\nexport function getResourceUrlAndType(resource) {\n  if (isResponse(resource)) {\n    const url = stripQueryString(resource.url || '');\n    const contentTypeHeader = resource.headers.get('content-type') || '';\n    return {\n      url,\n      type: parseMIMEType(contentTypeHeader) || parseMIMETypeFromURL(url)\n    };\n  }\n\n  if (isBlob(resource)) {\n    return {\n      url: stripQueryString(resource.name || ''),\n      type: resource.type || ''\n    };\n  }\n\n  if (typeof resource === 'string') {\n    return {\n      url: stripQueryString(resource),\n      type: parseMIMETypeFromURL(resource)\n    };\n  }\n\n  return {\n    url: '',\n    type: ''\n  };\n}\nexport function getResourceContentLength(resource) {\n  if (isResponse(resource)) {\n    return resource.headers['content-length'] || -1;\n  }\n\n  if (isBlob(resource)) {\n    return resource.size;\n  }\n\n  if (typeof resource === 'string') {\n    return resource.length;\n  }\n\n  if (resource instanceof ArrayBuffer) {\n    return resource.byteLength;\n  }\n\n  if (ArrayBuffer.isView(resource)) {\n    return resource.byteLength;\n  }\n\n  return -1;\n}\n\nfunction stripQueryString(url) {\n  return url.replace(QUERY_STRING_PATTERN, '');\n}\n//# sourceMappingURL=resource-utils.js.map","import { isResponse } from '../../javascript-utils/is-type';\nimport { getResourceContentLength, getResourceUrlAndType } from './resource-utils';\nexport async function makeResponse(resource) {\n  if (isResponse(resource)) {\n    return resource;\n  }\n\n  const headers = {};\n  const contentLength = getResourceContentLength(resource);\n\n  if (contentLength >= 0) {\n    headers['content-length'] = String(contentLength);\n  }\n\n  const {\n    url,\n    type\n  } = getResourceUrlAndType(resource);\n\n  if (type) {\n    headers['content-type'] = type;\n  }\n\n  const initialDataUrl = await getInitialDataUrl(resource);\n\n  if (initialDataUrl) {\n    headers['x-first-bytes'] = initialDataUrl;\n  }\n\n  if (typeof resource === 'string') {\n    resource = new TextEncoder().encode(resource);\n  }\n\n  const response = new Response(resource, {\n    headers\n  });\n  Object.defineProperty(response, 'url', {\n    value: url\n  });\n  return response;\n}\nexport async function checkResponse(response) {\n  if (!response.ok) {\n    const message = await getResponseError(response);\n    throw new Error(message);\n  }\n}\nexport function checkResponseSync(response) {\n  if (!response.ok) {\n    let message = \"\".concat(response.status, \" \").concat(response.statusText);\n    message = message.length > 60 ? \"\".concat(message.slice(0, 60), \"...\") : message;\n    throw new Error(message);\n  }\n}\n\nasync function getResponseError(response) {\n  let message = \"Failed to fetch resource \".concat(response.url, \" (\").concat(response.status, \"): \");\n\n  try {\n    const contentType = response.headers.get('Content-Type');\n    let text = response.statusText;\n\n    if (contentType.includes('application/json')) {\n      text += \" \".concat(await response.text());\n    }\n\n    message += text;\n    message = message.length > 60 ? \"\".concat(message.slice(0, 60), \"...\") : message;\n  } catch (error) {}\n\n  return message;\n}\n\nasync function getInitialDataUrl(resource) {\n  const INITIAL_DATA_LENGTH = 5;\n\n  if (typeof resource === 'string') {\n    return \"data:,\".concat(resource.slice(0, INITIAL_DATA_LENGTH));\n  }\n\n  if (resource instanceof Blob) {\n    const blobSlice = resource.slice(0, 5);\n    return await new Promise(resolve => {\n      const reader = new FileReader();\n\n      reader.onload = event => {\n        var _event$target;\n\n        return resolve(event === null || event === void 0 ? void 0 : (_event$target = event.target) === null || _event$target === void 0 ? void 0 : _event$target.result);\n      };\n\n      reader.readAsDataURL(blobSlice);\n    });\n  }\n\n  if (resource instanceof ArrayBuffer) {\n    const slice = resource.slice(0, INITIAL_DATA_LENGTH);\n    const base64 = arrayBufferToBase64(slice);\n    return \"data:base64,\".concat(base64);\n  }\n\n  return null;\n}\n\nfunction arrayBufferToBase64(buffer) {\n  let binary = '';\n  const bytes = new Uint8Array(buffer);\n\n  for (let i = 0; i < bytes.byteLength; i++) {\n    binary += String.fromCharCode(bytes[i]);\n  }\n\n  return btoa(binary);\n}\n//# sourceMappingURL=response-utils.js.map","import { resolvePath } from '@loaders.gl/loader-utils';\nimport { makeResponse } from '../utils/response-utils';\nexport async function fetchFile(url, options) {\n  if (typeof url === 'string') {\n    url = resolvePath(url);\n    let fetchOptions = options;\n\n    if (options !== null && options !== void 0 && options.fetch && typeof (options === null || options === void 0 ? void 0 : options.fetch) !== 'function') {\n      fetchOptions = options.fetch;\n    }\n\n    return await fetch(url, fetchOptions);\n  }\n\n  return await makeResponse(url);\n}\n//# sourceMappingURL=fetch-file.js.map","export default function isElectron(mockUserAgent) {\n  if (typeof window !== 'undefined' && typeof window.process === 'object' && window.process.type === 'renderer') {\n    return true;\n  }\n\n  if (typeof process !== 'undefined' && typeof process.versions === 'object' && Boolean(process.versions.electron)) {\n    return true;\n  }\n\n  const realUserAgent = typeof navigator === 'object' && typeof navigator.userAgent === 'string' && navigator.userAgent;\n  const userAgent = mockUserAgent || realUserAgent;\n\n  if (userAgent && userAgent.indexOf('Electron') >= 0) {\n    return true;\n  }\n\n  return false;\n}\n//# sourceMappingURL=is-electron.js.map","import isElectron from './is-electron';\nexport default function isBrowser() {\n  const isNode = typeof process === 'object' && String(process) === '[object process]' && !process.browser;\n  return !isNode || isElectron();\n}\nexport function isBrowserMainThread() {\n  return isBrowser() && typeof document !== 'undefined';\n}\n//# sourceMappingURL=is-browser.js.map","const globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document,\n  process: typeof process === 'object' && process\n};\nconst global_ = globalThis;\nconst self_ = globals.self || globals.window || globals.global;\nconst window_ = globals.window || globals.self || globals.global;\nconst document_ = globals.document || {};\nconst process_ = globals.process || {};\nconst console_ = console;\nexport { self_ as self, window_ as window, global_ as global, document_ as document, process_ as process, console_ as console };\n//# sourceMappingURL=globals.js.map","import checkIfBrowser from '../lib/is-browser';\nexport { self, window, global, document, process, console } from '../lib/globals';\nexport const VERSION = typeof __VERSION__ !== 'undefined' ? __VERSION__ : 'untranspiled source';\nexport const isBrowser = checkIfBrowser();\n//# sourceMappingURL=globals.js.map","import isBrowser from './is-browser';\nimport isElectron from './is-electron';\nconst window = globalThis;\nexport function isMobile() {\n  return typeof window.orientation !== 'undefined';\n}\nexport default function getBrowser(mockUserAgent) {\n  if (!mockUserAgent && !isBrowser()) {\n    return 'Node';\n  }\n\n  if (isElectron(mockUserAgent)) {\n    return 'Electron';\n  }\n\n  const navigator_ = typeof navigator !== 'undefined' ? navigator : {};\n  const userAgent = mockUserAgent || navigator_.userAgent || '';\n\n  if (userAgent.indexOf('Edge') > -1) {\n    return 'Edge';\n  }\n\n  const isMSIE = userAgent.indexOf('MSIE ') !== -1;\n  const isTrident = userAgent.indexOf('Trident/') !== -1;\n\n  if (isMSIE || isTrident) {\n    return 'IE';\n  }\n\n  if (window.chrome) {\n    return 'Chrome';\n  }\n\n  if (window.safari) {\n    return 'Safari';\n  }\n\n  if (window.mozInnerScreenX) {\n    return 'Firefox';\n  }\n\n  return 'Unknown';\n}\n//# sourceMappingURL=get-browser.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction getStorage(type) {\n  try {\n    const storage = window[type];\n    const x = '__storage_test__';\n    storage.setItem(x, x);\n    storage.removeItem(x);\n    return storage;\n  } catch (e) {\n    return null;\n  }\n}\n\nexport default class LocalStorage {\n  constructor(id) {\n    let defaultSettings = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let type = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'sessionStorage';\n\n    _defineProperty(this, \"storage\", void 0);\n\n    _defineProperty(this, \"id\", void 0);\n\n    _defineProperty(this, \"config\", {});\n\n    this.storage = getStorage(type);\n    this.id = id;\n    this.config = {};\n    Object.assign(this.config, defaultSettings);\n\n    this._loadConfiguration();\n  }\n\n  getConfiguration() {\n    return this.config;\n  }\n\n  setConfiguration(configuration) {\n    this.config = {};\n    return this.updateConfiguration(configuration);\n  }\n\n  updateConfiguration(configuration) {\n    Object.assign(this.config, configuration);\n\n    if (this.storage) {\n      const serialized = JSON.stringify(this.config);\n      this.storage.setItem(this.id, serialized);\n    }\n\n    return this;\n  }\n\n  _loadConfiguration() {\n    let configuration = {};\n\n    if (this.storage) {\n      const serializedConfiguration = this.storage.getItem(this.id);\n      configuration = serializedConfiguration ? JSON.parse(serializedConfiguration) : {};\n    }\n\n    Object.assign(this.config, configuration);\n    return this;\n  }\n\n}\n//# sourceMappingURL=local-storage.js.map","export function formatTime(ms) {\n  let formatted;\n\n  if (ms < 10) {\n    formatted = \"\".concat(ms.toFixed(2), \"ms\");\n  } else if (ms < 100) {\n    formatted = \"\".concat(ms.toFixed(1), \"ms\");\n  } else if (ms < 1000) {\n    formatted = \"\".concat(ms.toFixed(0), \"ms\");\n  } else {\n    formatted = \"\".concat((ms / 1000).toFixed(2), \"s\");\n  }\n\n  return formatted;\n}\nexport function leftPad(string) {\n  let length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 8;\n  const padLength = Math.max(length - string.length, 0);\n  return \"\".concat(' '.repeat(padLength)).concat(string);\n}\nexport function rightPad(string) {\n  let length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 8;\n  const padLength = Math.max(length - string.length, 0);\n  return \"\".concat(string).concat(' '.repeat(padLength));\n}\nexport function formatValue(v) {\n  let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const EPSILON = 1e-16;\n  const {\n    isInteger = false\n  } = opts;\n\n  if (Array.isArray(v) || ArrayBuffer.isView(v)) {\n    return formatArrayValue(v, opts);\n  }\n\n  if (!Number.isFinite(v)) {\n    return String(v);\n  }\n\n  if (Math.abs(v) < EPSILON) {\n    return isInteger ? '0' : '0.';\n  }\n\n  if (isInteger) {\n    return v.toFixed(0);\n  }\n\n  if (Math.abs(v) > 100 && Math.abs(v) < 10000) {\n    return v.toFixed(0);\n  }\n\n  const string = v.toPrecision(2);\n  const decimal = string.indexOf('.0');\n  return decimal === string.length - 2 ? string.slice(0, -1) : string;\n}\n\nfunction formatArrayValue(v, opts) {\n  const {\n    maxElts = 16,\n    size = 1\n  } = opts;\n  let string = '[';\n\n  for (let i = 0; i < v.length && i < maxElts; ++i) {\n    if (i > 0) {\n      string += \",\".concat(i % size === 0 ? ' ' : '');\n    }\n\n    string += formatValue(v[i], opts);\n  }\n\n  const terminator = v.length > maxElts ? '...' : ']';\n  return \"\".concat(string).concat(terminator);\n}\n\nexport function formatImage(image, message, scale) {\n  let maxWidth = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 600;\n  const imageUrl = image.src.replace(/\\(/g, '%28').replace(/\\)/g, '%29');\n\n  if (image.width > maxWidth) {\n    scale = Math.min(scale, maxWidth / image.width);\n  }\n\n  const width = image.width * scale;\n  const height = image.height * scale;\n  const style = ['font-size:1px;', \"padding:\".concat(Math.floor(height / 2), \"px \").concat(Math.floor(width / 2), \"px;\"), \"line-height:\".concat(height, \"px;\"), \"background:url(\".concat(imageUrl, \");\"), \"background-size:\".concat(width, \"px \").concat(height, \"px;\"), 'color:transparent;'].join('');\n  return [\"\".concat(message, \" %c+\"), style];\n}\n//# sourceMappingURL=formatters.js.map","import { isBrowser } from '@probe.gl/env';\nexport let COLOR;\n\n(function (COLOR) {\n  COLOR[COLOR[\"BLACK\"] = 30] = \"BLACK\";\n  COLOR[COLOR[\"RED\"] = 31] = \"RED\";\n  COLOR[COLOR[\"GREEN\"] = 32] = \"GREEN\";\n  COLOR[COLOR[\"YELLOW\"] = 33] = \"YELLOW\";\n  COLOR[COLOR[\"BLUE\"] = 34] = \"BLUE\";\n  COLOR[COLOR[\"MAGENTA\"] = 35] = \"MAGENTA\";\n  COLOR[COLOR[\"CYAN\"] = 36] = \"CYAN\";\n  COLOR[COLOR[\"WHITE\"] = 37] = \"WHITE\";\n  COLOR[COLOR[\"BRIGHT_BLACK\"] = 90] = \"BRIGHT_BLACK\";\n  COLOR[COLOR[\"BRIGHT_RED\"] = 91] = \"BRIGHT_RED\";\n  COLOR[COLOR[\"BRIGHT_GREEN\"] = 92] = \"BRIGHT_GREEN\";\n  COLOR[COLOR[\"BRIGHT_YELLOW\"] = 93] = \"BRIGHT_YELLOW\";\n  COLOR[COLOR[\"BRIGHT_BLUE\"] = 94] = \"BRIGHT_BLUE\";\n  COLOR[COLOR[\"BRIGHT_MAGENTA\"] = 95] = \"BRIGHT_MAGENTA\";\n  COLOR[COLOR[\"BRIGHT_CYAN\"] = 96] = \"BRIGHT_CYAN\";\n  COLOR[COLOR[\"BRIGHT_WHITE\"] = 97] = \"BRIGHT_WHITE\";\n})(COLOR || (COLOR = {}));\n\nfunction getColor(color) {\n  return typeof color === 'string' ? COLOR[color.toUpperCase()] || COLOR.WHITE : color;\n}\n\nexport function addColor(string, color, background) {\n  if (!isBrowser && typeof string === 'string') {\n    if (color) {\n      color = getColor(color);\n      string = \"\\x1B[\".concat(color, \"m\").concat(string, \"\\x1B[39m\");\n    }\n\n    if (background) {\n      color = getColor(background);\n      string = \"\\x1B[\".concat(background + 10, \"m\").concat(string, \"\\x1B[49m\");\n    }\n  }\n\n  return string;\n}\n//# sourceMappingURL=color.js.map","export function autobind(obj) {\n  let predefined = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ['constructor'];\n  const proto = Object.getPrototypeOf(obj);\n  const propNames = Object.getOwnPropertyNames(proto);\n\n  for (const key of propNames) {\n    if (typeof obj[key] === 'function') {\n      if (!predefined.find(name => key === name)) {\n        obj[key] = obj[key].bind(obj);\n      }\n    }\n  }\n}\n//# sourceMappingURL=autobind.js.map","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'Assertion failed');\n  }\n}\n//# sourceMappingURL=assert.js.map","import { window, process, isBrowser } from '@probe.gl/env';\nexport function getHiResTimestamp() {\n  let timestamp;\n\n  if (isBrowser && 'performance' in window) {\n    var _window$performance, _window$performance$n;\n\n    timestamp = window === null || window === void 0 ? void 0 : (_window$performance = window.performance) === null || _window$performance === void 0 ? void 0 : (_window$performance$n = _window$performance.now) === null || _window$performance$n === void 0 ? void 0 : _window$performance$n.call(_window$performance);\n  } else if ('hrtime' in process) {\n    var _process$hrtime;\n\n    const timeParts = process === null || process === void 0 ? void 0 : (_process$hrtime = process.hrtime) === null || _process$hrtime === void 0 ? void 0 : _process$hrtime.call(process);\n    timestamp = timeParts[0] * 1000 + timeParts[1] / 1e6;\n  } else {\n    timestamp = Date.now();\n  }\n\n  return timestamp;\n}\n//# sourceMappingURL=hi-res-timestamp.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { VERSION, isBrowser } from '@probe.gl/env';\nimport LocalStorage from './utils/local-storage';\nimport { formatImage, formatTime, leftPad } from './utils/formatters';\nimport { addColor } from './utils/color';\nimport { autobind } from './utils/autobind';\nimport assert from './utils/assert';\nimport { getHiResTimestamp } from './utils/hi-res-timestamp';\nimport * as asciify from './node/node-asciify-image';\nconst originalConsole = {\n  debug: isBrowser ? console.debug || console.log : console.log,\n  log: console.log,\n  info: console.info,\n  warn: console.warn,\n  error: console.error\n};\nconst DEFAULT_SETTINGS = {\n  enabled: true,\n  level: 0\n};\n\nfunction noop() {}\n\nconst cache = {};\nconst ONCE = {\n  once: true\n};\nexport default class Log {\n  constructor() {\n    let {\n      id\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      id: ''\n    };\n\n    _defineProperty(this, \"id\", void 0);\n\n    _defineProperty(this, \"VERSION\", VERSION);\n\n    _defineProperty(this, \"_startTs\", getHiResTimestamp());\n\n    _defineProperty(this, \"_deltaTs\", getHiResTimestamp());\n\n    _defineProperty(this, \"_storage\", void 0);\n\n    _defineProperty(this, \"userData\", {});\n\n    _defineProperty(this, \"LOG_THROTTLE_TIMEOUT\", 0);\n\n    this.id = id;\n    this._storage = new LocalStorage(\"__probe-\".concat(this.id, \"__\"), DEFAULT_SETTINGS);\n    this.userData = {};\n    this.timeStamp(\"\".concat(this.id, \" started\"));\n    autobind(this);\n    Object.seal(this);\n  }\n\n  set level(newLevel) {\n    this.setLevel(newLevel);\n  }\n\n  get level() {\n    return this.getLevel();\n  }\n\n  isEnabled() {\n    return this._storage.config.enabled;\n  }\n\n  getLevel() {\n    return this._storage.config.level;\n  }\n\n  getTotal() {\n    return Number((getHiResTimestamp() - this._startTs).toPrecision(10));\n  }\n\n  getDelta() {\n    return Number((getHiResTimestamp() - this._deltaTs).toPrecision(10));\n  }\n\n  set priority(newPriority) {\n    this.level = newPriority;\n  }\n\n  get priority() {\n    return this.level;\n  }\n\n  getPriority() {\n    return this.level;\n  }\n\n  enable() {\n    let enabled = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n    this._storage.updateConfiguration({\n      enabled\n    });\n\n    return this;\n  }\n\n  setLevel(level) {\n    this._storage.updateConfiguration({\n      level\n    });\n\n    return this;\n  }\n\n  get(setting) {\n    return this._storage.config[setting];\n  }\n\n  set(setting, value) {\n    this._storage.updateConfiguration({\n      [setting]: value\n    });\n  }\n\n  settings() {\n    if (console.table) {\n      console.table(this._storage.config);\n    } else {\n      console.log(this._storage.config);\n    }\n  }\n\n  assert(condition, message) {\n    assert(condition, message);\n  }\n\n  warn(message) {\n    return this._getLogFunction(0, message, originalConsole.warn, arguments, ONCE);\n  }\n\n  error(message) {\n    return this._getLogFunction(0, message, originalConsole.error, arguments);\n  }\n\n  deprecated(oldUsage, newUsage) {\n    return this.warn(\"`\".concat(oldUsage, \"` is deprecated and will be removed in a later version. Use `\").concat(newUsage, \"` instead\"));\n  }\n\n  removed(oldUsage, newUsage) {\n    return this.error(\"`\".concat(oldUsage, \"` has been removed. Use `\").concat(newUsage, \"` instead\"));\n  }\n\n  probe(logLevel, message) {\n    return this._getLogFunction(logLevel, message, originalConsole.log, arguments, {\n      time: true,\n      once: true\n    });\n  }\n\n  log(logLevel, message) {\n    return this._getLogFunction(logLevel, message, originalConsole.debug, arguments);\n  }\n\n  info(logLevel, message) {\n    return this._getLogFunction(logLevel, message, console.info, arguments);\n  }\n\n  once(logLevel, message) {\n    for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n      args[_key - 2] = arguments[_key];\n    }\n\n    return this._getLogFunction(logLevel, message, originalConsole.debug || originalConsole.info, arguments, ONCE);\n  }\n\n  table(logLevel, table, columns) {\n    if (table) {\n      return this._getLogFunction(logLevel, table, console.table || noop, columns && [columns], {\n        tag: getTableHeader(table)\n      });\n    }\n\n    return noop;\n  }\n\n  image(_ref) {\n    let {\n      logLevel,\n      priority,\n      image,\n      message = '',\n      scale = 1\n    } = _ref;\n\n    if (!this._shouldLog(logLevel || priority)) {\n      return noop;\n    }\n\n    return isBrowser ? logImageInBrowser({\n      image,\n      message,\n      scale\n    }) : logImageInNode({\n      image,\n      message,\n      scale\n    });\n  }\n\n  time(logLevel, message) {\n    return this._getLogFunction(logLevel, message, console.time ? console.time : console.info);\n  }\n\n  timeEnd(logLevel, message) {\n    return this._getLogFunction(logLevel, message, console.timeEnd ? console.timeEnd : console.info);\n  }\n\n  timeStamp(logLevel, message) {\n    return this._getLogFunction(logLevel, message, console.timeStamp || noop);\n  }\n\n  group(logLevel, message) {\n    let opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {\n      collapsed: false\n    };\n    const options = normalizeArguments({\n      logLevel,\n      message,\n      opts\n    });\n    const {\n      collapsed\n    } = opts;\n    options.method = (collapsed ? console.groupCollapsed : console.group) || console.info;\n    return this._getLogFunction(options);\n  }\n\n  groupCollapsed(logLevel, message) {\n    let opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return this.group(logLevel, message, Object.assign({}, opts, {\n      collapsed: true\n    }));\n  }\n\n  groupEnd(logLevel) {\n    return this._getLogFunction(logLevel, '', console.groupEnd || noop);\n  }\n\n  withGroup(logLevel, message, func) {\n    this.group(logLevel, message)();\n\n    try {\n      func();\n    } finally {\n      this.groupEnd(logLevel)();\n    }\n  }\n\n  trace() {\n    if (console.trace) {\n      console.trace();\n    }\n  }\n\n  _shouldLog(logLevel) {\n    return this.isEnabled() && this.getLevel() >= normalizeLogLevel(logLevel);\n  }\n\n  _getLogFunction(logLevel, message, method, args, opts) {\n    if (this._shouldLog(logLevel)) {\n      opts = normalizeArguments({\n        logLevel,\n        message,\n        args,\n        opts\n      });\n      method = method || opts.method;\n      assert(method);\n      opts.total = this.getTotal();\n      opts.delta = this.getDelta();\n      this._deltaTs = getHiResTimestamp();\n      const tag = opts.tag || opts.message;\n\n      if (opts.once) {\n        if (!cache[tag]) {\n          cache[tag] = getHiResTimestamp();\n        } else {\n          return noop;\n        }\n      }\n\n      message = decorateMessage(this.id, opts.message, opts);\n      return method.bind(console, message, ...opts.args);\n    }\n\n    return noop;\n  }\n\n}\n\n_defineProperty(Log, \"VERSION\", VERSION);\n\nfunction normalizeLogLevel(logLevel) {\n  if (!logLevel) {\n    return 0;\n  }\n\n  let resolvedLevel;\n\n  switch (typeof logLevel) {\n    case 'number':\n      resolvedLevel = logLevel;\n      break;\n\n    case 'object':\n      resolvedLevel = logLevel.logLevel || logLevel.priority || 0;\n      break;\n\n    default:\n      return 0;\n  }\n\n  assert(Number.isFinite(resolvedLevel) && resolvedLevel >= 0);\n  return resolvedLevel;\n}\n\nexport function normalizeArguments(opts) {\n  const {\n    logLevel,\n    message\n  } = opts;\n  opts.logLevel = normalizeLogLevel(logLevel);\n  const args = opts.args ? Array.from(opts.args) : [];\n\n  while (args.length && args.shift() !== message) {}\n\n  switch (typeof logLevel) {\n    case 'string':\n    case 'function':\n      if (message !== undefined) {\n        args.unshift(message);\n      }\n\n      opts.message = logLevel;\n      break;\n\n    case 'object':\n      Object.assign(opts, logLevel);\n      break;\n\n    default:\n  }\n\n  if (typeof opts.message === 'function') {\n    opts.message = opts.message();\n  }\n\n  const messageType = typeof opts.message;\n  assert(messageType === 'string' || messageType === 'object');\n  return Object.assign(opts, {\n    args\n  }, opts.opts);\n}\n\nfunction decorateMessage(id, message, opts) {\n  if (typeof message === 'string') {\n    const time = opts.time ? leftPad(formatTime(opts.total)) : '';\n    message = opts.time ? \"\".concat(id, \": \").concat(time, \"  \").concat(message) : \"\".concat(id, \": \").concat(message);\n    message = addColor(message, opts.color, opts.background);\n  }\n\n  return message;\n}\n\nfunction logImageInNode(_ref2) {\n  let {\n    image,\n    message = '',\n    scale = 1\n  } = _ref2;\n  asciify.nodeAsciifyImage({\n    image,\n    message,\n    scale\n  });\n  return noop;\n}\n\nfunction logImageInBrowser(_ref3) {\n  let {\n    image,\n    message = '',\n    scale = 1\n  } = _ref3;\n\n  if (typeof image === 'string') {\n    const img = new Image();\n\n    img.onload = () => {\n      const args = formatImage(img, message, scale);\n      console.log(...args);\n    };\n\n    img.src = image;\n    return noop;\n  }\n\n  const element = image.nodeName || '';\n\n  if (element.toLowerCase() === 'img') {\n    console.log(...formatImage(image, message, scale));\n    return noop;\n  }\n\n  if (element.toLowerCase() === 'canvas') {\n    const img = new Image();\n\n    img.onload = () => console.log(...formatImage(img, message, scale));\n\n    img.src = image.toDataURL();\n    return noop;\n  }\n\n  return noop;\n}\n\nfunction getTableHeader(table) {\n  for (const key in table) {\n    for (const title in table[key]) {\n      return title || 'untitled';\n    }\n  }\n\n  return 'empty';\n}\n//# sourceMappingURL=log.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { Log } from 'probe.gl';\nexport const probeLog = new Log({\n  id: 'loaders.gl'\n});\nexport class NullLog {\n  log() {\n    return () => {};\n  }\n\n  info() {\n    return () => {};\n  }\n\n  warn() {\n    return () => {};\n  }\n\n  error() {\n    return () => {};\n  }\n\n}\nexport class ConsoleLog {\n  constructor() {\n    _defineProperty(this, \"console\", void 0);\n\n    this.console = console;\n  }\n\n  log(...args) {\n    return this.console.log.bind(this.console, ...args);\n  }\n\n  info(...args) {\n    return this.console.info.bind(this.console, ...args);\n  }\n\n  warn(...args) {\n    return this.console.warn.bind(this.console, ...args);\n  }\n\n  error(...args) {\n    return this.console.error.bind(this.console, ...args);\n  }\n\n}\n//# sourceMappingURL=loggers.js.map","import { isBrowser } from '@loaders.gl/loader-utils';\nimport { ConsoleLog } from './loggers';\nexport const DEFAULT_LOADER_OPTIONS = {\n  fetch: null,\n  mimeType: undefined,\n  nothrow: false,\n  log: new ConsoleLog(),\n  CDN: 'https://unpkg.com/@loaders.gl',\n  worker: true,\n  maxConcurrency: 3,\n  maxMobileConcurrency: 1,\n  reuseWorkers: isBrowser,\n  _nodeWorkers: false,\n  _workerType: '',\n  limit: 0,\n  _limitMB: 0,\n  batchSize: 'auto',\n  batchDebounceMs: 0,\n  metadata: false,\n  transforms: []\n};\nexport const REMOVED_LOADER_OPTIONS = {\n  throws: 'nothrow',\n  dataType: '(no longer used)',\n  uri: 'baseUri',\n  method: 'fetch.method',\n  headers: 'fetch.headers',\n  body: 'fetch.body',\n  mode: 'fetch.mode',\n  credentials: 'fetch.credentials',\n  cache: 'fetch.cache',\n  redirect: 'fetch.redirect',\n  referrer: 'fetch.referrer',\n  referrerPolicy: 'fetch.referrerPolicy',\n  integrity: 'fetch.integrity',\n  keepalive: 'fetch.keepalive',\n  signal: 'fetch.signal'\n};\n//# sourceMappingURL=option-defaults.js.map","import { isPureObject, isObject } from '../../javascript-utils/is-type';\nimport { fetchFile } from '../fetch/fetch-file';\nimport { probeLog, NullLog } from './loggers';\nimport { DEFAULT_LOADER_OPTIONS, REMOVED_LOADER_OPTIONS } from './option-defaults';\nexport function getGlobalLoaderState() {\n  globalThis.loaders = globalThis.loaders || {};\n  const {\n    loaders\n  } = globalThis;\n  loaders._state = loaders._state || {};\n  return loaders._state;\n}\nexport const getGlobalLoaderOptions = () => {\n  const state = getGlobalLoaderState();\n  state.globalOptions = state.globalOptions || { ...DEFAULT_LOADER_OPTIONS\n  };\n  return state.globalOptions;\n};\nexport function setGlobalOptions(options) {\n  const state = getGlobalLoaderState();\n  const globalOptions = getGlobalLoaderOptions();\n  state.globalOptions = normalizeOptionsInternal(globalOptions, options);\n}\nexport function normalizeOptions(options, loader, loaders, url) {\n  loaders = loaders || [];\n  loaders = Array.isArray(loaders) ? loaders : [loaders];\n  validateOptions(options, loaders);\n  return normalizeOptionsInternal(loader, options, url);\n}\nexport function getFetchFunction(options, context) {\n  const globalOptions = getGlobalLoaderOptions();\n  const fetchOptions = options || globalOptions;\n\n  if (typeof fetchOptions.fetch === 'function') {\n    return fetchOptions.fetch;\n  }\n\n  if (isObject(fetchOptions.fetch)) {\n    return url => fetchFile(url, fetchOptions);\n  }\n\n  if (context !== null && context !== void 0 && context.fetch) {\n    return context === null || context === void 0 ? void 0 : context.fetch;\n  }\n\n  return fetchFile;\n}\n\nfunction validateOptions(options, loaders) {\n  validateOptionsObject(options, null, DEFAULT_LOADER_OPTIONS, REMOVED_LOADER_OPTIONS, loaders);\n\n  for (const loader of loaders) {\n    const idOptions = options && options[loader.id] || {};\n    const loaderOptions = loader.options && loader.options[loader.id] || {};\n    const deprecatedOptions = loader.deprecatedOptions && loader.deprecatedOptions[loader.id] || {};\n    validateOptionsObject(idOptions, loader.id, loaderOptions, deprecatedOptions, loaders);\n  }\n}\n\nfunction validateOptionsObject(options, id, defaultOptions, deprecatedOptions, loaders) {\n  const loaderName = id || 'Top level';\n  const prefix = id ? \"\".concat(id, \".\") : '';\n\n  for (const key in options) {\n    const isSubOptions = !id && isObject(options[key]);\n    const isBaseUriOption = key === 'baseUri' && !id;\n    const isWorkerUrlOption = key === 'workerUrl' && id;\n\n    if (!(key in defaultOptions) && !isBaseUriOption && !isWorkerUrlOption) {\n      if (key in deprecatedOptions) {\n        probeLog.warn(\"\".concat(loaderName, \" loader option '\").concat(prefix).concat(key, \"' no longer supported, use '\").concat(deprecatedOptions[key], \"'\"))();\n      } else if (!isSubOptions) {\n        const suggestion = findSimilarOption(key, loaders);\n        probeLog.warn(\"\".concat(loaderName, \" loader option '\").concat(prefix).concat(key, \"' not recognized. \").concat(suggestion))();\n      }\n    }\n  }\n}\n\nfunction findSimilarOption(optionKey, loaders) {\n  const lowerCaseOptionKey = optionKey.toLowerCase();\n  let bestSuggestion = '';\n\n  for (const loader of loaders) {\n    for (const key in loader.options) {\n      if (optionKey === key) {\n        return \"Did you mean '\".concat(loader.id, \".\").concat(key, \"'?\");\n      }\n\n      const lowerCaseKey = key.toLowerCase();\n      const isPartialMatch = lowerCaseOptionKey.startsWith(lowerCaseKey) || lowerCaseKey.startsWith(lowerCaseOptionKey);\n\n      if (isPartialMatch) {\n        bestSuggestion = bestSuggestion || \"Did you mean '\".concat(loader.id, \".\").concat(key, \"'?\");\n      }\n    }\n  }\n\n  return bestSuggestion;\n}\n\nfunction normalizeOptionsInternal(loader, options, url) {\n  const loaderDefaultOptions = loader.options || {};\n  const mergedOptions = { ...loaderDefaultOptions\n  };\n  addUrlOptions(mergedOptions, url);\n\n  if (mergedOptions.log === null) {\n    mergedOptions.log = new NullLog();\n  }\n\n  mergeNestedFields(mergedOptions, getGlobalLoaderOptions());\n  mergeNestedFields(mergedOptions, options);\n  return mergedOptions;\n}\n\nfunction mergeNestedFields(mergedOptions, options) {\n  for (const key in options) {\n    if (key in options) {\n      const value = options[key];\n\n      if (isPureObject(value) && isPureObject(mergedOptions[key])) {\n        mergedOptions[key] = { ...mergedOptions[key],\n          ...options[key]\n        };\n      } else {\n        mergedOptions[key] = options[key];\n      }\n    }\n  }\n}\n\nfunction addUrlOptions(options, url) {\n  if (url && !('baseUri' in options)) {\n    options.baseUri = url;\n  }\n}\n//# sourceMappingURL=option-utils.js.map","import { assert } from '@loaders.gl/loader-utils';\nexport function isLoaderObject(loader) {\n  var _loader;\n\n  if (!loader) {\n    return false;\n  }\n\n  if (Array.isArray(loader)) {\n    loader = loader[0];\n  }\n\n  const hasExtensions = Array.isArray((_loader = loader) === null || _loader === void 0 ? void 0 : _loader.extensions);\n  return hasExtensions;\n}\nexport function normalizeLoader(loader) {\n  var _loader2, _loader3;\n\n  assert(loader, 'null loader');\n  assert(isLoaderObject(loader), 'invalid loader');\n  let options;\n\n  if (Array.isArray(loader)) {\n    options = loader[1];\n    loader = loader[0];\n    loader = { ...loader,\n      options: { ...loader.options,\n        ...options\n      }\n    };\n  }\n\n  if ((_loader2 = loader) !== null && _loader2 !== void 0 && _loader2.parseTextSync || (_loader3 = loader) !== null && _loader3 !== void 0 && _loader3.parseText) {\n    loader.text = true;\n  }\n\n  if (!loader.text) {\n    loader.binary = true;\n  }\n\n  return loader;\n}\n//# sourceMappingURL=normalize-loader.js.map","import { normalizeLoader } from '../loader-utils/normalize-loader';\nimport { getGlobalLoaderState } from '../loader-utils/option-utils';\n\nconst getGlobalLoaderRegistry = () => {\n  const state = getGlobalLoaderState();\n  state.loaderRegistry = state.loaderRegistry || [];\n  return state.loaderRegistry;\n};\n\nexport function registerLoaders(loaders) {\n  const loaderRegistry = getGlobalLoaderRegistry();\n  loaders = Array.isArray(loaders) ? loaders : [loaders];\n\n  for (const loader of loaders) {\n    const normalizedLoader = normalizeLoader(loader);\n\n    if (!loaderRegistry.find(registeredLoader => normalizedLoader === registeredLoader)) {\n      loaderRegistry.unshift(normalizedLoader);\n    }\n  }\n}\nexport function getRegisteredLoaders() {\n  return getGlobalLoaderRegistry();\n}\nexport function _unregisterLoaders() {\n  const state = getGlobalLoaderState();\n  state.loaderRegistry = [];\n}\n//# sourceMappingURL=register-loaders.js.map","import { Log } from '@probe.gl/log';\nexport const log = new Log({\n  id: 'loaders.gl'\n});\n//# sourceMappingURL=log.js.map","import { compareArrayBuffers, path } from '@loaders.gl/loader-utils';\nimport { normalizeLoader } from '../loader-utils/normalize-loader';\nimport { log } from '../utils/log';\nimport { getResourceUrlAndType } from '../utils/resource-utils';\nimport { getRegisteredLoaders } from './register-loaders';\nimport { isBlob } from '../../javascript-utils/is-type';\nconst EXT_PATTERN = /\\.([^.]+)$/;\nexport async function selectLoader(data, loaders = [], options, context) {\n  if (!validHTTPResponse(data)) {\n    return null;\n  }\n\n  let loader = selectLoaderSync(data, loaders, { ...options,\n    nothrow: true\n  }, context);\n\n  if (loader) {\n    return loader;\n  }\n\n  if (isBlob(data)) {\n    data = await data.slice(0, 10).arrayBuffer();\n    loader = selectLoaderSync(data, loaders, options, context);\n  }\n\n  if (!loader && !(options !== null && options !== void 0 && options.nothrow)) {\n    throw new Error(getNoValidLoaderMessage(data));\n  }\n\n  return loader;\n}\nexport function selectLoaderSync(data, loaders = [], options, context) {\n  if (!validHTTPResponse(data)) {\n    return null;\n  }\n\n  if (loaders && !Array.isArray(loaders)) {\n    return normalizeLoader(loaders);\n  }\n\n  let candidateLoaders = [];\n\n  if (loaders) {\n    candidateLoaders = candidateLoaders.concat(loaders);\n  }\n\n  if (!(options !== null && options !== void 0 && options.ignoreRegisteredLoaders)) {\n    candidateLoaders.push(...getRegisteredLoaders());\n  }\n\n  normalizeLoaders(candidateLoaders);\n  const loader = selectLoaderInternal(data, candidateLoaders, options, context);\n\n  if (!loader && !(options !== null && options !== void 0 && options.nothrow)) {\n    throw new Error(getNoValidLoaderMessage(data));\n  }\n\n  return loader;\n}\n\nfunction selectLoaderInternal(data, loaders, options, context) {\n  const {\n    url,\n    type\n  } = getResourceUrlAndType(data);\n  const testUrl = url || (context === null || context === void 0 ? void 0 : context.url);\n  let loader = null;\n  let reason = '';\n\n  if (options !== null && options !== void 0 && options.mimeType) {\n    loader = findLoaderByMIMEType(loaders, options === null || options === void 0 ? void 0 : options.mimeType);\n    reason = \"match forced by supplied MIME type \".concat(options === null || options === void 0 ? void 0 : options.mimeType);\n  }\n\n  loader = loader || findLoaderByUrl(loaders, testUrl);\n  reason = reason || (loader ? \"matched url \".concat(testUrl) : '');\n  loader = loader || findLoaderByMIMEType(loaders, type);\n  reason = reason || (loader ? \"matched MIME type \".concat(type) : '');\n  loader = loader || findLoaderByInitialBytes(loaders, data);\n  reason = reason || (loader ? \"matched initial data \".concat(getFirstCharacters(data)) : '');\n  loader = loader || findLoaderByMIMEType(loaders, options === null || options === void 0 ? void 0 : options.fallbackMimeType);\n  reason = reason || (loader ? \"matched fallback MIME type \".concat(type) : '');\n\n  if (reason) {\n    var _loader;\n\n    log.log(1, \"selectLoader selected \".concat((_loader = loader) === null || _loader === void 0 ? void 0 : _loader.name, \": \").concat(reason, \".\"));\n  }\n\n  return loader;\n}\n\nfunction validHTTPResponse(data) {\n  if (data instanceof Response) {\n    if (data.status === 204) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction getNoValidLoaderMessage(data) {\n  const {\n    url,\n    type\n  } = getResourceUrlAndType(data);\n  let message = 'No valid loader found (';\n  message += url ? \"\".concat(path.filename(url), \", \") : 'no url provided, ';\n  message += \"MIME type: \".concat(type ? \"\\\"\".concat(type, \"\\\"\") : 'not provided', \", \");\n  const firstCharacters = data ? getFirstCharacters(data) : '';\n  message += firstCharacters ? \" first bytes: \\\"\".concat(firstCharacters, \"\\\"\") : 'first bytes: not available';\n  message += ')';\n  return message;\n}\n\nfunction normalizeLoaders(loaders) {\n  for (const loader of loaders) {\n    normalizeLoader(loader);\n  }\n}\n\nfunction findLoaderByUrl(loaders, url) {\n  const match = url && EXT_PATTERN.exec(url);\n  const extension = match && match[1];\n  return extension ? findLoaderByExtension(loaders, extension) : null;\n}\n\nfunction findLoaderByExtension(loaders, extension) {\n  extension = extension.toLowerCase();\n\n  for (const loader of loaders) {\n    for (const loaderExtension of loader.extensions) {\n      if (loaderExtension.toLowerCase() === extension) {\n        return loader;\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction findLoaderByMIMEType(loaders, mimeType) {\n  for (const loader of loaders) {\n    if (loader.mimeTypes && loader.mimeTypes.includes(mimeType)) {\n      return loader;\n    }\n\n    if (mimeType === \"application/x.\".concat(loader.id)) {\n      return loader;\n    }\n  }\n\n  return null;\n}\n\nfunction findLoaderByInitialBytes(loaders, data) {\n  if (!data) {\n    return null;\n  }\n\n  for (const loader of loaders) {\n    if (typeof data === 'string') {\n      if (testDataAgainstText(data, loader)) {\n        return loader;\n      }\n    } else if (ArrayBuffer.isView(data)) {\n      if (testDataAgainstBinary(data.buffer, data.byteOffset, loader)) {\n        return loader;\n      }\n    } else if (data instanceof ArrayBuffer) {\n      const byteOffset = 0;\n\n      if (testDataAgainstBinary(data, byteOffset, loader)) {\n        return loader;\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction testDataAgainstText(data, loader) {\n  if (loader.testText) {\n    return loader.testText(data);\n  }\n\n  const tests = Array.isArray(loader.tests) ? loader.tests : [loader.tests];\n  return tests.some(test => data.startsWith(test));\n}\n\nfunction testDataAgainstBinary(data, byteOffset, loader) {\n  const tests = Array.isArray(loader.tests) ? loader.tests : [loader.tests];\n  return tests.some(test => testBinary(data, byteOffset, loader, test));\n}\n\nfunction testBinary(data, byteOffset, loader, test) {\n  if (test instanceof ArrayBuffer) {\n    return compareArrayBuffers(test, data, test.byteLength);\n  }\n\n  switch (typeof test) {\n    case 'function':\n      return test(data, loader);\n\n    case 'string':\n      const magic = getMagicString(data, byteOffset, test.length);\n      return test === magic;\n\n    default:\n      return false;\n  }\n}\n\nfunction getFirstCharacters(data, length = 5) {\n  if (typeof data === 'string') {\n    return data.slice(0, length);\n  } else if (ArrayBuffer.isView(data)) {\n    return getMagicString(data.buffer, data.byteOffset, length);\n  } else if (data instanceof ArrayBuffer) {\n    const byteOffset = 0;\n    return getMagicString(data, byteOffset, length);\n  }\n\n  return '';\n}\n\nfunction getMagicString(arrayBuffer, byteOffset, length) {\n  if (arrayBuffer.byteLength < byteOffset + length) {\n    return '';\n  }\n\n  const dataView = new DataView(arrayBuffer);\n  let magic = '';\n\n  for (let i = 0; i < length; i++) {\n    magic += String.fromCharCode(dataView.getUint8(byteOffset + i));\n  }\n\n  return magic;\n}\n//# sourceMappingURL=select-loader.js.map","const DEFAULT_CHUNK_SIZE = 256 * 1024;\nexport function* makeStringIterator(string, options) {\n  const chunkSize = (options === null || options === void 0 ? void 0 : options.chunkSize) || DEFAULT_CHUNK_SIZE;\n  let offset = 0;\n  const textEncoder = new TextEncoder();\n\n  while (offset < string.length) {\n    const chunkLength = Math.min(string.length - offset, chunkSize);\n    const chunk = string.slice(offset, offset + chunkLength);\n    offset += chunkLength;\n    yield textEncoder.encode(chunk);\n  }\n}\n//# sourceMappingURL=make-string-iterator.js.map","const DEFAULT_CHUNK_SIZE = 256 * 1024;\nexport function* makeArrayBufferIterator(arrayBuffer, options = {}) {\n  const {\n    chunkSize = DEFAULT_CHUNK_SIZE\n  } = options;\n  let byteOffset = 0;\n\n  while (byteOffset < arrayBuffer.byteLength) {\n    const chunkByteLength = Math.min(arrayBuffer.byteLength - byteOffset, chunkSize);\n    const chunk = new ArrayBuffer(chunkByteLength);\n    const sourceArray = new Uint8Array(arrayBuffer, byteOffset, chunkByteLength);\n    const chunkArray = new Uint8Array(chunk);\n    chunkArray.set(sourceArray);\n    byteOffset += chunkByteLength;\n    yield chunk;\n  }\n}\n//# sourceMappingURL=make-array-buffer-iterator.js.map","const DEFAULT_CHUNK_SIZE = 1024 * 1024;\nexport async function* makeBlobIterator(blob, options) {\n  const chunkSize = (options === null || options === void 0 ? void 0 : options.chunkSize) || DEFAULT_CHUNK_SIZE;\n  let offset = 0;\n\n  while (offset < blob.size) {\n    const end = offset + chunkSize;\n    const chunk = await blob.slice(offset, end).arrayBuffer();\n    offset = end;\n    yield chunk;\n  }\n}\n//# sourceMappingURL=make-blob-iterator.js.map","import { isBrowser, toArrayBuffer } from '@loaders.gl/loader-utils';\nexport function makeStreamIterator(stream, options) {\n  return isBrowser ? makeBrowserStreamIterator(stream, options) : makeNodeStreamIterator(stream, options);\n}\n\nasync function* makeBrowserStreamIterator(stream, options) {\n  const reader = stream.getReader();\n  let nextBatchPromise;\n\n  try {\n    while (true) {\n      const currentBatchPromise = nextBatchPromise || reader.read();\n\n      if (options !== null && options !== void 0 && options._streamReadAhead) {\n        nextBatchPromise = reader.read();\n      }\n\n      const {\n        done,\n        value\n      } = await currentBatchPromise;\n\n      if (done) {\n        return;\n      }\n\n      yield toArrayBuffer(value);\n    }\n  } catch (error) {\n    reader.releaseLock();\n  }\n}\n\nasync function* makeNodeStreamIterator(stream, options) {\n  for await (const chunk of stream) {\n    yield toArrayBuffer(chunk);\n  }\n}\n//# sourceMappingURL=make-stream-iterator.js.map","import { makeStringIterator } from './make-string-iterator';\nimport { makeArrayBufferIterator } from './make-array-buffer-iterator';\nimport { makeBlobIterator } from './make-blob-iterator';\nimport { makeStreamIterator } from './make-stream-iterator';\nimport { isBlob, isReadableStream, isResponse } from '../../javascript-utils/is-type';\nexport function makeIterator(data, options) {\n  if (typeof data === 'string') {\n    return makeStringIterator(data, options);\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return makeArrayBufferIterator(data, options);\n  }\n\n  if (isBlob(data)) {\n    return makeBlobIterator(data, options);\n  }\n\n  if (isReadableStream(data)) {\n    return makeStreamIterator(data, options);\n  }\n\n  if (isResponse(data)) {\n    const response = data;\n    return makeStreamIterator(response.body, options);\n  }\n\n  throw new Error('makeIterator');\n}\n//# sourceMappingURL=make-iterator.js.map","import { concatenateArrayBuffersAsync } from '@loaders.gl/loader-utils';\nimport { isResponse, isReadableStream, isAsyncIterable, isIterable, isIterator, isBlob, isBuffer } from '../../javascript-utils/is-type';\nimport { makeIterator } from '../../iterators/make-iterator/make-iterator';\nimport { checkResponse, makeResponse } from '../utils/response-utils';\nconst ERR_DATA = 'Cannot convert supplied data type';\nexport function getArrayBufferOrStringFromDataSync(data, loader, options) {\n  if (loader.text && typeof data === 'string') {\n    return data;\n  }\n\n  if (isBuffer(data)) {\n    data = data.buffer;\n  }\n\n  if (data instanceof ArrayBuffer) {\n    const arrayBuffer = data;\n\n    if (loader.text && !loader.binary) {\n      const textDecoder = new TextDecoder('utf8');\n      return textDecoder.decode(arrayBuffer);\n    }\n\n    return arrayBuffer;\n  }\n\n  if (ArrayBuffer.isView(data)) {\n    if (loader.text && !loader.binary) {\n      const textDecoder = new TextDecoder('utf8');\n      return textDecoder.decode(data);\n    }\n\n    let arrayBuffer = data.buffer;\n    const byteLength = data.byteLength || data.length;\n\n    if (data.byteOffset !== 0 || byteLength !== arrayBuffer.byteLength) {\n      arrayBuffer = arrayBuffer.slice(data.byteOffset, data.byteOffset + byteLength);\n    }\n\n    return arrayBuffer;\n  }\n\n  throw new Error(ERR_DATA);\n}\nexport async function getArrayBufferOrStringFromData(data, loader, options) {\n  const isArrayBuffer = data instanceof ArrayBuffer || ArrayBuffer.isView(data);\n\n  if (typeof data === 'string' || isArrayBuffer) {\n    return getArrayBufferOrStringFromDataSync(data, loader, options);\n  }\n\n  if (isBlob(data)) {\n    data = await makeResponse(data);\n  }\n\n  if (isResponse(data)) {\n    const response = data;\n    await checkResponse(response);\n    return loader.binary ? await response.arrayBuffer() : await response.text();\n  }\n\n  if (isReadableStream(data)) {\n    data = makeIterator(data, options);\n  }\n\n  if (isIterable(data) || isAsyncIterable(data)) {\n    return concatenateArrayBuffersAsync(data);\n  }\n\n  throw new Error(ERR_DATA);\n}\nexport async function getAsyncIterableFromData(data, options) {\n  if (isIterator(data)) {\n    return data;\n  }\n\n  if (isResponse(data)) {\n    const response = data;\n    await checkResponse(response);\n    const body = await response.body;\n    return makeIterator(body, options);\n  }\n\n  if (isBlob(data) || isReadableStream(data)) {\n    return makeIterator(data, options);\n  }\n\n  if (isAsyncIterable(data)) {\n    return data[Symbol.asyncIterator]();\n  }\n\n  return getIterableFromData(data);\n}\nexport async function getReadableStream(data) {\n  if (isReadableStream(data)) {\n    return data;\n  }\n\n  if (isResponse(data)) {\n    return data.body;\n  }\n\n  const response = await makeResponse(data);\n  return response.body;\n}\n\nfunction getIterableFromData(data) {\n  if (ArrayBuffer.isView(data)) {\n    return function* oneChunk() {\n      yield data.buffer;\n    }();\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return function* oneChunk() {\n      yield data;\n    }();\n  }\n\n  if (isIterator(data)) {\n    return data;\n  }\n\n  if (isIterable(data)) {\n    return data[Symbol.iterator]();\n  }\n\n  throw new Error(ERR_DATA);\n}\n//# sourceMappingURL=get-data.js.map","import { getFetchFunction } from './option-utils';\nexport function getLoaderContext(context, options, previousContext = null) {\n  if (previousContext) {\n    return previousContext;\n  }\n\n  const resolvedContext = {\n    fetch: getFetchFunction(options, context),\n    ...context\n  };\n\n  if (!Array.isArray(resolvedContext.loaders)) {\n    resolvedContext.loaders = null;\n  }\n\n  return resolvedContext;\n}\nexport function getLoadersFromContext(loaders, context) {\n  if (!context && loaders && !Array.isArray(loaders)) {\n    return loaders;\n  }\n\n  let candidateLoaders;\n\n  if (loaders) {\n    candidateLoaders = Array.isArray(loaders) ? loaders : [loaders];\n  }\n\n  if (context && context.loaders) {\n    const contextLoaders = Array.isArray(context.loaders) ? context.loaders : [context.loaders];\n    candidateLoaders = candidateLoaders ? [...candidateLoaders, ...contextLoaders] : contextLoaders;\n  }\n\n  return candidateLoaders && candidateLoaders.length ? candidateLoaders : null;\n}\n//# sourceMappingURL=loader-context.js.map","import { assert, validateWorkerVersion } from '@loaders.gl/worker-utils';\nimport { parseWithWorker, canParseWithWorker } from '@loaders.gl/loader-utils';\nimport { isLoaderObject } from '../loader-utils/normalize-loader';\nimport { isResponse } from '../../javascript-utils/is-type';\nimport { normalizeOptions } from '../loader-utils/option-utils';\nimport { getArrayBufferOrStringFromData } from '../loader-utils/get-data';\nimport { getLoaderContext, getLoadersFromContext } from '../loader-utils/loader-context';\nimport { getResourceUrlAndType } from '../utils/resource-utils';\nimport { selectLoader } from './select-loader';\nexport async function parse(data, loaders, options, context) {\n  assert(!context || typeof context === 'object');\n\n  if (loaders && !Array.isArray(loaders) && !isLoaderObject(loaders)) {\n    context = undefined;\n    options = loaders;\n    loaders = undefined;\n  }\n\n  data = await data;\n  options = options || {};\n  const {\n    url\n  } = getResourceUrlAndType(data);\n  const typedLoaders = loaders;\n  const candidateLoaders = getLoadersFromContext(typedLoaders, context);\n  const loader = await selectLoader(data, candidateLoaders, options);\n\n  if (!loader) {\n    return null;\n  }\n\n  options = normalizeOptions(options, loader, candidateLoaders, url);\n  context = getLoaderContext({\n    url,\n    parse,\n    loaders: candidateLoaders\n  }, options, context);\n  return await parseWithLoader(loader, data, options, context);\n}\n\nasync function parseWithLoader(loader, data, options, context) {\n  validateWorkerVersion(loader);\n\n  if (isResponse(data)) {\n    const response = data;\n    const {\n      ok,\n      redirected,\n      status,\n      statusText,\n      type,\n      url\n    } = response;\n    const headers = Object.fromEntries(response.headers.entries());\n    context.response = {\n      headers,\n      ok,\n      redirected,\n      status,\n      statusText,\n      type,\n      url\n    };\n  }\n\n  data = await getArrayBufferOrStringFromData(data, loader, options);\n\n  if (loader.parseTextSync && typeof data === 'string') {\n    options.dataType = 'text';\n    return loader.parseTextSync(data, options, context, loader);\n  }\n\n  if (canParseWithWorker(loader, options)) {\n    return await parseWithWorker(loader, data, options, context, parse);\n  }\n\n  if (loader.parseText && typeof data === 'string') {\n    return await loader.parseText(data, options, context, loader);\n  }\n\n  if (loader.parse) {\n    return await loader.parse(data, options, context, loader);\n  }\n\n  assert(!loader.parseSync);\n  throw new Error(\"\".concat(loader.id, \" loader - no parser found and worker is disabled\"));\n}\n//# sourceMappingURL=parse.js.map","import { isBlob } from '../../javascript-utils/is-type';\nimport { isLoaderObject } from '../loader-utils/normalize-loader';\nimport { getFetchFunction } from '../loader-utils/option-utils';\nimport { parse } from './parse';\nexport async function load(url, loaders, options, context) {\n  if (!Array.isArray(loaders) && !isLoaderObject(loaders)) {\n    context = undefined;\n    options = loaders;\n    loaders = undefined;\n  }\n\n  const fetch = getFetchFunction(options);\n  let data = url;\n\n  if (typeof url === 'string') {\n    data = await fetch(url);\n  }\n\n  if (isBlob(url)) {\n    data = await fetch(url);\n  }\n\n  return await parse(data, loaders, options);\n}\n//# sourceMappingURL=load.js.map","export const VERSION = typeof \"3.2.12\" !== 'undefined' ? \"3.2.12\" : 'latest';\n//# sourceMappingURL=version.js.map","export function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'loader assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","const globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nconst self_ = globals.self || globals.window || globals.global || {};\nconst window_ = globals.window || globals.self || globals.global || {};\nconst global_ = globals.global || globals.self || globals.window || {};\nconst document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\nexport const isBrowser = Boolean(typeof process !== 'object' || String(process) !== '[object process]' || process.browser);\nexport const isWorker = typeof importScripts === 'function';\nconst matches = typeof process !== 'undefined' && process.version && /v([0-9]*)/.exec(process.version);\nexport const nodeVersion = matches && parseFloat(matches[1]) || 0;\n//# sourceMappingURL=globals.js.map","import { isBrowser } from '@loaders.gl/loader-utils';\nconst {\n  _parseImageNode\n} = globalThis;\nconst IMAGE_SUPPORTED = typeof Image !== 'undefined';\nconst IMAGE_BITMAP_SUPPORTED = typeof ImageBitmap !== 'undefined';\nconst NODE_IMAGE_SUPPORTED = Boolean(_parseImageNode);\nconst DATA_SUPPORTED = isBrowser ? true : NODE_IMAGE_SUPPORTED;\nexport function isImageTypeSupported(type) {\n  switch (type) {\n    case 'auto':\n      return IMAGE_BITMAP_SUPPORTED || IMAGE_SUPPORTED || DATA_SUPPORTED;\n\n    case 'imagebitmap':\n      return IMAGE_BITMAP_SUPPORTED;\n\n    case 'image':\n      return IMAGE_SUPPORTED;\n\n    case 'data':\n      return DATA_SUPPORTED;\n\n    default:\n      throw new Error(\"@loaders.gl/images: image \".concat(type, \" not supported in this environment\"));\n  }\n}\nexport function getDefaultImageType() {\n  if (IMAGE_BITMAP_SUPPORTED) {\n    return 'imagebitmap';\n  }\n\n  if (IMAGE_SUPPORTED) {\n    return 'image';\n  }\n\n  if (DATA_SUPPORTED) {\n    return 'data';\n  }\n\n  throw new Error('Install \\'@loaders.gl/polyfills\\' to parse images under Node.js');\n}\n//# sourceMappingURL=image-type.js.map","export function isImage(image) {\n  return Boolean(getImageTypeOrNull(image));\n}\nexport function deleteImage(image) {\n  switch (getImageType(image)) {\n    case 'imagebitmap':\n      image.close();\n      break;\n\n    default:\n  }\n}\nexport function getImageType(image) {\n  const format = getImageTypeOrNull(image);\n\n  if (!format) {\n    throw new Error('Not an image');\n  }\n\n  return format;\n}\nexport function getImageSize(image) {\n  return getImageData(image);\n}\nexport function getImageData(image) {\n  switch (getImageType(image)) {\n    case 'data':\n      return image;\n\n    case 'image':\n    case 'imagebitmap':\n      const canvas = document.createElement('canvas');\n      const context = canvas.getContext('2d');\n\n      if (!context) {\n        throw new Error('getImageData');\n      }\n\n      canvas.width = image.width;\n      canvas.height = image.height;\n      context.drawImage(image, 0, 0);\n      return context.getImageData(0, 0, image.width, image.height);\n\n    default:\n      throw new Error('getImageData');\n  }\n}\n\nfunction getImageTypeOrNull(image) {\n  if (typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap) {\n    return 'imagebitmap';\n  }\n\n  if (typeof Image !== 'undefined' && image instanceof Image) {\n    return 'image';\n  }\n\n  if (image && typeof image === 'object' && image.data && image.width && image.height) {\n    return 'data';\n  }\n\n  return null;\n}\n//# sourceMappingURL=parsed-image-api.js.map","const SVG_DATA_URL_PATTERN = /^data:image\\/svg\\+xml/;\nconst SVG_URL_PATTERN = /\\.svg((\\?|#).*)?$/;\nexport function isSVG(url) {\n  return url && (SVG_DATA_URL_PATTERN.test(url) || SVG_URL_PATTERN.test(url));\n}\nexport function getBlobOrSVGDataUrl(arrayBuffer, url) {\n  if (isSVG(url)) {\n    const textDecoder = new TextDecoder();\n    let xmlText = textDecoder.decode(arrayBuffer);\n\n    try {\n      if (typeof unescape === 'function' && typeof encodeURIComponent === 'function') {\n        xmlText = unescape(encodeURIComponent(xmlText));\n      }\n    } catch (error) {\n      throw new Error(error.message);\n    }\n\n    const src = \"data:image/svg+xml;base64,\".concat(btoa(xmlText));\n    return src;\n  }\n\n  return getBlob(arrayBuffer, url);\n}\nexport function getBlob(arrayBuffer, url) {\n  if (isSVG(url)) {\n    throw new Error('SVG cannot be parsed directly to imagebitmap');\n  }\n\n  return new Blob([new Uint8Array(arrayBuffer)]);\n}\n//# sourceMappingURL=svg-utils.js.map","import { getBlobOrSVGDataUrl } from './svg-utils';\nexport default async function parseToImage(arrayBuffer, options, url) {\n  const blobOrDataUrl = getBlobOrSVGDataUrl(arrayBuffer, url);\n  const URL = self.URL || self.webkitURL;\n  const objectUrl = typeof blobOrDataUrl !== 'string' && URL.createObjectURL(blobOrDataUrl);\n\n  try {\n    return await loadToImage(objectUrl || blobOrDataUrl, options);\n  } finally {\n    if (objectUrl) {\n      URL.revokeObjectURL(objectUrl);\n    }\n  }\n}\nexport async function loadToImage(url, options) {\n  const image = new Image();\n  image.src = url;\n\n  if (options.image && options.image.decode && image.decode) {\n    await image.decode();\n    return image;\n  }\n\n  return await new Promise((resolve, reject) => {\n    try {\n      image.onload = () => resolve(image);\n\n      image.onerror = err => reject(new Error(\"Could not load image \".concat(url, \": \").concat(err)));\n    } catch (error) {\n      reject(error);\n    }\n  });\n}\n//# sourceMappingURL=parse-to-image.js.map","import { isSVG, getBlob } from './svg-utils';\nimport parseToImage from './parse-to-image';\nconst EMPTY_OBJECT = {};\nlet imagebitmapOptionsSupported = true;\nexport default async function parseToImageBitmap(arrayBuffer, options, url) {\n  let blob;\n\n  if (isSVG(url)) {\n    const image = await parseToImage(arrayBuffer, options, url);\n    blob = image;\n  } else {\n    blob = getBlob(arrayBuffer, url);\n  }\n\n  const imagebitmapOptions = options && options.imagebitmap;\n  return await safeCreateImageBitmap(blob, imagebitmapOptions);\n}\n\nasync function safeCreateImageBitmap(blob, imagebitmapOptions = null) {\n  if (isEmptyObject(imagebitmapOptions) || !imagebitmapOptionsSupported) {\n    imagebitmapOptions = null;\n  }\n\n  if (imagebitmapOptions) {\n    try {\n      return await createImageBitmap(blob, imagebitmapOptions);\n    } catch (error) {\n      console.warn(error);\n      imagebitmapOptionsSupported = false;\n    }\n  }\n\n  return await createImageBitmap(blob);\n}\n\nfunction isEmptyObject(object) {\n  for (const key in object || EMPTY_OBJECT) {\n    return false;\n  }\n\n  return true;\n}\n//# sourceMappingURL=parse-to-image-bitmap.js.map","const BIG_ENDIAN = false;\nconst LITTLE_ENDIAN = true;\nexport function getBinaryImageMetadata(binaryData) {\n  const dataView = toDataView(binaryData);\n  return getPngMetadata(dataView) || getJpegMetadata(dataView) || getGifMetadata(dataView) || getBmpMetadata(dataView);\n}\n\nfunction getPngMetadata(binaryData) {\n  const dataView = toDataView(binaryData);\n  const isPng = dataView.byteLength >= 24 && dataView.getUint32(0, BIG_ENDIAN) === 0x89504e47;\n\n  if (!isPng) {\n    return null;\n  }\n\n  return {\n    mimeType: 'image/png',\n    width: dataView.getUint32(16, BIG_ENDIAN),\n    height: dataView.getUint32(20, BIG_ENDIAN)\n  };\n}\n\nfunction getGifMetadata(binaryData) {\n  const dataView = toDataView(binaryData);\n  const isGif = dataView.byteLength >= 10 && dataView.getUint32(0, BIG_ENDIAN) === 0x47494638;\n\n  if (!isGif) {\n    return null;\n  }\n\n  return {\n    mimeType: 'image/gif',\n    width: dataView.getUint16(6, LITTLE_ENDIAN),\n    height: dataView.getUint16(8, LITTLE_ENDIAN)\n  };\n}\n\nexport function getBmpMetadata(binaryData) {\n  const dataView = toDataView(binaryData);\n  const isBmp = dataView.byteLength >= 14 && dataView.getUint16(0, BIG_ENDIAN) === 0x424d && dataView.getUint32(2, LITTLE_ENDIAN) === dataView.byteLength;\n\n  if (!isBmp) {\n    return null;\n  }\n\n  return {\n    mimeType: 'image/bmp',\n    width: dataView.getUint32(18, LITTLE_ENDIAN),\n    height: dataView.getUint32(22, LITTLE_ENDIAN)\n  };\n}\n\nfunction getJpegMetadata(binaryData) {\n  const dataView = toDataView(binaryData);\n  const isJpeg = dataView.byteLength >= 3 && dataView.getUint16(0, BIG_ENDIAN) === 0xffd8 && dataView.getUint8(2) === 0xff;\n\n  if (!isJpeg) {\n    return null;\n  }\n\n  const {\n    tableMarkers,\n    sofMarkers\n  } = getJpegMarkers();\n  let i = 2;\n\n  while (i + 9 < dataView.byteLength) {\n    const marker = dataView.getUint16(i, BIG_ENDIAN);\n\n    if (sofMarkers.has(marker)) {\n      return {\n        mimeType: 'image/jpeg',\n        height: dataView.getUint16(i + 5, BIG_ENDIAN),\n        width: dataView.getUint16(i + 7, BIG_ENDIAN)\n      };\n    }\n\n    if (!tableMarkers.has(marker)) {\n      return null;\n    }\n\n    i += 2;\n    i += dataView.getUint16(i, BIG_ENDIAN);\n  }\n\n  return null;\n}\n\nfunction getJpegMarkers() {\n  const tableMarkers = new Set([0xffdb, 0xffc4, 0xffcc, 0xffdd, 0xfffe]);\n\n  for (let i = 0xffe0; i < 0xfff0; ++i) {\n    tableMarkers.add(i);\n  }\n\n  const sofMarkers = new Set([0xffc0, 0xffc1, 0xffc2, 0xffc3, 0xffc5, 0xffc6, 0xffc7, 0xffc9, 0xffca, 0xffcb, 0xffcd, 0xffce, 0xffcf, 0xffde]);\n  return {\n    tableMarkers,\n    sofMarkers\n  };\n}\n\nfunction toDataView(data) {\n  if (data instanceof DataView) {\n    return data;\n  }\n\n  if (ArrayBuffer.isView(data)) {\n    return new DataView(data.buffer);\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return new DataView(data);\n  }\n\n  throw new Error('toDataView');\n}\n//# sourceMappingURL=binary-image-api.js.map","import { assert } from '@loaders.gl/loader-utils';\nimport { getBinaryImageMetadata } from '../category-api/binary-image-api';\nexport default async function parseToNodeImage(arrayBuffer, options) {\n  const {\n    mimeType\n  } = getBinaryImageMetadata(arrayBuffer) || {};\n  const _parseImageNode = globalThis._parseImageNode;\n  assert(_parseImageNode);\n  return await _parseImageNode(arrayBuffer, mimeType);\n}\n//# sourceMappingURL=parse-to-node-image.js.map","import { assert } from '@loaders.gl/loader-utils';\nimport { isImageTypeSupported, getDefaultImageType } from '../category-api/image-type';\nimport { getImageData } from '../category-api/parsed-image-api';\nimport parseToImage from './parse-to-image';\nimport parseToImageBitmap from './parse-to-image-bitmap';\nimport parseToNodeImage from './parse-to-node-image';\nexport default async function parseImage(arrayBuffer, options, context) {\n  options = options || {};\n  const imageOptions = options.image || {};\n  const imageType = imageOptions.type || 'auto';\n  const {\n    url\n  } = context || {};\n  const loadType = getLoadableImageType(imageType);\n  let image;\n\n  switch (loadType) {\n    case 'imagebitmap':\n      image = await parseToImageBitmap(arrayBuffer, options, url);\n      break;\n\n    case 'image':\n      image = await parseToImage(arrayBuffer, options, url);\n      break;\n\n    case 'data':\n      image = await parseToNodeImage(arrayBuffer, options);\n      break;\n\n    default:\n      assert(false);\n  }\n\n  if (imageType === 'data') {\n    image = getImageData(image);\n  }\n\n  return image;\n}\n\nfunction getLoadableImageType(type) {\n  switch (type) {\n    case 'auto':\n    case 'data':\n      return getDefaultImageType();\n\n    default:\n      isImageTypeSupported(type);\n      return type;\n  }\n}\n//# sourceMappingURL=parse-image.js.map","import { VERSION } from './lib/utils/version';\nimport parseImage from './lib/parsers/parse-image';\nimport { getBinaryImageMetadata } from './lib/category-api/binary-image-api';\nconst EXTENSIONS = ['png', 'jpg', 'jpeg', 'gif', 'webp', 'bmp', 'ico', 'svg'];\nconst MIME_TYPES = ['image/png', 'image/jpeg', 'image/gif', 'image/webp', 'image/bmp', 'image/vnd.microsoft.icon', 'image/svg+xml'];\nconst DEFAULT_IMAGE_LOADER_OPTIONS = {\n  image: {\n    type: 'auto',\n    decode: true\n  }\n};\nexport const ImageLoader = {\n  id: 'image',\n  module: 'images',\n  name: 'Images',\n  version: VERSION,\n  mimeTypes: MIME_TYPES,\n  extensions: EXTENSIONS,\n  parse: parseImage,\n  tests: [arrayBuffer => Boolean(getBinaryImageMetadata(new DataView(arrayBuffer)))],\n  options: DEFAULT_IMAGE_LOADER_OPTIONS\n};\nexport const _typecheckImageLoader = ImageLoader;\n//# sourceMappingURL=image-loader.js.map","import { Log } from '@probe.gl/log';\nexport default new Log({\n  id: 'deck'\n});\n//# sourceMappingURL=log.js.map","import deckLog from '../utils/log';\nimport { getLoggers } from './loggers';\nlet loggers = {};\n\nif (process.env.NODE_ENV !== 'production') {\n  loggers = getLoggers(deckLog);\n}\n\nexport function register(handlers) {\n  loggers = handlers;\n}\nexport default function debug(eventType, arg1, arg2, arg3) {\n  if (deckLog.level > 0 && loggers[eventType]) {\n    loggers[eventType].call(null, arg1, arg2, arg3);\n  }\n}\n//# sourceMappingURL=index.js.map","function isJSON(text) {\n  const firstChar = text[0];\n  const lastChar = text[text.length - 1];\n  return firstChar === '{' && lastChar === '}' || firstChar === '[' && lastChar === ']';\n}\n\nexport default {\n  id: 'JSON',\n  name: 'JSON',\n  module: '',\n  version: '',\n  options: {},\n  extensions: ['json', 'geojson'],\n  mimeTypes: ['application/json', 'application/geo+json'],\n  testText: isJSON,\n  parseTextSync: JSON.parse\n};\n//# sourceMappingURL=json-loader.js.map","import { registerLoaders } from '@loaders.gl/core';\nimport { ImageLoader } from '@loaders.gl/images';\nimport log from '../utils/log';\nimport { register } from '../debug';\nimport jsonLoader from '../utils/json-loader';\nconst version = typeof \"8.8.21\" !== 'undefined' ? \"8.8.21\" : globalThis.DECK_VERSION || 'untranspiled source';\nconst existingVersion = globalThis.deck && globalThis.deck.VERSION;\n\nif (existingVersion && existingVersion !== version) {\n  throw new Error(\"deck.gl - multiple versions detected: \".concat(existingVersion, \" vs \").concat(version));\n}\n\nif (!existingVersion) {\n  log.log(1, \"deck.gl \".concat(version))();\n  globalThis.deck = { ...globalThis.deck,\n    VERSION: version,\n    version,\n    log,\n    _registerLoggers: register\n  };\n  registerLoaders([jsonLoader, [ImageLoader, {\n    imagebitmap: {\n      premultiplyAlpha: 'none'\n    }\n  }]]);\n}\n\nexport default globalThis.deck;\n//# sourceMappingURL=init.js.map","import { Log } from '@probe.gl/log';\nexport const log = new Log({\n  id: 'luma.gl'\n});\n//# sourceMappingURL=log.js.map","export function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'luma.gl: assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","import { assert } from './assert';\nconst ERR_CONTEXT = 'Invalid WebGLRenderingContext';\nexport const ERR_WEBGL = ERR_CONTEXT;\nexport const ERR_WEBGL2 = 'Requires WebGL2';\nexport function isWebGL(gl) {\n  if (typeof WebGLRenderingContext !== 'undefined' && gl instanceof WebGLRenderingContext) {\n    return true;\n  }\n\n  if (typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext) {\n    return true;\n  }\n\n  return Boolean(gl && Number.isFinite(gl._version));\n}\nexport function isWebGL2(gl) {\n  if (typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext) {\n    return true;\n  }\n\n  return Boolean(gl && gl._version === 2);\n}\nexport function getWebGL2Context(gl) {\n  return isWebGL2(gl) ? gl : null;\n}\nexport function assertWebGLContext(gl) {\n  assert(isWebGL(gl), ERR_CONTEXT);\n  return gl;\n}\nexport function assertWebGL2Context(gl) {\n  assert(isWebGL2(gl), ERR_WEBGL2);\n  return gl;\n}\n//# sourceMappingURL=webgl-checks.js.map","const glErrorShadow = {};\n\nfunction error(msg) {\n  if (globalThis.console && globalThis.console.error) {\n    globalThis.console.error(msg);\n  }\n}\n\nfunction log(msg) {\n  if (globalThis.console && globalThis.console.log) {\n    globalThis.console.log(msg);\n  }\n}\n\nfunction synthesizeGLError(err, opt_msg) {\n  glErrorShadow[err] = true;\n\n  if (opt_msg !== undefined) {\n    error(opt_msg);\n  }\n}\n\nfunction wrapGLError(gl) {\n  const f = gl.getError;\n\n  gl.getError = function getError() {\n    let err;\n\n    do {\n      err = f.apply(gl);\n\n      if (err !== 0) {\n        glErrorShadow[err] = true;\n      }\n    } while (err !== 0);\n\n    for (err in glErrorShadow) {\n      if (glErrorShadow[err]) {\n        delete glErrorShadow[err];\n        return parseInt(err, 10);\n      }\n    }\n\n    return 0;\n  };\n}\n\nconst WebGLVertexArrayObjectOES = function WebGLVertexArrayObjectOES(ext) {\n  const gl = ext.gl;\n  this.ext = ext;\n  this.isAlive = true;\n  this.hasBeenBound = false;\n  this.elementArrayBuffer = null;\n  this.attribs = new Array(ext.maxVertexAttribs);\n\n  for (let n = 0; n < this.attribs.length; n++) {\n    const attrib = new WebGLVertexArrayObjectOES.VertexAttrib(gl);\n    this.attribs[n] = attrib;\n  }\n\n  this.maxAttrib = 0;\n};\n\nWebGLVertexArrayObjectOES.VertexAttrib = function VertexAttrib(gl) {\n  this.enabled = false;\n  this.buffer = null;\n  this.size = 4;\n  this.type = 5126;\n  this.normalized = false;\n  this.stride = 16;\n  this.offset = 0;\n  this.cached = '';\n  this.recache();\n};\n\nWebGLVertexArrayObjectOES.VertexAttrib.prototype.recache = function recache() {\n  this.cached = [this.size, this.type, this.normalized, this.stride, this.offset].join(':');\n};\n\nconst OESVertexArrayObject = function OESVertexArrayObject(gl) {\n  const self = this;\n  this.gl = gl;\n  wrapGLError(gl);\n  const original = this.original = {\n    getParameter: gl.getParameter,\n    enableVertexAttribArray: gl.enableVertexAttribArray,\n    disableVertexAttribArray: gl.disableVertexAttribArray,\n    bindBuffer: gl.bindBuffer,\n    getVertexAttrib: gl.getVertexAttrib,\n    vertexAttribPointer: gl.vertexAttribPointer\n  };\n\n  gl.getParameter = function getParameter(pname) {\n    if (pname === self.VERTEX_ARRAY_BINDING_OES) {\n      if (self.currentVertexArrayObject === self.defaultVertexArrayObject) {\n        return null;\n      }\n\n      return self.currentVertexArrayObject;\n    }\n\n    return original.getParameter.apply(this, arguments);\n  };\n\n  gl.enableVertexAttribArray = function enableVertexAttribArray(index) {\n    const vao = self.currentVertexArrayObject;\n    vao.maxAttrib = Math.max(vao.maxAttrib, index);\n    const attrib = vao.attribs[index];\n    attrib.enabled = true;\n    return original.enableVertexAttribArray.apply(this, arguments);\n  };\n\n  gl.disableVertexAttribArray = function disableVertexAttribArray(index) {\n    const vao = self.currentVertexArrayObject;\n    vao.maxAttrib = Math.max(vao.maxAttrib, index);\n    const attrib = vao.attribs[index];\n    attrib.enabled = false;\n    return original.disableVertexAttribArray.apply(this, arguments);\n  };\n\n  gl.bindBuffer = function bindBuffer(target, buffer) {\n    switch (target) {\n      case 34962:\n        self.currentArrayBuffer = buffer;\n        break;\n\n      case 34963:\n        self.currentVertexArrayObject.elementArrayBuffer = buffer;\n        break;\n\n      default:\n    }\n\n    return original.bindBuffer.apply(this, arguments);\n  };\n\n  gl.getVertexAttrib = function getVertexAttrib(index, pname) {\n    const vao = self.currentVertexArrayObject;\n    const attrib = vao.attribs[index];\n\n    switch (pname) {\n      case 34975:\n        return attrib.buffer;\n\n      case 34338:\n        return attrib.enabled;\n\n      case 34339:\n        return attrib.size;\n\n      case 34340:\n        return attrib.stride;\n\n      case 34341:\n        return attrib.type;\n\n      case 34922:\n        return attrib.normalized;\n\n      default:\n        return original.getVertexAttrib.apply(this, arguments);\n    }\n  };\n\n  gl.vertexAttribPointer = function vertexAttribPointer(indx, size, type, normalized, stride, offset) {\n    const vao = self.currentVertexArrayObject;\n    vao.maxAttrib = Math.max(vao.maxAttrib, indx);\n    const attrib = vao.attribs[indx];\n    attrib.buffer = self.currentArrayBuffer;\n    attrib.size = size;\n    attrib.type = type;\n    attrib.normalized = normalized;\n    attrib.stride = stride;\n    attrib.offset = offset;\n    attrib.recache();\n    return original.vertexAttribPointer.apply(this, arguments);\n  };\n\n  if (gl.instrumentExtension) {\n    gl.instrumentExtension(this, 'OES_vertex_array_object');\n  }\n\n  if (gl.canvas) {\n    gl.canvas.addEventListener('webglcontextrestored', () => {\n      log('OESVertexArrayObject emulation library context restored');\n      self.reset_();\n    }, true);\n  }\n\n  this.reset_();\n};\n\nOESVertexArrayObject.prototype.VERTEX_ARRAY_BINDING_OES = 0x85b5;\n\nOESVertexArrayObject.prototype.reset_ = function reset_() {\n  const contextWasLost = this.vertexArrayObjects !== undefined;\n\n  if (contextWasLost) {\n    for (let ii = 0; ii < this.vertexArrayObjects.length; ++ii) {\n      this.vertexArrayObjects.isAlive = false;\n    }\n  }\n\n  const gl = this.gl;\n  this.maxVertexAttribs = gl.getParameter(34921);\n  this.defaultVertexArrayObject = new WebGLVertexArrayObjectOES(this);\n  this.currentVertexArrayObject = null;\n  this.currentArrayBuffer = null;\n  this.vertexArrayObjects = [this.defaultVertexArrayObject];\n  this.bindVertexArrayOES(null);\n};\n\nOESVertexArrayObject.prototype.createVertexArrayOES = function createVertexArrayOES() {\n  const arrayObject = new WebGLVertexArrayObjectOES(this);\n  this.vertexArrayObjects.push(arrayObject);\n  return arrayObject;\n};\n\nOESVertexArrayObject.prototype.deleteVertexArrayOES = function deleteVertexArrayOES(arrayObject) {\n  arrayObject.isAlive = false;\n  this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(arrayObject), 1);\n\n  if (this.currentVertexArrayObject === arrayObject) {\n    this.bindVertexArrayOES(null);\n  }\n};\n\nOESVertexArrayObject.prototype.isVertexArrayOES = function isVertexArrayOES(arrayObject) {\n  if (arrayObject && arrayObject instanceof WebGLVertexArrayObjectOES) {\n    if (arrayObject.hasBeenBound && arrayObject.ext === this) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nOESVertexArrayObject.prototype.bindVertexArrayOES = function bindVertexArrayOES(arrayObject) {\n  const gl = this.gl;\n\n  if (arrayObject && !arrayObject.isAlive) {\n    synthesizeGLError(1282, 'bindVertexArrayOES: attempt to bind deleted arrayObject');\n    return;\n  }\n\n  const original = this.original;\n  const oldVAO = this.currentVertexArrayObject;\n  this.currentVertexArrayObject = arrayObject || this.defaultVertexArrayObject;\n  this.currentVertexArrayObject.hasBeenBound = true;\n  const newVAO = this.currentVertexArrayObject;\n\n  if (oldVAO === newVAO) {\n    return;\n  }\n\n  if (!oldVAO || newVAO.elementArrayBuffer !== oldVAO.elementArrayBuffer) {\n    original.bindBuffer.call(gl, 34963, newVAO.elementArrayBuffer);\n  }\n\n  let currentBinding = this.currentArrayBuffer;\n  const maxAttrib = Math.max(oldVAO ? oldVAO.maxAttrib : 0, newVAO.maxAttrib);\n\n  for (let n = 0; n <= maxAttrib; n++) {\n    const attrib = newVAO.attribs[n];\n    const oldAttrib = oldVAO ? oldVAO.attribs[n] : null;\n\n    if (!oldVAO || attrib.enabled !== oldAttrib.enabled) {\n      if (attrib.enabled) {\n        original.enableVertexAttribArray.call(gl, n);\n      } else {\n        original.disableVertexAttribArray.call(gl, n);\n      }\n    }\n\n    if (attrib.enabled) {\n      let bufferChanged = false;\n\n      if (!oldVAO || attrib.buffer !== oldAttrib.buffer) {\n        if (currentBinding !== attrib.buffer) {\n          original.bindBuffer.call(gl, 34962, attrib.buffer);\n          currentBinding = attrib.buffer;\n        }\n\n        bufferChanged = true;\n      }\n\n      if (bufferChanged || attrib.cached !== oldAttrib.cached) {\n        original.vertexAttribPointer.call(gl, n, attrib.size, attrib.type, attrib.normalized, attrib.stride, attrib.offset);\n      }\n    }\n  }\n\n  if (this.currentArrayBuffer !== currentBinding) {\n    original.bindBuffer.call(gl, 34962, this.currentArrayBuffer);\n  }\n};\n\nexport function polyfillVertexArrayObject(gl) {\n  if (typeof gl.createVertexArray === 'function') {\n    return;\n  }\n\n  const original_getSupportedExtensions = gl.getSupportedExtensions;\n\n  gl.getSupportedExtensions = function getSupportedExtensions() {\n    const list = original_getSupportedExtensions.call(this) || [];\n\n    if (list.indexOf('OES_vertex_array_object') < 0) {\n      list.push('OES_vertex_array_object');\n    }\n\n    return list;\n  };\n\n  const original_getExtension = gl.getExtension;\n\n  gl.getExtension = function getExtension(name) {\n    const ext = original_getExtension.call(this, name);\n\n    if (ext) {\n      return ext;\n    }\n\n    if (name !== 'OES_vertex_array_object') {\n      return null;\n    }\n\n    if (!gl.__OESVertexArrayObject) {\n      this.__OESVertexArrayObject = new OESVertexArrayObject(this);\n    }\n\n    return this.__OESVertexArrayObject;\n  };\n}\n//# sourceMappingURL=polyfill-vertex-array-object.js.map","import { isWebGL2 } from '../utils/webgl-checks';\nconst OES_element_index = 'OES_element_index';\nconst WEBGL_draw_buffers = 'WEBGL_draw_buffers';\nconst EXT_disjoint_timer_query = 'EXT_disjoint_timer_query';\nconst EXT_disjoint_timer_query_webgl2 = 'EXT_disjoint_timer_query_webgl2';\nconst EXT_texture_filter_anisotropic = 'EXT_texture_filter_anisotropic';\nconst WEBGL_debug_renderer_info = 'WEBGL_debug_renderer_info';\nconst GL_FRAGMENT_SHADER_DERIVATIVE_HINT = 0x8b8b;\nconst GL_DONT_CARE = 0x1100;\nconst GL_GPU_DISJOINT_EXT = 0x8fbb;\nconst GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT = 0x84ff;\nconst GL_UNMASKED_VENDOR_WEBGL = 0x9245;\nconst GL_UNMASKED_RENDERER_WEBGL = 0x9246;\n\nconst getWebGL2ValueOrZero = gl => !isWebGL2(gl) ? 0 : undefined;\n\nconst WEBGL_PARAMETERS = {\n  [3074]: gl => !isWebGL2(gl) ? 36064 : undefined,\n  [GL_FRAGMENT_SHADER_DERIVATIVE_HINT]: gl => !isWebGL2(gl) ? GL_DONT_CARE : undefined,\n  [35977]: getWebGL2ValueOrZero,\n  [32937]: getWebGL2ValueOrZero,\n  [GL_GPU_DISJOINT_EXT]: (gl, getParameter) => {\n    const ext = isWebGL2(gl) ? gl.getExtension(EXT_disjoint_timer_query_webgl2) : gl.getExtension(EXT_disjoint_timer_query);\n    return ext && ext.GPU_DISJOINT_EXT ? getParameter(ext.GPU_DISJOINT_EXT) : 0;\n  },\n  [GL_UNMASKED_VENDOR_WEBGL]: (gl, getParameter) => {\n    const ext = gl.getExtension(WEBGL_debug_renderer_info);\n    return getParameter(ext && ext.UNMASKED_VENDOR_WEBGL || 7936);\n  },\n  [GL_UNMASKED_RENDERER_WEBGL]: (gl, getParameter) => {\n    const ext = gl.getExtension(WEBGL_debug_renderer_info);\n    return getParameter(ext && ext.UNMASKED_RENDERER_WEBGL || 7937);\n  },\n  [GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT]: (gl, getParameter) => {\n    const ext = gl.luma.extensions[EXT_texture_filter_anisotropic];\n    return ext ? getParameter(ext.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 1.0;\n  },\n  [32883]: getWebGL2ValueOrZero,\n  [35071]: getWebGL2ValueOrZero,\n  [37447]: getWebGL2ValueOrZero,\n  [36063]: (gl, getParameter) => {\n    if (!isWebGL2(gl)) {\n      const ext = gl.getExtension(WEBGL_draw_buffers);\n      return ext ? getParameter(ext.MAX_COLOR_ATTACHMENTS_WEBGL) : 0;\n    }\n\n    return undefined;\n  },\n  [35379]: getWebGL2ValueOrZero,\n  [35374]: getWebGL2ValueOrZero,\n  [35377]: getWebGL2ValueOrZero,\n  [34852]: gl => {\n    if (!isWebGL2(gl)) {\n      const ext = gl.getExtension(WEBGL_draw_buffers);\n      return ext ? ext.MAX_DRAW_BUFFERS_WEBGL : 0;\n    }\n\n    return undefined;\n  },\n  [36203]: gl => gl.getExtension(OES_element_index) ? 2147483647 : 65535,\n  [33001]: gl => gl.getExtension(OES_element_index) ? 16777216 : 65535,\n  [33000]: gl => 16777216,\n  [37157]: getWebGL2ValueOrZero,\n  [35373]: getWebGL2ValueOrZero,\n  [35657]: getWebGL2ValueOrZero,\n  [36183]: getWebGL2ValueOrZero,\n  [37137]: getWebGL2ValueOrZero,\n  [34045]: getWebGL2ValueOrZero,\n  [35978]: getWebGL2ValueOrZero,\n  [35979]: getWebGL2ValueOrZero,\n  [35968]: getWebGL2ValueOrZero,\n  [35376]: getWebGL2ValueOrZero,\n  [35375]: getWebGL2ValueOrZero,\n  [35659]: getWebGL2ValueOrZero,\n  [37154]: getWebGL2ValueOrZero,\n  [35371]: getWebGL2ValueOrZero,\n  [35658]: getWebGL2ValueOrZero,\n  [35076]: getWebGL2ValueOrZero,\n  [35077]: getWebGL2ValueOrZero,\n  [35380]: getWebGL2ValueOrZero\n};\nexport function getParameterPolyfill(gl, originalGetParameter, pname) {\n  const limit = WEBGL_PARAMETERS[pname];\n  const value = typeof limit === 'function' ? limit(gl, originalGetParameter, pname) : limit;\n  const result = value !== undefined ? value : originalGetParameter(pname);\n  return result;\n}\n//# sourceMappingURL=get-parameter-polyfill.js.map","import { assert } from '../utils/assert';\nimport { isWebGL2 } from '../utils/webgl-checks';\nimport { getParameterPolyfill } from './get-parameter-polyfill';\nconst OES_vertex_array_object = 'OES_vertex_array_object';\nconst ANGLE_instanced_arrays = 'ANGLE_instanced_arrays';\nconst WEBGL_draw_buffers = 'WEBGL_draw_buffers';\nconst EXT_disjoint_timer_query = 'EXT_disjoint_timer_query';\nconst EXT_texture_filter_anisotropic = 'EXT_texture_filter_anisotropic';\nconst ERR_VAO_NOT_SUPPORTED = 'VertexArray requires WebGL2 or OES_vertex_array_object extension';\n\nfunction getExtensionData(gl, extension) {\n  return {\n    webgl2: isWebGL2(gl),\n    ext: gl.getExtension(extension)\n  };\n}\n\nexport const WEBGL2_CONTEXT_POLYFILLS = {\n  [OES_vertex_array_object]: {\n    meta: {\n      suffix: 'OES'\n    },\n    createVertexArray: () => {\n      assert(false, ERR_VAO_NOT_SUPPORTED);\n    },\n    deleteVertexArray: () => {},\n    bindVertexArray: () => {},\n    isVertexArray: () => false\n  },\n  [ANGLE_instanced_arrays]: {\n    meta: {\n      suffix: 'ANGLE'\n    },\n\n    vertexAttribDivisor(location, divisor) {\n      assert(divisor === 0, 'WebGL instanced rendering not supported');\n    },\n\n    drawElementsInstanced: () => {},\n    drawArraysInstanced: () => {}\n  },\n  [WEBGL_draw_buffers]: {\n    meta: {\n      suffix: 'WEBGL'\n    },\n    drawBuffers: () => {\n      assert(false);\n    }\n  },\n  [EXT_disjoint_timer_query]: {\n    meta: {\n      suffix: 'EXT'\n    },\n    createQuery: () => {\n      assert(false);\n    },\n    deleteQuery: () => {\n      assert(false);\n    },\n    beginQuery: () => {\n      assert(false);\n    },\n    endQuery: () => {},\n\n    getQuery(handle, pname) {\n      return this.getQueryObject(handle, pname);\n    },\n\n    getQueryParameter(handle, pname) {\n      return this.getQueryObject(handle, pname);\n    },\n\n    getQueryObject: () => {}\n  }\n};\nexport const WEBGL2_CONTEXT_OVERRIDES = {\n  readBuffer: (gl, originalFunc, attachment) => {\n    if (isWebGL2(gl)) {\n      originalFunc(attachment);\n    } else {}\n  },\n  getVertexAttrib: (gl, originalFunc, location, pname) => {\n    const {\n      webgl2,\n      ext\n    } = getExtensionData(gl, ANGLE_instanced_arrays);\n    let result;\n\n    switch (pname) {\n      case 35069:\n        result = !webgl2 ? false : undefined;\n        break;\n\n      case 35070:\n        result = !webgl2 && !ext ? 0 : undefined;\n        break;\n\n      default:\n    }\n\n    return result !== undefined ? result : originalFunc(location, pname);\n  },\n  getProgramParameter: (gl, originalFunc, program, pname) => {\n    if (!isWebGL2(gl)) {\n      switch (pname) {\n        case 35967:\n          return 35981;\n\n        case 35971:\n          return 0;\n\n        case 35382:\n          return 0;\n\n        default:\n      }\n    }\n\n    return originalFunc(program, pname);\n  },\n  getInternalformatParameter: (gl, originalFunc, target, format, pname) => {\n    if (!isWebGL2(gl)) {\n      switch (pname) {\n        case 32937:\n          return new Int32Array([0]);\n\n        default:\n      }\n    }\n\n    return gl.getInternalformatParameter(target, format, pname);\n  },\n\n  getTexParameter(gl, originalFunc, target, pname) {\n    switch (pname) {\n      case 34046:\n        const {\n          extensions\n        } = gl.luma;\n        const ext = extensions[EXT_texture_filter_anisotropic];\n        pname = ext && ext.TEXTURE_MAX_ANISOTROPY_EXT || 34046;\n        break;\n\n      default:\n    }\n\n    return originalFunc(target, pname);\n  },\n\n  getParameter: getParameterPolyfill,\n\n  hint(gl, originalFunc, pname, value) {\n    return originalFunc(pname, value);\n  }\n\n};\n//# sourceMappingURL=polyfill-table.js.map","import { polyfillVertexArrayObject } from './polyfill-vertex-array-object';\nimport { assert } from '../utils/assert';\nimport { WEBGL2_CONTEXT_POLYFILLS, WEBGL2_CONTEXT_OVERRIDES } from './polyfill-table';\nexport function polyfillContext(gl) {\n  gl.luma = gl.luma || {};\n  const {\n    luma\n  } = gl;\n\n  if (!luma.polyfilled) {\n    polyfillVertexArrayObject(gl);\n    initializeExtensions(gl);\n    installPolyfills(gl, WEBGL2_CONTEXT_POLYFILLS);\n    installOverrides(gl, {\n      target: luma,\n      target2: gl\n    });\n    luma.polyfilled = true;\n  }\n\n  return gl;\n}\nglobalThis.polyfillContext = polyfillContext;\n\nfunction initializeExtensions(gl) {\n  gl.luma.extensions = {};\n  const EXTENSIONS = gl.getSupportedExtensions() || [];\n\n  for (const extension of EXTENSIONS) {\n    gl.luma[extension] = gl.getExtension(extension);\n  }\n}\n\nfunction installOverrides(gl, _ref) {\n  let {\n    target,\n    target2\n  } = _ref;\n  Object.keys(WEBGL2_CONTEXT_OVERRIDES).forEach(key => {\n    if (typeof WEBGL2_CONTEXT_OVERRIDES[key] === 'function') {\n      const originalFunc = gl[key] ? gl[key].bind(gl) : () => {};\n      const polyfill = WEBGL2_CONTEXT_OVERRIDES[key].bind(null, gl, originalFunc);\n      target[key] = polyfill;\n      target2[key] = polyfill;\n    }\n  });\n}\n\nfunction installPolyfills(gl, polyfills) {\n  for (const extension of Object.getOwnPropertyNames(polyfills)) {\n    if (extension !== 'overrides') {\n      polyfillExtension(gl, {\n        extension,\n        target: gl.luma,\n        target2: gl\n      });\n    }\n  }\n}\n\nfunction polyfillExtension(gl, _ref2) {\n  let {\n    extension,\n    target,\n    target2\n  } = _ref2;\n  const defaults = WEBGL2_CONTEXT_POLYFILLS[extension];\n  assert(defaults);\n  const {\n    meta = {}\n  } = defaults;\n  const {\n    suffix = ''\n  } = meta;\n  const ext = gl.getExtension(extension);\n\n  for (const key of Object.keys(defaults)) {\n    const extKey = \"\".concat(key).concat(suffix);\n    let polyfill = null;\n\n    if (key === 'meta') {} else if (typeof gl[key] === 'function') {} else if (ext && typeof ext[extKey] === 'function') {\n      polyfill = function () {\n        return ext[extKey](...arguments);\n      };\n    } else if (typeof defaults[key] === 'function') {\n      polyfill = defaults[key].bind(target);\n    }\n\n    if (polyfill) {\n      target[key] = polyfill;\n      target2[key] = polyfill;\n    }\n  }\n}\n//# sourceMappingURL=polyfill-context.js.map","import { isWebGL2 } from '../utils/webgl-checks';\nexport const GL_PARAMETER_DEFAULTS = {\n  [3042]: false,\n  [32773]: new Float32Array([0, 0, 0, 0]),\n  [32777]: 32774,\n  [34877]: 32774,\n  [32969]: 1,\n  [32968]: 0,\n  [32971]: 1,\n  [32970]: 0,\n  [3106]: new Float32Array([0, 0, 0, 0]),\n  [3107]: [true, true, true, true],\n  [2884]: false,\n  [2885]: 1029,\n  [2929]: false,\n  [2931]: 1,\n  [2932]: 513,\n  [2928]: new Float32Array([0, 1]),\n  [2930]: true,\n  [3024]: true,\n  [36006]: null,\n  [2886]: 2305,\n  [33170]: 4352,\n  [2849]: 1,\n  [32823]: false,\n  [32824]: 0,\n  [10752]: 0,\n  [32938]: 1.0,\n  [32939]: false,\n  [3089]: false,\n  [3088]: new Int32Array([0, 0, 1024, 1024]),\n  [2960]: false,\n  [2961]: 0,\n  [2968]: 0xffffffff,\n  [36005]: 0xffffffff,\n  [2962]: 519,\n  [2967]: 0,\n  [2963]: 0xffffffff,\n  [34816]: 519,\n  [36003]: 0,\n  [36004]: 0xffffffff,\n  [2964]: 7680,\n  [2965]: 7680,\n  [2966]: 7680,\n  [34817]: 7680,\n  [34818]: 7680,\n  [34819]: 7680,\n  [2978]: [0, 0, 1024, 1024],\n  [3333]: 4,\n  [3317]: 4,\n  [37440]: false,\n  [37441]: false,\n  [37443]: 37444,\n  [35723]: 4352,\n  [36010]: null,\n  [35977]: false,\n  [3330]: 0,\n  [3332]: 0,\n  [3331]: 0,\n  [3314]: 0,\n  [32878]: 0,\n  [3316]: 0,\n  [3315]: 0,\n  [32877]: 0\n};\n\nconst enable = (gl, value, key) => value ? gl.enable(key) : gl.disable(key);\n\nconst hint = (gl, value, key) => gl.hint(key, value);\n\nconst pixelStorei = (gl, value, key) => gl.pixelStorei(key, value);\n\nconst drawFramebuffer = (gl, value) => {\n  const target = isWebGL2(gl) ? 36009 : 36160;\n  return gl.bindFramebuffer(target, value);\n};\n\nconst readFramebuffer = (gl, value) => {\n  return gl.bindFramebuffer(36008, value);\n};\n\nfunction isArray(array) {\n  return Array.isArray(array) || ArrayBuffer.isView(array);\n}\n\nexport const GL_PARAMETER_SETTERS = {\n  [3042]: enable,\n  [32773]: (gl, value) => gl.blendColor(...value),\n  [32777]: 'blendEquation',\n  [34877]: 'blendEquation',\n  [32969]: 'blendFunc',\n  [32968]: 'blendFunc',\n  [32971]: 'blendFunc',\n  [32970]: 'blendFunc',\n  [3106]: (gl, value) => gl.clearColor(...value),\n  [3107]: (gl, value) => gl.colorMask(...value),\n  [2884]: enable,\n  [2885]: (gl, value) => gl.cullFace(value),\n  [2929]: enable,\n  [2931]: (gl, value) => gl.clearDepth(value),\n  [2932]: (gl, value) => gl.depthFunc(value),\n  [2928]: (gl, value) => gl.depthRange(...value),\n  [2930]: (gl, value) => gl.depthMask(value),\n  [3024]: enable,\n  [35723]: hint,\n  [36006]: drawFramebuffer,\n  [2886]: (gl, value) => gl.frontFace(value),\n  [33170]: hint,\n  [2849]: (gl, value) => gl.lineWidth(value),\n  [32823]: enable,\n  [32824]: 'polygonOffset',\n  [10752]: 'polygonOffset',\n  [35977]: enable,\n  [32938]: 'sampleCoverage',\n  [32939]: 'sampleCoverage',\n  [3089]: enable,\n  [3088]: (gl, value) => gl.scissor(...value),\n  [2960]: enable,\n  [2961]: (gl, value) => gl.clearStencil(value),\n  [2968]: (gl, value) => gl.stencilMaskSeparate(1028, value),\n  [36005]: (gl, value) => gl.stencilMaskSeparate(1029, value),\n  [2962]: 'stencilFuncFront',\n  [2967]: 'stencilFuncFront',\n  [2963]: 'stencilFuncFront',\n  [34816]: 'stencilFuncBack',\n  [36003]: 'stencilFuncBack',\n  [36004]: 'stencilFuncBack',\n  [2964]: 'stencilOpFront',\n  [2965]: 'stencilOpFront',\n  [2966]: 'stencilOpFront',\n  [34817]: 'stencilOpBack',\n  [34818]: 'stencilOpBack',\n  [34819]: 'stencilOpBack',\n  [2978]: (gl, value) => gl.viewport(...value),\n  [3333]: pixelStorei,\n  [3317]: pixelStorei,\n  [37440]: pixelStorei,\n  [37441]: pixelStorei,\n  [37443]: pixelStorei,\n  [3330]: pixelStorei,\n  [3332]: pixelStorei,\n  [3331]: pixelStorei,\n  [36010]: readFramebuffer,\n  [3314]: pixelStorei,\n  [32878]: pixelStorei,\n  [3316]: pixelStorei,\n  [3315]: pixelStorei,\n  [32877]: pixelStorei,\n  framebuffer: (gl, framebuffer) => {\n    const handle = framebuffer && 'handle' in framebuffer ? framebuffer.handle : framebuffer;\n    return gl.bindFramebuffer(36160, handle);\n  },\n  blend: (gl, value) => value ? gl.enable(3042) : gl.disable(3042),\n  blendColor: (gl, value) => gl.blendColor(...value),\n  blendEquation: (gl, args) => {\n    args = isArray(args) ? args : [args, args];\n    gl.blendEquationSeparate(...args);\n  },\n  blendFunc: (gl, args) => {\n    args = isArray(args) && args.length === 2 ? [...args, ...args] : args;\n    gl.blendFuncSeparate(...args);\n  },\n  clearColor: (gl, value) => gl.clearColor(...value),\n  clearDepth: (gl, value) => gl.clearDepth(value),\n  clearStencil: (gl, value) => gl.clearStencil(value),\n  colorMask: (gl, value) => gl.colorMask(...value),\n  cull: (gl, value) => value ? gl.enable(2884) : gl.disable(2884),\n  cullFace: (gl, value) => gl.cullFace(value),\n  depthTest: (gl, value) => value ? gl.enable(2929) : gl.disable(2929),\n  depthFunc: (gl, value) => gl.depthFunc(value),\n  depthMask: (gl, value) => gl.depthMask(value),\n  depthRange: (gl, value) => gl.depthRange(...value),\n  dither: (gl, value) => value ? gl.enable(3024) : gl.disable(3024),\n  derivativeHint: (gl, value) => {\n    gl.hint(35723, value);\n  },\n  frontFace: (gl, value) => gl.frontFace(value),\n  mipmapHint: (gl, value) => gl.hint(33170, value),\n  lineWidth: (gl, value) => gl.lineWidth(value),\n  polygonOffsetFill: (gl, value) => value ? gl.enable(32823) : gl.disable(32823),\n  polygonOffset: (gl, value) => gl.polygonOffset(...value),\n  sampleCoverage: (gl, value) => gl.sampleCoverage(...value),\n  scissorTest: (gl, value) => value ? gl.enable(3089) : gl.disable(3089),\n  scissor: (gl, value) => gl.scissor(...value),\n  stencilTest: (gl, value) => value ? gl.enable(2960) : gl.disable(2960),\n  stencilMask: (gl, value) => {\n    value = isArray(value) ? value : [value, value];\n    const [mask, backMask] = value;\n    gl.stencilMaskSeparate(1028, mask);\n    gl.stencilMaskSeparate(1029, backMask);\n  },\n  stencilFunc: (gl, args) => {\n    args = isArray(args) && args.length === 3 ? [...args, ...args] : args;\n    const [func, ref, mask, backFunc, backRef, backMask] = args;\n    gl.stencilFuncSeparate(1028, func, ref, mask);\n    gl.stencilFuncSeparate(1029, backFunc, backRef, backMask);\n  },\n  stencilOp: (gl, args) => {\n    args = isArray(args) && args.length === 3 ? [...args, ...args] : args;\n    const [sfail, dpfail, dppass, backSfail, backDpfail, backDppass] = args;\n    gl.stencilOpSeparate(1028, sfail, dpfail, dppass);\n    gl.stencilOpSeparate(1029, backSfail, backDpfail, backDppass);\n  },\n  viewport: (gl, value) => gl.viewport(...value)\n};\n\nfunction getValue(glEnum, values, cache) {\n  return values[glEnum] !== undefined ? values[glEnum] : cache[glEnum];\n}\n\nexport const GL_COMPOSITE_PARAMETER_SETTERS = {\n  blendEquation: (gl, values, cache) => gl.blendEquationSeparate(getValue(32777, values, cache), getValue(34877, values, cache)),\n  blendFunc: (gl, values, cache) => gl.blendFuncSeparate(getValue(32969, values, cache), getValue(32968, values, cache), getValue(32971, values, cache), getValue(32970, values, cache)),\n  polygonOffset: (gl, values, cache) => gl.polygonOffset(getValue(32824, values, cache), getValue(10752, values, cache)),\n  sampleCoverage: (gl, values, cache) => gl.sampleCoverage(getValue(32938, values, cache), getValue(32939, values, cache)),\n  stencilFuncFront: (gl, values, cache) => gl.stencilFuncSeparate(1028, getValue(2962, values, cache), getValue(2967, values, cache), getValue(2963, values, cache)),\n  stencilFuncBack: (gl, values, cache) => gl.stencilFuncSeparate(1029, getValue(34816, values, cache), getValue(36003, values, cache), getValue(36004, values, cache)),\n  stencilOpFront: (gl, values, cache) => gl.stencilOpSeparate(1028, getValue(2964, values, cache), getValue(2965, values, cache), getValue(2966, values, cache)),\n  stencilOpBack: (gl, values, cache) => gl.stencilOpSeparate(1029, getValue(34817, values, cache), getValue(34818, values, cache), getValue(34819, values, cache))\n};\nexport const GL_HOOKED_SETTERS = {\n  enable: (update, capability) => update({\n    [capability]: true\n  }),\n  disable: (update, capability) => update({\n    [capability]: false\n  }),\n  pixelStorei: (update, pname, value) => update({\n    [pname]: value\n  }),\n  hint: (update, pname, hint) => update({\n    [pname]: hint\n  }),\n  bindFramebuffer: (update, target, framebuffer) => {\n    switch (target) {\n      case 36160:\n        return update({\n          [36006]: framebuffer,\n          [36010]: framebuffer\n        });\n\n      case 36009:\n        return update({\n          [36006]: framebuffer\n        });\n\n      case 36008:\n        return update({\n          [36010]: framebuffer\n        });\n\n      default:\n        return null;\n    }\n  },\n  blendColor: (update, r, g, b, a) => update({\n    [32773]: new Float32Array([r, g, b, a])\n  }),\n  blendEquation: (update, mode) => update({\n    [32777]: mode,\n    [34877]: mode\n  }),\n  blendEquationSeparate: (update, modeRGB, modeAlpha) => update({\n    [32777]: modeRGB,\n    [34877]: modeAlpha\n  }),\n  blendFunc: (update, src, dst) => update({\n    [32969]: src,\n    [32968]: dst,\n    [32971]: src,\n    [32970]: dst\n  }),\n  blendFuncSeparate: (update, srcRGB, dstRGB, srcAlpha, dstAlpha) => update({\n    [32969]: srcRGB,\n    [32968]: dstRGB,\n    [32971]: srcAlpha,\n    [32970]: dstAlpha\n  }),\n  clearColor: (update, r, g, b, a) => update({\n    [3106]: new Float32Array([r, g, b, a])\n  }),\n  clearDepth: (update, depth) => update({\n    [2931]: depth\n  }),\n  clearStencil: (update, s) => update({\n    [2961]: s\n  }),\n  colorMask: (update, r, g, b, a) => update({\n    [3107]: [r, g, b, a]\n  }),\n  cullFace: (update, mode) => update({\n    [2885]: mode\n  }),\n  depthFunc: (update, func) => update({\n    [2932]: func\n  }),\n  depthRange: (update, zNear, zFar) => update({\n    [2928]: new Float32Array([zNear, zFar])\n  }),\n  depthMask: (update, mask) => update({\n    [2930]: mask\n  }),\n  frontFace: (update, face) => update({\n    [2886]: face\n  }),\n  lineWidth: (update, width) => update({\n    [2849]: width\n  }),\n  polygonOffset: (update, factor, units) => update({\n    [32824]: factor,\n    [10752]: units\n  }),\n  sampleCoverage: (update, value, invert) => update({\n    [32938]: value,\n    [32939]: invert\n  }),\n  scissor: (update, x, y, width, height) => update({\n    [3088]: new Int32Array([x, y, width, height])\n  }),\n  stencilMask: (update, mask) => update({\n    [2968]: mask,\n    [36005]: mask\n  }),\n  stencilMaskSeparate: (update, face, mask) => update({\n    [face === 1028 ? 2968 : 36005]: mask\n  }),\n  stencilFunc: (update, func, ref, mask) => update({\n    [2962]: func,\n    [2967]: ref,\n    [2963]: mask,\n    [34816]: func,\n    [36003]: ref,\n    [36004]: mask\n  }),\n  stencilFuncSeparate: (update, face, func, ref, mask) => update({\n    [face === 1028 ? 2962 : 34816]: func,\n    [face === 1028 ? 2967 : 36003]: ref,\n    [face === 1028 ? 2963 : 36004]: mask\n  }),\n  stencilOp: (update, fail, zfail, zpass) => update({\n    [2964]: fail,\n    [2965]: zfail,\n    [2966]: zpass,\n    [34817]: fail,\n    [34818]: zfail,\n    [34819]: zpass\n  }),\n  stencilOpSeparate: (update, face, fail, zfail, zpass) => update({\n    [face === 1028 ? 2964 : 34817]: fail,\n    [face === 1028 ? 2965 : 34818]: zfail,\n    [face === 1028 ? 2966 : 34819]: zpass\n  }),\n  viewport: (update, x, y, width, height) => update({\n    [2978]: [x, y, width, height]\n  })\n};\n\nconst isEnabled = (gl, key) => gl.isEnabled(key);\n\nexport const GL_PARAMETER_GETTERS = {\n  [3042]: isEnabled,\n  [2884]: isEnabled,\n  [2929]: isEnabled,\n  [3024]: isEnabled,\n  [32823]: isEnabled,\n  [32926]: isEnabled,\n  [32928]: isEnabled,\n  [3089]: isEnabled,\n  [2960]: isEnabled,\n  [35977]: isEnabled\n};\n//# sourceMappingURL=webgl-parameter-tables.js.map","export function isObjectEmpty(object) {\n  for (const key in object) {\n    return false;\n  }\n\n  return true;\n}\nexport function deepArrayEqual(x, y) {\n  if (x === y) {\n    return true;\n  }\n\n  const isArrayX = Array.isArray(x) || ArrayBuffer.isView(x);\n  const isArrayY = Array.isArray(y) || ArrayBuffer.isView(y);\n\n  if (isArrayX && isArrayY && x.length === y.length) {\n    for (let i = 0; i < x.length; ++i) {\n      if (x[i] !== y[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\n//# sourceMappingURL=utils.js.map","import { GL_PARAMETER_DEFAULTS, GL_HOOKED_SETTERS } from './webgl-parameter-tables';\nimport { setParameters, getParameters } from './unified-parameter-api';\nimport { assert } from '../utils/assert';\nimport { deepArrayEqual } from '../utils/utils';\n\nfunction installGetterOverride(gl, functionName) {\n  const originalGetterFunc = gl[functionName].bind(gl);\n\n  gl[functionName] = function get() {\n    const pname = arguments.length <= 0 ? undefined : arguments[0];\n\n    if (!(pname in gl.state.cache)) {\n      return originalGetterFunc(...arguments);\n    }\n\n    return gl.state.enable ? gl.state.cache[pname] : originalGetterFunc(...arguments);\n  };\n\n  Object.defineProperty(gl[functionName], 'name', {\n    value: \"\".concat(functionName, \"-from-cache\"),\n    configurable: false\n  });\n}\n\nfunction installSetterSpy(gl, functionName, setter) {\n  const originalSetterFunc = gl[functionName].bind(gl);\n\n  gl[functionName] = function set() {\n    for (var _len = arguments.length, params = new Array(_len), _key = 0; _key < _len; _key++) {\n      params[_key] = arguments[_key];\n    }\n\n    const {\n      valueChanged,\n      oldValue\n    } = setter(gl.state._updateCache, ...params);\n\n    if (valueChanged) {\n      originalSetterFunc(...params);\n    }\n\n    return oldValue;\n  };\n\n  Object.defineProperty(gl[functionName], 'name', {\n    value: \"\".concat(functionName, \"-to-cache\"),\n    configurable: false\n  });\n}\n\nfunction installProgramSpy(gl) {\n  const originalUseProgram = gl.useProgram.bind(gl);\n\n  gl.useProgram = function useProgramLuma(handle) {\n    if (gl.state.program !== handle) {\n      originalUseProgram(handle);\n      gl.state.program = handle;\n    }\n  };\n}\n\nclass GLState {\n  constructor(gl) {\n    let {\n      copyState = false,\n      log = () => {}\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.gl = gl;\n    this.program = null;\n    this.stateStack = [];\n    this.enable = true;\n    this.cache = copyState ? getParameters(gl) : Object.assign({}, GL_PARAMETER_DEFAULTS);\n    this.log = log;\n    this._updateCache = this._updateCache.bind(this);\n    Object.seal(this);\n  }\n\n  push() {\n    let values = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    this.stateStack.push({});\n  }\n\n  pop() {\n    assert(this.stateStack.length > 0);\n    const oldValues = this.stateStack[this.stateStack.length - 1];\n    setParameters(this.gl, oldValues);\n    this.stateStack.pop();\n  }\n\n  _updateCache(values) {\n    let valueChanged = false;\n    let oldValue;\n    const oldValues = this.stateStack.length > 0 && this.stateStack[this.stateStack.length - 1];\n\n    for (const key in values) {\n      assert(key !== undefined);\n      const value = values[key];\n      const cached = this.cache[key];\n\n      if (!deepArrayEqual(value, cached)) {\n        valueChanged = true;\n        oldValue = cached;\n\n        if (oldValues && !(key in oldValues)) {\n          oldValues[key] = cached;\n        }\n\n        this.cache[key] = value;\n      }\n    }\n\n    return {\n      valueChanged,\n      oldValue\n    };\n  }\n\n}\n\nexport function trackContextState(gl) {\n  let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const {\n    enable = true,\n    copyState\n  } = options;\n  assert(copyState !== undefined);\n\n  if (!gl.state) {\n    const {\n      polyfillContext\n    } = globalThis;\n\n    if (polyfillContext) {\n      polyfillContext(gl);\n    }\n\n    gl.state = new GLState(gl, {\n      copyState\n    });\n    installProgramSpy(gl);\n\n    for (const key in GL_HOOKED_SETTERS) {\n      const setter = GL_HOOKED_SETTERS[key];\n      installSetterSpy(gl, key, setter);\n    }\n\n    installGetterOverride(gl, 'getParameter');\n    installGetterOverride(gl, 'isEnabled');\n  }\n\n  gl.state.enable = enable;\n  return gl;\n}\nexport function pushContextState(gl) {\n  if (!gl.state) {\n    trackContextState(gl, {\n      copyState: false\n    });\n  }\n\n  gl.state.push();\n}\nexport function popContextState(gl) {\n  assert(gl.state);\n  gl.state.pop();\n}\n//# sourceMappingURL=track-context-state.js.map","import { GL_PARAMETER_DEFAULTS, GL_PARAMETER_SETTERS, GL_COMPOSITE_PARAMETER_SETTERS, GL_PARAMETER_GETTERS } from './webgl-parameter-tables';\nimport { pushContextState, popContextState } from './track-context-state';\nimport { assert } from '../utils/assert';\nimport { isWebGL } from '../utils/webgl-checks';\nimport { isObjectEmpty } from '../utils/utils';\nexport function setParameters(gl, values) {\n  assert(isWebGL(gl), 'setParameters requires a WebGL context');\n\n  if (isObjectEmpty(values)) {\n    return;\n  }\n\n  const compositeSetters = {};\n\n  for (const key in values) {\n    const glConstant = Number(key);\n    const setter = GL_PARAMETER_SETTERS[key];\n\n    if (setter) {\n      if (typeof setter === 'string') {\n        compositeSetters[setter] = true;\n      } else {\n        setter(gl, values[key], glConstant);\n      }\n    }\n  }\n\n  const cache = gl.state && gl.state.cache;\n\n  if (cache) {\n    for (const key in compositeSetters) {\n      const compositeSetter = GL_COMPOSITE_PARAMETER_SETTERS[key];\n      compositeSetter(gl, values, cache);\n    }\n  }\n}\nexport function getParameters(gl, parameters) {\n  parameters = parameters || GL_PARAMETER_DEFAULTS;\n\n  if (typeof parameters === 'number') {\n    const key = parameters;\n    const getter = GL_PARAMETER_GETTERS[key];\n    return getter ? getter(gl, key) : gl.getParameter(key);\n  }\n\n  const parameterKeys = Array.isArray(parameters) ? parameters : Object.keys(parameters);\n  const state = {};\n\n  for (const key of parameterKeys) {\n    const getter = GL_PARAMETER_GETTERS[key];\n    state[key] = getter ? getter(gl, Number(key)) : gl.getParameter(Number(key));\n  }\n\n  return state;\n}\nexport function resetParameters(gl) {\n  setParameters(gl, GL_PARAMETER_DEFAULTS);\n}\nexport function withParameters(gl, parameters, func) {\n  if (isObjectEmpty(parameters)) {\n    return func(gl);\n  }\n\n  const {\n    nocatch = true\n  } = parameters;\n  pushContextState(gl);\n  setParameters(gl, parameters);\n  let value;\n\n  if (nocatch) {\n    value = func(gl);\n    popContextState(gl);\n  } else {\n    try {\n      value = func(gl);\n    } finally {\n      popContextState(gl);\n    }\n  }\n\n  return value;\n}\n//# sourceMappingURL=unified-parameter-api.js.map","export function cssToDeviceRatio(gl) {\n  const {\n    luma\n  } = gl;\n\n  if (gl.canvas && luma) {\n    const {\n      clientWidth\n    } = luma.canvasSizeInfo;\n    return clientWidth ? gl.drawingBufferWidth / clientWidth : 1;\n  }\n\n  return 1;\n}\nexport function cssToDevicePixels(gl, cssPixel) {\n  let yInvert = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  const ratio = cssToDeviceRatio(gl);\n  const width = gl.drawingBufferWidth;\n  const height = gl.drawingBufferHeight;\n  return scalePixels(cssPixel, ratio, width, height, yInvert);\n}\nexport function getDevicePixelRatio(useDevicePixels) {\n  const windowRatio = typeof window === 'undefined' ? 1 : window.devicePixelRatio || 1;\n\n  if (Number.isFinite(useDevicePixels)) {\n    return useDevicePixels <= 0 ? 1 : useDevicePixels;\n  }\n\n  return useDevicePixels ? windowRatio : 1;\n}\n\nfunction scalePixels(pixel, ratio, width, height, yInvert) {\n  const x = scaleX(pixel[0], ratio, width);\n  let y = scaleY(pixel[1], ratio, height, yInvert);\n  let t = scaleX(pixel[0] + 1, ratio, width);\n  const xHigh = t === width - 1 ? t : t - 1;\n  t = scaleY(pixel[1] + 1, ratio, height, yInvert);\n  let yHigh;\n\n  if (yInvert) {\n    t = t === 0 ? t : t + 1;\n    yHigh = y;\n    y = t;\n  } else {\n    yHigh = t === height - 1 ? t : t - 1;\n  }\n\n  return {\n    x,\n    y,\n    width: Math.max(xHigh - x + 1, 1),\n    height: Math.max(yHigh - y + 1, 1)\n  };\n}\n\nfunction scaleX(x, ratio, width) {\n  const r = Math.min(Math.round(x * ratio), width - 1);\n  return r;\n}\n\nfunction scaleY(y, ratio, height, yInvert) {\n  return yInvert ? Math.max(0, height - 1 - Math.round(y * ratio)) : Math.min(Math.round(y * ratio), height - 1);\n}\n//# sourceMappingURL=device-pixels.js.map","import { isBrowser as getIsBrowser } from '@probe.gl/env';\nimport { trackContextState } from '../state-tracker/track-context-state';\nimport { log } from '../utils/log';\nimport { assert } from '../utils/assert';\nimport { getDevicePixelRatio } from '../utils/device-pixels';\nimport { isWebGL2 } from '../utils/webgl-checks';\nconst isBrowser = getIsBrowser();\nconst isPage = isBrowser && typeof document !== 'undefined';\nconst CONTEXT_DEFAULTS = {\n  webgl2: true,\n  webgl1: true,\n  throwOnError: true,\n  manageState: true,\n  canvas: null,\n  debug: false,\n  width: 800,\n  height: 600\n};\nexport function createGLContext() {\n  let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  assert(isBrowser, \"createGLContext only available in the browser.\\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils\");\n  options = Object.assign({}, CONTEXT_DEFAULTS, options);\n  const {\n    width,\n    height\n  } = options;\n\n  function onError(message) {\n    if (options.throwOnError) {\n      throw new Error(message);\n    }\n\n    console.error(message);\n    return null;\n  }\n\n  options.onError = onError;\n  let gl;\n  const {\n    canvas\n  } = options;\n  const targetCanvas = getCanvas({\n    canvas,\n    width,\n    height,\n    onError\n  });\n  gl = createBrowserContext(targetCanvas, options);\n\n  if (!gl) {\n    return null;\n  }\n\n  gl = instrumentGLContext(gl, options);\n  logInfo(gl);\n  return gl;\n}\nexport function instrumentGLContext(gl) {\n  let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!gl || gl._instrumented) {\n    return gl;\n  }\n\n  gl._version = gl._version || getVersion(gl);\n  gl.luma = gl.luma || {};\n  gl.luma.canvasSizeInfo = gl.luma.canvasSizeInfo || {};\n  options = Object.assign({}, CONTEXT_DEFAULTS, options);\n  const {\n    manageState,\n    debug\n  } = options;\n\n  if (manageState) {\n    trackContextState(gl, {\n      copyState: false,\n      log: function () {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        return log.log(1, ...args)();\n      }\n    });\n  }\n\n  if (isBrowser && debug) {\n    if (!globalThis.makeDebugContext) {\n      log.warn('WebGL debug mode not activated. import \"@luma.gl/debug\" to enable.')();\n    } else {\n      gl = globalThis.makeDebugContext(gl, options);\n      log.level = Math.max(log.level, 1);\n    }\n  }\n\n  gl._instrumented = true;\n  return gl;\n}\nexport function getContextDebugInfo(gl) {\n  const vendorMasked = gl.getParameter(7936);\n  const rendererMasked = gl.getParameter(7937);\n  const ext = gl.getExtension('WEBGL_debug_renderer_info');\n  const vendorUnmasked = ext && gl.getParameter(ext.UNMASKED_VENDOR_WEBGL || 7936);\n  const rendererUnmasked = ext && gl.getParameter(ext.UNMASKED_RENDERER_WEBGL || 7937);\n  return {\n    vendor: vendorUnmasked || vendorMasked,\n    renderer: rendererUnmasked || rendererMasked,\n    vendorMasked,\n    rendererMasked,\n    version: gl.getParameter(7938),\n    shadingLanguageVersion: gl.getParameter(35724)\n  };\n}\nexport function resizeGLContext(gl) {\n  let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (gl.canvas) {\n    const devicePixelRatio = getDevicePixelRatio(options.useDevicePixels);\n    setDevicePixelRatio(gl, devicePixelRatio, options);\n    return;\n  }\n\n  const ext = gl.getExtension('STACKGL_resize_drawingbuffer');\n\n  if (ext && \"width\" in options && \"height\" in options) {\n    ext.resize(options.width, options.height);\n  }\n}\n\nfunction createBrowserContext(canvas, options) {\n  const {\n    onError\n  } = options;\n  let errorMessage = null;\n\n  const onCreateError = error => errorMessage = error.statusMessage || errorMessage;\n\n  canvas.addEventListener('webglcontextcreationerror', onCreateError, false);\n  const {\n    webgl1 = true,\n    webgl2 = true\n  } = options;\n  let gl = null;\n\n  if (webgl2) {\n    gl = gl || canvas.getContext('webgl2', options);\n    gl = gl || canvas.getContext('experimental-webgl2', options);\n  }\n\n  if (webgl1) {\n    gl = gl || canvas.getContext('webgl', options);\n    gl = gl || canvas.getContext('experimental-webgl', options);\n  }\n\n  canvas.removeEventListener('webglcontextcreationerror', onCreateError, false);\n\n  if (!gl) {\n    return onError(\"Failed to create \".concat(webgl2 && !webgl1 ? 'WebGL2' : 'WebGL', \" context: \").concat(errorMessage || 'Unknown error'));\n  }\n\n  if (options.onContextLost) {\n    canvas.addEventListener('webglcontextlost', options.onContextLost, false);\n  }\n\n  if (options.onContextRestored) {\n    canvas.addEventListener('webglcontextrestored', options.onContextRestored, false);\n  }\n\n  return gl;\n}\n\nfunction getCanvas(_ref) {\n  let {\n    canvas,\n    width = 800,\n    height = 600,\n    onError\n  } = _ref;\n  let targetCanvas;\n\n  if (typeof canvas === 'string') {\n    const isPageLoaded = isPage && document.readyState === 'complete';\n\n    if (!isPageLoaded) {\n      onError(\"createGLContext called on canvas '\".concat(canvas, \"' before page was loaded\"));\n    }\n\n    targetCanvas = document.getElementById(canvas);\n  } else if (canvas) {\n    targetCanvas = canvas;\n  } else {\n    targetCanvas = document.createElement('canvas');\n    targetCanvas.id = 'lumagl-canvas';\n    targetCanvas.style.width = Number.isFinite(width) ? \"\".concat(width, \"px\") : '100%';\n    targetCanvas.style.height = Number.isFinite(height) ? \"\".concat(height, \"px\") : '100%';\n    document.body.insertBefore(targetCanvas, document.body.firstChild);\n  }\n\n  return targetCanvas;\n}\n\nfunction logInfo(gl) {\n  const webGL = isWebGL2(gl) ? 'WebGL2' : 'WebGL1';\n  const info = getContextDebugInfo(gl);\n  const driver = info ? \"(\".concat(info.vendor, \",\").concat(info.renderer, \")\") : '';\n  const debug = gl.debug ? ' debug' : '';\n  log.info(1, \"\".concat(webGL).concat(debug, \" context \").concat(driver))();\n}\n\nfunction getVersion(gl) {\n  if (typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext) {\n    return 2;\n  }\n\n  return 1;\n}\n\nfunction setDevicePixelRatio(gl, devicePixelRatio, options) {\n  let clientWidth = 'width' in options ? options.width : gl.canvas.clientWidth;\n  let clientHeight = 'height' in options ? options.height : gl.canvas.clientHeight;\n\n  if (!clientWidth || !clientHeight) {\n    log.log(1, 'Canvas clientWidth/clientHeight is 0')();\n    devicePixelRatio = 1;\n    clientWidth = gl.canvas.width || 1;\n    clientHeight = gl.canvas.height || 1;\n  }\n\n  gl.luma = gl.luma || {};\n  gl.luma.canvasSizeInfo = gl.luma.canvasSizeInfo || {};\n  const cachedSize = gl.luma.canvasSizeInfo;\n\n  if (cachedSize.clientWidth !== clientWidth || cachedSize.clientHeight !== clientHeight || cachedSize.devicePixelRatio !== devicePixelRatio) {\n    let clampedPixelRatio = devicePixelRatio;\n    const canvasWidth = Math.floor(clientWidth * clampedPixelRatio);\n    const canvasHeight = Math.floor(clientHeight * clampedPixelRatio);\n    gl.canvas.width = canvasWidth;\n    gl.canvas.height = canvasHeight;\n\n    if (gl.drawingBufferWidth !== canvasWidth || gl.drawingBufferHeight !== canvasHeight) {\n      log.warn(\"Device pixel ratio clamped\")();\n      clampedPixelRatio = Math.min(gl.drawingBufferWidth / clientWidth, gl.drawingBufferHeight / clientHeight);\n      gl.canvas.width = Math.floor(clientWidth * clampedPixelRatio);\n      gl.canvas.height = Math.floor(clientHeight * clampedPixelRatio);\n    }\n\n    Object.assign(gl.luma.canvasSizeInfo, {\n      clientWidth,\n      clientHeight,\n      devicePixelRatio\n    });\n  }\n}\n//# sourceMappingURL=context.js.map","import { log } from '@luma.gl/gltools';\nimport { Stats } from '@probe.gl/stats';\nimport { isBrowser } from '@probe.gl/env';\nconst VERSION = typeof \"8.5.18\" !== 'undefined' ? \"8.5.18\" : 'untranspiled source';\nconst STARTUP_MESSAGE = 'set luma.log.level=1 (or higher) to trace rendering';\nexport class StatsManager {\n  constructor() {\n    this.stats = new Map();\n  }\n\n  get(name) {\n    if (!this.stats.has(name)) {\n      this.stats.set(name, new Stats({\n        id: name\n      }));\n    }\n\n    return this.stats.get(name);\n  }\n\n}\nconst lumaStats = new StatsManager();\n\nif (globalThis.luma && globalThis.luma.VERSION !== VERSION) {\n  throw new Error(\"luma.gl - multiple VERSIONs detected: \".concat(globalThis.luma.VERSION, \" vs \").concat(VERSION));\n}\n\nif (!globalThis.luma) {\n  if (isBrowser()) {\n    log.log(1, \"luma.gl \".concat(VERSION, \" - \").concat(STARTUP_MESSAGE))();\n  }\n\n  globalThis.luma = globalThis.luma || {\n    VERSION,\n    version: VERSION,\n    log,\n    stats: lumaStats,\n    globals: {\n      modules: {},\n      nodeIO: {}\n    }\n  };\n}\n\nexport { lumaStats };\nexport default globalThis.luma;\n//# sourceMappingURL=init.js.map","export function requestAnimationFrame(callback) {\n  return typeof window !== 'undefined' && window.requestAnimationFrame ? window.requestAnimationFrame(callback) : setTimeout(callback, 1000 / 60);\n}\nexport function cancelAnimationFrame(timerId) {\n  return typeof window !== 'undefined' && window.cancelAnimationFrame ? window.cancelAnimationFrame(timerId) : clearTimeout(timerId);\n}\n//# sourceMappingURL=request-animation-frame.js.map","export function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'luma.gl: assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","import { assert } from '../utils/assert';\nexport function getKeyValue(gl, name) {\n  if (typeof name !== 'string') {\n    return name;\n  }\n\n  const number = Number(name);\n\n  if (!isNaN(number)) {\n    return number;\n  }\n\n  name = name.replace(/^.*\\./, '');\n  const value = gl[name];\n  assert(value !== undefined, \"Accessing undefined constant GL.\".concat(name));\n  return value;\n}\nexport function getKey(gl, value) {\n  value = Number(value);\n\n  for (const key in gl) {\n    if (gl[key] === value) {\n      return \"GL.\".concat(key);\n    }\n  }\n\n  return String(value);\n}\nexport function getKeyType(gl, value) {\n  assert(value !== undefined, 'undefined key');\n  value = Number(value);\n\n  for (const key in gl) {\n    if (gl[key] === value) {\n      return \"GL.\".concat(key);\n    }\n  }\n\n  return String(value);\n}\n//# sourceMappingURL=constants-to-keys.js.map","import { assert } from './assert';\nconst uidCounters = {};\nexport function uid() {\n  let id = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'id';\n  uidCounters[id] = uidCounters[id] || 1;\n  const count = uidCounters[id]++;\n  return \"\".concat(id, \"-\").concat(count);\n}\nexport function isPowerOfTwo(n) {\n  assert(typeof n === 'number', 'Input must be a number');\n  return n && (n & n - 1) === 0;\n}\nexport function isObjectEmpty(obj) {\n  let isEmpty = true;\n\n  for (const key in obj) {\n    isEmpty = false;\n    break;\n  }\n\n  return isEmpty;\n}\n//# sourceMappingURL=utils.js.map","import { log } from '@luma.gl/gltools';\nexport function stubRemovedMethods(instance, className, version, methodNames) {\n  const upgradeMessage = \"See luma.gl \".concat(version, \" Upgrade Guide at https://luma.gl/docs/upgrade-guide\");\n  const prototype = Object.getPrototypeOf(instance);\n  methodNames.forEach(methodName => {\n    if (prototype.methodName) {\n      return;\n    }\n\n    prototype[methodName] = () => {\n      log.removed(\"Calling removed method \".concat(className, \".\").concat(methodName, \": \"), upgradeMessage)();\n      throw new Error(methodName);\n    };\n  });\n}\n//# sourceMappingURL=stub-methods.js.map","import { isWebGL2, assertWebGLContext } from '@luma.gl/gltools';\nimport { lumaStats } from '../init';\nimport { getKey, getKeyValue } from '../webgl-utils/constants-to-keys';\nimport { assert } from '../utils/assert';\nimport { uid } from '../utils/utils';\nimport { stubRemovedMethods } from '../utils/stub-methods';\nconst ERR_RESOURCE_METHOD_UNDEFINED = 'Resource subclass must define virtual methods';\nexport default class Resource {\n  get [Symbol.toStringTag]() {\n    return 'Resource';\n  }\n\n  constructor(gl) {\n    let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    assertWebGLContext(gl);\n    const {\n      id,\n      userData = {}\n    } = opts;\n    this.gl = gl;\n    this.gl2 = gl;\n    this.id = id || uid(this[Symbol.toStringTag]);\n    this.userData = userData;\n    this._bound = false;\n    this._handle = opts.handle;\n\n    if (this._handle === undefined) {\n      this._handle = this._createHandle();\n    }\n\n    this.byteLength = 0;\n\n    this._addStats();\n  }\n\n  toString() {\n    return \"\".concat(this[Symbol.toStringTag] || this.constructor.name, \"(\").concat(this.id, \")\");\n  }\n\n  get handle() {\n    return this._handle;\n  }\n\n  delete() {\n    let {\n      deleteChildren = false\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    const children = this._handle && this._deleteHandle(this._handle);\n\n    if (this._handle) {\n      this._removeStats();\n    }\n\n    this._handle = null;\n\n    if (children && deleteChildren) {\n      children.filter(Boolean).forEach(child => child.delete());\n    }\n\n    return this;\n  }\n\n  bind() {\n    let funcOrHandle = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.handle;\n\n    if (typeof funcOrHandle !== 'function') {\n      this._bindHandle(funcOrHandle);\n\n      return this;\n    }\n\n    let value;\n\n    if (!this._bound) {\n      this._bindHandle(this.handle);\n\n      this._bound = true;\n      value = funcOrHandle();\n      this._bound = false;\n\n      this._bindHandle(null);\n    } else {\n      value = funcOrHandle();\n    }\n\n    return value;\n  }\n\n  unbind() {\n    this.bind(null);\n  }\n\n  getParameter(pname) {\n    let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    pname = getKeyValue(this.gl, pname);\n    assert(pname);\n    const parameters = this.constructor.PARAMETERS || {};\n    const parameter = parameters[pname];\n\n    if (parameter) {\n      const isWebgl2 = isWebGL2(this.gl);\n      const parameterAvailable = (!('webgl2' in parameter) || isWebgl2) && (!('extension' in parameter) || this.gl.getExtension(parameter.extension));\n\n      if (!parameterAvailable) {\n        const webgl1Default = parameter.webgl1;\n        const webgl2Default = 'webgl2' in parameter ? parameter.webgl2 : parameter.webgl1;\n        const defaultValue = isWebgl2 ? webgl2Default : webgl1Default;\n        return defaultValue;\n      }\n    }\n\n    return this._getParameter(pname, opts);\n  }\n\n  getParameters() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      parameters,\n      keys\n    } = options;\n    const PARAMETERS = this.constructor.PARAMETERS || {};\n    const isWebgl2 = isWebGL2(this.gl);\n    const values = {};\n    const parameterKeys = parameters || Object.keys(PARAMETERS);\n\n    for (const pname of parameterKeys) {\n      const parameter = PARAMETERS[pname];\n      const parameterAvailable = parameter && (!('webgl2' in parameter) || isWebgl2) && (!('extension' in parameter) || this.gl.getExtension(parameter.extension));\n\n      if (parameterAvailable) {\n        const key = keys ? getKey(this.gl, pname) : pname;\n        values[key] = this.getParameter(pname, options);\n\n        if (keys && parameter.type === 'GLenum') {\n          values[key] = getKey(this.gl, values[key]);\n        }\n      }\n    }\n\n    return values;\n  }\n\n  setParameter(pname, value) {\n    pname = getKeyValue(this.gl, pname);\n    assert(pname);\n    const parameters = this.constructor.PARAMETERS || {};\n    const parameter = parameters[pname];\n\n    if (parameter) {\n      const isWebgl2 = isWebGL2(this.gl);\n      const parameterAvailable = (!('webgl2' in parameter) || isWebgl2) && (!('extension' in parameter) || this.gl.getExtension(parameter.extension));\n\n      if (!parameterAvailable) {\n        throw new Error('Parameter not available on this platform');\n      }\n\n      if (parameter.type === 'GLenum') {\n        value = getKeyValue(value);\n      }\n    }\n\n    this._setParameter(pname, value);\n\n    return this;\n  }\n\n  setParameters(parameters) {\n    for (const pname in parameters) {\n      this.setParameter(pname, parameters[pname]);\n    }\n\n    return this;\n  }\n\n  stubRemovedMethods(className, version, methodNames) {\n    return stubRemovedMethods(this, className, version, methodNames);\n  }\n\n  initialize(opts) {}\n\n  _createHandle() {\n    throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n  }\n\n  _deleteHandle() {\n    throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n  }\n\n  _bindHandle(handle) {\n    throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n  }\n\n  _getOptsFromHandle() {\n    throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n  }\n\n  _getParameter(pname, opts) {\n    throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n  }\n\n  _setParameter(pname, value) {\n    throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n  }\n\n  _context() {\n    this.gl.luma = this.gl.luma || {};\n    return this.gl.luma;\n  }\n\n  _addStats() {\n    const name = this[Symbol.toStringTag];\n    const stats = lumaStats.get('Resource Counts');\n    stats.get('Resources Created').incrementCount();\n    stats.get(\"\".concat(name, \"s Created\")).incrementCount();\n    stats.get(\"\".concat(name, \"s Active\")).incrementCount();\n  }\n\n  _removeStats() {\n    const name = this[Symbol.toStringTag];\n    const stats = lumaStats.get('Resource Counts');\n    stats.get(\"\".concat(name, \"s Active\")).decrementCount();\n  }\n\n  _trackAllocatedMemory(bytes) {\n    let name = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this[Symbol.toStringTag];\n\n    this._trackAllocatedMemoryForContext(bytes, name);\n\n    this._trackAllocatedMemoryForContext(bytes, name, this.gl.canvas && this.gl.canvas.id);\n\n    this.byteLength = bytes;\n  }\n\n  _trackAllocatedMemoryForContext(bytes) {\n    let name = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this[Symbol.toStringTag];\n    let id = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n    const stats = lumaStats.get(\"Memory Usage\".concat(id));\n    stats.get('GPU Memory').addCount(bytes);\n    stats.get(\"\".concat(name, \" Memory\")).addCount(bytes);\n  }\n\n  _trackDeallocatedMemory() {\n    let name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this[Symbol.toStringTag];\n\n    this._trackDeallocatedMemoryForContext(name);\n\n    this._trackDeallocatedMemoryForContext(name, this.gl.canvas && this.gl.canvas.id);\n\n    this.byteLength = 0;\n  }\n\n  _trackDeallocatedMemoryForContext() {\n    let name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this[Symbol.toStringTag];\n    let id = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n    const stats = lumaStats.get(\"Memory Usage\".concat(id));\n    stats.get('GPU Memory').subtractCount(this.byteLength);\n    stats.get(\"\".concat(name, \" Memory\")).subtractCount(this.byteLength);\n  }\n\n}\n//# sourceMappingURL=resource.js.map","const ERR_TYPE_DEDUCTION = 'Failed to deduce GL constant from typed array';\nexport function getGLTypeFromTypedArray(arrayOrType) {\n  const type = ArrayBuffer.isView(arrayOrType) ? arrayOrType.constructor : arrayOrType;\n\n  switch (type) {\n    case Float32Array:\n      return 5126;\n\n    case Uint16Array:\n      return 5123;\n\n    case Uint32Array:\n      return 5125;\n\n    case Uint8Array:\n      return 5121;\n\n    case Uint8ClampedArray:\n      return 5121;\n\n    case Int8Array:\n      return 5120;\n\n    case Int16Array:\n      return 5122;\n\n    case Int32Array:\n      return 5124;\n\n    default:\n      throw new Error(ERR_TYPE_DEDUCTION);\n  }\n}\nexport function getTypedArrayFromGLType(glType) {\n  let {\n    clamped = true\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  switch (glType) {\n    case 5126:\n      return Float32Array;\n\n    case 5123:\n    case 33635:\n    case 32819:\n    case 32820:\n      return Uint16Array;\n\n    case 5125:\n      return Uint32Array;\n\n    case 5121:\n      return clamped ? Uint8ClampedArray : Uint8Array;\n\n    case 5120:\n      return Int8Array;\n\n    case 5122:\n      return Int16Array;\n\n    case 5124:\n      return Int32Array;\n\n    default:\n      throw new Error('Failed to deduce typed array type from GL constant');\n  }\n}\nexport function flipRows(_ref) {\n  let {\n    data,\n    width,\n    height,\n    bytesPerPixel = 4,\n    temp\n  } = _ref;\n  const bytesPerRow = width * bytesPerPixel;\n  temp = temp || new Uint8Array(bytesPerRow);\n\n  for (let y = 0; y < height / 2; ++y) {\n    const topOffset = y * bytesPerRow;\n    const bottomOffset = (height - y - 1) * bytesPerRow;\n    temp.set(data.subarray(topOffset, topOffset + bytesPerRow));\n    data.copyWithin(topOffset, bottomOffset, bottomOffset + bytesPerRow);\n    data.set(temp, bottomOffset);\n  }\n}\nexport function scalePixels(_ref2) {\n  let {\n    data,\n    width,\n    height\n  } = _ref2;\n  const newWidth = Math.round(width / 2);\n  const newHeight = Math.round(height / 2);\n  const newData = new Uint8Array(newWidth * newHeight * 4);\n\n  for (let y = 0; y < newHeight; y++) {\n    for (let x = 0; x < newWidth; x++) {\n      for (let c = 0; c < 4; c++) {\n        newData[(y * newWidth + x) * 4 + c] = data[(y * 2 * width + x * 2) * 4 + c];\n      }\n    }\n  }\n\n  return {\n    data: newData,\n    width: newWidth,\n    height: newHeight\n  };\n}\n//# sourceMappingURL=typed-array-utils.js.map","import { log } from '@luma.gl/gltools';\nexport function checkProps(className, props, propChecks) {\n  const {\n    removedProps = {},\n    deprecatedProps = {},\n    replacedProps = {}\n  } = propChecks;\n\n  for (const propName in removedProps) {\n    if (propName in props) {\n      const replacementProp = removedProps[propName];\n      const replacement = replacementProp ? \"\".concat(className, \".\").concat(removedProps[propName]) : 'N/A';\n      log.removed(\"\".concat(className, \".\").concat(propName), replacement)();\n    }\n  }\n\n  for (const propName in deprecatedProps) {\n    if (propName in props) {\n      const replacementProp = deprecatedProps[propName];\n      log.deprecated(\"\".concat(className, \".\").concat(propName), \"\".concat(className, \".\").concat(replacementProp))();\n    }\n  }\n\n  let newProps = null;\n\n  for (const propName in replacedProps) {\n    if (propName in props) {\n      const replacementProp = replacedProps[propName];\n      log.deprecated(\"\".concat(className, \".\").concat(propName), \"\".concat(className, \".\").concat(replacementProp))();\n      newProps = newProps || Object.assign({}, props);\n      newProps[replacementProp] = props[propName];\n      delete newProps[propName];\n    }\n  }\n\n  return newProps || props;\n}\n//# sourceMappingURL=check-props.js.map","import { getTypedArrayFromGLType } from '../webgl-utils/typed-array-utils';\nimport { assert } from '../utils/assert';\nimport { checkProps } from '../utils/check-props';\nconst DEFAULT_ACCESSOR_VALUES = {\n  offset: 0,\n  stride: 0,\n  type: 5126,\n  size: 1,\n  divisor: 0,\n  normalized: false,\n  integer: false\n};\nconst PROP_CHECKS = {\n  deprecatedProps: {\n    instanced: 'divisor',\n    isInstanced: 'divisor'\n  }\n};\nexport default class Accessor {\n  static getBytesPerElement(accessor) {\n    const ArrayType = getTypedArrayFromGLType(accessor.type || 5126);\n    return ArrayType.BYTES_PER_ELEMENT;\n  }\n\n  static getBytesPerVertex(accessor) {\n    assert(accessor.size);\n    const ArrayType = getTypedArrayFromGLType(accessor.type || 5126);\n    return ArrayType.BYTES_PER_ELEMENT * accessor.size;\n  }\n\n  static resolve() {\n    for (var _len = arguments.length, accessors = new Array(_len), _key = 0; _key < _len; _key++) {\n      accessors[_key] = arguments[_key];\n    }\n\n    return new Accessor(...[DEFAULT_ACCESSOR_VALUES, ...accessors]);\n  }\n\n  constructor() {\n    for (var _len2 = arguments.length, accessors = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      accessors[_key2] = arguments[_key2];\n    }\n\n    accessors.forEach(accessor => this._assign(accessor));\n    Object.freeze(this);\n  }\n\n  toString() {\n    return JSON.stringify(this);\n  }\n\n  get BYTES_PER_ELEMENT() {\n    return Accessor.getBytesPerElement(this);\n  }\n\n  get BYTES_PER_VERTEX() {\n    return Accessor.getBytesPerVertex(this);\n  }\n\n  _assign() {\n    let props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    props = checkProps('Accessor', props, PROP_CHECKS);\n\n    if (props.type !== undefined) {\n      this.type = props.type;\n\n      if (props.type === 5124 || props.type === 5125) {\n        this.integer = true;\n      }\n    }\n\n    if (props.size !== undefined) {\n      this.size = props.size;\n    }\n\n    if (props.offset !== undefined) {\n      this.offset = props.offset;\n    }\n\n    if (props.stride !== undefined) {\n      this.stride = props.stride;\n    }\n\n    if (props.normalized !== undefined) {\n      this.normalized = props.normalized;\n    }\n\n    if (props.integer !== undefined) {\n      this.integer = props.integer;\n    }\n\n    if (props.divisor !== undefined) {\n      this.divisor = props.divisor;\n    }\n\n    if (props.buffer !== undefined) {\n      this.buffer = props.buffer;\n    }\n\n    if (props.index !== undefined) {\n      if (typeof props.index === 'boolean') {\n        this.index = props.index ? 1 : 0;\n      } else {\n        this.index = props.index;\n      }\n    }\n\n    if (props.instanced !== undefined) {\n      this.divisor = props.instanced ? 1 : 0;\n    }\n\n    if (props.isInstanced !== undefined) {\n      this.divisor = props.isInstanced ? 1 : 0;\n    }\n\n    return this;\n  }\n\n}\nexport { DEFAULT_ACCESSOR_VALUES };\n//# sourceMappingURL=accessor.js.map","import Resource from './resource';\nimport Accessor from './accessor';\nimport { getGLTypeFromTypedArray, getTypedArrayFromGLType } from '../webgl-utils/typed-array-utils';\nimport { assertWebGL2Context, log } from '@luma.gl/gltools';\nimport { assert } from '../utils/assert';\nimport { checkProps } from '../utils/check-props';\nconst DEBUG_DATA_LENGTH = 10;\nconst DEPRECATED_PROPS = {\n  offset: 'accessor.offset',\n  stride: 'accessor.stride',\n  type: 'accessor.type',\n  size: 'accessor.size',\n  divisor: 'accessor.divisor',\n  normalized: 'accessor.normalized',\n  integer: 'accessor.integer',\n  instanced: 'accessor.divisor',\n  isInstanced: 'accessor.divisor'\n};\nconst PROP_CHECKS_INITIALIZE = {\n  removedProps: {},\n  replacedProps: {\n    bytes: 'byteLength'\n  },\n  deprecatedProps: DEPRECATED_PROPS\n};\nconst PROP_CHECKS_SET_PROPS = {\n  removedProps: DEPRECATED_PROPS\n};\nexport default class Buffer extends Resource {\n  get [Symbol.toStringTag]() {\n    return 'Buffer';\n  }\n\n  constructor(gl) {\n    let props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    super(gl, props);\n    this.stubRemovedMethods('Buffer', 'v6.0', ['layout', 'setLayout', 'getIndexedParameter']);\n    this.target = props.target || (this.gl.webgl2 ? 36662 : 34962);\n    this.initialize(props);\n    Object.seal(this);\n  }\n\n  getElementCount() {\n    let accessor = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.accessor;\n    return Math.round(this.byteLength / Accessor.getBytesPerElement(accessor));\n  }\n\n  getVertexCount() {\n    let accessor = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.accessor;\n    return Math.round(this.byteLength / Accessor.getBytesPerVertex(accessor));\n  }\n\n  initialize() {\n    let props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if (ArrayBuffer.isView(props)) {\n      props = {\n        data: props\n      };\n    }\n\n    if (Number.isFinite(props)) {\n      props = {\n        byteLength: props\n      };\n    }\n\n    props = checkProps('Buffer', props, PROP_CHECKS_INITIALIZE);\n    this.usage = props.usage || 35044;\n    this.debugData = null;\n    this.setAccessor(Object.assign({}, props, props.accessor));\n\n    if (props.data) {\n      this._setData(props.data, props.offset, props.byteLength);\n    } else {\n      this._setByteLength(props.byteLength || 0);\n    }\n\n    return this;\n  }\n\n  setProps(props) {\n    props = checkProps('Buffer', props, PROP_CHECKS_SET_PROPS);\n\n    if ('accessor' in props) {\n      this.setAccessor(props.accessor);\n    }\n\n    return this;\n  }\n\n  setAccessor(accessor) {\n    accessor = Object.assign({}, accessor);\n    delete accessor.buffer;\n    this.accessor = new Accessor(accessor);\n    return this;\n  }\n\n  reallocate(byteLength) {\n    if (byteLength > this.byteLength) {\n      this._setByteLength(byteLength);\n\n      return true;\n    }\n\n    this.bytesUsed = byteLength;\n    return false;\n  }\n\n  setData(props) {\n    return this.initialize(props);\n  }\n\n  subData(props) {\n    if (ArrayBuffer.isView(props)) {\n      props = {\n        data: props\n      };\n    }\n\n    const {\n      data,\n      offset = 0,\n      srcOffset = 0\n    } = props;\n    const byteLength = props.byteLength || props.length;\n    assert(data);\n    const target = this.gl.webgl2 ? 36663 : this.target;\n    this.gl.bindBuffer(target, this.handle);\n\n    if (srcOffset !== 0 || byteLength !== undefined) {\n      assertWebGL2Context(this.gl);\n      this.gl.bufferSubData(this.target, offset, data, srcOffset, byteLength);\n    } else {\n      this.gl.bufferSubData(target, offset, data);\n    }\n\n    this.gl.bindBuffer(target, null);\n    this.debugData = null;\n\n    this._inferType(data);\n\n    return this;\n  }\n\n  copyData(_ref) {\n    let {\n      sourceBuffer,\n      readOffset = 0,\n      writeOffset = 0,\n      size\n    } = _ref;\n    const {\n      gl\n    } = this;\n    assertWebGL2Context(gl);\n    gl.bindBuffer(36662, sourceBuffer.handle);\n    gl.bindBuffer(36663, this.handle);\n    gl.copyBufferSubData(36662, 36663, readOffset, writeOffset, size);\n    gl.bindBuffer(36662, null);\n    gl.bindBuffer(36663, null);\n    this.debugData = null;\n    return this;\n  }\n\n  getData() {\n    let {\n      dstData = null,\n      srcByteOffset = 0,\n      dstOffset = 0,\n      length = 0\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    assertWebGL2Context(this.gl);\n    const ArrayType = getTypedArrayFromGLType(this.accessor.type || 5126, {\n      clamped: false\n    });\n\n    const sourceAvailableElementCount = this._getAvailableElementCount(srcByteOffset);\n\n    const dstElementOffset = dstOffset;\n    let dstAvailableElementCount;\n    let dstElementCount;\n\n    if (dstData) {\n      dstElementCount = dstData.length;\n      dstAvailableElementCount = dstElementCount - dstElementOffset;\n    } else {\n      dstAvailableElementCount = Math.min(sourceAvailableElementCount, length || sourceAvailableElementCount);\n      dstElementCount = dstElementOffset + dstAvailableElementCount;\n    }\n\n    const copyElementCount = Math.min(sourceAvailableElementCount, dstAvailableElementCount);\n    length = length || copyElementCount;\n    assert(length <= copyElementCount);\n    dstData = dstData || new ArrayType(dstElementCount);\n    this.gl.bindBuffer(36662, this.handle);\n    this.gl.getBufferSubData(36662, srcByteOffset, dstData, dstOffset, length);\n    this.gl.bindBuffer(36662, null);\n    return dstData;\n  }\n\n  bind() {\n    let {\n      target = this.target,\n      index = this.accessor && this.accessor.index,\n      offset = 0,\n      size\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if (target === 35345 || target === 35982) {\n      if (size !== undefined) {\n        this.gl.bindBufferRange(target, index, this.handle, offset, size);\n      } else {\n        assert(offset === 0);\n        this.gl.bindBufferBase(target, index, this.handle);\n      }\n    } else {\n      this.gl.bindBuffer(target, this.handle);\n    }\n\n    return this;\n  }\n\n  unbind() {\n    let {\n      target = this.target,\n      index = this.accessor && this.accessor.index\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const isIndexedBuffer = target === 35345 || target === 35982;\n\n    if (isIndexedBuffer) {\n      this.gl.bindBufferBase(target, index, null);\n    } else {\n      this.gl.bindBuffer(target, null);\n    }\n\n    return this;\n  }\n\n  getDebugData() {\n    if (!this.debugData) {\n      this.debugData = this.getData({\n        length: Math.min(DEBUG_DATA_LENGTH, this.byteLength)\n      });\n      return {\n        data: this.debugData,\n        changed: true\n      };\n    }\n\n    return {\n      data: this.debugData,\n      changed: false\n    };\n  }\n\n  invalidateDebugData() {\n    this.debugData = null;\n  }\n\n  _setData(data) {\n    let offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    let byteLength = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : data.byteLength + offset;\n    assert(ArrayBuffer.isView(data));\n\n    this._trackDeallocatedMemory();\n\n    const target = this._getTarget();\n\n    this.gl.bindBuffer(target, this.handle);\n    this.gl.bufferData(target, byteLength, this.usage);\n    this.gl.bufferSubData(target, offset, data);\n    this.gl.bindBuffer(target, null);\n    this.debugData = data.slice(0, DEBUG_DATA_LENGTH);\n    this.bytesUsed = byteLength;\n\n    this._trackAllocatedMemory(byteLength);\n\n    const type = getGLTypeFromTypedArray(data);\n    assert(type);\n    this.setAccessor(new Accessor(this.accessor, {\n      type\n    }));\n    return this;\n  }\n\n  _setByteLength(byteLength) {\n    let usage = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.usage;\n    assert(byteLength >= 0);\n\n    this._trackDeallocatedMemory();\n\n    let data = byteLength;\n\n    if (byteLength === 0) {\n      data = new Float32Array(0);\n    }\n\n    const target = this._getTarget();\n\n    this.gl.bindBuffer(target, this.handle);\n    this.gl.bufferData(target, data, usage);\n    this.gl.bindBuffer(target, null);\n    this.usage = usage;\n    this.debugData = null;\n    this.bytesUsed = byteLength;\n\n    this._trackAllocatedMemory(byteLength);\n\n    return this;\n  }\n\n  _getTarget() {\n    return this.gl.webgl2 ? 36663 : this.target;\n  }\n\n  _getAvailableElementCount(srcByteOffset) {\n    const ArrayType = getTypedArrayFromGLType(this.accessor.type || 5126, {\n      clamped: false\n    });\n    const sourceElementOffset = srcByteOffset / ArrayType.BYTES_PER_ELEMENT;\n    return this.getElementCount() - sourceElementOffset;\n  }\n\n  _inferType(data) {\n    if (!this.accessor.type) {\n      this.setAccessor(new Accessor(this.accessor, {\n        type: getGLTypeFromTypedArray(data)\n      }));\n    }\n  }\n\n  _createHandle() {\n    return this.gl.createBuffer();\n  }\n\n  _deleteHandle() {\n    this.gl.deleteBuffer(this.handle);\n\n    this._trackDeallocatedMemory();\n  }\n\n  _getParameter(pname) {\n    this.gl.bindBuffer(this.target, this.handle);\n    const value = this.gl.getBufferParameter(this.target, pname);\n    this.gl.bindBuffer(this.target, null);\n    return value;\n  }\n\n  get type() {\n    log.deprecated('Buffer.type', 'Buffer.accessor.type')();\n    return this.accessor.type;\n  }\n\n  get bytes() {\n    log.deprecated('Buffer.bytes', 'Buffer.byteLength')();\n    return this.byteLength;\n  }\n\n  setByteLength(byteLength) {\n    log.deprecated('setByteLength', 'reallocate')();\n    return this.reallocate(byteLength);\n  }\n\n  updateAccessor(opts) {\n    log.deprecated('updateAccessor(...)', 'setAccessor(new Accessor(buffer.accessor, ...)')();\n    this.accessor = new Accessor(this.accessor, opts);\n    return this;\n  }\n\n}\n//# sourceMappingURL=buffer.js.map","import { isWebGL2 } from '@luma.gl/gltools';\nexport const TEXTURE_FORMATS = {\n  [6407]: {\n    dataFormat: 6407,\n    types: [5121, 33635]\n  },\n  [6408]: {\n    dataFormat: 6408,\n    types: [5121, 32819, 32820]\n  },\n  [6406]: {\n    dataFormat: 6406,\n    types: [5121]\n  },\n  [6409]: {\n    dataFormat: 6409,\n    types: [5121]\n  },\n  [6410]: {\n    dataFormat: 6410,\n    types: [5121]\n  },\n  [33326]: {\n    dataFormat: 6403,\n    types: [5126],\n    gl2: true\n  },\n  [33328]: {\n    dataFormat: 33319,\n    types: [5126],\n    gl2: true\n  },\n  [34837]: {\n    dataFormat: 6407,\n    types: [5126],\n    gl2: true\n  },\n  [34836]: {\n    dataFormat: 6408,\n    types: [5126],\n    gl2: true\n  }\n};\nexport const DATA_FORMAT_CHANNELS = {\n  [6403]: 1,\n  [36244]: 1,\n  [33319]: 2,\n  [33320]: 2,\n  [6407]: 3,\n  [36248]: 3,\n  [6408]: 4,\n  [36249]: 4,\n  [6402]: 1,\n  [34041]: 1,\n  [6406]: 1,\n  [6409]: 1,\n  [6410]: 2\n};\nexport const TYPE_SIZES = {\n  [5126]: 4,\n  [5125]: 4,\n  [5124]: 4,\n  [5123]: 2,\n  [5122]: 2,\n  [5131]: 2,\n  [5120]: 1,\n  [5121]: 1\n};\nexport function isFormatSupported(gl, format) {\n  const info = TEXTURE_FORMATS[format];\n\n  if (!info) {\n    return false;\n  }\n\n  if (info.gl1 === undefined && info.gl2 === undefined) {\n    return true;\n  }\n\n  const value = isWebGL2(gl) ? info.gl2 || info.gl1 : info.gl1;\n  return typeof value === 'string' ? gl.getExtension(value) : value;\n}\nexport function isLinearFilteringSupported(gl, format) {\n  const info = TEXTURE_FORMATS[format];\n\n  switch (info && info.types[0]) {\n    case 5126:\n      return gl.getExtension('OES_texture_float_linear');\n\n    case 5131:\n      return gl.getExtension('OES_texture_half_float_linear');\n\n    default:\n      return true;\n  }\n}\n//# sourceMappingURL=texture-formats.js.map","import { isWebGL2, assertWebGL2Context, withParameters, log } from '@luma.gl/gltools';\nimport Resource from './resource';\nimport Buffer from './buffer';\nimport { TEXTURE_FORMATS, DATA_FORMAT_CHANNELS, TYPE_SIZES, isFormatSupported, isLinearFilteringSupported } from './texture-formats';\nimport { assert } from '../utils/assert';\nimport { uid, isPowerOfTwo } from '../utils/utils';\nconst NPOT_MIN_FILTERS = [9729, 9728];\n\nconst WebGLBuffer = globalThis.WebGLBuffer || function WebGLBuffer() {};\n\nexport default class Texture extends Resource {\n  get [Symbol.toStringTag]() {\n    return 'Texture';\n  }\n\n  static isSupported(gl) {\n    let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const {\n      format,\n      linearFiltering\n    } = opts;\n    let supported = true;\n\n    if (format) {\n      supported = supported && isFormatSupported(gl, format);\n      supported = supported && (!linearFiltering || isLinearFilteringSupported(gl, format));\n    }\n\n    return supported;\n  }\n\n  constructor(gl, props) {\n    const {\n      id = uid('texture'),\n      handle,\n      target\n    } = props;\n    super(gl, {\n      id,\n      handle\n    });\n    this.target = target;\n    this.textureUnit = undefined;\n    this.loaded = false;\n    this.width = undefined;\n    this.height = undefined;\n    this.depth = undefined;\n    this.format = undefined;\n    this.type = undefined;\n    this.dataFormat = undefined;\n    this.border = undefined;\n    this.textureUnit = undefined;\n    this.mipmaps = undefined;\n  }\n\n  toString() {\n    return \"Texture(\".concat(this.id, \",\").concat(this.width, \"x\").concat(this.height, \")\");\n  }\n\n  initialize() {\n    let props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let data = props.data;\n\n    if (data instanceof Promise) {\n      data.then(resolvedImageData => this.initialize(Object.assign({}, props, {\n        pixels: resolvedImageData,\n        data: resolvedImageData\n      })));\n      return this;\n    }\n\n    const isVideo = typeof HTMLVideoElement !== 'undefined' && data instanceof HTMLVideoElement;\n\n    if (isVideo && data.readyState < HTMLVideoElement.HAVE_METADATA) {\n      this._video = null;\n      data.addEventListener('loadeddata', () => this.initialize(props));\n      return this;\n    }\n\n    const {\n      pixels = null,\n      format = 6408,\n      border = 0,\n      recreate = false,\n      parameters = {},\n      pixelStore = {},\n      textureUnit = undefined\n    } = props;\n\n    if (!data) {\n      data = pixels;\n    }\n\n    let {\n      width,\n      height,\n      dataFormat,\n      type,\n      compressed = false,\n      mipmaps = true\n    } = props;\n    const {\n      depth = 0\n    } = props;\n    ({\n      width,\n      height,\n      compressed,\n      dataFormat,\n      type\n    } = this._deduceParameters({\n      format,\n      type,\n      dataFormat,\n      compressed,\n      data,\n      width,\n      height\n    }));\n    this.width = width;\n    this.height = height;\n    this.depth = depth;\n    this.format = format;\n    this.type = type;\n    this.dataFormat = dataFormat;\n    this.border = border;\n    this.textureUnit = textureUnit;\n\n    if (Number.isFinite(this.textureUnit)) {\n      this.gl.activeTexture(33984 + this.textureUnit);\n      this.gl.bindTexture(this.target, this.handle);\n    }\n\n    if (mipmaps && this._isNPOT()) {\n      log.warn(\"texture: \".concat(this, \" is Non-Power-Of-Two, disabling mipmaping\"))();\n      mipmaps = false;\n\n      this._updateForNPOT(parameters);\n    }\n\n    this.mipmaps = mipmaps;\n    this.setImageData({\n      data,\n      width,\n      height,\n      depth,\n      format,\n      type,\n      dataFormat,\n      border,\n      mipmaps,\n      parameters: pixelStore,\n      compressed\n    });\n\n    if (mipmaps) {\n      this.generateMipmap();\n    }\n\n    this.setParameters(parameters);\n\n    if (recreate) {\n      this.data = data;\n    }\n\n    if (isVideo) {\n      this._video = {\n        video: data,\n        parameters,\n        lastTime: data.readyState >= HTMLVideoElement.HAVE_CURRENT_DATA ? data.currentTime : -1\n      };\n    }\n\n    return this;\n  }\n\n  update() {\n    if (this._video) {\n      const {\n        video,\n        parameters,\n        lastTime\n      } = this._video;\n\n      if (lastTime === video.currentTime || video.readyState < HTMLVideoElement.HAVE_CURRENT_DATA) {\n        return;\n      }\n\n      this.setSubImageData({\n        data: video,\n        parameters\n      });\n\n      if (this.mipmaps) {\n        this.generateMipmap();\n      }\n\n      this._video.lastTime = video.currentTime;\n    }\n  }\n\n  resize(_ref) {\n    let {\n      height,\n      width,\n      mipmaps = false\n    } = _ref;\n\n    if (width !== this.width || height !== this.height) {\n      return this.initialize({\n        width,\n        height,\n        format: this.format,\n        type: this.type,\n        dataFormat: this.dataFormat,\n        border: this.border,\n        mipmaps\n      });\n    }\n\n    return this;\n  }\n\n  generateMipmap() {\n    let params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if (this._isNPOT()) {\n      log.warn(\"texture: \".concat(this, \" is Non-Power-Of-Two, disabling mipmaping\"))();\n      return this;\n    }\n\n    this.mipmaps = true;\n    this.gl.bindTexture(this.target, this.handle);\n    withParameters(this.gl, params, () => {\n      this.gl.generateMipmap(this.target);\n    });\n    this.gl.bindTexture(this.target, null);\n    return this;\n  }\n\n  setImageData(options) {\n    this._trackDeallocatedMemory('Texture');\n\n    const {\n      target = this.target,\n      pixels = null,\n      level = 0,\n      format = this.format,\n      border = this.border,\n      offset = 0,\n      parameters = {}\n    } = options;\n    let {\n      data = null,\n      type = this.type,\n      width = this.width,\n      height = this.height,\n      dataFormat = this.dataFormat,\n      compressed = false\n    } = options;\n\n    if (!data) {\n      data = pixels;\n    }\n\n    ({\n      type,\n      dataFormat,\n      compressed,\n      width,\n      height\n    } = this._deduceParameters({\n      format,\n      type,\n      dataFormat,\n      compressed,\n      data,\n      width,\n      height\n    }));\n    const {\n      gl\n    } = this;\n    gl.bindTexture(this.target, this.handle);\n    let dataType = null;\n    ({\n      data,\n      dataType\n    } = this._getDataType({\n      data,\n      compressed\n    }));\n    let gl2;\n    let compressedTextureSize = 0;\n    withParameters(this.gl, parameters, () => {\n      switch (dataType) {\n        case 'null':\n          gl.texImage2D(target, level, format, width, height, border, dataFormat, type, data);\n          break;\n\n        case 'typed-array':\n          gl.texImage2D(target, level, format, width, height, border, dataFormat, type, data, offset);\n          break;\n\n        case 'buffer':\n          gl2 = assertWebGL2Context(gl);\n          gl2.bindBuffer(35052, data.handle || data);\n          gl2.texImage2D(target, level, format, width, height, border, dataFormat, type, offset);\n          gl2.bindBuffer(35052, null);\n          break;\n\n        case 'browser-object':\n          if (isWebGL2(gl)) {\n            gl.texImage2D(target, level, format, width, height, border, dataFormat, type, data);\n          } else {\n            gl.texImage2D(target, level, format, dataFormat, type, data);\n          }\n\n          break;\n\n        case 'compressed':\n          for (const [levelIndex, levelData] of data.entries()) {\n            gl.compressedTexImage2D(target, levelIndex, levelData.format, levelData.width, levelData.height, border, levelData.data);\n            compressedTextureSize += levelData.levelSize;\n          }\n\n          break;\n\n        default:\n          assert(false, 'Unknown image data type');\n      }\n    });\n\n    if (dataType === 'compressed') {\n      this._trackAllocatedMemory(compressedTextureSize, 'Texture');\n    } else if (data && data.byteLength) {\n      this._trackAllocatedMemory(data.byteLength, 'Texture');\n    } else {\n      const channels = DATA_FORMAT_CHANNELS[this.dataFormat] || 4;\n      const channelSize = TYPE_SIZES[this.type] || 1;\n\n      this._trackAllocatedMemory(this.width * this.height * channels * channelSize, 'Texture');\n    }\n\n    this.loaded = true;\n    return this;\n  }\n\n  setSubImageData(_ref2) {\n    let {\n      target = this.target,\n      pixels = null,\n      data = null,\n      x = 0,\n      y = 0,\n      width = this.width,\n      height = this.height,\n      level = 0,\n      format = this.format,\n      type = this.type,\n      dataFormat = this.dataFormat,\n      compressed = false,\n      offset = 0,\n      border = this.border,\n      parameters = {}\n    } = _ref2;\n    ({\n      type,\n      dataFormat,\n      compressed,\n      width,\n      height\n    } = this._deduceParameters({\n      format,\n      type,\n      dataFormat,\n      compressed,\n      data,\n      width,\n      height\n    }));\n    assert(this.depth === 0, 'texSubImage not supported for 3D textures');\n\n    if (!data) {\n      data = pixels;\n    }\n\n    if (data && data.data) {\n      const ndarray = data;\n      data = ndarray.data;\n      width = ndarray.shape[0];\n      height = ndarray.shape[1];\n    }\n\n    if (data instanceof Buffer) {\n      data = data.handle;\n    }\n\n    this.gl.bindTexture(this.target, this.handle);\n    withParameters(this.gl, parameters, () => {\n      if (compressed) {\n        this.gl.compressedTexSubImage2D(target, level, x, y, width, height, format, data);\n      } else if (data === null) {\n        this.gl.texSubImage2D(target, level, x, y, width, height, dataFormat, type, null);\n      } else if (ArrayBuffer.isView(data)) {\n        this.gl.texSubImage2D(target, level, x, y, width, height, dataFormat, type, data, offset);\n      } else if (data instanceof WebGLBuffer) {\n        const gl2 = assertWebGL2Context(this.gl);\n        gl2.bindBuffer(35052, data);\n        gl2.texSubImage2D(target, level, x, y, width, height, dataFormat, type, offset);\n        gl2.bindBuffer(35052, null);\n      } else if (isWebGL2(this.gl)) {\n        const gl2 = assertWebGL2Context(this.gl);\n        gl2.texSubImage2D(target, level, x, y, width, height, dataFormat, type, data);\n      } else {\n        this.gl.texSubImage2D(target, level, x, y, dataFormat, type, data);\n      }\n    });\n    this.gl.bindTexture(this.target, null);\n  }\n\n  copyFramebuffer() {\n    let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    log.error('Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})')();\n    return null;\n  }\n\n  getActiveUnit() {\n    return this.gl.getParameter(34016) - 33984;\n  }\n\n  bind() {\n    let textureUnit = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.textureUnit;\n    const {\n      gl\n    } = this;\n\n    if (textureUnit !== undefined) {\n      this.textureUnit = textureUnit;\n      gl.activeTexture(33984 + textureUnit);\n    }\n\n    gl.bindTexture(this.target, this.handle);\n    return textureUnit;\n  }\n\n  unbind() {\n    let textureUnit = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.textureUnit;\n    const {\n      gl\n    } = this;\n\n    if (textureUnit !== undefined) {\n      this.textureUnit = textureUnit;\n      gl.activeTexture(33984 + textureUnit);\n    }\n\n    gl.bindTexture(this.target, null);\n    return textureUnit;\n  }\n\n  _getDataType(_ref3) {\n    let {\n      data,\n      compressed = false\n    } = _ref3;\n\n    if (compressed) {\n      return {\n        data,\n        dataType: 'compressed'\n      };\n    }\n\n    if (data === null) {\n      return {\n        data,\n        dataType: 'null'\n      };\n    }\n\n    if (ArrayBuffer.isView(data)) {\n      return {\n        data,\n        dataType: 'typed-array'\n      };\n    }\n\n    if (data instanceof Buffer) {\n      return {\n        data: data.handle,\n        dataType: 'buffer'\n      };\n    }\n\n    if (data instanceof WebGLBuffer) {\n      return {\n        data,\n        dataType: 'buffer'\n      };\n    }\n\n    return {\n      data,\n      dataType: 'browser-object'\n    };\n  }\n\n  _deduceParameters(opts) {\n    const {\n      format,\n      data\n    } = opts;\n    let {\n      width,\n      height,\n      dataFormat,\n      type,\n      compressed\n    } = opts;\n    const textureFormat = TEXTURE_FORMATS[format];\n    dataFormat = dataFormat || textureFormat && textureFormat.dataFormat;\n    type = type || textureFormat && textureFormat.types[0];\n    compressed = compressed || textureFormat && textureFormat.compressed;\n    ({\n      width,\n      height\n    } = this._deduceImageSize(data, width, height));\n    return {\n      dataFormat,\n      type,\n      compressed,\n      width,\n      height,\n      format,\n      data\n    };\n  }\n\n  _deduceImageSize(data, width, height) {\n    let size;\n\n    if (typeof ImageData !== 'undefined' && data instanceof ImageData) {\n      size = {\n        width: data.width,\n        height: data.height\n      };\n    } else if (typeof HTMLImageElement !== 'undefined' && data instanceof HTMLImageElement) {\n      size = {\n        width: data.naturalWidth,\n        height: data.naturalHeight\n      };\n    } else if (typeof HTMLCanvasElement !== 'undefined' && data instanceof HTMLCanvasElement) {\n      size = {\n        width: data.width,\n        height: data.height\n      };\n    } else if (typeof ImageBitmap !== 'undefined' && data instanceof ImageBitmap) {\n      size = {\n        width: data.width,\n        height: data.height\n      };\n    } else if (typeof HTMLVideoElement !== 'undefined' && data instanceof HTMLVideoElement) {\n      size = {\n        width: data.videoWidth,\n        height: data.videoHeight\n      };\n    } else if (!data) {\n      size = {\n        width: width >= 0 ? width : 1,\n        height: height >= 0 ? height : 1\n      };\n    } else {\n      size = {\n        width,\n        height\n      };\n    }\n\n    assert(size, 'Could not deduced texture size');\n    assert(width === undefined || size.width === width, 'Deduced texture width does not match supplied width');\n    assert(height === undefined || size.height === height, 'Deduced texture height does not match supplied height');\n    return size;\n  }\n\n  _createHandle() {\n    return this.gl.createTexture();\n  }\n\n  _deleteHandle() {\n    this.gl.deleteTexture(this.handle);\n\n    this._trackDeallocatedMemory('Texture');\n  }\n\n  _getParameter(pname) {\n    switch (pname) {\n      case 4096:\n        return this.width;\n\n      case 4097:\n        return this.height;\n\n      default:\n        this.gl.bindTexture(this.target, this.handle);\n        const value = this.gl.getTexParameter(this.target, pname);\n        this.gl.bindTexture(this.target, null);\n        return value;\n    }\n  }\n\n  _setParameter(pname, param) {\n    this.gl.bindTexture(this.target, this.handle);\n    param = this._getNPOTParam(pname, param);\n\n    switch (pname) {\n      case 33082:\n      case 33083:\n        this.gl.texParameterf(this.handle, pname, param);\n        break;\n\n      case 4096:\n      case 4097:\n        assert(false);\n        break;\n\n      default:\n        this.gl.texParameteri(this.target, pname, param);\n        break;\n    }\n\n    this.gl.bindTexture(this.target, null);\n    return this;\n  }\n\n  _isNPOT() {\n    if (isWebGL2(this.gl)) {\n      return false;\n    }\n\n    if (!this.width || !this.height) {\n      return false;\n    }\n\n    return !isPowerOfTwo(this.width) || !isPowerOfTwo(this.height);\n  }\n\n  _updateForNPOT(parameters) {\n    if (parameters[this.gl.TEXTURE_MIN_FILTER] === undefined) {\n      parameters[this.gl.TEXTURE_MIN_FILTER] = this.gl.LINEAR;\n    }\n\n    if (parameters[this.gl.TEXTURE_WRAP_S] === undefined) {\n      parameters[this.gl.TEXTURE_WRAP_S] = this.gl.CLAMP_TO_EDGE;\n    }\n\n    if (parameters[this.gl.TEXTURE_WRAP_T] === undefined) {\n      parameters[this.gl.TEXTURE_WRAP_T] = this.gl.CLAMP_TO_EDGE;\n    }\n  }\n\n  _getNPOTParam(pname, param) {\n    if (this._isNPOT()) {\n      switch (pname) {\n        case 10241:\n          if (NPOT_MIN_FILTERS.indexOf(param) === -1) {\n            param = 9729;\n          }\n\n          break;\n\n        case 10242:\n        case 10243:\n          if (param !== 33071) {\n            param = 33071;\n          }\n\n          break;\n\n        default:\n          break;\n      }\n    }\n\n    return param;\n  }\n\n}\n//# sourceMappingURL=texture.js.map","import { assert } from '../utils/assert';\nlet pathPrefix = '';\nexport function setPathPrefix(prefix) {\n  pathPrefix = prefix;\n}\nexport function loadFile(url) {\n  let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  assert(typeof url === 'string');\n  url = pathPrefix + url;\n  const dataType = options.dataType || 'text';\n  return fetch(url, options).then(res => res[dataType]());\n}\nexport function loadImage(url, opts) {\n  assert(typeof url === 'string');\n  url = pathPrefix + url;\n  return new Promise((resolve, reject) => {\n    try {\n      const image = new Image();\n\n      image.onload = () => resolve(image);\n\n      image.onerror = () => reject(new Error(\"Could not load image \".concat(url, \".\")));\n\n      image.crossOrigin = opts && opts.crossOrigin || 'anonymous';\n      image.src = url;\n    } catch (error) {\n      reject(error);\n    }\n  });\n}\n//# sourceMappingURL=load-file.js.map","import { assertWebGLContext } from '@luma.gl/gltools';\nimport Texture from './texture';\nimport { loadImage } from '../utils/load-file';\nexport default class Texture2D extends Texture {\n  get [Symbol.toStringTag]() {\n    return 'Texture2D';\n  }\n\n  static isSupported(gl, opts) {\n    return Texture.isSupported(gl, opts);\n  }\n\n  constructor(gl) {\n    let props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    assertWebGLContext(gl);\n\n    if (props instanceof Promise || typeof props === 'string') {\n      props = {\n        data: props\n      };\n    }\n\n    if (typeof props.data === 'string') {\n      props = Object.assign({}, props, {\n        data: loadImage(props.data)\n      });\n    }\n\n    super(gl, Object.assign({}, props, {\n      target: 3553\n    }));\n    this.initialize(props);\n    Object.seal(this);\n  }\n\n}\n//# sourceMappingURL=texture-2d.js.map","import { log, assertWebGLContext } from '@luma.gl/gltools';\nimport Texture from './texture';\nconst FACES = [34069, 34070, 34071, 34072, 34073, 34074];\nexport default class TextureCube extends Texture {\n  get [Symbol.toStringTag]() {\n    return 'TextureCube';\n  }\n\n  constructor(gl) {\n    let props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    assertWebGLContext(gl);\n    super(gl, Object.assign({}, props, {\n      target: 34067\n    }));\n    this.initialize(props);\n    Object.seal(this);\n  }\n\n  initialize() {\n    let props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      mipmaps = true,\n      parameters = {}\n    } = props;\n    this.opts = props;\n    this.setCubeMapImageData(props).then(() => {\n      this.loaded = true;\n\n      if (mipmaps) {\n        this.generateMipmap(props);\n      }\n\n      this.setParameters(parameters);\n    });\n    return this;\n  }\n\n  subImage(_ref) {\n    let {\n      face,\n      data,\n      x = 0,\n      y = 0,\n      mipmapLevel = 0\n    } = _ref;\n    return this._subImage({\n      target: face,\n      data,\n      x,\n      y,\n      mipmapLevel\n    });\n  }\n\n  async setCubeMapImageData(_ref2) {\n    let {\n      width,\n      height,\n      pixels,\n      data,\n      border = 0,\n      format = 6408,\n      type = 5121\n    } = _ref2;\n    const {\n      gl\n    } = this;\n    const imageDataMap = pixels || data;\n    const resolvedFaces = await Promise.all(FACES.map(face => {\n      const facePixels = imageDataMap[face];\n      return Promise.all(Array.isArray(facePixels) ? facePixels : [facePixels]);\n    }));\n    this.bind();\n    FACES.forEach((face, index) => {\n      if (resolvedFaces[index].length > 1 && this.opts.mipmaps !== false) {\n        log.warn(\"\".concat(this.id, \" has mipmap and multiple LODs.\"))();\n      }\n\n      resolvedFaces[index].forEach((image, lodLevel) => {\n        if (width && height) {\n          gl.texImage2D(face, lodLevel, format, width, height, border, format, type, image);\n        } else {\n          gl.texImage2D(face, lodLevel, format, format, type, image);\n        }\n      });\n    });\n    this.unbind();\n  }\n\n  setImageDataForFace(options) {\n    const {\n      face,\n      width,\n      height,\n      pixels,\n      data,\n      border = 0,\n      format = 6408,\n      type = 5121\n    } = options;\n    const {\n      gl\n    } = this;\n    const imageData = pixels || data;\n    this.bind();\n\n    if (imageData instanceof Promise) {\n      imageData.then(resolvedImageData => this.setImageDataForFace(Object.assign({}, options, {\n        face,\n        data: resolvedImageData,\n        pixels: resolvedImageData\n      })));\n    } else if (this.width || this.height) {\n      gl.texImage2D(face, 0, format, width, height, border, format, type, imageData);\n    } else {\n      gl.texImage2D(face, 0, format, format, type, imageData);\n    }\n\n    return this;\n  }\n\n}\nTextureCube.FACES = FACES;\n//# sourceMappingURL=texture-cube.js.map","import { isWebGL2, assertWebGL2Context, withParameters } from '@luma.gl/gltools';\nimport Texture from './texture';\nimport { DATA_FORMAT_CHANNELS, TYPE_SIZES } from './texture-formats';\nimport Buffer from './buffer';\nexport default class Texture3D extends Texture {\n  get [Symbol.toStringTag]() {\n    return 'Texture3D';\n  }\n\n  static isSupported(gl) {\n    return isWebGL2(gl);\n  }\n\n  constructor(gl) {\n    let props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    assertWebGL2Context(gl);\n    props = Object.assign({\n      depth: 1\n    }, props, {\n      target: 32879,\n      unpackFlipY: false\n    });\n    super(gl, props);\n    this.initialize(props);\n    Object.seal(this);\n  }\n\n  setImageData(_ref) {\n    let {\n      level = 0,\n      dataFormat = 6408,\n      width,\n      height,\n      depth = 1,\n      border = 0,\n      format,\n      type = 5121,\n      offset = 0,\n      data,\n      parameters = {}\n    } = _ref;\n\n    this._trackDeallocatedMemory('Texture');\n\n    this.gl.bindTexture(this.target, this.handle);\n    withParameters(this.gl, parameters, () => {\n      if (ArrayBuffer.isView(data)) {\n        this.gl.texImage3D(this.target, level, dataFormat, width, height, depth, border, format, type, data);\n      }\n\n      if (data instanceof Buffer) {\n        this.gl.bindBuffer(35052, data.handle);\n        this.gl.texImage3D(this.target, level, dataFormat, width, height, depth, border, format, type, offset);\n      }\n    });\n\n    if (data && data.byteLength) {\n      this._trackAllocatedMemory(data.byteLength, 'Texture');\n    } else {\n      const channels = DATA_FORMAT_CHANNELS[this.dataFormat] || 4;\n      const channelSize = TYPE_SIZES[this.type] || 1;\n\n      this._trackAllocatedMemory(this.width * this.height * this.depth * channels * channelSize, 'Texture');\n    }\n\n    this.loaded = true;\n    return this;\n  }\n\n}\n//# sourceMappingURL=texture-3d.js.map","const EXT_FLOAT_WEBGL2 = 'EXT_color_buffer_float';\nexport default {\n  [33189]: {\n    bpp: 2\n  },\n  [33190]: {\n    gl2: true,\n    bpp: 3\n  },\n  [36012]: {\n    gl2: true,\n    bpp: 4\n  },\n  [36168]: {\n    bpp: 1\n  },\n  [34041]: {\n    bpp: 4\n  },\n  [35056]: {\n    gl2: true,\n    bpp: 4\n  },\n  [36013]: {\n    gl2: true,\n    bpp: 5\n  },\n  [32854]: {\n    bpp: 2\n  },\n  [36194]: {\n    bpp: 2\n  },\n  [32855]: {\n    bpp: 2\n  },\n  [33321]: {\n    gl2: true,\n    bpp: 1\n  },\n  [33330]: {\n    gl2: true,\n    bpp: 1\n  },\n  [33329]: {\n    gl2: true,\n    bpp: 1\n  },\n  [33332]: {\n    gl2: true,\n    bpp: 2\n  },\n  [33331]: {\n    gl2: true,\n    bpp: 2\n  },\n  [33334]: {\n    gl2: true,\n    bpp: 4\n  },\n  [33333]: {\n    gl2: true,\n    bpp: 4\n  },\n  [33323]: {\n    gl2: true,\n    bpp: 2\n  },\n  [33336]: {\n    gl2: true,\n    bpp: 2\n  },\n  [33335]: {\n    gl2: true,\n    bpp: 2\n  },\n  [33338]: {\n    gl2: true,\n    bpp: 4\n  },\n  [33337]: {\n    gl2: true,\n    bpp: 4\n  },\n  [33340]: {\n    gl2: true,\n    bpp: 8\n  },\n  [33339]: {\n    gl2: true,\n    bpp: 8\n  },\n  [32849]: {\n    gl2: true,\n    bpp: 3\n  },\n  [32856]: {\n    gl2: true,\n    bpp: 4\n  },\n  [32857]: {\n    gl2: true,\n    bpp: 4\n  },\n  [36220]: {\n    gl2: true,\n    bpp: 4\n  },\n  [36238]: {\n    gl2: true,\n    bpp: 4\n  },\n  [36975]: {\n    gl2: true,\n    bpp: 4\n  },\n  [36214]: {\n    gl2: true,\n    bpp: 8\n  },\n  [36232]: {\n    gl2: true,\n    bpp: 8\n  },\n  [36226]: {\n    gl2: true,\n    bpp: 16\n  },\n  [36208]: {\n    gl2: true,\n    bpp: 16\n  },\n  [33325]: {\n    gl2: EXT_FLOAT_WEBGL2,\n    bpp: 2\n  },\n  [33327]: {\n    gl2: EXT_FLOAT_WEBGL2,\n    bpp: 4\n  },\n  [34842]: {\n    gl2: EXT_FLOAT_WEBGL2,\n    bpp: 8\n  },\n  [33326]: {\n    gl2: EXT_FLOAT_WEBGL2,\n    bpp: 4\n  },\n  [33328]: {\n    gl2: EXT_FLOAT_WEBGL2,\n    bpp: 8\n  },\n  [34836]: {\n    gl2: EXT_FLOAT_WEBGL2,\n    bpp: 16\n  },\n  [35898]: {\n    gl2: EXT_FLOAT_WEBGL2,\n    bpp: 4\n  }\n};\n//# sourceMappingURL=renderbuffer-formats.js.map","import Resource from './resource';\nimport RENDERBUFFER_FORMATS from './renderbuffer-formats';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { assert } from '../utils/assert';\n\nfunction isFormatSupported(gl, format, formats) {\n  const info = formats[format];\n\n  if (!info) {\n    return false;\n  }\n\n  const value = isWebGL2(gl) ? info.gl2 || info.gl1 : info.gl1;\n\n  if (typeof value === 'string') {\n    return gl.getExtension(value);\n  }\n\n  return value;\n}\n\nexport default class Renderbuffer extends Resource {\n  get [Symbol.toStringTag]() {\n    return 'Renderbuffer';\n  }\n\n  static isSupported(gl) {\n    let {\n      format\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      format: null\n    };\n    return !format || isFormatSupported(gl, format, RENDERBUFFER_FORMATS);\n  }\n\n  static getSamplesForFormat(gl, _ref) {\n    let {\n      format\n    } = _ref;\n    return gl.getInternalformatParameter(36161, format, 32937);\n  }\n\n  constructor(gl) {\n    let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    super(gl, opts);\n    this.initialize(opts);\n    Object.seal(this);\n  }\n\n  initialize(_ref2) {\n    let {\n      format,\n      width = 1,\n      height = 1,\n      samples = 0\n    } = _ref2;\n    assert(format, 'Needs format');\n\n    this._trackDeallocatedMemory();\n\n    this.gl.bindRenderbuffer(36161, this.handle);\n\n    if (samples !== 0 && isWebGL2(this.gl)) {\n      this.gl.renderbufferStorageMultisample(36161, samples, format, width, height);\n    } else {\n      this.gl.renderbufferStorage(36161, format, width, height);\n    }\n\n    this.format = format;\n    this.width = width;\n    this.height = height;\n    this.samples = samples;\n\n    this._trackAllocatedMemory(this.width * this.height * (this.samples || 1) * RENDERBUFFER_FORMATS[this.format].bpp);\n\n    return this;\n  }\n\n  resize(_ref3) {\n    let {\n      width,\n      height\n    } = _ref3;\n\n    if (width !== this.width || height !== this.height) {\n      return this.initialize({\n        width,\n        height,\n        format: this.format,\n        samples: this.samples\n      });\n    }\n\n    return this;\n  }\n\n  _createHandle() {\n    return this.gl.createRenderbuffer();\n  }\n\n  _deleteHandle() {\n    this.gl.deleteRenderbuffer(this.handle);\n\n    this._trackDeallocatedMemory();\n  }\n\n  _bindHandle(handle) {\n    this.gl.bindRenderbuffer(36161, handle);\n  }\n\n  _syncHandle(handle) {\n    this.format = this.getParameter(36164);\n    this.width = this.getParameter(36162);\n    this.height = this.getParameter(36163);\n    this.samples = this.getParameter(36011);\n  }\n\n  _getParameter(pname) {\n    this.gl.bindRenderbuffer(36161, this.handle);\n    const value = this.gl.getRenderbufferParameter(36161, pname);\n    return value;\n  }\n\n}\n//# sourceMappingURL=renderbuffer.js.map","import { assertWebGL2Context, withParameters } from '@luma.gl/gltools';\nimport { assert } from '../utils/assert';\nconst GL_DEPTH_BUFFER_BIT = 0x00000100;\nconst GL_STENCIL_BUFFER_BIT = 0x00000400;\nconst GL_COLOR_BUFFER_BIT = 0x00004000;\nconst GL_COLOR = 0x1800;\nconst GL_DEPTH = 0x1801;\nconst GL_STENCIL = 0x1802;\nconst GL_DEPTH_STENCIL = 0x84f9;\nconst ERR_ARGUMENTS = 'clear: bad arguments';\nexport function clear(gl) {\n  let {\n    framebuffer = null,\n    color = null,\n    depth = null,\n    stencil = null\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const parameters = {};\n\n  if (framebuffer) {\n    parameters.framebuffer = framebuffer;\n  }\n\n  let clearFlags = 0;\n\n  if (color) {\n    clearFlags |= GL_COLOR_BUFFER_BIT;\n\n    if (color !== true) {\n      parameters.clearColor = color;\n    }\n  }\n\n  if (depth) {\n    clearFlags |= GL_DEPTH_BUFFER_BIT;\n\n    if (depth !== true) {\n      parameters.clearDepth = depth;\n    }\n  }\n\n  if (stencil) {\n    clearFlags |= GL_STENCIL_BUFFER_BIT;\n\n    if (depth !== true) {\n      parameters.clearStencil = depth;\n    }\n  }\n\n  assert(clearFlags !== 0, ERR_ARGUMENTS);\n  withParameters(gl, parameters, () => {\n    gl.clear(clearFlags);\n  });\n}\nexport function clearBuffer(gl) {\n  let {\n    framebuffer = null,\n    buffer = GL_COLOR,\n    drawBuffer = 0,\n    value = [0, 0, 0, 0]\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  assertWebGL2Context(gl);\n  withParameters(gl, {\n    framebuffer\n  }, () => {\n    switch (buffer) {\n      case GL_COLOR:\n        switch (value.constructor) {\n          case Int32Array:\n            gl.clearBufferiv(buffer, drawBuffer, value);\n            break;\n\n          case Uint32Array:\n            gl.clearBufferuiv(buffer, drawBuffer, value);\n            break;\n\n          case Float32Array:\n          default:\n            gl.clearBufferfv(buffer, drawBuffer, value);\n        }\n\n        break;\n\n      case GL_DEPTH:\n        gl.clearBufferfv(GL_DEPTH, 0, [value]);\n        break;\n\n      case GL_STENCIL:\n        gl.clearBufferiv(GL_STENCIL, 0, [value]);\n        break;\n\n      case GL_DEPTH_STENCIL:\n        const [depth, stencil] = value;\n        gl.clearBufferfi(GL_DEPTH_STENCIL, 0, depth, stencil);\n        break;\n\n      default:\n        assert(false, ERR_ARGUMENTS);\n    }\n  });\n}\n//# sourceMappingURL=clear.js.map","import { assert } from '../utils/assert';\nexport function glFormatToComponents(format) {\n  switch (format) {\n    case 6406:\n    case 33326:\n    case 6403:\n      return 1;\n\n    case 33328:\n    case 33319:\n      return 2;\n\n    case 6407:\n    case 34837:\n      return 3;\n\n    case 6408:\n    case 34836:\n      return 4;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\nexport function glTypeToBytes(type) {\n  switch (type) {\n    case 5121:\n      return 1;\n\n    case 33635:\n    case 32819:\n    case 32820:\n      return 2;\n\n    case 5126:\n      return 4;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\n//# sourceMappingURL=format-utils.js.map","import Buffer from './buffer';\nimport Framebuffer from './framebuffer';\nimport Texture from './texture';\nimport { assertWebGL2Context, withParameters, log } from '@luma.gl/gltools';\nimport { flipRows, scalePixels } from '../webgl-utils/typed-array-utils';\nimport { getTypedArrayFromGLType, getGLTypeFromTypedArray } from '../webgl-utils/typed-array-utils';\nimport { glFormatToComponents, glTypeToBytes } from '../webgl-utils/format-utils';\nimport { toFramebuffer } from '../webgl-utils/texture-utils';\nimport { assert } from '../utils/assert';\nexport function readPixelsToArray(source) {\n  let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const {\n    sourceX = 0,\n    sourceY = 0,\n    sourceFormat = 6408\n  } = options;\n  let {\n    sourceAttachment = 36064,\n    target = null,\n    sourceWidth,\n    sourceHeight,\n    sourceType\n  } = options;\n  const {\n    framebuffer,\n    deleteFramebuffer\n  } = getFramebuffer(source);\n  assert(framebuffer);\n  const {\n    gl,\n    handle,\n    attachments\n  } = framebuffer;\n  sourceWidth = sourceWidth || framebuffer.width;\n  sourceHeight = sourceHeight || framebuffer.height;\n\n  if (sourceAttachment === 36064 && handle === null) {\n    sourceAttachment = 1028;\n  }\n\n  assert(attachments[sourceAttachment]);\n  sourceType = sourceType || attachments[sourceAttachment].type;\n  target = getPixelArray(target, sourceType, sourceFormat, sourceWidth, sourceHeight);\n  sourceType = sourceType || getGLTypeFromTypedArray(target);\n  const prevHandle = gl.bindFramebuffer(36160, handle);\n  gl.readPixels(sourceX, sourceY, sourceWidth, sourceHeight, sourceFormat, sourceType, target);\n  gl.bindFramebuffer(36160, prevHandle || null);\n\n  if (deleteFramebuffer) {\n    framebuffer.delete();\n  }\n\n  return target;\n}\nexport function readPixelsToBuffer(source, _ref) {\n  let {\n    sourceX = 0,\n    sourceY = 0,\n    sourceFormat = 6408,\n    target = null,\n    targetByteOffset = 0,\n    sourceWidth,\n    sourceHeight,\n    sourceType\n  } = _ref;\n  const {\n    framebuffer,\n    deleteFramebuffer\n  } = getFramebuffer(source);\n  assert(framebuffer);\n  sourceWidth = sourceWidth || framebuffer.width;\n  sourceHeight = sourceHeight || framebuffer.height;\n  const gl2 = assertWebGL2Context(framebuffer.gl);\n  sourceType = sourceType || (target ? target.type : 5121);\n\n  if (!target) {\n    const components = glFormatToComponents(sourceFormat);\n    const byteCount = glTypeToBytes(sourceType);\n    const byteLength = targetByteOffset + sourceWidth * sourceHeight * components * byteCount;\n    target = new Buffer(gl2, {\n      byteLength,\n      accessor: {\n        type: sourceType,\n        size: components\n      }\n    });\n  }\n\n  target.bind({\n    target: 35051\n  });\n  withParameters(gl2, {\n    framebuffer\n  }, () => {\n    gl2.readPixels(sourceX, sourceY, sourceWidth, sourceHeight, sourceFormat, sourceType, targetByteOffset);\n  });\n  target.unbind({\n    target: 35051\n  });\n\n  if (deleteFramebuffer) {\n    framebuffer.delete();\n  }\n\n  return target;\n}\nexport function copyToDataUrl(source) {\n  let {\n    sourceAttachment = 36064,\n    targetMaxHeight = Number.MAX_SAFE_INTEGER\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let data = readPixelsToArray(source, {\n    sourceAttachment\n  });\n  let {\n    width,\n    height\n  } = source;\n\n  while (height > targetMaxHeight) {\n    ({\n      data,\n      width,\n      height\n    } = scalePixels({\n      data,\n      width,\n      height\n    }));\n  }\n\n  flipRows({\n    data,\n    width,\n    height\n  });\n  const canvas = document.createElement('canvas');\n  canvas.width = width;\n  canvas.height = height;\n  const context = canvas.getContext('2d');\n  const imageData = context.createImageData(width, height);\n  imageData.data.set(data);\n  context.putImageData(imageData, 0, 0);\n  return canvas.toDataURL();\n}\nexport function copyToImage(source) {\n  let {\n    sourceAttachment = 36064,\n    targetImage = null\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const dataUrl = copyToDataUrl(source, {\n    sourceAttachment\n  });\n  targetImage = targetImage || new Image();\n  targetImage.src = dataUrl;\n  return targetImage;\n}\nexport function copyToTexture(source, target) {\n  let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  const {\n    sourceX = 0,\n    sourceY = 0,\n    targetMipmaplevel = 0,\n    targetInternalFormat = 6408\n  } = options;\n  let {\n    targetX,\n    targetY,\n    targetZ,\n    width,\n    height\n  } = options;\n  const {\n    framebuffer,\n    deleteFramebuffer\n  } = getFramebuffer(source);\n  assert(framebuffer);\n  const {\n    gl,\n    handle\n  } = framebuffer;\n  const isSubCopy = typeof targetX !== 'undefined' || typeof targetY !== 'undefined' || typeof targetZ !== 'undefined';\n  targetX = targetX || 0;\n  targetY = targetY || 0;\n  targetZ = targetZ || 0;\n  const prevHandle = gl.bindFramebuffer(36160, handle);\n  assert(target);\n  let texture = null;\n\n  if (target instanceof Texture) {\n    texture = target;\n    width = Number.isFinite(width) ? width : texture.width;\n    height = Number.isFinite(height) ? height : texture.height;\n    texture.bind(0);\n    target = texture.target;\n  }\n\n  if (!isSubCopy) {\n    gl.copyTexImage2D(target, targetMipmaplevel, targetInternalFormat, sourceX, sourceY, width, height, 0);\n  } else {\n    switch (target) {\n      case 3553:\n      case 34067:\n        gl.copyTexSubImage2D(target, targetMipmaplevel, targetX, targetY, sourceX, sourceY, width, height);\n        break;\n\n      case 35866:\n      case 32879:\n        const gl2 = assertWebGL2Context(gl);\n        gl2.copyTexSubImage3D(target, targetMipmaplevel, targetX, targetY, targetZ, sourceX, sourceY, width, height);\n        break;\n\n      default:\n    }\n  }\n\n  if (texture) {\n    texture.unbind();\n  }\n\n  gl.bindFramebuffer(36160, prevHandle || null);\n\n  if (deleteFramebuffer) {\n    framebuffer.delete();\n  }\n\n  return texture;\n}\nexport function blit(source, target) {\n  let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  const {\n    sourceX0 = 0,\n    sourceY0 = 0,\n    targetX0 = 0,\n    targetY0 = 0,\n    color = true,\n    depth = false,\n    stencil = false,\n    filter = 9728\n  } = options;\n  let {\n    sourceX1,\n    sourceY1,\n    targetX1,\n    targetY1,\n    sourceAttachment = 36064,\n    mask = 0\n  } = options;\n  const {\n    framebuffer: srcFramebuffer,\n    deleteFramebuffer: deleteSrcFramebuffer\n  } = getFramebuffer(source);\n  const {\n    framebuffer: dstFramebuffer,\n    deleteFramebuffer: deleteDstFramebuffer\n  } = getFramebuffer(target);\n  assert(srcFramebuffer);\n  assert(dstFramebuffer);\n  const {\n    gl,\n    handle,\n    width,\n    height,\n    readBuffer\n  } = dstFramebuffer;\n  const gl2 = assertWebGL2Context(gl);\n\n  if (!srcFramebuffer.handle && sourceAttachment === 36064) {\n    sourceAttachment = 1028;\n  }\n\n  if (color) {\n    mask |= 16384;\n  }\n\n  if (depth) {\n    mask |= 256;\n  }\n\n  if (stencil) {\n    mask |= 1024;\n  }\n\n  if (deleteSrcFramebuffer || deleteDstFramebuffer) {\n    if (mask & (256 | 1024)) {\n      mask = 16384;\n      log.warn('Blitting from or into a Texture object, forcing mask to GL.COLOR_BUFFER_BIT')();\n    }\n  }\n\n  assert(mask);\n  sourceX1 = sourceX1 === undefined ? srcFramebuffer.width : sourceX1;\n  sourceY1 = sourceY1 === undefined ? srcFramebuffer.height : sourceY1;\n  targetX1 = targetX1 === undefined ? width : targetX1;\n  targetY1 = targetY1 === undefined ? height : targetY1;\n  const prevDrawHandle = gl.bindFramebuffer(36009, handle);\n  const prevReadHandle = gl.bindFramebuffer(36008, srcFramebuffer.handle);\n  gl2.readBuffer(sourceAttachment);\n  gl2.blitFramebuffer(sourceX0, sourceY0, sourceX1, sourceY1, targetX0, targetY0, targetX1, targetY1, mask, filter);\n  gl2.readBuffer(readBuffer);\n  gl2.bindFramebuffer(36008, prevReadHandle || null);\n  gl2.bindFramebuffer(36009, prevDrawHandle || null);\n\n  if (deleteSrcFramebuffer) {\n    srcFramebuffer.delete();\n  }\n\n  if (deleteDstFramebuffer) {\n    dstFramebuffer.delete();\n  }\n\n  return dstFramebuffer;\n}\n\nfunction getFramebuffer(source) {\n  if (!(source instanceof Framebuffer)) {\n    return {\n      framebuffer: toFramebuffer(source),\n      deleteFramebuffer: true\n    };\n  }\n\n  return {\n    framebuffer: source,\n    deleteFramebuffer: false\n  };\n}\n\nfunction getPixelArray(pixelArray, type, format, width, height) {\n  if (pixelArray) {\n    return pixelArray;\n  }\n\n  type = type || 5121;\n  const ArrayType = getTypedArrayFromGLType(type, {\n    clamped: false\n  });\n  const components = glFormatToComponents(format);\n  return new ArrayType(width * height * components);\n}\n//# sourceMappingURL=copy-and-blit.js.map","import Framebuffer from '../classes/framebuffer';\nimport Texture2D from '../classes/texture-2d';\nexport const FEATURES = {\n  WEBGL2: 'WEBGL2',\n  VERTEX_ARRAY_OBJECT: 'VERTEX_ARRAY_OBJECT',\n  TIMER_QUERY: 'TIMER_QUERY',\n  INSTANCED_RENDERING: 'INSTANCED_RENDERING',\n  MULTIPLE_RENDER_TARGETS: 'MULTIPLE_RENDER_TARGETS',\n  ELEMENT_INDEX_UINT32: 'ELEMENT_INDEX_UINT32',\n  BLEND_EQUATION_MINMAX: 'BLEND_EQUATION_MINMAX',\n  FLOAT_BLEND: 'FLOAT_BLEND',\n  COLOR_ENCODING_SRGB: 'COLOR_ENCODING_SRGB',\n  TEXTURE_DEPTH: 'TEXTURE_DEPTH',\n  TEXTURE_FLOAT: 'TEXTURE_FLOAT',\n  TEXTURE_HALF_FLOAT: 'TEXTURE_HALF_FLOAT',\n  TEXTURE_FILTER_LINEAR_FLOAT: 'TEXTURE_FILTER_LINEAR_FLOAT',\n  TEXTURE_FILTER_LINEAR_HALF_FLOAT: 'TEXTURE_FILTER_LINEAR_HALF_FLOAT',\n  TEXTURE_FILTER_ANISOTROPIC: 'TEXTURE_FILTER_ANISOTROPIC',\n  COLOR_ATTACHMENT_RGBA32F: 'COLOR_ATTACHMENT_RGBA32F',\n  COLOR_ATTACHMENT_FLOAT: 'COLOR_ATTACHMENT_FLOAT',\n  COLOR_ATTACHMENT_HALF_FLOAT: 'COLOR_ATTACHMENT_HALF_FLOAT',\n  GLSL_FRAG_DATA: 'GLSL_FRAG_DATA',\n  GLSL_FRAG_DEPTH: 'GLSL_FRAG_DEPTH',\n  GLSL_DERIVATIVES: 'GLSL_DERIVATIVES',\n  GLSL_TEXTURE_LOD: 'GLSL_TEXTURE_LOD'\n};\n\nfunction checkFloat32ColorAttachment(gl) {\n  const testTexture = new Texture2D(gl, {\n    format: 6408,\n    type: 5126,\n    dataFormat: 6408\n  });\n  const testFb = new Framebuffer(gl, {\n    id: \"test-framebuffer\",\n    check: false,\n    attachments: {\n      [36064]: testTexture\n    }\n  });\n  const status = testFb.getStatus();\n  testTexture.delete();\n  testFb.delete();\n  return status === 36053;\n}\n\nexport default {\n  [FEATURES.WEBGL2]: [false, true],\n  [FEATURES.VERTEX_ARRAY_OBJECT]: ['OES_vertex_array_object', true],\n  [FEATURES.TIMER_QUERY]: ['EXT_disjoint_timer_query', 'EXT_disjoint_timer_query_webgl2'],\n  [FEATURES.INSTANCED_RENDERING]: ['ANGLE_instanced_arrays', true],\n  [FEATURES.MULTIPLE_RENDER_TARGETS]: ['WEBGL_draw_buffers', true],\n  [FEATURES.ELEMENT_INDEX_UINT32]: ['OES_element_index_uint', true],\n  [FEATURES.BLEND_EQUATION_MINMAX]: ['EXT_blend_minmax', true],\n  [FEATURES.FLOAT_BLEND]: ['EXT_float_blend'],\n  [FEATURES.COLOR_ENCODING_SRGB]: ['EXT_sRGB', true],\n  [FEATURES.TEXTURE_DEPTH]: ['WEBGL_depth_texture', true],\n  [FEATURES.TEXTURE_FLOAT]: ['OES_texture_float', true],\n  [FEATURES.TEXTURE_HALF_FLOAT]: ['OES_texture_half_float', true],\n  [FEATURES.TEXTURE_FILTER_LINEAR_FLOAT]: ['OES_texture_float_linear'],\n  [FEATURES.TEXTURE_FILTER_LINEAR_HALF_FLOAT]: ['OES_texture_half_float_linear'],\n  [FEATURES.TEXTURE_FILTER_ANISOTROPIC]: ['EXT_texture_filter_anisotropic'],\n  [FEATURES.COLOR_ATTACHMENT_RGBA32F]: [checkFloat32ColorAttachment, 'EXT_color_buffer_float'],\n  [FEATURES.COLOR_ATTACHMENT_FLOAT]: [false, 'EXT_color_buffer_float'],\n  [FEATURES.COLOR_ATTACHMENT_HALF_FLOAT]: ['EXT_color_buffer_half_float'],\n  [FEATURES.GLSL_FRAG_DATA]: ['WEBGL_draw_buffers', true],\n  [FEATURES.GLSL_FRAG_DEPTH]: ['EXT_frag_depth', true],\n  [FEATURES.GLSL_DERIVATIVES]: ['OES_standard_derivatives', true],\n  [FEATURES.GLSL_TEXTURE_LOD]: ['EXT_shader_texture_lod', true]\n};\n//# sourceMappingURL=webgl-features-table.js.map","import WEBGL_FEATURES from './webgl-features-table';\nimport { isWebGL2, log } from '@luma.gl/gltools';\nimport { assert } from '../utils/assert';\nconst LOG_UNSUPPORTED_FEATURE = 2;\nexport function hasFeature(gl, feature) {\n  return hasFeatures(gl, feature);\n}\nexport function hasFeatures(gl, features) {\n  features = Array.isArray(features) ? features : [features];\n  return features.every(feature => {\n    return isFeatureSupported(gl, feature);\n  });\n}\nexport function getFeatures(gl) {\n  gl.luma = gl.luma || {};\n  gl.luma.caps = gl.luma.caps || {};\n\n  for (const cap in WEBGL_FEATURES) {\n    if (gl.luma.caps[cap] === undefined) {\n      gl.luma.caps[cap] = isFeatureSupported(gl, cap);\n    }\n  }\n\n  return gl.luma.caps;\n}\n\nfunction isFeatureSupported(gl, cap) {\n  gl.luma = gl.luma || {};\n  gl.luma.caps = gl.luma.caps || {};\n\n  if (gl.luma.caps[cap] === undefined) {\n    gl.luma.caps[cap] = queryFeature(gl, cap);\n  }\n\n  if (!gl.luma.caps[cap]) {\n    log.log(LOG_UNSUPPORTED_FEATURE, \"Feature: \".concat(cap, \" not supported\"))();\n  }\n\n  return gl.luma.caps[cap];\n}\n\nfunction queryFeature(gl, cap) {\n  const feature = WEBGL_FEATURES[cap];\n  assert(feature, cap);\n  let isSupported;\n  const featureDefinition = isWebGL2(gl) ? feature[1] || feature[0] : feature[0];\n\n  if (typeof featureDefinition === 'function') {\n    isSupported = featureDefinition(gl);\n  } else if (Array.isArray(featureDefinition)) {\n    isSupported = true;\n\n    for (const extension of featureDefinition) {\n      isSupported = isSupported && Boolean(gl.getExtension(extension));\n    }\n  } else if (typeof featureDefinition === 'string') {\n    isSupported = Boolean(gl.getExtension(featureDefinition));\n  } else if (typeof featureDefinition === 'boolean') {\n    isSupported = featureDefinition;\n  } else {\n    assert(false);\n  }\n\n  return isSupported;\n}\n//# sourceMappingURL=features.js.map","import { getWebGL2Context, assertWebGL2Context, log } from '@luma.gl/gltools';\nimport Resource from './resource';\nimport Texture2D from './texture-2d';\nimport Renderbuffer from './renderbuffer';\nimport { clear, clearBuffer } from './clear';\nimport { copyToDataUrl } from './copy-and-blit.js';\nimport { getFeatures } from '../features';\nimport { getKey } from '../webgl-utils/constants-to-keys';\nimport { assert } from '../utils/assert';\nconst ERR_MULTIPLE_RENDERTARGETS = 'Multiple render targets not supported';\nexport default class Framebuffer extends Resource {\n  get [Symbol.toStringTag]() {\n    return 'Framebuffer';\n  }\n\n  static isSupported(gl) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const {\n      colorBufferFloat,\n      colorBufferHalfFloat\n    } = options;\n    let supported = true;\n\n    if (colorBufferFloat) {\n      supported = Boolean(gl.getExtension('EXT_color_buffer_float') || gl.getExtension('WEBGL_color_buffer_float') || gl.getExtension('OES_texture_float'));\n    }\n\n    if (colorBufferHalfFloat) {\n      supported = supported && Boolean(gl.getExtension('EXT_color_buffer_float') || gl.getExtension('EXT_color_buffer_half_float'));\n    }\n\n    return supported;\n  }\n\n  static getDefaultFramebuffer(gl) {\n    gl.luma = gl.luma || {};\n    gl.luma.defaultFramebuffer = gl.luma.defaultFramebuffer || new Framebuffer(gl, {\n      id: 'default-framebuffer',\n      handle: null,\n      attachments: {}\n    });\n    return gl.luma.defaultFramebuffer;\n  }\n\n  get MAX_COLOR_ATTACHMENTS() {\n    const gl2 = assertWebGL2Context(this.gl);\n    return gl2.getParameter(gl2.MAX_COLOR_ATTACHMENTS);\n  }\n\n  get MAX_DRAW_BUFFERS() {\n    const gl2 = assertWebGL2Context(this.gl);\n    return gl2.getParameter(gl2.MAX_DRAW_BUFFERS);\n  }\n\n  constructor(gl) {\n    let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    super(gl, opts);\n    this.width = null;\n    this.height = null;\n    this.attachments = {};\n    this.readBuffer = 36064;\n    this.drawBuffers = [36064];\n    this.ownResources = [];\n    this.initialize(opts);\n    Object.seal(this);\n  }\n\n  get color() {\n    return this.attachments[36064] || null;\n  }\n\n  get texture() {\n    return this.attachments[36064] || null;\n  }\n\n  get depth() {\n    return this.attachments[36096] || this.attachments[33306] || null;\n  }\n\n  get stencil() {\n    return this.attachments[36128] || this.attachments[33306] || null;\n  }\n\n  initialize(_ref) {\n    let {\n      width = 1,\n      height = 1,\n      attachments = null,\n      color = true,\n      depth = true,\n      stencil = false,\n      check = true,\n      readBuffer = undefined,\n      drawBuffers = undefined\n    } = _ref;\n    assert(width >= 0 && height >= 0, 'Width and height need to be integers');\n    this.width = width;\n    this.height = height;\n\n    if (attachments) {\n      for (const attachment in attachments) {\n        const target = attachments[attachment];\n        const object = Array.isArray(target) ? target[0] : target;\n        object.resize({\n          width,\n          height\n        });\n      }\n    } else {\n      attachments = this._createDefaultAttachments(color, depth, stencil, width, height);\n    }\n\n    this.update({\n      clearAttachments: true,\n      attachments,\n      readBuffer,\n      drawBuffers\n    });\n\n    if (attachments && check) {\n      this.checkStatus();\n    }\n  }\n\n  delete() {\n    for (const resource of this.ownResources) {\n      resource.delete();\n    }\n\n    super.delete();\n    return this;\n  }\n\n  update(_ref2) {\n    let {\n      attachments = {},\n      readBuffer,\n      drawBuffers,\n      clearAttachments = false,\n      resizeAttachments = true\n    } = _ref2;\n    this.attach(attachments, {\n      clearAttachments,\n      resizeAttachments\n    });\n    const {\n      gl\n    } = this;\n    const prevHandle = gl.bindFramebuffer(36160, this.handle);\n\n    if (readBuffer) {\n      this._setReadBuffer(readBuffer);\n    }\n\n    if (drawBuffers) {\n      this._setDrawBuffers(drawBuffers);\n    }\n\n    gl.bindFramebuffer(36160, prevHandle || null);\n    return this;\n  }\n\n  resize() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let {\n      width,\n      height\n    } = options;\n\n    if (this.handle === null) {\n      assert(width === undefined && height === undefined);\n      this.width = this.gl.drawingBufferWidth;\n      this.height = this.gl.drawingBufferHeight;\n      return this;\n    }\n\n    if (width === undefined) {\n      width = this.gl.drawingBufferWidth;\n    }\n\n    if (height === undefined) {\n      height = this.gl.drawingBufferHeight;\n    }\n\n    if (width !== this.width && height !== this.height) {\n      log.log(2, \"Resizing framebuffer \".concat(this.id, \" to \").concat(width, \"x\").concat(height))();\n    }\n\n    for (const attachmentPoint in this.attachments) {\n      this.attachments[attachmentPoint].resize({\n        width,\n        height\n      });\n    }\n\n    this.width = width;\n    this.height = height;\n    return this;\n  }\n\n  attach(attachments) {\n    let {\n      clearAttachments = false,\n      resizeAttachments = true\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const newAttachments = {};\n\n    if (clearAttachments) {\n      Object.keys(this.attachments).forEach(key => {\n        newAttachments[key] = null;\n      });\n    }\n\n    Object.assign(newAttachments, attachments);\n    const prevHandle = this.gl.bindFramebuffer(36160, this.handle);\n\n    for (const key in newAttachments) {\n      assert(key !== undefined, 'Misspelled framebuffer binding point?');\n      const attachment = Number(key);\n      const descriptor = newAttachments[attachment];\n      let object = descriptor;\n\n      if (!object) {\n        this._unattach(attachment);\n      } else if (object instanceof Renderbuffer) {\n        this._attachRenderbuffer({\n          attachment,\n          renderbuffer: object\n        });\n      } else if (Array.isArray(descriptor)) {\n        const [texture, layer = 0, level = 0] = descriptor;\n        object = texture;\n\n        this._attachTexture({\n          attachment,\n          texture,\n          layer,\n          level\n        });\n      } else {\n        this._attachTexture({\n          attachment,\n          texture: object,\n          layer: 0,\n          level: 0\n        });\n      }\n\n      if (resizeAttachments && object) {\n        object.resize({\n          width: this.width,\n          height: this.height\n        });\n      }\n    }\n\n    this.gl.bindFramebuffer(36160, prevHandle || null);\n    Object.assign(this.attachments, attachments);\n    Object.keys(this.attachments).filter(key => !this.attachments[key]).forEach(key => {\n      delete this.attachments[key];\n    });\n  }\n\n  checkStatus() {\n    const {\n      gl\n    } = this;\n    const status = this.getStatus();\n\n    if (status !== 36053) {\n      throw new Error(_getFrameBufferStatus(status));\n    }\n\n    return this;\n  }\n\n  getStatus() {\n    const {\n      gl\n    } = this;\n    const prevHandle = gl.bindFramebuffer(36160, this.handle);\n    const status = gl.checkFramebufferStatus(36160);\n    gl.bindFramebuffer(36160, prevHandle || null);\n    return status;\n  }\n\n  clear() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      color,\n      depth,\n      stencil,\n      drawBuffers = []\n    } = options;\n    const prevHandle = this.gl.bindFramebuffer(36160, this.handle);\n\n    if (color || depth || stencil) {\n      clear(this.gl, {\n        color,\n        depth,\n        stencil\n      });\n    }\n\n    drawBuffers.forEach((value, drawBuffer) => {\n      clearBuffer(this.gl, {\n        drawBuffer,\n        value\n      });\n    });\n    this.gl.bindFramebuffer(36160, prevHandle || null);\n    return this;\n  }\n\n  readPixels() {\n    let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    log.error('Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)')();\n    return null;\n  }\n\n  readPixelsToBuffer() {\n    let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    log.error('Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)')();\n    return null;\n  }\n\n  copyToDataUrl() {\n    let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    log.error('Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)')();\n    return null;\n  }\n\n  copyToImage() {\n    let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    log.error('Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)')();\n    return null;\n  }\n\n  copyToTexture() {\n    let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    log.error('Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})')();\n    return null;\n  }\n\n  blit() {\n    let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    log.error('Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)')();\n    return null;\n  }\n\n  invalidate(_ref3) {\n    let {\n      attachments = [],\n      x = 0,\n      y = 0,\n      width,\n      height\n    } = _ref3;\n    const gl2 = assertWebGL2Context(this.gl);\n    const prevHandle = gl2.bindFramebuffer(36008, this.handle);\n    const invalidateAll = x === 0 && y === 0 && width === undefined && height === undefined;\n\n    if (invalidateAll) {\n      gl2.invalidateFramebuffer(36008, attachments);\n    } else {\n      gl2.invalidateFramebuffer(36008, attachments, x, y, width, height);\n    }\n\n    gl2.bindFramebuffer(36008, prevHandle);\n    return this;\n  }\n\n  getAttachmentParameter(attachment, pname, keys) {\n    let value = this._getAttachmentParameterFallback(pname);\n\n    if (value === null) {\n      this.gl.bindFramebuffer(36160, this.handle);\n      value = this.gl.getFramebufferAttachmentParameter(36160, attachment, pname);\n      this.gl.bindFramebuffer(36160, null);\n    }\n\n    if (keys && value > 1000) {\n      value = getKey(this.gl, value);\n    }\n\n    return value;\n  }\n\n  getAttachmentParameters() {\n    let attachment = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 36064;\n    let keys = arguments.length > 1 ? arguments[1] : undefined;\n    let parameters = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.constructor.ATTACHMENT_PARAMETERS || [];\n    const values = {};\n\n    for (const pname of parameters) {\n      const key = keys ? getKey(this.gl, pname) : pname;\n      values[key] = this.getAttachmentParameter(attachment, pname, keys);\n    }\n\n    return values;\n  }\n\n  getParameters() {\n    let keys = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    const attachments = Object.keys(this.attachments);\n    const parameters = {};\n\n    for (const attachmentName of attachments) {\n      const attachment = Number(attachmentName);\n      const key = keys ? getKey(this.gl, attachment) : attachment;\n      parameters[key] = this.getAttachmentParameters(attachment, keys);\n    }\n\n    return parameters;\n  }\n\n  show() {\n    if (typeof window !== 'undefined') {\n      window.open(copyToDataUrl(this), 'luma-debug-texture');\n    }\n\n    return this;\n  }\n\n  log() {\n    let logLevel = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    let message = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n\n    if (logLevel > log.level || typeof window === 'undefined') {\n      return this;\n    }\n\n    message = message || \"Framebuffer \".concat(this.id);\n    const image = copyToDataUrl(this, {\n      targetMaxHeight: 100\n    });\n    log.image({\n      logLevel,\n      message,\n      image\n    }, message)();\n    return this;\n  }\n\n  bind() {\n    let {\n      target = 36160\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    this.gl.bindFramebuffer(target, this.handle);\n    return this;\n  }\n\n  unbind() {\n    let {\n      target = 36160\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    this.gl.bindFramebuffer(target, null);\n    return this;\n  }\n\n  _createDefaultAttachments(color, depth, stencil, width, height) {\n    let defaultAttachments = null;\n\n    if (color) {\n      defaultAttachments = defaultAttachments || {};\n      defaultAttachments[36064] = new Texture2D(this.gl, {\n        id: \"\".concat(this.id, \"-color0\"),\n        pixels: null,\n        format: 6408,\n        type: 5121,\n        width,\n        height,\n        mipmaps: false,\n        parameters: {\n          [10241]: 9729,\n          [10240]: 9729,\n          [10242]: 33071,\n          [10243]: 33071\n        }\n      });\n      this.ownResources.push(defaultAttachments[36064]);\n    }\n\n    if (depth && stencil) {\n      defaultAttachments = defaultAttachments || {};\n      defaultAttachments[33306] = new Renderbuffer(this.gl, {\n        id: \"\".concat(this.id, \"-depth-stencil\"),\n        format: 35056,\n        width,\n        height: 111\n      });\n      this.ownResources.push(defaultAttachments[33306]);\n    } else if (depth) {\n      defaultAttachments = defaultAttachments || {};\n      defaultAttachments[36096] = new Renderbuffer(this.gl, {\n        id: \"\".concat(this.id, \"-depth\"),\n        format: 33189,\n        width,\n        height\n      });\n      this.ownResources.push(defaultAttachments[36096]);\n    } else if (stencil) {\n      assert(false);\n    }\n\n    return defaultAttachments;\n  }\n\n  _unattach(attachment) {\n    const oldAttachment = this.attachments[attachment];\n\n    if (!oldAttachment) {\n      return;\n    }\n\n    if (oldAttachment instanceof Renderbuffer) {\n      this.gl.framebufferRenderbuffer(36160, attachment, 36161, null);\n    } else {\n      this.gl.framebufferTexture2D(36160, attachment, 3553, null, 0);\n    }\n\n    delete this.attachments[attachment];\n  }\n\n  _attachRenderbuffer(_ref4) {\n    let {\n      attachment = 36064,\n      renderbuffer\n    } = _ref4;\n    const {\n      gl\n    } = this;\n    gl.framebufferRenderbuffer(36160, attachment, 36161, renderbuffer.handle);\n    this.attachments[attachment] = renderbuffer;\n  }\n\n  _attachTexture(_ref5) {\n    let {\n      attachment = 36064,\n      texture,\n      layer,\n      level\n    } = _ref5;\n    const {\n      gl\n    } = this;\n    gl.bindTexture(texture.target, texture.handle);\n\n    switch (texture.target) {\n      case 35866:\n      case 32879:\n        const gl2 = assertWebGL2Context(gl);\n        gl2.framebufferTextureLayer(36160, attachment, texture.target, level, layer);\n        break;\n\n      case 34067:\n        const face = mapIndexToCubeMapFace(layer);\n        gl.framebufferTexture2D(36160, attachment, face, texture.handle, level);\n        break;\n\n      case 3553:\n        gl.framebufferTexture2D(36160, attachment, 3553, texture.handle, level);\n        break;\n\n      default:\n        assert(false, 'Illegal texture type');\n    }\n\n    gl.bindTexture(texture.target, null);\n    this.attachments[attachment] = texture;\n  }\n\n  _setReadBuffer(readBuffer) {\n    const gl2 = getWebGL2Context(this.gl);\n\n    if (gl2) {\n      gl2.readBuffer(readBuffer);\n    } else {\n      assert(readBuffer === 36064 || readBuffer === 1029, ERR_MULTIPLE_RENDERTARGETS);\n    }\n\n    this.readBuffer = readBuffer;\n  }\n\n  _setDrawBuffers(drawBuffers) {\n    const {\n      gl\n    } = this;\n    const gl2 = assertWebGL2Context(gl);\n\n    if (gl2) {\n      gl2.drawBuffers(drawBuffers);\n    } else {\n      const ext = gl.getExtension('WEBGL_draw_buffers');\n\n      if (ext) {\n        ext.drawBuffersWEBGL(drawBuffers);\n      } else {\n        assert(drawBuffers.length === 1 && (drawBuffers[0] === 36064 || drawBuffers[0] === 1029), ERR_MULTIPLE_RENDERTARGETS);\n      }\n    }\n\n    this.drawBuffers = drawBuffers;\n  }\n\n  _getAttachmentParameterFallback(pname) {\n    const caps = getFeatures(this.gl);\n\n    switch (pname) {\n      case 36052:\n        return !caps.WEBGL2 ? 0 : null;\n\n      case 33298:\n      case 33299:\n      case 33300:\n      case 33301:\n      case 33302:\n      case 33303:\n        return !caps.WEBGL2 ? 8 : null;\n\n      case 33297:\n        return !caps.WEBGL2 ? 5125 : null;\n\n      case 33296:\n        return !caps.WEBGL2 && !caps.EXT_sRGB ? 9729 : null;\n\n      default:\n        return null;\n    }\n  }\n\n  _createHandle() {\n    return this.gl.createFramebuffer();\n  }\n\n  _deleteHandle() {\n    this.gl.deleteFramebuffer(this.handle);\n  }\n\n  _bindHandle(handle) {\n    return this.gl.bindFramebuffer(36160, handle);\n  }\n\n}\n\nfunction mapIndexToCubeMapFace(layer) {\n  return layer < 34069 ? layer + 34069 : layer;\n}\n\nfunction _getFrameBufferStatus(status) {\n  const STATUS = Framebuffer.STATUS || {};\n  return STATUS[status] || \"Framebuffer error \".concat(status);\n}\n\nexport const FRAMEBUFFER_ATTACHMENT_PARAMETERS = [36049, 36048, 33296, 33298, 33299, 33300, 33301, 33302, 33303];\nFramebuffer.ATTACHMENT_PARAMETERS = FRAMEBUFFER_ATTACHMENT_PARAMETERS;\n//# sourceMappingURL=framebuffer.js.map","import Texture2D from '../classes/texture-2d';\nimport TextureCube from '../classes/texture-cube';\nimport Texture3D from '../classes/texture-3d';\nimport Framebuffer from '../classes/framebuffer';\nimport { assert } from '../utils/assert';\nexport function cloneTextureFrom(refTexture, overrides) {\n  assert(refTexture instanceof Texture2D || refTexture instanceof TextureCube || refTexture instanceof Texture3D);\n  const TextureType = refTexture.constructor;\n  const {\n    gl,\n    width,\n    height,\n    format,\n    type,\n    dataFormat,\n    border,\n    mipmaps\n  } = refTexture;\n  const textureOptions = Object.assign({\n    width,\n    height,\n    format,\n    type,\n    dataFormat,\n    border,\n    mipmaps\n  }, overrides);\n  return new TextureType(gl, textureOptions);\n}\nexport function toFramebuffer(texture, opts) {\n  const {\n    gl,\n    width,\n    height,\n    id\n  } = texture;\n  const framebuffer = new Framebuffer(gl, Object.assign({}, opts, {\n    id: \"framebuffer-for-\".concat(id),\n    width,\n    height,\n    attachments: {\n      [36064]: texture\n    }\n  }));\n  return framebuffer;\n}\n//# sourceMappingURL=texture-utils.js.map","export default function getShaderName(shader) {\n  let defaultName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'unnamed';\n  const SHADER_NAME_REGEXP = /#define[\\s*]SHADER_NAME[\\s*]([A-Za-z0-9_-]+)[\\s*]/;\n  const match = shader.match(SHADER_NAME_REGEXP);\n  return match ? match[1] : defaultName;\n}\n//# sourceMappingURL=get-shader-name.js.map","const GL_FRAGMENT_SHADER = 0x8b30;\nconst GL_VERTEX_SHADER = 0x8b31;\nexport default function getShaderTypeName(type) {\n  switch (type) {\n    case GL_FRAGMENT_SHADER:\n      return 'fragment';\n\n    case GL_VERTEX_SHADER:\n      return 'vertex';\n\n    default:\n      return 'unknown type';\n  }\n}\n//# sourceMappingURL=get-shader-type-name.js.map","import getShaderName from './get-shader-name';\nimport getShaderTypeName from './get-shader-type-name';\nexport default function formatGLSLCompilerError(errLog, src, shaderType) {\n  const {\n    shaderName,\n    errors,\n    warnings\n  } = parseGLSLCompilerError(errLog, src, shaderType);\n  return \"GLSL compilation error in \".concat(shaderName, \"\\n\\n\").concat(errors, \"\\n\").concat(warnings);\n}\nexport function parseGLSLCompilerError(errLog, src, shaderType, shaderName) {\n  const errorStrings = errLog.split(/\\r?\\n/);\n  const errors = {};\n  const warnings = {};\n  const name = shaderName || getShaderName(src) || '(unnamed)';\n  const shaderDescription = \"\".concat(getShaderTypeName(shaderType), \" shader \").concat(name);\n\n  for (let i = 0; i < errorStrings.length; i++) {\n    const errorString = errorStrings[i];\n\n    if (errorString.length <= 1) {\n      continue;\n    }\n\n    const segments = errorString.split(':');\n    const type = segments[0];\n    const line = parseInt(segments[2], 10);\n\n    if (isNaN(line)) {\n      throw new Error(\"GLSL compilation error in \".concat(shaderDescription, \": \").concat(errLog));\n    }\n\n    if (type !== 'WARNING') {\n      errors[line] = errorString;\n    } else {\n      warnings[line] = errorString;\n    }\n  }\n\n  const lines = addLineNumbers(src);\n  return {\n    shaderName: shaderDescription,\n    errors: formatErrors(errors, lines),\n    warnings: formatErrors(warnings, lines)\n  };\n}\n\nfunction formatErrors(errors, lines) {\n  let message = '';\n\n  for (let i = 0; i < lines.length; i++) {\n    const line = lines[i];\n\n    if (!errors[i + 3] && !errors[i + 2] && !errors[i + 1]) {\n      continue;\n    }\n\n    message += \"\".concat(line, \"\\n\");\n\n    if (errors[i + 1]) {\n      const error = errors[i + 1];\n      const segments = error.split(':', 3);\n      const type = segments[0];\n      const column = parseInt(segments[1], 10) || 0;\n      const err = error.substring(segments.join(':').length + 1).trim();\n      message += padLeft(\"^^^ \".concat(type, \": \").concat(err, \"\\n\\n\"), column);\n    }\n  }\n\n  return message;\n}\n\nfunction addLineNumbers(string) {\n  let start = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  let delim = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : ': ';\n  const lines = string.split(/\\r?\\n/);\n  const maxDigits = String(lines.length + start - 1).length;\n  return lines.map((line, i) => {\n    const lineNumber = String(i + start);\n    const digits = lineNumber.length;\n    const prefix = padLeft(lineNumber, maxDigits - digits);\n    return prefix + delim + line;\n  });\n}\n\nfunction padLeft(string, digits) {\n  let result = '';\n\n  for (let i = 0; i < digits; ++i) {\n    result += ' ';\n  }\n\n  return \"\".concat(result).concat(string);\n}\n//# sourceMappingURL=format-glsl-error.js.map","export default function getShaderVersion(source) {\n  let version = 100;\n  const words = source.match(/[^\\s]+/g);\n\n  if (words.length >= 2 && words[0] === '#version') {\n    const v = parseInt(words[1], 10);\n\n    if (Number.isFinite(v)) {\n      version = v;\n    }\n  }\n\n  return version;\n}\n//# sourceMappingURL=get-shader-version.js.map","import { assertWebGLContext, log } from '@luma.gl/gltools';\nimport { parseGLSLCompilerError, getShaderName } from '../glsl-utils';\nimport { assert } from '../utils/assert';\nimport { uid } from '../utils/utils';\nimport Resource from './resource';\nconst ERR_SOURCE = 'Shader: GLSL source code must be a JavaScript string';\nexport class Shader extends Resource {\n  get [Symbol.toStringTag]() {\n    return 'Shader';\n  }\n\n  static getTypeName(shaderType) {\n    switch (shaderType) {\n      case 35633:\n        return 'vertex-shader';\n\n      case 35632:\n        return 'fragment-shader';\n\n      default:\n        assert(false);\n        return 'unknown';\n    }\n  }\n\n  constructor(gl, props) {\n    assertWebGLContext(gl);\n    assert(typeof props.source === 'string', ERR_SOURCE);\n    const id = getShaderName(props.source, null) || props.id || uid(\"unnamed \".concat(Shader.getTypeName(props.shaderType)));\n    super(gl, {\n      id\n    });\n    this.shaderType = props.shaderType;\n    this.source = props.source;\n    this.initialize(props);\n  }\n\n  initialize(_ref) {\n    let {\n      source\n    } = _ref;\n    const shaderName = getShaderName(source, null);\n\n    if (shaderName) {\n      this.id = uid(shaderName);\n    }\n\n    this._compile(source);\n  }\n\n  getParameter(pname) {\n    return this.gl.getShaderParameter(this.handle, pname);\n  }\n\n  toString() {\n    return \"\".concat(Shader.getTypeName(this.shaderType), \":\").concat(this.id);\n  }\n\n  getName() {\n    return getShaderName(this.source) || 'unnamed-shader';\n  }\n\n  getSource() {\n    return this.gl.getShaderSource(this.handle);\n  }\n\n  getTranslatedSource() {\n    const extension = this.gl.getExtension('WEBGL_debug_shaders');\n    return extension ? extension.getTranslatedShaderSource(this.handle) : 'No translated source available. WEBGL_debug_shaders not implemented';\n  }\n\n  _compile() {\n    let source = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.source;\n\n    if (!source.startsWith('#version ')) {\n      source = \"#version 100\\n\".concat(source);\n    }\n\n    this.source = source;\n    this.gl.shaderSource(this.handle, this.source);\n    this.gl.compileShader(this.handle);\n    const compileStatus = this.getParameter(35713);\n\n    if (!compileStatus) {\n      const infoLog = this.gl.getShaderInfoLog(this.handle);\n      const {\n        shaderName,\n        errors,\n        warnings\n      } = parseGLSLCompilerError(infoLog, this.source, this.shaderType, this.id);\n      log.error(\"GLSL compilation errors in \".concat(shaderName, \"\\n\").concat(errors))();\n      log.warn(\"GLSL compilation warnings in \".concat(shaderName, \"\\n\").concat(warnings))();\n      throw new Error(\"GLSL compilation errors in \".concat(shaderName));\n    }\n  }\n\n  _deleteHandle() {\n    this.gl.deleteShader(this.handle);\n  }\n\n  _getOptsFromHandle() {\n    return {\n      type: this.getParameter(35663),\n      source: this.getSource()\n    };\n  }\n\n}\nexport class VertexShader extends Shader {\n  get [Symbol.toStringTag]() {\n    return 'VertexShader';\n  }\n\n  constructor(gl, props) {\n    if (typeof props === 'string') {\n      props = {\n        source: props\n      };\n    }\n\n    super(gl, Object.assign({}, props, {\n      shaderType: 35633\n    }));\n  }\n\n  _createHandle() {\n    return this.gl.createShader(35633);\n  }\n\n}\nexport class FragmentShader extends Shader {\n  get [Symbol.toStringTag]() {\n    return 'FragmentShader';\n  }\n\n  constructor(gl, props) {\n    if (typeof props === 'string') {\n      props = {\n        source: props\n      };\n    }\n\n    super(gl, Object.assign({}, props, {\n      shaderType: 35632\n    }));\n  }\n\n  _createHandle() {\n    return this.gl.createShader(35632);\n  }\n\n}\n//# sourceMappingURL=shader.js.map","import { log } from '@luma.gl/gltools';\nimport Framebuffer from './framebuffer';\nimport Renderbuffer from './renderbuffer';\nimport Texture from './texture';\nimport { assert } from '../utils/assert';\nconst UNIFORM_SETTERS = {\n  [5126]: getArraySetter.bind(null, 'uniform1fv', toFloatArray, 1, setVectorUniform),\n  [35664]: getArraySetter.bind(null, 'uniform2fv', toFloatArray, 2, setVectorUniform),\n  [35665]: getArraySetter.bind(null, 'uniform3fv', toFloatArray, 3, setVectorUniform),\n  [35666]: getArraySetter.bind(null, 'uniform4fv', toFloatArray, 4, setVectorUniform),\n  [5124]: getArraySetter.bind(null, 'uniform1iv', toIntArray, 1, setVectorUniform),\n  [35667]: getArraySetter.bind(null, 'uniform2iv', toIntArray, 2, setVectorUniform),\n  [35668]: getArraySetter.bind(null, 'uniform3iv', toIntArray, 3, setVectorUniform),\n  [35669]: getArraySetter.bind(null, 'uniform4iv', toIntArray, 4, setVectorUniform),\n  [35670]: getArraySetter.bind(null, 'uniform1iv', toIntArray, 1, setVectorUniform),\n  [35671]: getArraySetter.bind(null, 'uniform2iv', toIntArray, 2, setVectorUniform),\n  [35672]: getArraySetter.bind(null, 'uniform3iv', toIntArray, 3, setVectorUniform),\n  [35673]: getArraySetter.bind(null, 'uniform4iv', toIntArray, 4, setVectorUniform),\n  [35674]: getArraySetter.bind(null, 'uniformMatrix2fv', toFloatArray, 4, setMatrixUniform),\n  [35675]: getArraySetter.bind(null, 'uniformMatrix3fv', toFloatArray, 9, setMatrixUniform),\n  [35676]: getArraySetter.bind(null, 'uniformMatrix4fv', toFloatArray, 16, setMatrixUniform),\n  [35678]: getSamplerSetter,\n  [35680]: getSamplerSetter,\n  [5125]: getArraySetter.bind(null, 'uniform1uiv', toUIntArray, 1, setVectorUniform),\n  [36294]: getArraySetter.bind(null, 'uniform2uiv', toUIntArray, 2, setVectorUniform),\n  [36295]: getArraySetter.bind(null, 'uniform3uiv', toUIntArray, 3, setVectorUniform),\n  [36296]: getArraySetter.bind(null, 'uniform4uiv', toUIntArray, 4, setVectorUniform),\n  [35685]: getArraySetter.bind(null, 'uniformMatrix2x3fv', toFloatArray, 6, setMatrixUniform),\n  [35686]: getArraySetter.bind(null, 'uniformMatrix2x4fv', toFloatArray, 8, setMatrixUniform),\n  [35687]: getArraySetter.bind(null, 'uniformMatrix3x2fv', toFloatArray, 6, setMatrixUniform),\n  [35688]: getArraySetter.bind(null, 'uniformMatrix3x4fv', toFloatArray, 12, setMatrixUniform),\n  [35689]: getArraySetter.bind(null, 'uniformMatrix4x2fv', toFloatArray, 8, setMatrixUniform),\n  [35690]: getArraySetter.bind(null, 'uniformMatrix4x3fv', toFloatArray, 12, setMatrixUniform),\n  [35678]: getSamplerSetter,\n  [35680]: getSamplerSetter,\n  [35679]: getSamplerSetter,\n  [35682]: getSamplerSetter,\n  [36289]: getSamplerSetter,\n  [36292]: getSamplerSetter,\n  [36293]: getSamplerSetter,\n  [36298]: getSamplerSetter,\n  [36299]: getSamplerSetter,\n  [36300]: getSamplerSetter,\n  [36303]: getSamplerSetter,\n  [36306]: getSamplerSetter,\n  [36307]: getSamplerSetter,\n  [36308]: getSamplerSetter,\n  [36311]: getSamplerSetter\n};\nconst FLOAT_ARRAY = {};\nconst INT_ARRAY = {};\nconst UINT_ARRAY = {};\nconst array1 = [0];\n\nfunction toTypedArray(value, uniformLength, Type, cache) {\n  if (uniformLength === 1 && typeof value === 'boolean') {\n    value = value ? 1 : 0;\n  }\n\n  if (Number.isFinite(value)) {\n    array1[0] = value;\n    value = array1;\n  }\n\n  const length = value.length;\n\n  if (length % uniformLength) {\n    log.warn(\"Uniform size should be multiples of \".concat(uniformLength), value)();\n  }\n\n  if (value instanceof Type) {\n    return value;\n  }\n\n  let result = cache[length];\n\n  if (!result) {\n    result = new Type(length);\n    cache[length] = result;\n  }\n\n  for (let i = 0; i < length; i++) {\n    result[i] = value[i];\n  }\n\n  return result;\n}\n\nfunction toFloatArray(value, uniformLength) {\n  return toTypedArray(value, uniformLength, Float32Array, FLOAT_ARRAY);\n}\n\nfunction toIntArray(value, uniformLength) {\n  return toTypedArray(value, uniformLength, Int32Array, INT_ARRAY);\n}\n\nfunction toUIntArray(value, uniformLength) {\n  return toTypedArray(value, uniformLength, Uint32Array, UINT_ARRAY);\n}\n\nexport function getUniformSetter(gl, location, info) {\n  const setter = UNIFORM_SETTERS[info.type];\n\n  if (!setter) {\n    throw new Error(\"Unknown GLSL uniform type \".concat(info.type));\n  }\n\n  return setter().bind(null, gl, location);\n}\nexport function parseUniformName(name) {\n  if (name[name.length - 1] !== ']') {\n    return {\n      name,\n      length: 1,\n      isArray: false\n    };\n  }\n\n  const UNIFORM_NAME_REGEXP = /([^[]*)(\\[[0-9]+\\])?/;\n  const matches = name.match(UNIFORM_NAME_REGEXP);\n\n  if (!matches || matches.length < 2) {\n    throw new Error(\"Failed to parse GLSL uniform name \".concat(name));\n  }\n\n  return {\n    name: matches[1],\n    length: matches[2] || 1,\n    isArray: Boolean(matches[2])\n  };\n}\nexport function checkUniformValues(uniforms, source, uniformMap) {\n  for (const uniformName in uniforms) {\n    const value = uniforms[uniformName];\n    const shouldCheck = !uniformMap || Boolean(uniformMap[uniformName]);\n\n    if (shouldCheck && !checkUniformValue(value)) {\n      source = source ? \"\".concat(source, \" \") : '';\n      console.error(\"\".concat(source, \" Bad uniform \").concat(uniformName), value);\n      throw new Error(\"\".concat(source, \" Bad uniform \").concat(uniformName));\n    }\n  }\n\n  return true;\n}\n\nfunction checkUniformValue(value) {\n  if (Array.isArray(value) || ArrayBuffer.isView(value)) {\n    return checkUniformArray(value);\n  }\n\n  if (isFinite(value)) {\n    return true;\n  } else if (value === true || value === false) {\n    return true;\n  } else if (value instanceof Texture) {\n    return true;\n  } else if (value instanceof Renderbuffer) {\n    return true;\n  } else if (value instanceof Framebuffer) {\n    return Boolean(value.texture);\n  }\n\n  return false;\n}\n\nexport function copyUniform(uniforms, key, value) {\n  if (Array.isArray(value) || ArrayBuffer.isView(value)) {\n    if (uniforms[key]) {\n      const dest = uniforms[key];\n\n      for (let i = 0, len = value.length; i < len; ++i) {\n        dest[i] = value[i];\n      }\n    } else {\n      uniforms[key] = value.slice();\n    }\n  } else {\n    uniforms[key] = value;\n  }\n}\n\nfunction checkUniformArray(value) {\n  if (value.length === 0) {\n    return false;\n  }\n\n  const checkLength = Math.min(value.length, 16);\n\n  for (let i = 0; i < checkLength; ++i) {\n    if (!Number.isFinite(value[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction getSamplerSetter() {\n  let cache = null;\n  return (gl, location, value) => {\n    const update = cache !== value;\n\n    if (update) {\n      gl.uniform1i(location, value);\n      cache = value;\n    }\n\n    return update;\n  };\n}\n\nfunction getArraySetter(functionName, toArray, size, uniformSetter) {\n  let cache = null;\n  let cacheLength = null;\n  return (gl, location, value) => {\n    const arrayValue = toArray(value, size);\n    const length = arrayValue.length;\n    let update = false;\n\n    if (cache === null) {\n      cache = new Float32Array(length);\n      cacheLength = length;\n      update = true;\n    } else {\n      assert(cacheLength === length, 'Uniform length cannot change.');\n\n      for (let i = 0; i < length; ++i) {\n        if (arrayValue[i] !== cache[i]) {\n          update = true;\n          break;\n        }\n      }\n    }\n\n    if (update) {\n      uniformSetter(gl, functionName, location, arrayValue);\n      cache.set(arrayValue);\n    }\n\n    return update;\n  };\n}\n\nfunction setVectorUniform(gl, functionName, location, value) {\n  gl[functionName](location, value);\n}\n\nfunction setMatrixUniform(gl, functionName, location, value) {\n  gl[functionName](location, false, value);\n}\n//# sourceMappingURL=uniforms.js.map","import { assert } from '../utils/assert';\nconst GL_BYTE = 0x1400;\nconst GL_UNSIGNED_BYTE = 0x1401;\nconst GL_SHORT = 0x1402;\nconst GL_UNSIGNED_SHORT = 0x1403;\nconst GL_POINTS = 0x0;\nconst GL_LINES = 0x1;\nconst GL_LINE_LOOP = 0x2;\nconst GL_LINE_STRIP = 0x3;\nconst GL_TRIANGLES = 0x4;\nconst GL_TRIANGLE_STRIP = 0x5;\nconst GL_TRIANGLE_FAN = 0x6;\nconst GL_FLOAT = 0x1406;\nconst GL_FLOAT_VEC2 = 0x8b50;\nconst GL_FLOAT_VEC3 = 0x8b51;\nconst GL_FLOAT_VEC4 = 0x8b52;\nconst GL_INT = 0x1404;\nconst GL_INT_VEC2 = 0x8b53;\nconst GL_INT_VEC3 = 0x8b54;\nconst GL_INT_VEC4 = 0x8b55;\nconst GL_UNSIGNED_INT = 0x1405;\nconst GL_UNSIGNED_INT_VEC2 = 0x8dc6;\nconst GL_UNSIGNED_INT_VEC3 = 0x8dc7;\nconst GL_UNSIGNED_INT_VEC4 = 0x8dc8;\nconst GL_BOOL = 0x8b56;\nconst GL_BOOL_VEC2 = 0x8b57;\nconst GL_BOOL_VEC3 = 0x8b58;\nconst GL_BOOL_VEC4 = 0x8b59;\nconst GL_FLOAT_MAT2 = 0x8b5a;\nconst GL_FLOAT_MAT3 = 0x8b5b;\nconst GL_FLOAT_MAT4 = 0x8b5c;\nconst GL_FLOAT_MAT2x3 = 0x8b65;\nconst GL_FLOAT_MAT2x4 = 0x8b66;\nconst GL_FLOAT_MAT3x2 = 0x8b67;\nconst GL_FLOAT_MAT3x4 = 0x8b68;\nconst GL_FLOAT_MAT4x2 = 0x8b69;\nconst GL_FLOAT_MAT4x3 = 0x8b6a;\nconst COMPOSITE_GL_TYPES = {\n  [GL_FLOAT]: [GL_FLOAT, 1, 'float'],\n  [GL_FLOAT_VEC2]: [GL_FLOAT, 2, 'vec2'],\n  [GL_FLOAT_VEC3]: [GL_FLOAT, 3, 'vec3'],\n  [GL_FLOAT_VEC4]: [GL_FLOAT, 4, 'vec4'],\n  [GL_INT]: [GL_INT, 1, 'int'],\n  [GL_INT_VEC2]: [GL_INT, 2, 'ivec2'],\n  [GL_INT_VEC3]: [GL_INT, 3, 'ivec3'],\n  [GL_INT_VEC4]: [GL_INT, 4, 'ivec4'],\n  [GL_UNSIGNED_INT]: [GL_UNSIGNED_INT, 1, 'uint'],\n  [GL_UNSIGNED_INT_VEC2]: [GL_UNSIGNED_INT, 2, 'uvec2'],\n  [GL_UNSIGNED_INT_VEC3]: [GL_UNSIGNED_INT, 3, 'uvec3'],\n  [GL_UNSIGNED_INT_VEC4]: [GL_UNSIGNED_INT, 4, 'uvec4'],\n  [GL_BOOL]: [GL_FLOAT, 1, 'bool'],\n  [GL_BOOL_VEC2]: [GL_FLOAT, 2, 'bvec2'],\n  [GL_BOOL_VEC3]: [GL_FLOAT, 3, 'bvec3'],\n  [GL_BOOL_VEC4]: [GL_FLOAT, 4, 'bvec4'],\n  [GL_FLOAT_MAT2]: [GL_FLOAT, 8, 'mat2'],\n  [GL_FLOAT_MAT2x3]: [GL_FLOAT, 8, 'mat2x3'],\n  [GL_FLOAT_MAT2x4]: [GL_FLOAT, 8, 'mat2x4'],\n  [GL_FLOAT_MAT3]: [GL_FLOAT, 12, 'mat3'],\n  [GL_FLOAT_MAT3x2]: [GL_FLOAT, 12, 'mat3x2'],\n  [GL_FLOAT_MAT3x4]: [GL_FLOAT, 12, 'mat3x4'],\n  [GL_FLOAT_MAT4]: [GL_FLOAT, 16, 'mat4'],\n  [GL_FLOAT_MAT4x2]: [GL_FLOAT, 16, 'mat4x2'],\n  [GL_FLOAT_MAT4x3]: [GL_FLOAT, 16, 'mat4x3']\n};\nexport function getPrimitiveDrawMode(drawMode) {\n  switch (drawMode) {\n    case GL_POINTS:\n      return GL_POINTS;\n\n    case GL_LINES:\n      return GL_LINES;\n\n    case GL_LINE_STRIP:\n      return GL_LINES;\n\n    case GL_LINE_LOOP:\n      return GL_LINES;\n\n    case GL_TRIANGLES:\n      return GL_TRIANGLES;\n\n    case GL_TRIANGLE_STRIP:\n      return GL_TRIANGLES;\n\n    case GL_TRIANGLE_FAN:\n      return GL_TRIANGLES;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\nexport function getPrimitiveCount(_ref) {\n  let {\n    drawMode,\n    vertexCount\n  } = _ref;\n\n  switch (drawMode) {\n    case GL_POINTS:\n    case GL_LINE_LOOP:\n      return vertexCount;\n\n    case GL_LINES:\n      return vertexCount / 2;\n\n    case GL_LINE_STRIP:\n      return vertexCount - 1;\n\n    case GL_TRIANGLES:\n      return vertexCount / 3;\n\n    case GL_TRIANGLE_STRIP:\n    case GL_TRIANGLE_FAN:\n      return vertexCount - 2;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\nexport function getVertexCount(_ref2) {\n  let {\n    drawMode,\n    vertexCount\n  } = _ref2;\n  const primitiveCount = getPrimitiveCount({\n    drawMode,\n    vertexCount\n  });\n\n  switch (getPrimitiveDrawMode(drawMode)) {\n    case GL_POINTS:\n      return primitiveCount;\n\n    case GL_LINES:\n      return primitiveCount * 2;\n\n    case GL_TRIANGLES:\n      return primitiveCount * 3;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\nexport function decomposeCompositeGLType(compositeGLType) {\n  const typeAndSize = COMPOSITE_GL_TYPES[compositeGLType];\n\n  if (!typeAndSize) {\n    return null;\n  }\n\n  const [type, components] = typeAndSize;\n  return {\n    type,\n    components\n  };\n}\nexport function getCompositeGLType(type, components) {\n  switch (type) {\n    case GL_BYTE:\n    case GL_UNSIGNED_BYTE:\n    case GL_SHORT:\n    case GL_UNSIGNED_SHORT:\n      type = GL_FLOAT;\n      break;\n\n    default:\n  }\n\n  for (const glType in COMPOSITE_GL_TYPES) {\n    const [compType, compComponents, name] = COMPOSITE_GL_TYPES[glType];\n\n    if (compType === type && compComponents === components) {\n      return {\n        glType,\n        name\n      };\n    }\n  }\n\n  return null;\n}\n//# sourceMappingURL=attribute-utils.js.map","import Accessor from './accessor';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { decomposeCompositeGLType } from '../webgl-utils/attribute-utils';\nexport default class ProgramConfiguration {\n  constructor(program) {\n    this.id = program.id;\n    this.attributeInfos = [];\n    this.attributeInfosByName = {};\n    this.attributeInfosByLocation = [];\n    this.varyingInfos = [];\n    this.varyingInfosByName = {};\n    Object.seal(this);\n\n    this._readAttributesFromProgram(program);\n\n    this._readVaryingsFromProgram(program);\n  }\n\n  getAttributeInfo(locationOrName) {\n    const location = Number(locationOrName);\n\n    if (Number.isFinite(location)) {\n      return this.attributeInfosByLocation[location];\n    }\n\n    return this.attributeInfosByName[locationOrName] || null;\n  }\n\n  getAttributeLocation(locationOrName) {\n    const attributeInfo = this.getAttributeInfo(locationOrName);\n    return attributeInfo ? attributeInfo.location : -1;\n  }\n\n  getAttributeAccessor(locationOrName) {\n    const attributeInfo = this.getAttributeInfo(locationOrName);\n    return attributeInfo ? attributeInfo.accessor : null;\n  }\n\n  getVaryingInfo(locationOrName) {\n    const location = Number(locationOrName);\n\n    if (Number.isFinite(location)) {\n      return this.varyingInfos[location];\n    }\n\n    return this.varyingInfosByName[locationOrName] || null;\n  }\n\n  getVaryingIndex(locationOrName) {\n    const varying = this.getVaryingInfo();\n    return varying ? varying.location : -1;\n  }\n\n  getVaryingAccessor(locationOrName) {\n    const varying = this.getVaryingInfo();\n    return varying ? varying.accessor : null;\n  }\n\n  _readAttributesFromProgram(program) {\n    const {\n      gl\n    } = program;\n    const count = gl.getProgramParameter(program.handle, 35721);\n\n    for (let index = 0; index < count; index++) {\n      const {\n        name,\n        type,\n        size\n      } = gl.getActiveAttrib(program.handle, index);\n      const location = gl.getAttribLocation(program.handle, name);\n\n      if (location >= 0) {\n        this._addAttribute(location, name, type, size);\n      }\n    }\n\n    this.attributeInfos.sort((a, b) => a.location - b.location);\n  }\n\n  _readVaryingsFromProgram(program) {\n    const {\n      gl\n    } = program;\n\n    if (!isWebGL2(gl)) {\n      return;\n    }\n\n    const count = gl.getProgramParameter(program.handle, 35971);\n\n    for (let location = 0; location < count; location++) {\n      const {\n        name,\n        type,\n        size\n      } = gl.getTransformFeedbackVarying(program.handle, location);\n\n      this._addVarying(location, name, type, size);\n    }\n\n    this.varyingInfos.sort((a, b) => a.location - b.location);\n  }\n\n  _addAttribute(location, name, compositeType, size) {\n    const {\n      type,\n      components\n    } = decomposeCompositeGLType(compositeType);\n    const accessor = {\n      type,\n      size: size * components\n    };\n\n    this._inferProperties(location, name, accessor);\n\n    const attributeInfo = {\n      location,\n      name,\n      accessor: new Accessor(accessor)\n    };\n    this.attributeInfos.push(attributeInfo);\n    this.attributeInfosByLocation[location] = attributeInfo;\n    this.attributeInfosByName[attributeInfo.name] = attributeInfo;\n  }\n\n  _inferProperties(location, name, accessor) {\n    if (/instance/i.test(name)) {\n      accessor.divisor = 1;\n    }\n  }\n\n  _addVarying(location, name, compositeType, size) {\n    const {\n      type,\n      components\n    } = decomposeCompositeGLType(compositeType);\n    const accessor = new Accessor({\n      type,\n      size: size * components\n    });\n    const varying = {\n      location,\n      name,\n      accessor\n    };\n    this.varyingInfos.push(varying);\n    this.varyingInfosByName[varying.name] = varying;\n  }\n\n}\n//# sourceMappingURL=program-configuration.js.map","import Resource from './resource';\nimport Texture from './texture';\nimport Framebuffer from './framebuffer';\nimport { parseUniformName, getUniformSetter } from './uniforms';\nimport { VertexShader, FragmentShader } from './shader';\nimport ProgramConfiguration from './program-configuration';\nimport { copyUniform, checkUniformValues } from './uniforms';\nimport { isWebGL2, assertWebGL2Context, withParameters, log } from '@luma.gl/gltools';\nimport { getKey } from '../webgl-utils/constants-to-keys';\nimport { getPrimitiveDrawMode } from '../webgl-utils/attribute-utils';\nimport { assert } from '../utils/assert';\nimport { uid } from '../utils/utils';\nconst LOG_PROGRAM_PERF_PRIORITY = 4;\nconst GL_SEPARATE_ATTRIBS = 0x8c8d;\nconst V6_DEPRECATED_METHODS = ['setVertexArray', 'setAttributes', 'setBuffers', 'unsetBuffers', 'use', 'getUniformCount', 'getUniformInfo', 'getUniformLocation', 'getUniformValue', 'getVarying', 'getFragDataLocation', 'getAttachedShaders', 'getAttributeCount', 'getAttributeLocation', 'getAttributeInfo'];\nexport default class Program extends Resource {\n  get [Symbol.toStringTag]() {\n    return 'Program';\n  }\n\n  constructor(gl) {\n    let props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    super(gl, props);\n    this.stubRemovedMethods('Program', 'v6.0', V6_DEPRECATED_METHODS);\n    this._isCached = false;\n    this.initialize(props);\n    Object.seal(this);\n\n    this._setId(props.id);\n  }\n\n  initialize() {\n    let props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      hash,\n      vs,\n      fs,\n      varyings,\n      bufferMode = GL_SEPARATE_ATTRIBS\n    } = props;\n    this.hash = hash || '';\n    this.vs = typeof vs === 'string' ? new VertexShader(this.gl, {\n      id: \"\".concat(props.id, \"-vs\"),\n      source: vs\n    }) : vs;\n    this.fs = typeof fs === 'string' ? new FragmentShader(this.gl, {\n      id: \"\".concat(props.id, \"-fs\"),\n      source: fs\n    }) : fs;\n    assert(this.vs instanceof VertexShader);\n    assert(this.fs instanceof FragmentShader);\n    this.uniforms = {};\n    this._textureUniforms = {};\n\n    if (varyings && varyings.length > 0) {\n      assertWebGL2Context(this.gl);\n      this.varyings = varyings;\n      this.gl2.transformFeedbackVaryings(this.handle, varyings, bufferMode);\n    }\n\n    this._compileAndLink();\n\n    this._readUniformLocationsFromLinkedProgram();\n\n    this.configuration = new ProgramConfiguration(this);\n    return this.setProps(props);\n  }\n\n  delete() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if (this._isCached) {\n      return this;\n    }\n\n    return super.delete(options);\n  }\n\n  setProps(props) {\n    if ('uniforms' in props) {\n      this.setUniforms(props.uniforms);\n    }\n\n    return this;\n  }\n\n  draw(_ref) {\n    let {\n      logPriority,\n      drawMode = 4,\n      vertexCount,\n      offset = 0,\n      start,\n      end,\n      isIndexed = false,\n      indexType = 5123,\n      instanceCount = 0,\n      isInstanced = instanceCount > 0,\n      vertexArray = null,\n      transformFeedback,\n      framebuffer,\n      parameters = {},\n      uniforms,\n      samplers\n    } = _ref;\n\n    if (uniforms || samplers) {\n      log.deprecated('Program.draw({uniforms})', 'Program.setUniforms(uniforms)')();\n      this.setUniforms(uniforms || {});\n    }\n\n    if (log.priority >= logPriority) {\n      const fb = framebuffer ? framebuffer.id : 'default';\n      const message = \"mode=\".concat(getKey(this.gl, drawMode), \" verts=\").concat(vertexCount, \" \") + \"instances=\".concat(instanceCount, \" indexType=\").concat(getKey(this.gl, indexType), \" \") + \"isInstanced=\".concat(isInstanced, \" isIndexed=\").concat(isIndexed, \" \") + \"Framebuffer=\".concat(fb);\n      log.log(logPriority, message)();\n    }\n\n    assert(vertexArray);\n    this.gl.useProgram(this.handle);\n\n    if (!this._areTexturesRenderable() || vertexCount === 0 || isInstanced && instanceCount === 0) {\n      return false;\n    }\n\n    vertexArray.bindForDraw(vertexCount, instanceCount, () => {\n      if (framebuffer !== undefined) {\n        parameters = Object.assign({}, parameters, {\n          framebuffer\n        });\n      }\n\n      if (transformFeedback) {\n        const primitiveMode = getPrimitiveDrawMode(drawMode);\n        transformFeedback.begin(primitiveMode);\n      }\n\n      this._bindTextures();\n\n      withParameters(this.gl, parameters, () => {\n        if (isIndexed && isInstanced) {\n          this.gl2.drawElementsInstanced(drawMode, vertexCount, indexType, offset, instanceCount);\n        } else if (isIndexed && isWebGL2(this.gl) && !isNaN(start) && !isNaN(end)) {\n          this.gl2.drawRangeElements(drawMode, start, end, vertexCount, indexType, offset);\n        } else if (isIndexed) {\n          this.gl.drawElements(drawMode, vertexCount, indexType, offset);\n        } else if (isInstanced) {\n          this.gl2.drawArraysInstanced(drawMode, offset, vertexCount, instanceCount);\n        } else {\n          this.gl.drawArrays(drawMode, offset, vertexCount);\n        }\n      });\n\n      if (transformFeedback) {\n        transformFeedback.end();\n      }\n    });\n    return true;\n  }\n\n  setUniforms() {\n    let uniforms = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if (log.priority >= 2) {\n      checkUniformValues(uniforms, this.id, this._uniformSetters);\n    }\n\n    this.gl.useProgram(this.handle);\n\n    for (const uniformName in uniforms) {\n      const uniform = uniforms[uniformName];\n      const uniformSetter = this._uniformSetters[uniformName];\n\n      if (uniformSetter) {\n        let value = uniform;\n        let textureUpdate = false;\n\n        if (value instanceof Framebuffer) {\n          value = value.texture;\n        }\n\n        if (value instanceof Texture) {\n          textureUpdate = this.uniforms[uniformName] !== uniform;\n\n          if (textureUpdate) {\n            if (uniformSetter.textureIndex === undefined) {\n              uniformSetter.textureIndex = this._textureIndexCounter++;\n            }\n\n            const texture = value;\n            const {\n              textureIndex\n            } = uniformSetter;\n            texture.bind(textureIndex);\n            value = textureIndex;\n            this._textureUniforms[uniformName] = texture;\n          } else {\n            value = uniformSetter.textureIndex;\n          }\n        } else if (this._textureUniforms[uniformName]) {\n          delete this._textureUniforms[uniformName];\n        }\n\n        if (uniformSetter(value) || textureUpdate) {\n          copyUniform(this.uniforms, uniformName, uniform);\n        }\n      }\n    }\n\n    return this;\n  }\n\n  _areTexturesRenderable() {\n    let texturesRenderable = true;\n\n    for (const uniformName in this._textureUniforms) {\n      const texture = this._textureUniforms[uniformName];\n      texture.update();\n      texturesRenderable = texturesRenderable && texture.loaded;\n    }\n\n    return texturesRenderable;\n  }\n\n  _bindTextures() {\n    for (const uniformName in this._textureUniforms) {\n      const textureIndex = this._uniformSetters[uniformName].textureIndex;\n\n      this._textureUniforms[uniformName].bind(textureIndex);\n    }\n  }\n\n  _createHandle() {\n    return this.gl.createProgram();\n  }\n\n  _deleteHandle() {\n    this.gl.deleteProgram(this.handle);\n  }\n\n  _getOptionsFromHandle(handle) {\n    const shaderHandles = this.gl.getAttachedShaders(handle);\n    const opts = {};\n\n    for (const shaderHandle of shaderHandles) {\n      const type = this.gl.getShaderParameter(this.handle, 35663);\n\n      switch (type) {\n        case 35633:\n          opts.vs = new VertexShader({\n            handle: shaderHandle\n          });\n          break;\n\n        case 35632:\n          opts.fs = new FragmentShader({\n            handle: shaderHandle\n          });\n          break;\n\n        default:\n      }\n    }\n\n    return opts;\n  }\n\n  _getParameter(pname) {\n    return this.gl.getProgramParameter(this.handle, pname);\n  }\n\n  _setId(id) {\n    if (!id) {\n      const programName = this._getName();\n\n      this.id = uid(programName);\n    }\n  }\n\n  _getName() {\n    let programName = this.vs.getName() || this.fs.getName();\n    programName = programName.replace(/shader/i, '');\n    programName = programName ? \"\".concat(programName, \"-program\") : 'program';\n    return programName;\n  }\n\n  _compileAndLink() {\n    const {\n      gl\n    } = this;\n    gl.attachShader(this.handle, this.vs.handle);\n    gl.attachShader(this.handle, this.fs.handle);\n    log.time(LOG_PROGRAM_PERF_PRIORITY, \"linkProgram for \".concat(this._getName()))();\n    gl.linkProgram(this.handle);\n    log.timeEnd(LOG_PROGRAM_PERF_PRIORITY, \"linkProgram for \".concat(this._getName()))();\n\n    if (gl.debug || log.level > 0) {\n      const linked = gl.getProgramParameter(this.handle, 35714);\n\n      if (!linked) {\n        throw new Error(\"Error linking: \".concat(gl.getProgramInfoLog(this.handle)));\n      }\n\n      gl.validateProgram(this.handle);\n      const validated = gl.getProgramParameter(this.handle, 35715);\n\n      if (!validated) {\n        throw new Error(\"Error validating: \".concat(gl.getProgramInfoLog(this.handle)));\n      }\n    }\n  }\n\n  _readUniformLocationsFromLinkedProgram() {\n    const {\n      gl\n    } = this;\n    this._uniformSetters = {};\n    this._uniformCount = this._getParameter(35718);\n\n    for (let i = 0; i < this._uniformCount; i++) {\n      const info = this.gl.getActiveUniform(this.handle, i);\n      const {\n        name\n      } = parseUniformName(info.name);\n      let location = gl.getUniformLocation(this.handle, name);\n      this._uniformSetters[name] = getUniformSetter(gl, location, info);\n\n      if (info.size > 1) {\n        for (let l = 0; l < info.size; l++) {\n          location = gl.getUniformLocation(this.handle, \"\".concat(name, \"[\").concat(l, \"]\"));\n          this._uniformSetters[\"\".concat(name, \"[\").concat(l, \"]\")] = getUniformSetter(gl, location, info);\n        }\n      }\n    }\n\n    this._textureIndexCounter = 0;\n  }\n\n  getActiveUniforms(uniformIndices, pname) {\n    return this.gl2.getActiveUniforms(this.handle, uniformIndices, pname);\n  }\n\n  getUniformBlockIndex(blockName) {\n    return this.gl2.getUniformBlockIndex(this.handle, blockName);\n  }\n\n  getActiveUniformBlockParameter(blockIndex, pname) {\n    return this.gl2.getActiveUniformBlockParameter(this.handle, blockIndex, pname);\n  }\n\n  uniformBlockBinding(blockIndex, blockBinding) {\n    this.gl2.uniformBlockBinding(this.handle, blockIndex, blockBinding);\n  }\n\n}\n//# sourceMappingURL=program.js.map","import Resource from './resource';\nimport { FEATURES, hasFeatures } from '../features';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { assert } from '../utils/assert';\nconst GL_QUERY_RESULT = 0x8866;\nconst GL_QUERY_RESULT_AVAILABLE = 0x8867;\nconst GL_TIME_ELAPSED_EXT = 0x88bf;\nconst GL_GPU_DISJOINT_EXT = 0x8fbb;\nconst GL_TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN = 0x8c88;\nconst GL_ANY_SAMPLES_PASSED = 0x8c2f;\nconst GL_ANY_SAMPLES_PASSED_CONSERVATIVE = 0x8d6a;\nexport default class Query extends Resource {\n  get [Symbol.toStringTag]() {\n    return 'Query';\n  }\n\n  static isSupported(gl) {\n    let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    const webgl2 = isWebGL2(gl);\n    const hasTimerQuery = hasFeatures(gl, FEATURES.TIMER_QUERY);\n    let supported = webgl2 || hasTimerQuery;\n\n    for (const key of opts) {\n      switch (key) {\n        case 'queries':\n          supported = supported && webgl2;\n          break;\n\n        case 'timers':\n          supported = supported && hasTimerQuery;\n          break;\n\n        default:\n          assert(false);\n      }\n    }\n\n    return supported;\n  }\n\n  constructor(gl) {\n    let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    super(gl, opts);\n    this.target = null;\n    this._queryPending = false;\n    this._pollingPromise = null;\n    Object.seal(this);\n  }\n\n  beginTimeElapsedQuery() {\n    return this.begin(GL_TIME_ELAPSED_EXT);\n  }\n\n  beginOcclusionQuery() {\n    let {\n      conservative = false\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return this.begin(conservative ? GL_ANY_SAMPLES_PASSED_CONSERVATIVE : GL_ANY_SAMPLES_PASSED);\n  }\n\n  beginTransformFeedbackQuery() {\n    return this.begin(GL_TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN);\n  }\n\n  begin(target) {\n    if (this._queryPending) {\n      return this;\n    }\n\n    this.target = target;\n    this.gl2.beginQuery(this.target, this.handle);\n    return this;\n  }\n\n  end() {\n    if (this._queryPending) {\n      return this;\n    }\n\n    if (this.target) {\n      this.gl2.endQuery(this.target);\n      this.target = null;\n      this._queryPending = true;\n    }\n\n    return this;\n  }\n\n  isResultAvailable() {\n    if (!this._queryPending) {\n      return false;\n    }\n\n    const resultAvailable = this.gl2.getQueryParameter(this.handle, GL_QUERY_RESULT_AVAILABLE);\n\n    if (resultAvailable) {\n      this._queryPending = false;\n    }\n\n    return resultAvailable;\n  }\n\n  isTimerDisjoint() {\n    return this.gl2.getParameter(GL_GPU_DISJOINT_EXT);\n  }\n\n  getResult() {\n    return this.gl2.getQueryParameter(this.handle, GL_QUERY_RESULT);\n  }\n\n  getTimerMilliseconds() {\n    return this.getResult() / 1e6;\n  }\n\n  createPoll() {\n    let limit = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Number.POSITIVE_INFINITY;\n\n    if (this._pollingPromise) {\n      return this._pollingPromise;\n    }\n\n    let counter = 0;\n    this._pollingPromise = new Promise((resolve, reject) => {\n      const poll = () => {\n        if (this.isResultAvailable()) {\n          resolve(this.getResult());\n          this._pollingPromise = null;\n        } else if (counter++ > limit) {\n          reject('Timed out');\n          this._pollingPromise = null;\n        } else {\n          requestAnimationFrame(poll);\n        }\n      };\n\n      requestAnimationFrame(poll);\n    });\n    return this._pollingPromise;\n  }\n\n  _createHandle() {\n    return Query.isSupported(this.gl) ? this.gl2.createQuery() : null;\n  }\n\n  _deleteHandle() {\n    this.gl2.deleteQuery(this.handle);\n  }\n\n}\n//# sourceMappingURL=query.js.map","import { isWebGL2, assertWebGL2Context, log } from '@luma.gl/gltools';\nimport Resource from './resource';\nimport Buffer from './buffer';\nimport { isObjectEmpty } from '../utils/utils';\nexport default class TransformFeedback extends Resource {\n  get [Symbol.toStringTag]() {\n    return 'TransformFeedback';\n  }\n\n  static isSupported(gl) {\n    return isWebGL2(gl);\n  }\n\n  constructor(gl) {\n    let props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    assertWebGL2Context(gl);\n    super(gl, props);\n    this.initialize(props);\n    this.stubRemovedMethods('TransformFeedback', 'v6.0', ['pause', 'resume']);\n    Object.seal(this);\n  }\n\n  initialize() {\n    let props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    this.buffers = {};\n    this.unused = {};\n    this.configuration = null;\n    this.bindOnUse = true;\n\n    if (!isObjectEmpty(this.buffers)) {\n      this.bind(() => this._unbindBuffers());\n    }\n\n    this.setProps(props);\n    return this;\n  }\n\n  setProps(props) {\n    if ('program' in props) {\n      this.configuration = props.program && props.program.configuration;\n    }\n\n    if ('configuration' in props) {\n      this.configuration = props.configuration;\n    }\n\n    if ('bindOnUse' in props) {\n      props = props.bindOnUse;\n    }\n\n    if ('buffers' in props) {\n      this.setBuffers(props.buffers);\n    }\n  }\n\n  setBuffers() {\n    let buffers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    this.bind(() => {\n      for (const bufferName in buffers) {\n        this.setBuffer(bufferName, buffers[bufferName]);\n      }\n    });\n    return this;\n  }\n\n  setBuffer(locationOrName, bufferOrParams) {\n    const location = this._getVaryingIndex(locationOrName);\n\n    const {\n      buffer,\n      byteSize,\n      byteOffset\n    } = this._getBufferParams(bufferOrParams);\n\n    if (location < 0) {\n      this.unused[locationOrName] = buffer;\n      log.warn(\"\".concat(this.id, \" unused varying buffer \").concat(locationOrName))();\n      return this;\n    }\n\n    this.buffers[location] = bufferOrParams;\n\n    if (!this.bindOnUse) {\n      this._bindBuffer(location, buffer, byteOffset, byteSize);\n    }\n\n    return this;\n  }\n\n  begin() {\n    let primitiveMode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    this.gl.bindTransformFeedback(36386, this.handle);\n\n    this._bindBuffers();\n\n    this.gl.beginTransformFeedback(primitiveMode);\n    return this;\n  }\n\n  end() {\n    this.gl.endTransformFeedback();\n\n    this._unbindBuffers();\n\n    this.gl.bindTransformFeedback(36386, null);\n    return this;\n  }\n\n  _getBufferParams(bufferOrParams) {\n    let byteOffset;\n    let byteSize;\n    let buffer;\n\n    if (bufferOrParams instanceof Buffer === false) {\n      buffer = bufferOrParams.buffer;\n      byteSize = bufferOrParams.byteSize;\n      byteOffset = bufferOrParams.byteOffset;\n    } else {\n      buffer = bufferOrParams;\n    }\n\n    if (byteOffset !== undefined || byteSize !== undefined) {\n      byteOffset = byteOffset || 0;\n      byteSize = byteSize || buffer.byteLength - byteOffset;\n    }\n\n    return {\n      buffer,\n      byteOffset,\n      byteSize\n    };\n  }\n\n  _getVaryingInfo(locationOrName) {\n    return this.configuration && this.configuration.getVaryingInfo(locationOrName);\n  }\n\n  _getVaryingIndex(locationOrName) {\n    if (this.configuration) {\n      return this.configuration.getVaryingInfo(locationOrName).location;\n    }\n\n    const location = Number(locationOrName);\n    return Number.isFinite(location) ? location : -1;\n  }\n\n  _bindBuffers() {\n    if (this.bindOnUse) {\n      for (const bufferIndex in this.buffers) {\n        const {\n          buffer,\n          byteSize,\n          byteOffset\n        } = this._getBufferParams(this.buffers[bufferIndex]);\n\n        this._bindBuffer(bufferIndex, buffer, byteOffset, byteSize);\n      }\n    }\n  }\n\n  _unbindBuffers() {\n    if (this.bindOnUse) {\n      for (const bufferIndex in this.buffers) {\n        this._bindBuffer(bufferIndex, null);\n      }\n    }\n  }\n\n  _bindBuffer(index, buffer) {\n    let byteOffset = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    let byteSize = arguments.length > 3 ? arguments[3] : undefined;\n    const handle = buffer && buffer.handle;\n\n    if (!handle || byteSize === undefined) {\n      this.gl.bindBufferBase(35982, index, handle);\n    } else {\n      this.gl.bindBufferRange(35982, index, handle, byteOffset, byteSize);\n    }\n\n    return this;\n  }\n\n  _createHandle() {\n    return this.gl.createTransformFeedback();\n  }\n\n  _deleteHandle() {\n    this.gl.deleteTransformFeedback(this.handle);\n  }\n\n  _bindHandle(handle) {\n    this.gl.bindTransformFeedback(36386, this.handle);\n  }\n\n}\n//# sourceMappingURL=transform-feedback.js.map","let arrayBuffer = null;\nexport function getScratchArrayBuffer(byteLength) {\n  if (!arrayBuffer || arrayBuffer.byteLength < byteLength) {\n    arrayBuffer = new ArrayBuffer(byteLength);\n  }\n\n  return arrayBuffer;\n}\nexport function getScratchArray(Type, length) {\n  const scratchArrayBuffer = getScratchArrayBuffer(Type.BYTES_PER_ELEMENT * length);\n  return new Type(scratchArrayBuffer, 0, length);\n}\nexport function fillArray(_ref) {\n  let {\n    target,\n    source,\n    start = 0,\n    count = 1\n  } = _ref;\n  const length = source.length;\n  const total = count * length;\n  let copied = 0;\n\n  for (let i = start; copied < length; copied++) {\n    target[i++] = source[copied];\n  }\n\n  while (copied < total) {\n    if (copied < total - copied) {\n      target.copyWithin(start + copied, start, start + copied);\n      copied *= 2;\n    } else {\n      target.copyWithin(start + copied, start, start + total - copied);\n      copied = total;\n    }\n  }\n\n  return target;\n}\n//# sourceMappingURL=array-utils-flat.js.map","import Resource from './resource';\nimport Buffer from './buffer';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { getScratchArray, fillArray } from '../utils/array-utils-flat';\nimport { assert } from '../utils/assert';\nimport { getBrowser } from '@probe.gl/env';\nconst ERR_ELEMENTS = 'elements must be GL.ELEMENT_ARRAY_BUFFER';\nexport default class VertexArrayObject extends Resource {\n  get [Symbol.toStringTag]() {\n    return 'VertexArrayObject';\n  }\n\n  static isSupported(gl) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    if (options.constantAttributeZero) {\n      return isWebGL2(gl) || getBrowser() === 'Chrome';\n    }\n\n    return true;\n  }\n\n  static getDefaultArray(gl) {\n    gl.luma = gl.luma || {};\n\n    if (!gl.luma.defaultVertexArray) {\n      gl.luma.defaultVertexArray = new VertexArrayObject(gl, {\n        handle: null,\n        isDefaultArray: true\n      });\n    }\n\n    return gl.luma.defaultVertexArray;\n  }\n\n  static getMaxAttributes(gl) {\n    VertexArrayObject.MAX_ATTRIBUTES = VertexArrayObject.MAX_ATTRIBUTES || gl.getParameter(34921);\n    return VertexArrayObject.MAX_ATTRIBUTES;\n  }\n\n  static setConstant(gl, location, array) {\n    switch (array.constructor) {\n      case Float32Array:\n        VertexArrayObject._setConstantFloatArray(gl, location, array);\n\n        break;\n\n      case Int32Array:\n        VertexArrayObject._setConstantIntArray(gl, location, array);\n\n        break;\n\n      case Uint32Array:\n        VertexArrayObject._setConstantUintArray(gl, location, array);\n\n        break;\n\n      default:\n        assert(false);\n    }\n  }\n\n  constructor(gl) {\n    let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const id = opts.id || opts.program && opts.program.id;\n    super(gl, Object.assign({}, opts, {\n      id\n    }));\n    this.buffer = null;\n    this.bufferValue = null;\n    this.isDefaultArray = opts.isDefaultArray || false;\n    this.gl2 = gl;\n    this.initialize(opts);\n    Object.seal(this);\n  }\n\n  delete() {\n    super.delete();\n\n    if (this.buffer) {\n      this.buffer.delete();\n    }\n\n    return this;\n  }\n\n  get MAX_ATTRIBUTES() {\n    return VertexArrayObject.getMaxAttributes(this.gl);\n  }\n\n  initialize() {\n    let props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return this.setProps(props);\n  }\n\n  setProps(props) {\n    return this;\n  }\n\n  setElementBuffer() {\n    let elementBuffer = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    assert(!elementBuffer || elementBuffer.target === 34963, ERR_ELEMENTS);\n    this.bind(() => {\n      this.gl.bindBuffer(34963, elementBuffer ? elementBuffer.handle : null);\n    });\n    return this;\n  }\n\n  setBuffer(location, buffer, accessor) {\n    if (buffer.target === 34963) {\n      return this.setElementBuffer(buffer, accessor);\n    }\n\n    const {\n      size,\n      type,\n      stride,\n      offset,\n      normalized,\n      integer,\n      divisor\n    } = accessor;\n    const {\n      gl,\n      gl2\n    } = this;\n    location = Number(location);\n    this.bind(() => {\n      gl.bindBuffer(34962, buffer.handle);\n\n      if (integer) {\n        assert(isWebGL2(gl));\n        gl2.vertexAttribIPointer(location, size, type, stride, offset);\n      } else {\n        gl.vertexAttribPointer(location, size, type, normalized, stride, offset);\n      }\n\n      gl.enableVertexAttribArray(location);\n      gl2.vertexAttribDivisor(location, divisor || 0);\n    });\n    return this;\n  }\n\n  enable(location) {\n    let enable = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    const disablingAttributeZero = !enable && location === 0 && !VertexArrayObject.isSupported(this.gl, {\n      constantAttributeZero: true\n    });\n\n    if (!disablingAttributeZero) {\n      location = Number(location);\n      this.bind(() => enable ? this.gl.enableVertexAttribArray(location) : this.gl.disableVertexAttribArray(location));\n    }\n\n    return this;\n  }\n\n  getConstantBuffer(elementCount, value) {\n    const constantValue = this._normalizeConstantArrayValue(value);\n\n    const byteLength = constantValue.byteLength * elementCount;\n    const length = constantValue.length * elementCount;\n    let updateNeeded = !this.buffer;\n    this.buffer = this.buffer || new Buffer(this.gl, byteLength);\n    updateNeeded = updateNeeded || this.buffer.reallocate(byteLength);\n    updateNeeded = updateNeeded || !this._compareConstantArrayValues(constantValue, this.bufferValue);\n\n    if (updateNeeded) {\n      const typedArray = getScratchArray(value.constructor, length);\n      fillArray({\n        target: typedArray,\n        source: constantValue,\n        start: 0,\n        count: length\n      });\n      this.buffer.subData(typedArray);\n      this.bufferValue = value;\n    }\n\n    return this.buffer;\n  }\n\n  _normalizeConstantArrayValue(arrayValue) {\n    if (Array.isArray(arrayValue)) {\n      return new Float32Array(arrayValue);\n    }\n\n    return arrayValue;\n  }\n\n  _compareConstantArrayValues(v1, v2) {\n    if (!v1 || !v2 || v1.length !== v2.length || v1.constructor !== v2.constructor) {\n      return false;\n    }\n\n    for (let i = 0; i < v1.length; ++i) {\n      if (v1[i] !== v2[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  static _setConstantFloatArray(gl, location, array) {\n    switch (array.length) {\n      case 1:\n        gl.vertexAttrib1fv(location, array);\n        break;\n\n      case 2:\n        gl.vertexAttrib2fv(location, array);\n        break;\n\n      case 3:\n        gl.vertexAttrib3fv(location, array);\n        break;\n\n      case 4:\n        gl.vertexAttrib4fv(location, array);\n        break;\n\n      default:\n        assert(false);\n    }\n  }\n\n  static _setConstantIntArray(gl, location, array) {\n    assert(isWebGL2(gl));\n\n    switch (array.length) {\n      case 1:\n        gl.vertexAttribI1iv(location, array);\n        break;\n\n      case 2:\n        gl.vertexAttribI2iv(location, array);\n        break;\n\n      case 3:\n        gl.vertexAttribI3iv(location, array);\n        break;\n\n      case 4:\n        gl.vertexAttribI4iv(location, array);\n        break;\n\n      default:\n        assert(false);\n    }\n  }\n\n  static _setConstantUintArray(gl, location, array) {\n    assert(isWebGL2(gl));\n\n    switch (array.length) {\n      case 1:\n        gl.vertexAttribI1uiv(location, array);\n        break;\n\n      case 2:\n        gl.vertexAttribI2uiv(location, array);\n        break;\n\n      case 3:\n        gl.vertexAttribI3uiv(location, array);\n        break;\n\n      case 4:\n        gl.vertexAttribI4uiv(location, array);\n        break;\n\n      default:\n        assert(false);\n    }\n  }\n\n  _createHandle() {\n    const gl2 = this.gl;\n    return gl2.createVertexArray();\n  }\n\n  _deleteHandle(handle) {\n    this.gl2.deleteVertexArray(handle);\n    return [this.elements];\n  }\n\n  _bindHandle(handle) {\n    this.gl2.bindVertexArray(handle);\n  }\n\n  _getParameter(pname, _ref) {\n    let {\n      location\n    } = _ref;\n    assert(Number.isFinite(location));\n    return this.bind(() => {\n      switch (pname) {\n        case 34373:\n          return this.gl.getVertexAttribOffset(location, pname);\n\n        default:\n          return this.gl.getVertexAttrib(location, pname);\n      }\n    });\n  }\n\n}\n//# sourceMappingURL=vertex-array-object.js.map","import { log } from '@luma.gl/gltools';\nimport Accessor from './accessor';\nimport Buffer from './buffer';\nimport VertexArrayObject from './vertex-array-object';\nimport { assert } from '../utils/assert';\nimport { stubRemovedMethods } from '../utils/stub-methods';\nconst ERR_ATTRIBUTE_TYPE = 'VertexArray: attributes must be Buffers or constants (i.e. typed array)';\nconst MULTI_LOCATION_ATTRIBUTE_REGEXP = /^(.+)__LOCATION_([0-9]+)$/;\nconst DEPRECATIONS_V6 = ['setBuffers', 'setGeneric', 'clearBindings', 'setLocations', 'setGenericValues', 'setDivisor', 'enable', 'disable'];\nexport default class VertexArray {\n  constructor(gl) {\n    let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const id = opts.id || opts.program && opts.program.id;\n    this.id = id;\n    this.gl = gl;\n    this.configuration = null;\n    this.elements = null;\n    this.elementsAccessor = null;\n    this.values = null;\n    this.accessors = null;\n    this.unused = null;\n    this.drawParams = null;\n    this.buffer = null;\n    this.attributes = {};\n    this.vertexArrayObject = new VertexArrayObject(gl);\n    stubRemovedMethods(this, 'VertexArray', 'v6.0', DEPRECATIONS_V6);\n    this.initialize(opts);\n    Object.seal(this);\n  }\n\n  delete() {\n    if (this.buffer) {\n      this.buffer.delete();\n    }\n\n    this.vertexArrayObject.delete();\n  }\n\n  initialize() {\n    let props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    this.reset();\n    this.configuration = null;\n    this.bindOnUse = false;\n    return this.setProps(props);\n  }\n\n  reset() {\n    this.elements = null;\n    this.elementsAccessor = null;\n    const {\n      MAX_ATTRIBUTES\n    } = this.vertexArrayObject;\n    this.values = new Array(MAX_ATTRIBUTES).fill(null);\n    this.accessors = new Array(MAX_ATTRIBUTES).fill(null);\n    this.unused = {};\n    this.drawParams = null;\n    return this;\n  }\n\n  setProps(props) {\n    if ('program' in props) {\n      this.configuration = props.program && props.program.configuration;\n    }\n\n    if ('configuration' in props) {\n      this.configuration = props.configuration;\n    }\n\n    if ('attributes' in props) {\n      this.setAttributes(props.attributes);\n    }\n\n    if ('elements' in props) {\n      this.setElementBuffer(props.elements);\n    }\n\n    if ('bindOnUse' in props) {\n      props = props.bindOnUse;\n    }\n\n    return this;\n  }\n\n  clearDrawParams() {\n    this.drawParams = null;\n  }\n\n  getDrawParams() {\n    this.drawParams = this.drawParams || this._updateDrawParams();\n    return this.drawParams;\n  }\n\n  setAttributes(attributes) {\n    Object.assign(this.attributes, attributes);\n    this.vertexArrayObject.bind(() => {\n      for (const locationOrName in attributes) {\n        const value = attributes[locationOrName];\n\n        this._setAttribute(locationOrName, value);\n      }\n\n      this.gl.bindBuffer(34962, null);\n    });\n    return this;\n  }\n\n  setElementBuffer() {\n    let elementBuffer = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    let accessor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.elements = elementBuffer;\n    this.elementsAccessor = accessor;\n    this.clearDrawParams();\n    this.vertexArrayObject.setElementBuffer(elementBuffer, accessor);\n    return this;\n  }\n\n  setBuffer(locationOrName, buffer) {\n    let appAccessor = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    if (buffer.target === 34963) {\n      return this.setElementBuffer(buffer, appAccessor);\n    }\n\n    const {\n      location,\n      accessor\n    } = this._resolveLocationAndAccessor(locationOrName, buffer, buffer.accessor, appAccessor);\n\n    if (location >= 0) {\n      this.values[location] = buffer;\n      this.accessors[location] = accessor;\n      this.clearDrawParams();\n      this.vertexArrayObject.setBuffer(location, buffer, accessor);\n    }\n\n    return this;\n  }\n\n  setConstant(locationOrName, arrayValue) {\n    let appAccessor = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    const {\n      location,\n      accessor\n    } = this._resolveLocationAndAccessor(locationOrName, arrayValue, Object.assign({\n      size: arrayValue.length\n    }, appAccessor));\n\n    if (location >= 0) {\n      arrayValue = this.vertexArrayObject._normalizeConstantArrayValue(arrayValue);\n      this.values[location] = arrayValue;\n      this.accessors[location] = accessor;\n      this.clearDrawParams();\n      this.vertexArrayObject.enable(location, false);\n    }\n\n    return this;\n  }\n\n  unbindBuffers() {\n    this.vertexArrayObject.bind(() => {\n      if (this.elements) {\n        this.vertexArrayObject.setElementBuffer(null);\n      }\n\n      this.buffer = this.buffer || new Buffer(this.gl, {\n        accessor: {\n          size: 4\n        }\n      });\n\n      for (let location = 0; location < this.vertexArrayObject.MAX_ATTRIBUTES; location++) {\n        if (this.values[location] instanceof Buffer) {\n          this.gl.disableVertexAttribArray(location);\n          this.gl.bindBuffer(34962, this.buffer.handle);\n          this.gl.vertexAttribPointer(location, 1, 5126, false, 0, 0);\n        }\n      }\n    });\n    return this;\n  }\n\n  bindBuffers() {\n    this.vertexArrayObject.bind(() => {\n      if (this.elements) {\n        this.setElementBuffer(this.elements);\n      }\n\n      for (let location = 0; location < this.vertexArrayObject.MAX_ATTRIBUTES; location++) {\n        const buffer = this.values[location];\n\n        if (buffer instanceof Buffer) {\n          this.setBuffer(location, buffer);\n        }\n      }\n    });\n    return this;\n  }\n\n  bindForDraw(vertexCount, instanceCount, func) {\n    let value;\n    this.vertexArrayObject.bind(() => {\n      this._setConstantAttributes(vertexCount, instanceCount);\n\n      value = func();\n    });\n    return value;\n  }\n\n  _resolveLocationAndAccessor(locationOrName, value, valueAccessor, appAccessor) {\n    const INVALID_RESULT = {\n      location: -1,\n      accessor: null\n    };\n\n    const {\n      location,\n      name\n    } = this._getAttributeIndex(locationOrName);\n\n    if (!Number.isFinite(location) || location < 0) {\n      this.unused[locationOrName] = value;\n      log.once(3, () => \"unused value \".concat(locationOrName, \" in \").concat(this.id))();\n      return INVALID_RESULT;\n    }\n\n    const accessInfo = this._getAttributeInfo(name || location);\n\n    if (!accessInfo) {\n      return INVALID_RESULT;\n    }\n\n    const currentAccessor = this.accessors[location] || {};\n    const accessor = Accessor.resolve(accessInfo.accessor, currentAccessor, valueAccessor, appAccessor);\n    const {\n      size,\n      type\n    } = accessor;\n    assert(Number.isFinite(size) && Number.isFinite(type));\n    return {\n      location,\n      accessor\n    };\n  }\n\n  _getAttributeInfo(attributeName) {\n    return this.configuration && this.configuration.getAttributeInfo(attributeName);\n  }\n\n  _getAttributeIndex(locationOrName) {\n    const location = Number(locationOrName);\n\n    if (Number.isFinite(location)) {\n      return {\n        location\n      };\n    }\n\n    const multiLocation = MULTI_LOCATION_ATTRIBUTE_REGEXP.exec(locationOrName);\n    const name = multiLocation ? multiLocation[1] : locationOrName;\n    const locationOffset = multiLocation ? Number(multiLocation[2]) : 0;\n\n    if (this.configuration) {\n      return {\n        location: this.configuration.getAttributeLocation(name) + locationOffset,\n        name\n      };\n    }\n\n    return {\n      location: -1\n    };\n  }\n\n  _setAttribute(locationOrName, value) {\n    if (value instanceof Buffer) {\n      this.setBuffer(locationOrName, value);\n    } else if (Array.isArray(value) && value.length && value[0] instanceof Buffer) {\n      const buffer = value[0];\n      const accessor = value[1];\n      this.setBuffer(locationOrName, buffer, accessor);\n    } else if (ArrayBuffer.isView(value) || Array.isArray(value)) {\n      const constant = value;\n      this.setConstant(locationOrName, constant);\n    } else if (value.buffer instanceof Buffer) {\n      const accessor = value;\n      this.setBuffer(locationOrName, accessor.buffer, accessor);\n    } else {\n      throw new Error(ERR_ATTRIBUTE_TYPE);\n    }\n  }\n\n  _setConstantAttributes(vertexCount, instanceCount) {\n    const elementCount = Math.max(vertexCount | 0, instanceCount | 0);\n    let constant = this.values[0];\n\n    if (ArrayBuffer.isView(constant)) {\n      this._setConstantAttributeZero(constant, elementCount);\n    }\n\n    for (let location = 1; location < this.vertexArrayObject.MAX_ATTRIBUTES; location++) {\n      constant = this.values[location];\n\n      if (ArrayBuffer.isView(constant)) {\n        this._setConstantAttribute(location, constant);\n      }\n    }\n  }\n\n  _setConstantAttributeZero(constant, elementCount) {\n    if (VertexArrayObject.isSupported(this.gl, {\n      constantAttributeZero: true\n    })) {\n      this._setConstantAttribute(0, constant);\n\n      return;\n    }\n\n    const buffer = this.vertexArrayObject.getConstantBuffer(elementCount, constant);\n    this.vertexArrayObject.setBuffer(0, buffer, this.accessors[0]);\n  }\n\n  _setConstantAttribute(location, constant) {\n    VertexArrayObject.setConstant(this.gl, location, constant);\n  }\n\n  _updateDrawParams() {\n    const drawParams = {\n      isIndexed: false,\n      isInstanced: false,\n      indexCount: Infinity,\n      vertexCount: Infinity,\n      instanceCount: Infinity\n    };\n\n    for (let location = 0; location < this.vertexArrayObject.MAX_ATTRIBUTES; location++) {\n      this._updateDrawParamsForLocation(drawParams, location);\n    }\n\n    if (this.elements) {\n      drawParams.elementCount = this.elements.getElementCount(this.elements.accessor);\n      drawParams.isIndexed = true;\n      drawParams.indexType = this.elementsAccessor.type || this.elements.accessor.type;\n      drawParams.indexOffset = this.elementsAccessor.offset || 0;\n    }\n\n    if (drawParams.indexCount === Infinity) {\n      drawParams.indexCount = 0;\n    }\n\n    if (drawParams.vertexCount === Infinity) {\n      drawParams.vertexCount = 0;\n    }\n\n    if (drawParams.instanceCount === Infinity) {\n      drawParams.instanceCount = 0;\n    }\n\n    return drawParams;\n  }\n\n  _updateDrawParamsForLocation(drawParams, location) {\n    const value = this.values[location];\n    const accessor = this.accessors[location];\n\n    if (!value) {\n      return;\n    }\n\n    const {\n      divisor\n    } = accessor;\n    const isInstanced = divisor > 0;\n    drawParams.isInstanced = drawParams.isInstanced || isInstanced;\n\n    if (value instanceof Buffer) {\n      const buffer = value;\n\n      if (isInstanced) {\n        const instanceCount = buffer.getVertexCount(accessor);\n        drawParams.instanceCount = Math.min(drawParams.instanceCount, instanceCount);\n      } else {\n        const vertexCount = buffer.getVertexCount(accessor);\n        drawParams.vertexCount = Math.min(drawParams.vertexCount, vertexCount);\n      }\n    }\n  }\n\n  setElements() {\n    let elementBuffer = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    let accessor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    log.deprecated('setElements', 'setElementBuffer')();\n    return this.setElementBuffer(elementBuffer, accessor);\n  }\n\n}\n//# sourceMappingURL=vertex-array.js.map","function formatArrayValue(v, opts) {\n  const {\n    maxElts = 16,\n    size = 1\n  } = opts;\n  let string = '[';\n\n  for (let i = 0; i < v.length && i < maxElts; ++i) {\n    if (i > 0) {\n      string += \",\".concat(i % size === 0 ? ' ' : '');\n    }\n\n    string += formatValue(v[i], opts);\n  }\n\n  const terminator = v.length > maxElts ? '...' : ']';\n  return \"\".concat(string).concat(terminator);\n}\n\nexport function formatValue(v) {\n  let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const EPSILON = 1e-16;\n  const {\n    isInteger = false\n  } = opts;\n\n  if (Array.isArray(v) || ArrayBuffer.isView(v)) {\n    return formatArrayValue(v, opts);\n  }\n\n  if (!Number.isFinite(v)) {\n    return String(v);\n  }\n\n  if (Math.abs(v) < EPSILON) {\n    return isInteger ? '0' : '0.';\n  }\n\n  if (isInteger) {\n    return v.toFixed(0);\n  }\n\n  if (Math.abs(v) > 100 && Math.abs(v) < 10000) {\n    return v.toFixed(0);\n  }\n\n  const string = v.toPrecision(2);\n  const decimal = string.indexOf('.0');\n  return decimal === string.length - 2 ? string.slice(0, -1) : string;\n}\n//# sourceMappingURL=format-value.js.map","import { assert } from '../utils/assert';\nimport { formatValue } from '../utils/format-value';\nexport function getDebugTableForUniforms(_ref) {\n  let {\n    header = 'Uniforms',\n    program,\n    uniforms,\n    undefinedOnly = false\n  } = _ref;\n  assert(program);\n  const SHADER_MODULE_UNIFORM_REGEXP = '.*_.*';\n  const PROJECT_MODULE_UNIFORM_REGEXP = '.*Matrix';\n  const uniformLocations = program._uniformSetters;\n  const table = {};\n  const uniformNames = Object.keys(uniformLocations).sort();\n  let count = 0;\n\n  for (const uniformName of uniformNames) {\n    if (!uniformName.match(SHADER_MODULE_UNIFORM_REGEXP) && !uniformName.match(PROJECT_MODULE_UNIFORM_REGEXP)) {\n      if (addUniformToTable({\n        table,\n        header,\n        uniforms,\n        uniformName,\n        undefinedOnly\n      })) {\n        count++;\n      }\n    }\n  }\n\n  for (const uniformName of uniformNames) {\n    if (uniformName.match(PROJECT_MODULE_UNIFORM_REGEXP)) {\n      if (addUniformToTable({\n        table,\n        header,\n        uniforms,\n        uniformName,\n        undefinedOnly\n      })) {\n        count++;\n      }\n    }\n  }\n\n  for (const uniformName of uniformNames) {\n    if (!table[uniformName]) {\n      if (addUniformToTable({\n        table,\n        header,\n        uniforms,\n        uniformName,\n        undefinedOnly\n      })) {\n        count++;\n      }\n    }\n  }\n\n  let unusedCount = 0;\n  const unusedTable = {};\n\n  if (!undefinedOnly) {\n    for (const uniformName in uniforms) {\n      const uniform = uniforms[uniformName];\n\n      if (!table[uniformName]) {\n        unusedCount++;\n        unusedTable[uniformName] = {\n          Type: \"NOT USED: \".concat(uniform),\n          [header]: formatValue(uniform)\n        };\n      }\n    }\n  }\n\n  return {\n    table,\n    count,\n    unusedTable,\n    unusedCount\n  };\n}\n\nfunction addUniformToTable(_ref2) {\n  let {\n    table,\n    header,\n    uniforms,\n    uniformName,\n    undefinedOnly\n  } = _ref2;\n  const value = uniforms[uniformName];\n  const isDefined = isUniformDefined(value);\n\n  if (!undefinedOnly || !isDefined) {\n    table[uniformName] = {\n      [header]: isDefined ? formatValue(value) : 'N/A',\n      'Uniform Type': isDefined ? value : 'NOT PROVIDED'\n    };\n    return true;\n  }\n\n  return false;\n}\n\nfunction isUniformDefined(value) {\n  return value !== undefined && value !== null;\n}\n//# sourceMappingURL=debug-uniforms.js.map","import Buffer from '../classes/buffer';\nimport { getKey } from '../webgl-utils/constants-to-keys';\nimport { getCompositeGLType } from '../webgl-utils/attribute-utils';\nimport { formatValue } from '../utils/format-value';\nexport function getDebugTableForVertexArray(_ref) {\n  let {\n    vertexArray,\n    header = 'Attributes'\n  } = _ref;\n\n  if (!vertexArray.configuration) {\n    return {};\n  }\n\n  const table = {};\n\n  if (vertexArray.elements) {\n    table.ELEMENT_ARRAY_BUFFER = getDebugTableRow(vertexArray, vertexArray.elements, null, header);\n  }\n\n  const attributes = vertexArray.values;\n\n  for (const attributeLocation in attributes) {\n    const info = vertexArray._getAttributeInfo(attributeLocation);\n\n    if (info) {\n      let rowHeader = \"\".concat(attributeLocation, \": \").concat(info.name);\n      const accessor = vertexArray.accessors[info.location];\n\n      if (accessor) {\n        rowHeader = \"\".concat(attributeLocation, \": \").concat(getGLSLDeclaration(info.name, accessor));\n      }\n\n      table[rowHeader] = getDebugTableRow(vertexArray, attributes[attributeLocation], accessor, header);\n    }\n  }\n\n  return table;\n}\n\nfunction getDebugTableRow(vertexArray, attribute, accessor, header) {\n  const {\n    gl\n  } = vertexArray;\n\n  if (!attribute) {\n    return {\n      [header]: 'null',\n      'Format ': 'N/A'\n    };\n  }\n\n  let type = 'NOT PROVIDED';\n  let size = 1;\n  let verts = 0;\n  let bytes = 0;\n  let isInteger;\n  let marker;\n  let value;\n\n  if (accessor) {\n    type = accessor.type;\n    size = accessor.size;\n    type = String(type).replace('Array', '');\n    isInteger = type.indexOf('nt') !== -1;\n  }\n\n  if (attribute instanceof Buffer) {\n    const buffer = attribute;\n    const {\n      data,\n      changed\n    } = buffer.getDebugData();\n    marker = changed ? '*' : '';\n    value = data;\n    bytes = buffer.byteLength;\n    verts = bytes / data.BYTES_PER_ELEMENT / size;\n    let format;\n\n    if (accessor) {\n      const instanced = accessor.divisor > 0;\n      format = \"\".concat(instanced ? 'I ' : 'P ', \" \").concat(verts, \" (x\").concat(size, \"=\").concat(bytes, \" bytes \").concat(getKey(gl, type), \")\");\n    } else {\n      isInteger = true;\n      format = \"\".concat(bytes, \" bytes\");\n    }\n\n    return {\n      [header]: \"\".concat(marker).concat(formatValue(value, {\n        size,\n        isInteger\n      })),\n      'Format ': format\n    };\n  }\n\n  value = attribute;\n  size = attribute.length;\n  type = String(attribute.constructor.name).replace('Array', '');\n  isInteger = type.indexOf('nt') !== -1;\n  return {\n    [header]: \"\".concat(formatValue(value, {\n      size,\n      isInteger\n    }), \" (constant)\"),\n    'Format ': \"\".concat(size, \"x\").concat(type, \" (constant)\")\n  };\n}\n\nfunction getGLSLDeclaration(name, accessor) {\n  const {\n    type,\n    size\n  } = accessor;\n  const typeAndName = getCompositeGLType(type, size);\n  return typeAndName ? \"\".concat(name, \" (\").concat(typeAndName.name, \")\") : name;\n}\n//# sourceMappingURL=debug-vertex-array.js.map","import { getCompositeGLType } from '../webgl-utils/attribute-utils';\nexport function getDebugTableForProgramConfiguration(config) {\n  const table = {};\n  const header = \"Accessors for \".concat(config.id);\n\n  for (const attributeInfo of config.attributeInfos) {\n    if (attributeInfo) {\n      const glslDeclaration = getGLSLDeclaration(attributeInfo);\n      table[\"in \".concat(glslDeclaration)] = {\n        [header]: JSON.stringify(attributeInfo.accessor)\n      };\n    }\n  }\n\n  for (const varyingInfo of config.varyingInfos) {\n    if (varyingInfo) {\n      const glslDeclaration = getGLSLDeclaration(varyingInfo);\n      table[\"out \".concat(glslDeclaration)] = {\n        [header]: JSON.stringify(varyingInfo.accessor)\n      };\n    }\n  }\n\n  return table;\n}\n\nfunction getGLSLDeclaration(attributeInfo) {\n  const {\n    type,\n    size\n  } = attributeInfo.accessor;\n  const typeAndName = getCompositeGLType(type, size);\n\n  if (typeAndName) {\n    return \"\".concat(typeAndName.name, \" \").concat(attributeInfo.name);\n  }\n\n  return attributeInfo.name;\n}\n//# sourceMappingURL=debug-program-configuration.js.map","import { isWebGL, createGLContext, instrumentGLContext, resizeGLContext, resetParameters } from '@luma.gl/gltools';\nimport { requestAnimationFrame, cancelAnimationFrame, Query, lumaStats, Framebuffer, log, assert } from '@luma.gl/webgl';\nimport { isBrowser } from '@probe.gl/env';\nconst isPage = isBrowser() && typeof document !== 'undefined';\nlet statIdCounter = 0;\nexport default class AnimationLoop {\n  constructor() {\n    let props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      onCreateContext = opts => createGLContext(opts),\n      onAddHTML = null,\n      onInitialize = () => {},\n      onRender = () => {},\n      onFinalize = () => {},\n      onError,\n      gl = null,\n      glOptions = {},\n      debug = false,\n      createFramebuffer = false,\n      autoResizeViewport = true,\n      autoResizeDrawingBuffer = true,\n      stats = lumaStats.get(\"animation-loop-\".concat(statIdCounter++))\n    } = props;\n    let {\n      useDevicePixels = true\n    } = props;\n\n    if ('useDevicePixelRatio' in props) {\n      log.deprecated('useDevicePixelRatio', 'useDevicePixels')();\n      useDevicePixels = props.useDevicePixelRatio;\n    }\n\n    this.props = {\n      onCreateContext,\n      onAddHTML,\n      onInitialize,\n      onRender,\n      onFinalize,\n      onError,\n      gl,\n      glOptions,\n      debug,\n      createFramebuffer\n    };\n    this.gl = gl;\n    this.needsRedraw = null;\n    this.timeline = null;\n    this.stats = stats;\n    this.cpuTime = this.stats.get('CPU Time');\n    this.gpuTime = this.stats.get('GPU Time');\n    this.frameRate = this.stats.get('Frame Rate');\n    this._initialized = false;\n    this._running = false;\n    this._animationFrameId = null;\n    this._nextFramePromise = null;\n    this._resolveNextFrame = null;\n    this._cpuStartTime = 0;\n    this.setProps({\n      autoResizeViewport,\n      autoResizeDrawingBuffer,\n      useDevicePixels\n    });\n    this.start = this.start.bind(this);\n    this.stop = this.stop.bind(this);\n    this._pageLoadPromise = null;\n    this._onMousemove = this._onMousemove.bind(this);\n    this._onMouseleave = this._onMouseleave.bind(this);\n  }\n\n  delete() {\n    this.stop();\n\n    this._setDisplay(null);\n  }\n\n  setNeedsRedraw(reason) {\n    assert(typeof reason === 'string');\n    this.needsRedraw = this.needsRedraw || reason;\n    return this;\n  }\n\n  setProps(props) {\n    if ('autoResizeViewport' in props) {\n      this.autoResizeViewport = props.autoResizeViewport;\n    }\n\n    if ('autoResizeDrawingBuffer' in props) {\n      this.autoResizeDrawingBuffer = props.autoResizeDrawingBuffer;\n    }\n\n    if ('useDevicePixels' in props) {\n      this.useDevicePixels = props.useDevicePixels;\n    }\n\n    return this;\n  }\n\n  start() {\n    let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if (this._running) {\n      return this;\n    }\n\n    this._running = true;\n\n    const startPromise = this._getPageLoadPromise().then(() => {\n      if (!this._running || this._initialized) {\n        return null;\n      }\n\n      this._createWebGLContext(opts);\n\n      this._createFramebuffer();\n\n      this._startEventHandling();\n\n      this._initializeCallbackData();\n\n      this._updateCallbackData();\n\n      this._resizeCanvasDrawingBuffer();\n\n      this._resizeViewport();\n\n      this._gpuTimeQuery = Query.isSupported(this.gl, ['timers']) ? new Query(this.gl) : null;\n      this._initialized = true;\n      return this.onInitialize(this.animationProps);\n    }).then(appContext => {\n      if (this._running) {\n        this._addCallbackData(appContext || {});\n\n        if (appContext !== false) {\n          this._startLoop();\n        }\n      }\n    });\n\n    if (this.props.onError) {\n      startPromise.catch(this.props.onError);\n    }\n\n    return this;\n  }\n\n  redraw() {\n    if (this.isContextLost()) {\n      return this;\n    }\n\n    this._beginTimers();\n\n    this._setupFrame();\n\n    this._updateCallbackData();\n\n    this._renderFrame(this.animationProps);\n\n    this._clearNeedsRedraw();\n\n    if (this.offScreen && this.gl.commit) {\n      this.gl.commit();\n    }\n\n    if (this._resolveNextFrame) {\n      this._resolveNextFrame(this);\n\n      this._nextFramePromise = null;\n      this._resolveNextFrame = null;\n    }\n\n    this._endTimers();\n\n    return this;\n  }\n\n  stop() {\n    if (this._running) {\n      this._finalizeCallbackData();\n\n      this._cancelAnimationFrame(this._animationFrameId);\n\n      this._nextFramePromise = null;\n      this._resolveNextFrame = null;\n      this._animationFrameId = null;\n      this._running = false;\n    }\n\n    return this;\n  }\n\n  attachTimeline(timeline) {\n    this.timeline = timeline;\n    return this.timeline;\n  }\n\n  detachTimeline() {\n    this.timeline = null;\n  }\n\n  waitForRender() {\n    this.setNeedsRedraw('waitForRender');\n\n    if (!this._nextFramePromise) {\n      this._nextFramePromise = new Promise(resolve => {\n        this._resolveNextFrame = resolve;\n      });\n    }\n\n    return this._nextFramePromise;\n  }\n\n  async toDataURL() {\n    this.setNeedsRedraw('toDataURL');\n    await this.waitForRender();\n    return this.gl.canvas.toDataURL();\n  }\n\n  isContextLost() {\n    return this.gl.isContextLost();\n  }\n\n  onCreateContext() {\n    return this.props.onCreateContext(...arguments);\n  }\n\n  onInitialize() {\n    return this.props.onInitialize(...arguments);\n  }\n\n  onRender() {\n    return this.props.onRender(...arguments);\n  }\n\n  onFinalize() {\n    return this.props.onFinalize(...arguments);\n  }\n\n  getHTMLControlValue(id) {\n    let defaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    const element = document.getElementById(id);\n    return element ? Number(element.value) : defaultValue;\n  }\n\n  setViewParameters() {\n    log.removed('AnimationLoop.setViewParameters', 'AnimationLoop.setProps')();\n    return this;\n  }\n\n  _startLoop() {\n    const renderFrame = () => {\n      if (!this._running) {\n        return;\n      }\n\n      this.redraw();\n      this._animationFrameId = this._requestAnimationFrame(renderFrame);\n    };\n\n    this._cancelAnimationFrame(this._animationFrameId);\n\n    this._animationFrameId = this._requestAnimationFrame(renderFrame);\n  }\n\n  _getPageLoadPromise() {\n    if (!this._pageLoadPromise) {\n      this._pageLoadPromise = isPage ? new Promise((resolve, reject) => {\n        if (isPage && document.readyState === 'complete') {\n          resolve(document);\n          return;\n        }\n\n        window.addEventListener('load', () => {\n          resolve(document);\n        });\n      }) : Promise.resolve({});\n    }\n\n    return this._pageLoadPromise;\n  }\n\n  _setDisplay(display) {\n    if (this.display) {\n      this.display.delete();\n      this.display.animationLoop = null;\n    }\n\n    if (display) {\n      display.animationLoop = this;\n    }\n\n    this.display = display;\n  }\n\n  _cancelAnimationFrame(animationFrameId) {\n    if (this.display && this.display.cancelAnimationFrame) {\n      return this.display.cancelAnimationFrame(animationFrameId);\n    }\n\n    return cancelAnimationFrame(animationFrameId);\n  }\n\n  _requestAnimationFrame(renderFrameCallback) {\n    if (this._running) {\n      if (this.display && this.display.requestAnimationFrame) {\n        return this.display.requestAnimationFrame(renderFrameCallback);\n      }\n\n      return requestAnimationFrame(renderFrameCallback);\n    }\n\n    return undefined;\n  }\n\n  _renderFrame() {\n    if (this.display) {\n      this.display._renderFrame(...arguments);\n\n      return;\n    }\n\n    this.onRender(...arguments);\n  }\n\n  _clearNeedsRedraw() {\n    this.needsRedraw = null;\n  }\n\n  _setupFrame() {\n    this._resizeCanvasDrawingBuffer();\n\n    this._resizeViewport();\n\n    this._resizeFramebuffer();\n  }\n\n  _initializeCallbackData() {\n    this.animationProps = {\n      gl: this.gl,\n      stop: this.stop,\n      canvas: this.gl.canvas,\n      framebuffer: this.framebuffer,\n      useDevicePixels: this.useDevicePixels,\n      needsRedraw: null,\n      startTime: Date.now(),\n      engineTime: 0,\n      tick: 0,\n      tock: 0,\n      time: 0,\n      _timeline: this.timeline,\n      _loop: this,\n      _animationLoop: this,\n      _mousePosition: null\n    };\n  }\n\n  _updateCallbackData() {\n    const {\n      width,\n      height,\n      aspect\n    } = this._getSizeAndAspect();\n\n    if (width !== this.animationProps.width || height !== this.animationProps.height) {\n      this.setNeedsRedraw('drawing buffer resized');\n    }\n\n    if (aspect !== this.animationProps.aspect) {\n      this.setNeedsRedraw('drawing buffer aspect changed');\n    }\n\n    this.animationProps.width = width;\n    this.animationProps.height = height;\n    this.animationProps.aspect = aspect;\n    this.animationProps.needsRedraw = this.needsRedraw;\n    this.animationProps.engineTime = Date.now() - this.animationProps.startTime;\n\n    if (this.timeline) {\n      this.timeline.update(this.animationProps.engineTime);\n    }\n\n    this.animationProps.tick = Math.floor(this.animationProps.time / 1000 * 60);\n    this.animationProps.tock++;\n    this.animationProps.time = this.timeline ? this.timeline.getTime() : this.animationProps.engineTime;\n    this.animationProps._offScreen = this.offScreen;\n  }\n\n  _finalizeCallbackData() {\n    this.onFinalize(this.animationProps);\n  }\n\n  _addCallbackData(appContext) {\n    if (typeof appContext === 'object' && appContext !== null) {\n      this.animationProps = Object.assign({}, this.animationProps, appContext);\n    }\n  }\n\n  _createWebGLContext(opts) {\n    this.offScreen = opts.canvas && typeof OffscreenCanvas !== 'undefined' && opts.canvas instanceof OffscreenCanvas;\n    opts = Object.assign({}, opts, this.props.glOptions);\n    this.gl = this.props.gl ? instrumentGLContext(this.props.gl, opts) : this.onCreateContext(opts);\n\n    if (!isWebGL(this.gl)) {\n      throw new Error('AnimationLoop.onCreateContext - illegal context returned');\n    }\n\n    resetParameters(this.gl);\n\n    this._createInfoDiv();\n  }\n\n  _createInfoDiv() {\n    if (this.gl.canvas && this.props.onAddHTML) {\n      const wrapperDiv = document.createElement('div');\n      document.body.appendChild(wrapperDiv);\n      wrapperDiv.style.position = 'relative';\n      const div = document.createElement('div');\n      div.style.position = 'absolute';\n      div.style.left = '10px';\n      div.style.bottom = '10px';\n      div.style.width = '300px';\n      div.style.background = 'white';\n      wrapperDiv.appendChild(this.gl.canvas);\n      wrapperDiv.appendChild(div);\n      const html = this.props.onAddHTML(div);\n\n      if (html) {\n        div.innerHTML = html;\n      }\n    }\n  }\n\n  _getSizeAndAspect() {\n    const width = this.gl.drawingBufferWidth;\n    const height = this.gl.drawingBufferHeight;\n    let aspect = 1;\n    const {\n      canvas\n    } = this.gl;\n\n    if (canvas && canvas.clientHeight) {\n      aspect = canvas.clientWidth / canvas.clientHeight;\n    } else if (width > 0 && height > 0) {\n      aspect = width / height;\n    }\n\n    return {\n      width,\n      height,\n      aspect\n    };\n  }\n\n  _resizeViewport() {\n    if (this.autoResizeViewport) {\n      this.gl.viewport(0, 0, this.gl.drawingBufferWidth, this.gl.drawingBufferHeight);\n    }\n  }\n\n  _resizeCanvasDrawingBuffer() {\n    if (this.autoResizeDrawingBuffer) {\n      resizeGLContext(this.gl, {\n        useDevicePixels: this.useDevicePixels\n      });\n    }\n  }\n\n  _createFramebuffer() {\n    if (this.props.createFramebuffer) {\n      this.framebuffer = new Framebuffer(this.gl);\n    }\n  }\n\n  _resizeFramebuffer() {\n    if (this.framebuffer) {\n      this.framebuffer.resize({\n        width: this.gl.drawingBufferWidth,\n        height: this.gl.drawingBufferHeight\n      });\n    }\n  }\n\n  _beginTimers() {\n    this.frameRate.timeEnd();\n    this.frameRate.timeStart();\n\n    if (this._gpuTimeQuery && this._gpuTimeQuery.isResultAvailable() && !this._gpuTimeQuery.isTimerDisjoint()) {\n      this.stats.get('GPU Time').addTime(this._gpuTimeQuery.getTimerMilliseconds());\n    }\n\n    if (this._gpuTimeQuery) {\n      this._gpuTimeQuery.beginTimeElapsedQuery();\n    }\n\n    this.cpuTime.timeStart();\n  }\n\n  _endTimers() {\n    this.cpuTime.timeEnd();\n\n    if (this._gpuTimeQuery) {\n      this._gpuTimeQuery.end();\n    }\n  }\n\n  _startEventHandling() {\n    const {\n      canvas\n    } = this.gl;\n\n    if (canvas) {\n      canvas.addEventListener('mousemove', this._onMousemove);\n      canvas.addEventListener('mouseleave', this._onMouseleave);\n    }\n  }\n\n  _onMousemove(e) {\n    this.animationProps._mousePosition = [e.offsetX, e.offsetY];\n  }\n\n  _onMouseleave(e) {\n    this.animationProps._mousePosition = null;\n  }\n\n}\n//# sourceMappingURL=animation-loop.js.map","export const VERTEX_SHADER = 'vs';\nexport const FRAGMENT_SHADER = 'fs';\n//# sourceMappingURL=constants.js.map","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'shadertools: assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","const TYPE_DEFINITIONS = {\n  number: {\n    validate(value, propType) {\n      return Number.isFinite(value) && (!('max' in propType) || value <= propType.max) && (!('min' in propType) || value >= propType.min);\n    }\n\n  },\n  array: {\n    validate(value, propType) {\n      return Array.isArray(value) || ArrayBuffer.isView(value);\n    }\n\n  }\n};\nexport function parsePropTypes(propDefs) {\n  const propTypes = {};\n\n  for (const propName in propDefs) {\n    const propDef = propDefs[propName];\n    const propType = parsePropType(propDef);\n    propTypes[propName] = propType;\n  }\n\n  return propTypes;\n}\n\nfunction parsePropType(propDef) {\n  let type = getTypeOf(propDef);\n\n  if (type === 'object') {\n    if (!propDef) {\n      return {\n        type: 'object',\n        value: null\n      };\n    }\n\n    if ('type' in propDef) {\n      return Object.assign({}, propDef, TYPE_DEFINITIONS[propDef.type]);\n    }\n\n    if (!('value' in propDef)) {\n      return {\n        type: 'object',\n        value: propDef\n      };\n    }\n\n    type = getTypeOf(propDef.value);\n    return Object.assign({\n      type\n    }, propDef, TYPE_DEFINITIONS[type]);\n  }\n\n  return Object.assign({\n    type,\n    value: propDef\n  }, TYPE_DEFINITIONS[type]);\n}\n\nfunction getTypeOf(value) {\n  if (Array.isArray(value) || ArrayBuffer.isView(value)) {\n    return 'array';\n  }\n\n  return typeof value;\n}\n//# sourceMappingURL=prop-types.js.map","import { assert } from '../utils';\nimport { parsePropTypes } from './filters/prop-types';\nconst VERTEX_SHADER = 'vs';\nconst FRAGMENT_SHADER = 'fs';\nexport default class ShaderModule {\n  constructor(_ref) {\n    let {\n      name,\n      vs,\n      fs,\n      dependencies = [],\n      uniforms,\n      getUniforms,\n      deprecations = [],\n      defines = {},\n      inject = {},\n      vertexShader,\n      fragmentShader\n    } = _ref;\n    assert(typeof name === 'string');\n    this.name = name;\n    this.vs = vs || vertexShader;\n    this.fs = fs || fragmentShader;\n    this.getModuleUniforms = getUniforms;\n    this.dependencies = dependencies;\n    this.deprecations = this._parseDeprecationDefinitions(deprecations);\n    this.defines = defines;\n    this.injections = normalizeInjections(inject);\n\n    if (uniforms) {\n      this.uniforms = parsePropTypes(uniforms);\n    }\n  }\n\n  getModuleSource(type) {\n    let moduleSource;\n\n    switch (type) {\n      case VERTEX_SHADER:\n        moduleSource = this.vs || '';\n        break;\n\n      case FRAGMENT_SHADER:\n        moduleSource = this.fs || '';\n        break;\n\n      default:\n        assert(false);\n    }\n\n    return \"#define MODULE_\".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi, '_'), \"\\n\").concat(moduleSource, \"// END MODULE_\").concat(this.name, \"\\n\\n\");\n  }\n\n  getUniforms(opts, uniforms) {\n    if (this.getModuleUniforms) {\n      return this.getModuleUniforms(opts, uniforms);\n    }\n\n    if (this.uniforms) {\n      return this._defaultGetUniforms(opts);\n    }\n\n    return {};\n  }\n\n  getDefines() {\n    return this.defines;\n  }\n\n  checkDeprecations(shaderSource, log) {\n    this.deprecations.forEach(def => {\n      if (def.regex.test(shaderSource)) {\n        if (def.deprecated) {\n          log.deprecated(def.old, def.new)();\n        } else {\n          log.removed(def.old, def.new)();\n        }\n      }\n    });\n  }\n\n  _parseDeprecationDefinitions(deprecations) {\n    deprecations.forEach(def => {\n      switch (def.type) {\n        case 'function':\n          def.regex = new RegExp(\"\\\\b\".concat(def.old, \"\\\\(\"));\n          break;\n\n        default:\n          def.regex = new RegExp(\"\".concat(def.type, \" \").concat(def.old, \";\"));\n      }\n    });\n    return deprecations;\n  }\n\n  _defaultGetUniforms() {\n    let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const uniforms = {};\n    const propTypes = this.uniforms;\n\n    for (const key in propTypes) {\n      const propDef = propTypes[key];\n\n      if (key in opts && !propDef.private) {\n        if (propDef.validate) {\n          assert(propDef.validate(opts[key], propDef), \"\".concat(this.name, \": invalid \").concat(key));\n        }\n\n        uniforms[key] = opts[key];\n      } else {\n        uniforms[key] = propDef.value;\n      }\n    }\n\n    return uniforms;\n  }\n\n}\nexport function normalizeShaderModule(module) {\n  if (!module.normalized) {\n    module.normalized = true;\n\n    if (module.uniforms && !module.getUniforms) {\n      const shaderModule = new ShaderModule(module);\n      module.getUniforms = shaderModule.getUniforms.bind(shaderModule);\n    }\n  }\n\n  return module;\n}\n\nfunction normalizeInjections(injections) {\n  const result = {\n    vs: {},\n    fs: {}\n  };\n\n  for (const hook in injections) {\n    let injection = injections[hook];\n    const stage = hook.slice(0, 2);\n\n    if (typeof injection === 'string') {\n      injection = {\n        order: 0,\n        injection\n      };\n    }\n\n    result[stage][hook] = injection;\n  }\n\n  return result;\n}\n//# sourceMappingURL=shader-module.js.map","import ShaderModule from './shader-module';\nimport { assert } from '../utils';\nexport function resolveModules(modules) {\n  return getShaderDependencies(instantiateModules(modules));\n}\n\nfunction getShaderDependencies(modules) {\n  const moduleMap = {};\n  const moduleDepth = {};\n  getDependencyGraph({\n    modules,\n    level: 0,\n    moduleMap,\n    moduleDepth\n  });\n  return Object.keys(moduleDepth).sort((a, b) => moduleDepth[b] - moduleDepth[a]).map(name => moduleMap[name]);\n}\n\nfunction getDependencyGraph(_ref) {\n  let {\n    modules,\n    level,\n    moduleMap,\n    moduleDepth\n  } = _ref;\n\n  if (level >= 5) {\n    throw new Error('Possible loop in shader dependency graph');\n  }\n\n  for (const module of modules) {\n    moduleMap[module.name] = module;\n\n    if (moduleDepth[module.name] === undefined || moduleDepth[module.name] < level) {\n      moduleDepth[module.name] = level;\n    }\n  }\n\n  for (const module of modules) {\n    if (module.dependencies) {\n      getDependencyGraph({\n        modules: module.dependencies,\n        level: level + 1,\n        moduleMap,\n        moduleDepth\n      });\n    }\n  }\n}\n\nfunction instantiateModules(modules, seen) {\n  return modules.map(module => {\n    if (module instanceof ShaderModule) {\n      return module;\n    }\n\n    assert(typeof module !== 'string', \"Shader module use by name is deprecated. Import shader module '\".concat(module, \"' and use it directly.\"));\n    assert(module.name, 'shader module has no name');\n    module = new ShaderModule(module);\n    module.dependencies = instantiateModules(module.dependencies);\n    return module;\n  });\n}\n\nexport const TEST_EXPORTS = {\n  getShaderDependencies,\n  getDependencyGraph\n};\n//# sourceMappingURL=resolve-modules.js.map","export default function isOldIE() {\n  let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  const navigator = typeof window !== 'undefined' ? window.navigator || {} : {};\n  const userAgent = opts.userAgent || navigator.userAgent || '';\n  const isMSIE = userAgent.indexOf('MSIE ') !== -1;\n  const isTrident = userAgent.indexOf('Trident/') !== -1;\n  return isMSIE || isTrident;\n}\n//# sourceMappingURL=is-old-ie.js.map","import isOldIE from './is-old-ie';\nimport assert from './assert';\nconst GL_VENDOR = 0x1f00;\nconst GL_RENDERER = 0x1f01;\nconst GL_VERSION = 0x1f02;\nconst GL_SHADING_LANGUAGE_VERSION = 0x8b8c;\nconst WEBGL_FEATURES = {\n  GLSL_FRAG_DATA: ['WEBGL_draw_buffers', true],\n  GLSL_FRAG_DEPTH: ['EXT_frag_depth', true],\n  GLSL_DERIVATIVES: ['OES_standard_derivatives', true],\n  GLSL_TEXTURE_LOD: ['EXT_shader_texture_lod', true]\n};\nconst FEATURES = {};\nObject.keys(WEBGL_FEATURES).forEach(key => {\n  FEATURES[key] = key;\n});\nexport { FEATURES };\n\nfunction isWebGL2(gl) {\n  if (typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext) {\n    return true;\n  }\n\n  return Boolean(gl && gl._version === 2);\n}\n\nexport function getContextInfo(gl) {\n  const info = gl.getExtension('WEBGL_debug_renderer_info');\n  const vendor = gl.getParameter(info && info.UNMASKED_VENDOR_WEBGL || GL_VENDOR);\n  const renderer = gl.getParameter(info && info.UNMASKED_RENDERER_WEBGL || GL_RENDERER);\n  const gpuVendor = identifyGPUVendor(vendor, renderer);\n  const gpuInfo = {\n    gpuVendor,\n    vendor,\n    renderer,\n    version: gl.getParameter(GL_VERSION),\n    shadingLanguageVersion: gl.getParameter(GL_SHADING_LANGUAGE_VERSION)\n  };\n  return gpuInfo;\n}\n\nfunction identifyGPUVendor(vendor, renderer) {\n  if (vendor.match(/NVIDIA/i) || renderer.match(/NVIDIA/i)) {\n    return 'NVIDIA';\n  }\n\n  if (vendor.match(/INTEL/i) || renderer.match(/INTEL/i)) {\n    return 'INTEL';\n  }\n\n  if (vendor.match(/AMD/i) || renderer.match(/AMD/i) || vendor.match(/ATI/i) || renderer.match(/ATI/i)) {\n    return 'AMD';\n  }\n\n  return 'UNKNOWN GPU';\n}\n\nconst compiledGlslExtensions = {};\nexport function canCompileGLGSExtension(gl, cap) {\n  let opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  const feature = WEBGL_FEATURES[cap];\n  assert(feature, cap);\n\n  if (!isOldIE(opts)) {\n    return true;\n  }\n\n  if (cap in compiledGlslExtensions) {\n    return compiledGlslExtensions[cap];\n  }\n\n  const extensionName = feature[0];\n  const behavior = opts.behavior || 'enable';\n  const source = \"#extension GL_\".concat(extensionName, \" : \").concat(behavior, \"\\nvoid main(void) {}\");\n  const shader = gl.createShader(35633);\n  gl.shaderSource(shader, source);\n  gl.compileShader(shader);\n  const canCompile = gl.getShaderParameter(shader, 35713);\n  gl.deleteShader(shader);\n  compiledGlslExtensions[cap] = canCompile;\n  return canCompile;\n}\n\nfunction getFeature(gl, cap) {\n  const feature = WEBGL_FEATURES[cap];\n  assert(feature, cap);\n  const extensionName = isWebGL2(gl) ? feature[1] || feature[0] : feature[0];\n  const value = typeof extensionName === 'string' ? Boolean(gl.getExtension(extensionName)) : extensionName;\n  assert(value === false || value === true);\n  return value;\n}\n\nexport function hasFeatures(gl, features) {\n  features = Array.isArray(features) ? features : [features];\n  return features.every(feature => getFeature(gl, feature));\n}\n//# sourceMappingURL=webgl-info.js.map","import { getContextInfo, hasFeatures, canCompileGLGSExtension, FEATURES } from '../utils/webgl-info';\nexport function getPlatformShaderDefines(gl) {\n  const debugInfo = getContextInfo(gl);\n\n  switch (debugInfo.gpuVendor.toLowerCase()) {\n    case 'nvidia':\n      return \"#define NVIDIA_GPU\\n// Nvidia optimizes away the calculation necessary for emulated fp64\\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\\n\";\n\n    case 'intel':\n      return \"#define INTEL_GPU\\n// Intel optimizes away the calculation necessary for emulated fp64\\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\\n// Intel's built-in 'tan' function doesn't have acceptable precision\\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\\n\";\n\n    case 'amd':\n      return \"#define AMD_GPU\\n\";\n\n    default:\n      return \"#define DEFAULT_GPU\\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\\n// Intel's built-in 'tan' function doesn't have acceptable precision\\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\\n\";\n  }\n}\nexport function getVersionDefines(gl, glslVersion, isFragment) {\n  let versionDefines = \"#if (__VERSION__ > 120)\\n\\n# define FEATURE_GLSL_DERIVATIVES\\n# define FEATURE_GLSL_DRAW_BUFFERS\\n# define FEATURE_GLSL_FRAG_DEPTH\\n# define FEATURE_GLSL_TEXTURE_LOD\\n\\n// DEPRECATED FLAGS, remove in v9\\n# define FRAG_DEPTH\\n# define DERIVATIVES\\n# define DRAW_BUFFERS\\n# define TEXTURE_LOD\\n\\n#endif // __VERSION\\n\";\n\n  if (hasFeatures(gl, FEATURES.GLSL_FRAG_DEPTH)) {\n    versionDefines += \"\\n// FRAG_DEPTH => gl_FragDepth is available\\n#ifdef GL_EXT_frag_depth\\n#extension GL_EXT_frag_depth : enable\\n# define FEATURE_GLSL_FRAG_DEPTH\\n# define FRAG_DEPTH\\n# define gl_FragDepth gl_FragDepthEXT\\n#endif\\n\";\n  }\n\n  if (hasFeatures(gl, FEATURES.GLSL_DERIVATIVES) && canCompileGLGSExtension(gl, FEATURES.GLSL_DERIVATIVES)) {\n    versionDefines += \"\\n// DERIVATIVES => dxdF, dxdY and fwidth are available\\n#ifdef GL_OES_standard_derivatives\\n#extension GL_OES_standard_derivatives : enable\\n# define FEATURE_GLSL_DERIVATIVES\\n# define DERIVATIVES\\n#endif\\n\";\n  }\n\n  if (hasFeatures(gl, FEATURES.GLSL_FRAG_DATA) && canCompileGLGSExtension(gl, FEATURES.GLSL_FRAG_DATA, {\n    behavior: 'require'\n  })) {\n    versionDefines += \"\\n// DRAW_BUFFERS => gl_FragData[] is available\\n#ifdef GL_EXT_draw_buffers\\n#extension GL_EXT_draw_buffers : require\\n#define FEATURE_GLSL_DRAW_BUFFERS\\n#define DRAW_BUFFERS\\n#endif\\n\";\n  }\n\n  if (hasFeatures(gl, FEATURES.GLSL_TEXTURE_LOD)) {\n    versionDefines += \"// TEXTURE_LOD => texture2DLod etc are available\\n#ifdef GL_EXT_shader_texture_lod\\n#extension GL_EXT_shader_texture_lod : enable\\n\\n# define FEATURE_GLSL_TEXTURE_LOD\\n# define TEXTURE_LOD\\n\\n#endif\\n\";\n  }\n\n  return versionDefines;\n}\n//# sourceMappingURL=platform-defines.js.map","export const MODULE_INJECTORS_VS = \"#ifdef MODULE_LOGDEPTH\\n  logdepth_adjustPosition(gl_Position);\\n#endif\\n\";\nexport const MODULE_INJECTORS_FS = \"#ifdef MODULE_MATERIAL\\n  gl_FragColor = material_filterColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_LIGHTING\\n  gl_FragColor = lighting_filterColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_FOG\\n  gl_FragColor = fog_filterColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_PICKING\\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_LOGDEPTH\\n  logdepth_setFragDepth();\\n#endif\\n\";\n//# sourceMappingURL=module-injectors.js.map","import { MODULE_INJECTORS_VS, MODULE_INJECTORS_FS } from '../modules/module-injectors';\nimport { VERTEX_SHADER, FRAGMENT_SHADER } from './constants';\nimport { assert } from '../utils';\nconst MODULE_INJECTORS = {\n  [VERTEX_SHADER]: MODULE_INJECTORS_VS,\n  [FRAGMENT_SHADER]: MODULE_INJECTORS_FS\n};\nexport const DECLARATION_INJECT_MARKER = '__LUMA_INJECT_DECLARATIONS__';\nconst REGEX_START_OF_MAIN = /void\\s+main\\s*\\([^)]*\\)\\s*\\{\\n?/;\nconst REGEX_END_OF_MAIN = /}\\n?[^{}]*$/;\nconst fragments = [];\nexport default function injectShader(source, type, inject) {\n  let injectStandardStubs = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  const isVertex = type === VERTEX_SHADER;\n\n  for (const key in inject) {\n    const fragmentData = inject[key];\n    fragmentData.sort((a, b) => a.order - b.order);\n    fragments.length = fragmentData.length;\n\n    for (let i = 0, len = fragmentData.length; i < len; ++i) {\n      fragments[i] = fragmentData[i].injection;\n    }\n\n    const fragmentString = \"\".concat(fragments.join('\\n'), \"\\n\");\n\n    switch (key) {\n      case 'vs:#decl':\n        if (isVertex) {\n          source = source.replace(DECLARATION_INJECT_MARKER, fragmentString);\n        }\n\n        break;\n\n      case 'vs:#main-start':\n        if (isVertex) {\n          source = source.replace(REGEX_START_OF_MAIN, match => match + fragmentString);\n        }\n\n        break;\n\n      case 'vs:#main-end':\n        if (isVertex) {\n          source = source.replace(REGEX_END_OF_MAIN, match => fragmentString + match);\n        }\n\n        break;\n\n      case 'fs:#decl':\n        if (!isVertex) {\n          source = source.replace(DECLARATION_INJECT_MARKER, fragmentString);\n        }\n\n        break;\n\n      case 'fs:#main-start':\n        if (!isVertex) {\n          source = source.replace(REGEX_START_OF_MAIN, match => match + fragmentString);\n        }\n\n        break;\n\n      case 'fs:#main-end':\n        if (!isVertex) {\n          source = source.replace(REGEX_END_OF_MAIN, match => fragmentString + match);\n        }\n\n        break;\n\n      default:\n        source = source.replace(key, match => match + fragmentString);\n    }\n  }\n\n  source = source.replace(DECLARATION_INJECT_MARKER, '');\n\n  if (injectStandardStubs) {\n    source = source.replace(/\\}\\s*$/, match => match + MODULE_INJECTORS[type]);\n  }\n\n  return source;\n}\nexport function combineInjects(injects) {\n  const result = {};\n  assert(Array.isArray(injects) && injects.length > 1);\n  injects.forEach(inject => {\n    for (const key in inject) {\n      result[key] = result[key] ? \"\".concat(result[key], \"\\n\").concat(inject[key]) : inject[key];\n    }\n  });\n  return result;\n}\n//# sourceMappingURL=inject-shader.js.map","function testVariable(qualifier) {\n  return new RegExp(\"\\\\b\".concat(qualifier, \"[ \\\\t]+(\\\\w+[ \\\\t]+\\\\w+(\\\\[\\\\w+\\\\])?;)\"), 'g');\n}\n\nconst ES300_REPLACEMENTS = [[/^(#version[ \\t]+(100|300[ \\t]+es))?[ \\t]*\\n/, '#version 300 es\\n'], [/\\btexture(2D|2DProj|Cube)Lod(EXT)?\\(/g, 'textureLod('], [/\\btexture(2D|2DProj|Cube)(EXT)?\\(/g, 'texture(']];\nconst ES300_VERTEX_REPLACEMENTS = [...ES300_REPLACEMENTS, [testVariable('attribute'), 'in $1'], [testVariable('varying'), 'out $1']];\nconst ES300_FRAGMENT_REPLACEMENTS = [...ES300_REPLACEMENTS, [testVariable('varying'), 'in $1']];\nconst ES100_REPLACEMENTS = [[/^#version[ \\t]+300[ \\t]+es/, '#version 100'], [/\\btexture(2D|2DProj|Cube)Lod\\(/g, 'texture$1LodEXT('], [/\\btexture\\(/g, 'texture2D('], [/\\btextureLod\\(/g, 'texture2DLodEXT(']];\nconst ES100_VERTEX_REPLACEMENTS = [...ES100_REPLACEMENTS, [testVariable('in'), 'attribute $1'], [testVariable('out'), 'varying $1']];\nconst ES100_FRAGMENT_REPLACEMENTS = [...ES100_REPLACEMENTS, [testVariable('in'), 'varying $1']];\nconst ES100_FRAGMENT_OUTPUT_NAME = 'gl_FragColor';\nconst ES300_FRAGMENT_OUTPUT_REGEX = /\\bout[ \\t]+vec4[ \\t]+(\\w+)[ \\t]*;\\n?/;\nconst REGEX_START_OF_MAIN = /void\\s+main\\s*\\([^)]*\\)\\s*\\{\\n?/;\nexport default function transpileShader(source, targetGLSLVersion, isVertex) {\n  switch (targetGLSLVersion) {\n    case 300:\n      return isVertex ? convertShader(source, ES300_VERTEX_REPLACEMENTS) : convertFragmentShaderTo300(source);\n\n    case 100:\n      return isVertex ? convertShader(source, ES100_VERTEX_REPLACEMENTS) : convertFragmentShaderTo100(source);\n\n    default:\n      throw new Error(\"unknown GLSL version \".concat(targetGLSLVersion));\n  }\n}\n\nfunction convertShader(source, replacements) {\n  for (const [pattern, replacement] of replacements) {\n    source = source.replace(pattern, replacement);\n  }\n\n  return source;\n}\n\nfunction convertFragmentShaderTo300(source) {\n  source = convertShader(source, ES300_FRAGMENT_REPLACEMENTS);\n  const outputMatch = source.match(ES300_FRAGMENT_OUTPUT_REGEX);\n\n  if (outputMatch) {\n    const outputName = outputMatch[1];\n    source = source.replace(new RegExp(\"\\\\b\".concat(ES100_FRAGMENT_OUTPUT_NAME, \"\\\\b\"), 'g'), outputName);\n  } else {\n    const outputName = 'fragmentColor';\n    source = source.replace(REGEX_START_OF_MAIN, match => \"out vec4 \".concat(outputName, \";\\n\").concat(match)).replace(new RegExp(\"\\\\b\".concat(ES100_FRAGMENT_OUTPUT_NAME, \"\\\\b\"), 'g'), outputName);\n  }\n\n  return source;\n}\n\nfunction convertFragmentShaderTo100(source) {\n  source = convertShader(source, ES100_FRAGMENT_REPLACEMENTS);\n  const outputMatch = source.match(ES300_FRAGMENT_OUTPUT_REGEX);\n\n  if (outputMatch) {\n    const outputName = outputMatch[1];\n    source = source.replace(ES300_FRAGMENT_OUTPUT_REGEX, '').replace(new RegExp(\"\\\\b\".concat(outputName, \"\\\\b\"), 'g'), ES100_FRAGMENT_OUTPUT_NAME);\n  }\n\n  return source;\n}\n//# sourceMappingURL=transpile-shader.js.map","import { VERTEX_SHADER, FRAGMENT_SHADER } from './constants';\nimport { resolveModules } from './resolve-modules';\nimport { getPlatformShaderDefines, getVersionDefines } from './platform-defines';\nimport injectShader, { DECLARATION_INJECT_MARKER } from './inject-shader';\nimport transpileShader from './transpile-shader';\nimport { assert } from '../utils';\nconst INJECT_SHADER_DECLARATIONS = \"\\n\\n\".concat(DECLARATION_INJECT_MARKER, \"\\n\\n\");\nconst SHADER_TYPE = {\n  [VERTEX_SHADER]: 'vertex',\n  [FRAGMENT_SHADER]: 'fragment'\n};\nconst FRAGMENT_SHADER_PROLOGUE = \"precision highp float;\\n\\n\";\nexport function assembleShaders(gl, opts) {\n  const {\n    vs,\n    fs\n  } = opts;\n  const modules = resolveModules(opts.modules || []);\n  return {\n    gl,\n    vs: assembleShader(gl, Object.assign({}, opts, {\n      source: vs,\n      type: VERTEX_SHADER,\n      modules\n    })),\n    fs: assembleShader(gl, Object.assign({}, opts, {\n      source: fs,\n      type: FRAGMENT_SHADER,\n      modules\n    })),\n    getUniforms: assembleGetUniforms(modules)\n  };\n}\n\nfunction assembleShader(gl, _ref) {\n  let {\n    id,\n    source,\n    type,\n    modules,\n    defines = {},\n    hookFunctions = [],\n    inject = {},\n    transpileToGLSL100 = false,\n    prologue = true,\n    log\n  } = _ref;\n  assert(typeof source === 'string', 'shader source must be a string');\n  const isVertex = type === VERTEX_SHADER;\n  const sourceLines = source.split('\\n');\n  let glslVersion = 100;\n  let versionLine = '';\n  let coreSource = source;\n\n  if (sourceLines[0].indexOf('#version ') === 0) {\n    glslVersion = 300;\n    versionLine = sourceLines[0];\n    coreSource = sourceLines.slice(1).join('\\n');\n  } else {\n    versionLine = \"#version \".concat(glslVersion);\n  }\n\n  const allDefines = {};\n  modules.forEach(module => {\n    Object.assign(allDefines, module.getDefines());\n  });\n  Object.assign(allDefines, defines);\n  let assembledSource = prologue ? \"\".concat(versionLine, \"\\n\").concat(getShaderName({\n    id,\n    source,\n    type\n  }), \"\\n\").concat(getShaderType({\n    type\n  }), \"\\n\").concat(getPlatformShaderDefines(gl), \"\\n\").concat(getVersionDefines(gl, glslVersion, !isVertex), \"\\n\").concat(getApplicationDefines(allDefines), \"\\n\").concat(isVertex ? '' : FRAGMENT_SHADER_PROLOGUE, \"\\n\") : \"\".concat(versionLine, \"\\n\");\n  const hookFunctionMap = normalizeHookFunctions(hookFunctions);\n  const hookInjections = {};\n  const declInjections = {};\n  const mainInjections = {};\n\n  for (const key in inject) {\n    const injection = typeof inject[key] === 'string' ? {\n      injection: inject[key],\n      order: 0\n    } : inject[key];\n    const match = key.match(/^(v|f)s:(#)?([\\w-]+)$/);\n\n    if (match) {\n      const hash = match[2];\n      const name = match[3];\n\n      if (hash) {\n        if (name === 'decl') {\n          declInjections[key] = [injection];\n        } else {\n          mainInjections[key] = [injection];\n        }\n      } else {\n        hookInjections[key] = [injection];\n      }\n    } else {\n      mainInjections[key] = [injection];\n    }\n  }\n\n  for (const module of modules) {\n    if (log) {\n      module.checkDeprecations(coreSource, log);\n    }\n\n    const moduleSource = module.getModuleSource(type, glslVersion);\n    assembledSource += moduleSource;\n    const injections = module.injections[type];\n\n    for (const key in injections) {\n      const match = key.match(/^(v|f)s:#([\\w-]+)$/);\n\n      if (match) {\n        const name = match[2];\n        const injectionType = name === 'decl' ? declInjections : mainInjections;\n        injectionType[key] = injectionType[key] || [];\n        injectionType[key].push(injections[key]);\n      } else {\n        hookInjections[key] = hookInjections[key] || [];\n        hookInjections[key].push(injections[key]);\n      }\n    }\n  }\n\n  assembledSource += INJECT_SHADER_DECLARATIONS;\n  assembledSource = injectShader(assembledSource, type, declInjections);\n  assembledSource += getHookFunctions(hookFunctionMap[type], hookInjections);\n  assembledSource += coreSource;\n  assembledSource = injectShader(assembledSource, type, mainInjections);\n  assembledSource = transpileShader(assembledSource, transpileToGLSL100 ? 100 : glslVersion, isVertex);\n  return assembledSource;\n}\n\nfunction assembleGetUniforms(modules) {\n  return function getUniforms(opts) {\n    const uniforms = {};\n\n    for (const module of modules) {\n      const moduleUniforms = module.getUniforms(opts, uniforms);\n      Object.assign(uniforms, moduleUniforms);\n    }\n\n    return uniforms;\n  };\n}\n\nfunction getShaderType(_ref2) {\n  let {\n    type\n  } = _ref2;\n  return \"\\n#define SHADER_TYPE_\".concat(SHADER_TYPE[type].toUpperCase(), \"\\n\");\n}\n\nfunction getShaderName(_ref3) {\n  let {\n    id,\n    source,\n    type\n  } = _ref3;\n  const injectShaderName = id && typeof id === 'string' && source.indexOf('SHADER_NAME') === -1;\n  return injectShaderName ? \"\\n#define SHADER_NAME \".concat(id, \"_\").concat(SHADER_TYPE[type], \"\\n\\n\") : '';\n}\n\nfunction getApplicationDefines() {\n  let defines = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  let count = 0;\n  let sourceText = '';\n\n  for (const define in defines) {\n    if (count === 0) {\n      sourceText += '\\n// APPLICATION DEFINES\\n';\n    }\n\n    count++;\n    const value = defines[define];\n\n    if (value || Number.isFinite(value)) {\n      sourceText += \"#define \".concat(define.toUpperCase(), \" \").concat(defines[define], \"\\n\");\n    }\n  }\n\n  if (count === 0) {\n    sourceText += '\\n';\n  }\n\n  return sourceText;\n}\n\nfunction getHookFunctions(hookFunctions, hookInjections) {\n  let result = '';\n\n  for (const hookName in hookFunctions) {\n    const hookFunction = hookFunctions[hookName];\n    result += \"void \".concat(hookFunction.signature, \" {\\n\");\n\n    if (hookFunction.header) {\n      result += \"  \".concat(hookFunction.header);\n    }\n\n    if (hookInjections[hookName]) {\n      const injections = hookInjections[hookName];\n      injections.sort((a, b) => a.order - b.order);\n\n      for (const injection of injections) {\n        result += \"  \".concat(injection.injection, \"\\n\");\n      }\n    }\n\n    if (hookFunction.footer) {\n      result += \"  \".concat(hookFunction.footer);\n    }\n\n    result += '}\\n';\n  }\n\n  return result;\n}\n\nfunction normalizeHookFunctions(hookFunctions) {\n  const result = {\n    vs: {},\n    fs: {}\n  };\n  hookFunctions.forEach(hook => {\n    let opts;\n\n    if (typeof hook !== 'string') {\n      opts = hook;\n      hook = opts.hook;\n    } else {\n      opts = {};\n    }\n\n    hook = hook.trim();\n    const [stage, signature] = hook.split(':');\n    const name = hook.replace(/\\(.+/, '');\n    result[stage][name] = Object.assign(opts, {\n      signature\n    });\n  });\n  return result;\n}\n//# sourceMappingURL=assemble-shaders.js.map","import { assert } from '../utils';\nconst FS100 = \"void main() {gl_FragColor = vec4(0);}\";\nconst FS_GLES = \"out vec4 transform_output;\\nvoid main() {\\n  transform_output = vec4(0);\\n}\";\nconst FS300 = \"#version 300 es\\n\".concat(FS_GLES);\nexport function getQualifierDetails(line, qualifiers) {\n  qualifiers = Array.isArray(qualifiers) ? qualifiers : [qualifiers];\n  const words = line.replace(/^\\s+/, '').split(/\\s+/);\n  const [qualifier, type, definition] = words;\n\n  if (!qualifiers.includes(qualifier) || !type || !definition) {\n    return null;\n  }\n\n  const name = definition.split(';')[0];\n  return {\n    qualifier,\n    type,\n    name\n  };\n}\nexport function getPassthroughFS() {\n  let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  const {\n    version = 100,\n    input,\n    inputType,\n    output\n  } = options;\n\n  if (!input) {\n    if (version === 300) {\n      return FS300;\n    } else if (version > 300) {\n      return \"#version \".concat(version, \"\\n\").concat(FS_GLES);\n    }\n\n    return FS100;\n  }\n\n  const outputValue = convertToVec4(input, inputType);\n\n  if (version >= 300) {\n    return \"#version \".concat(version, \" \").concat(version === 300 ? 'es' : '', \"\\nin \").concat(inputType, \" \").concat(input, \";\\nout vec4 \").concat(output, \";\\nvoid main() {\\n  \").concat(output, \" = \").concat(outputValue, \";\\n}\");\n  }\n\n  return \"varying \".concat(inputType, \" \").concat(input, \";\\nvoid main() {\\n  gl_FragColor = \").concat(outputValue, \";\\n}\");\n}\nexport function typeToChannelSuffix(type) {\n  switch (type) {\n    case 'float':\n      return 'x';\n\n    case 'vec2':\n      return 'xy';\n\n    case 'vec3':\n      return 'xyz';\n\n    case 'vec4':\n      return 'xyzw';\n\n    default:\n      assert(false);\n      return null;\n  }\n}\nexport function typeToChannelCount(type) {\n  switch (type) {\n    case 'float':\n      return 1;\n\n    case 'vec2':\n      return 2;\n\n    case 'vec3':\n      return 3;\n\n    case 'vec4':\n      return 4;\n\n    default:\n      assert(false);\n      return null;\n  }\n}\nexport function convertToVec4(variable, type) {\n  switch (type) {\n    case 'float':\n      return \"vec4(\".concat(variable, \", 0.0, 0.0, 1.0)\");\n\n    case 'vec2':\n      return \"vec4(\".concat(variable, \", 0.0, 1.0)\");\n\n    case 'vec3':\n      return \"vec4(\".concat(variable, \", 1.0)\");\n\n    case 'vec4':\n      return variable;\n\n    default:\n      assert(false);\n      return null;\n  }\n}\n//# sourceMappingURL=shader-utils.js.map","const fp32shader = \"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\\nconst float TWO_PI = 6.2831854820251465;\\nconst float PI_2 = 1.5707963705062866;\\nconst float PI_16 = 0.1963495463132858;\\n\\nconst float SIN_TABLE_0 = 0.19509032368659973;\\nconst float SIN_TABLE_1 = 0.3826834261417389;\\nconst float SIN_TABLE_2 = 0.5555702447891235;\\nconst float SIN_TABLE_3 = 0.7071067690849304;\\n\\nconst float COS_TABLE_0 = 0.9807852506637573;\\nconst float COS_TABLE_1 = 0.9238795042037964;\\nconst float COS_TABLE_2 = 0.8314695954322815;\\nconst float COS_TABLE_3 = 0.7071067690849304;\\n\\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\\n\\nfloat sin_taylor_fp32(float a) {\\n  float r, s, t, x;\\n\\n  if (a == 0.0) {\\n    return 0.0;\\n  }\\n\\n  x = -a * a;\\n  s = a;\\n  r = a;\\n\\n  r = r * x;\\n  t = r * INVERSE_FACTORIAL_3;\\n  s = s + t;\\n\\n  r = r * x;\\n  t = r * INVERSE_FACTORIAL_5;\\n  s = s + t;\\n\\n  r = r * x;\\n  t = r * INVERSE_FACTORIAL_7;\\n  s = s + t;\\n\\n  r = r * x;\\n  t = r * INVERSE_FACTORIAL_9;\\n  s = s + t;\\n\\n  return s;\\n}\\n\\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\\n  if (a == 0.0) {\\n    sin_t = 0.0;\\n    cos_t = 1.0;\\n  }\\n  sin_t = sin_taylor_fp32(a);\\n  cos_t = sqrt(1.0 - sin_t * sin_t);\\n}\\n\\nfloat tan_taylor_fp32(float a) {\\n    float sin_a;\\n    float cos_a;\\n\\n    if (a == 0.0) {\\n        return 0.0;\\n    }\\n    float z = floor(a / TWO_PI);\\n    float r = a - TWO_PI * z;\\n\\n    float t;\\n    float q = floor(r / PI_2 + 0.5);\\n    int j = int(q);\\n\\n    if (j < -2 || j > 2) {\\n        return 1.0 / 0.0;\\n    }\\n\\n    t = r - PI_2 * q;\\n\\n    q = floor(t / PI_16 + 0.5);\\n    int k = int(q);\\n    int abs_k = int(abs(float(k)));\\n\\n    if (abs_k > 4) {\\n        return 1.0 / 0.0;\\n    } else {\\n        t = t - PI_16 * q;\\n    }\\n\\n    float u = 0.0;\\n    float v = 0.0;\\n\\n    float sin_t, cos_t;\\n    float s, c;\\n    sincos_taylor_fp32(t, sin_t, cos_t);\\n\\n    if (k == 0) {\\n        s = sin_t;\\n        c = cos_t;\\n    } else {\\n        if (abs(float(abs_k) - 1.0) < 0.5) {\\n            u = COS_TABLE_0;\\n            v = SIN_TABLE_0;\\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\\n            u = COS_TABLE_1;\\n            v = SIN_TABLE_1;\\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\\n            u = COS_TABLE_2;\\n            v = SIN_TABLE_2;\\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\\n            u = COS_TABLE_3;\\n            v = SIN_TABLE_3;\\n        }\\n        if (k > 0) {\\n            s = u * sin_t + v * cos_t;\\n            c = u * cos_t - v * sin_t;\\n        } else {\\n            s = u * sin_t - v * cos_t;\\n            c = u * cos_t + v * sin_t;\\n        }\\n    }\\n\\n    if (j == 0) {\\n        sin_a = s;\\n        cos_a = c;\\n    } else if (j == 1) {\\n        sin_a = c;\\n        cos_a = -s;\\n    } else if (j == -1) {\\n        sin_a = -c;\\n        cos_a = s;\\n    } else {\\n        sin_a = -s;\\n        cos_a = -c;\\n    }\\n    return sin_a / cos_a;\\n}\\n#endif\\n\\nfloat tan_fp32(float a) {\\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\\n  return tan_taylor_fp32(a);\\n#else\\n  return tan(a);\\n#endif\\n}\\n\";\nexport const fp32 = {\n  name: 'fp32',\n  vs: fp32shader,\n  fs: null\n};\n//# sourceMappingURL=fp32.js.map","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(\"math.gl assertion \".concat(message));\n  }\n}\n//# sourceMappingURL=assert.js.map","import assert from './assert';\nconst RADIANS_TO_DEGREES = 1 / Math.PI * 180;\nconst DEGREES_TO_RADIANS = 1 / 180 * Math.PI;\nexport const config = {\n  EPSILON: 1e-12,\n  debug: false,\n  precision: 4,\n  printTypes: false,\n  printDegrees: false,\n  printRowMajor: true\n};\nexport function configure(options) {\n  for (const key in options) {\n    assert(key in config);\n    config[key] = options[key];\n  }\n\n  return config;\n}\nexport function formatValue(value, {\n  precision = config.precision\n} = {}) {\n  value = round(value);\n  return \"\".concat(parseFloat(value.toPrecision(precision)));\n}\nexport function isArray(value) {\n  return Array.isArray(value) || ArrayBuffer.isView(value) && !(value instanceof DataView);\n}\nexport function clone(array) {\n  return 'clone' in array ? array.clone() : array.slice();\n}\nexport function toRadians(degrees) {\n  return radians(degrees);\n}\nexport function toDegrees(radians) {\n  return degrees(radians);\n}\nexport function radians(degrees, result) {\n  return map(degrees, degrees => degrees * DEGREES_TO_RADIANS, result);\n}\nexport function degrees(radians, result) {\n  return map(radians, radians => radians * RADIANS_TO_DEGREES, result);\n}\nexport function sin(radians, result) {\n  return map(radians, angle => Math.sin(angle), result);\n}\nexport function cos(radians, result) {\n  return map(radians, angle => Math.cos(angle), result);\n}\nexport function tan(radians, result) {\n  return map(radians, angle => Math.tan(angle), result);\n}\nexport function asin(radians, result) {\n  return map(radians, angle => Math.asin(angle), result);\n}\nexport function acos(radians, result) {\n  return map(radians, angle => Math.acos(angle), result);\n}\nexport function atan(radians, result) {\n  return map(radians, angle => Math.atan(angle), result);\n}\nexport function clamp(value, min, max) {\n  return map(value, value => Math.max(min, Math.min(max, value)));\n}\nexport function lerp(a, b, t) {\n  if (isArray(a)) {\n    return a.map((ai, i) => lerp(ai, b[i], t));\n  }\n\n  return t * b + (1 - t) * a;\n}\nexport function equals(a, b, epsilon) {\n  const oldEpsilon = config.EPSILON;\n\n  if (epsilon) {\n    config.EPSILON = epsilon;\n  }\n\n  try {\n    if (a === b) {\n      return true;\n    }\n\n    if (isArray(a) && isArray(b)) {\n      if (a.length !== b.length) {\n        return false;\n      }\n\n      for (let i = 0; i < a.length; ++i) {\n        if (!equals(a[i], b[i])) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n\n    if (a && a.equals) {\n      return a.equals(b);\n    }\n\n    if (b && b.equals) {\n      return b.equals(a);\n    }\n\n    if (typeof a === 'number' && typeof b === 'number') {\n      return Math.abs(a - b) <= config.EPSILON * Math.max(1, Math.abs(a), Math.abs(b));\n    }\n\n    return false;\n  } finally {\n    config.EPSILON = oldEpsilon;\n  }\n}\nexport function exactEquals(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (a && typeof a === 'object' && b && typeof b === 'object') {\n    if (a.constructor !== b.constructor) {\n      return false;\n    }\n\n    if (a.exactEquals) {\n      return a.exactEquals(b);\n    }\n  }\n\n  if (isArray(a) && isArray(b)) {\n    if (a.length !== b.length) {\n      return false;\n    }\n\n    for (let i = 0; i < a.length; ++i) {\n      if (!exactEquals(a[i], b[i])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\nexport function withEpsilon(epsilon, func) {\n  const oldPrecision = config.EPSILON;\n  config.EPSILON = epsilon;\n  let value;\n\n  try {\n    value = func();\n  } finally {\n    config.EPSILON = oldPrecision;\n  }\n\n  return value;\n}\n\nfunction round(value) {\n  return Math.round(value / config.EPSILON) * config.EPSILON;\n}\n\nfunction duplicateArray(array) {\n  return array.clone ? array.clone() : new Array(array.length);\n}\n\nfunction map(value, func, result) {\n  if (isArray(value)) {\n    const array = value;\n    result = result || duplicateArray(array);\n\n    for (let i = 0; i < result.length && i < array.length; ++i) {\n      result[i] = func(value[i], i, result);\n    }\n\n    return result;\n  }\n\n  return func(value);\n}\n//# sourceMappingURL=common.js.map","function _extendableBuiltin(cls) {\n  function ExtendableBuiltin() {\n    var instance = Reflect.construct(cls, Array.from(arguments));\n    Object.setPrototypeOf(instance, Object.getPrototypeOf(this));\n    return instance;\n  }\n\n  ExtendableBuiltin.prototype = Object.create(cls.prototype, {\n    constructor: {\n      value: cls,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (Object.setPrototypeOf) {\n    Object.setPrototypeOf(ExtendableBuiltin, cls);\n  } else {\n    ExtendableBuiltin.__proto__ = cls;\n  }\n\n  return ExtendableBuiltin;\n}\n\nimport { config, formatValue, equals, isArray } from '../../lib/common';\nexport default class MathArray extends _extendableBuiltin(Array) {\n  clone() {\n    return new this.constructor().copy(this);\n  }\n\n  fromArray(array, offset = 0) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = array[i + offset];\n    }\n\n    return this.check();\n  }\n\n  toArray(targetArray = [], offset = 0) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      targetArray[offset + i] = this[i];\n    }\n\n    return targetArray;\n  }\n\n  from(arrayOrObject) {\n    return Array.isArray(arrayOrObject) ? this.copy(arrayOrObject) : this.fromObject(arrayOrObject);\n  }\n\n  to(arrayOrObject) {\n    if (arrayOrObject === this) {\n      return this;\n    }\n\n    return isArray(arrayOrObject) ? this.toArray(arrayOrObject) : this.toObject(arrayOrObject);\n  }\n\n  toTarget(target) {\n    return target ? this.to(target) : this;\n  }\n\n  toFloat32Array() {\n    return new Float32Array(this);\n  }\n\n  toString() {\n    return this.formatString(config);\n  }\n\n  formatString(opts) {\n    let string = '';\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      string += (i > 0 ? ', ' : '') + formatValue(this[i], opts);\n    }\n\n    return \"\".concat(opts.printTypes ? this.constructor.name : '', \"[\").concat(string, \"]\");\n  }\n\n  equals(array) {\n    if (!array || this.length !== array.length) {\n      return false;\n    }\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      if (!equals(this[i], array[i])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  exactEquals(array) {\n    if (!array || this.length !== array.length) {\n      return false;\n    }\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      if (this[i] !== array[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  negate() {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = -this[i];\n    }\n\n    return this.check();\n  }\n\n  lerp(a, b, t) {\n    if (t === undefined) {\n      return this.lerp(this, a, b);\n    }\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      const ai = a[i];\n      this[i] = ai + t * (b[i] - ai);\n    }\n\n    return this.check();\n  }\n\n  min(vector) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = Math.min(vector[i], this[i]);\n    }\n\n    return this.check();\n  }\n\n  max(vector) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = Math.max(vector[i], this[i]);\n    }\n\n    return this.check();\n  }\n\n  clamp(minVector, maxVector) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = Math.min(Math.max(this[i], minVector[i]), maxVector[i]);\n    }\n\n    return this.check();\n  }\n\n  add(...vectors) {\n    for (const vector of vectors) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] += vector[i];\n      }\n    }\n\n    return this.check();\n  }\n\n  subtract(...vectors) {\n    for (const vector of vectors) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] -= vector[i];\n      }\n    }\n\n    return this.check();\n  }\n\n  scale(scale) {\n    if (typeof scale === 'number') {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] *= scale;\n      }\n    } else {\n      for (let i = 0; i < this.ELEMENTS && i < scale.length; ++i) {\n        this[i] *= scale[i];\n      }\n    }\n\n    return this.check();\n  }\n\n  multiplyByScalar(scalar) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] *= scalar;\n    }\n\n    return this.check();\n  }\n\n  check() {\n    if (config.debug && !this.validate()) {\n      throw new Error(\"math.gl: \".concat(this.constructor.name, \" some fields set to invalid numbers'\"));\n    }\n\n    return this;\n  }\n\n  validate() {\n    let valid = this.length === this.ELEMENTS;\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      valid = valid && Number.isFinite(this[i]);\n    }\n\n    return valid;\n  }\n\n  sub(a) {\n    return this.subtract(a);\n  }\n\n  setScalar(a) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = a;\n    }\n\n    return this.check();\n  }\n\n  addScalar(a) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] += a;\n    }\n\n    return this.check();\n  }\n\n  subScalar(a) {\n    return this.addScalar(-a);\n  }\n\n  multiplyScalar(scalar) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] *= scalar;\n    }\n\n    return this.check();\n  }\n\n  divideScalar(a) {\n    return this.multiplyByScalar(1 / a);\n  }\n\n  clampScalar(min, max) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = Math.min(Math.max(this[i], min), max);\n    }\n\n    return this.check();\n  }\n\n  get elements() {\n    return this;\n  }\n\n}\n//# sourceMappingURL=math-array.js.map","import { config } from './common';\nexport function validateVector(v, length) {\n  if (v.length !== length) {\n    return false;\n  }\n\n  for (let i = 0; i < v.length; ++i) {\n    if (!Number.isFinite(v[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\nexport function checkNumber(value) {\n  if (!Number.isFinite(value)) {\n    throw new Error(\"Invalid number \".concat(value));\n  }\n\n  return value;\n}\nexport function checkVector(v, length, callerName = '') {\n  if (config.debug && !validateVector(v, length)) {\n    throw new Error(\"math.gl: \".concat(callerName, \" some fields set to invalid numbers'\"));\n  }\n\n  return v;\n}\nconst map = {};\nexport function deprecated(method, version) {\n  if (!map[method]) {\n    map[method] = true;\n    console.warn(\"\".concat(method, \" has been removed in version \").concat(version, \", see upgrade guide for more information\"));\n  }\n}\n//# sourceMappingURL=validators.js.map","import MathArray from './math-array';\nimport { checkNumber } from '../../lib/validators';\nimport assert from '../../lib/assert';\nexport default class Vector extends MathArray {\n  get x() {\n    return this[0];\n  }\n\n  set x(value) {\n    this[0] = checkNumber(value);\n  }\n\n  get y() {\n    return this[1];\n  }\n\n  set y(value) {\n    this[1] = checkNumber(value);\n  }\n\n  len() {\n    return Math.sqrt(this.lengthSquared());\n  }\n\n  magnitude() {\n    return this.len();\n  }\n\n  lengthSquared() {\n    let length = 0;\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      length += this[i] * this[i];\n    }\n\n    return length;\n  }\n\n  magnitudeSquared() {\n    return this.lengthSquared();\n  }\n\n  distance(mathArray) {\n    return Math.sqrt(this.distanceSquared(mathArray));\n  }\n\n  distanceSquared(mathArray) {\n    let length = 0;\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      const dist = this[i] - mathArray[i];\n      length += dist * dist;\n    }\n\n    return checkNumber(length);\n  }\n\n  dot(mathArray) {\n    let product = 0;\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      product += this[i] * mathArray[i];\n    }\n\n    return checkNumber(product);\n  }\n\n  normalize() {\n    const length = this.magnitude();\n\n    if (length !== 0) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] /= length;\n      }\n    }\n\n    return this.check();\n  }\n\n  multiply(...vectors) {\n    for (const vector of vectors) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] *= vector[i];\n      }\n    }\n\n    return this.check();\n  }\n\n  divide(...vectors) {\n    for (const vector of vectors) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] /= vector[i];\n      }\n    }\n\n    return this.check();\n  }\n\n  lengthSq() {\n    return this.lengthSquared();\n  }\n\n  distanceTo(vector) {\n    return this.distance(vector);\n  }\n\n  distanceToSquared(vector) {\n    return this.distanceSquared(vector);\n  }\n\n  getComponent(i) {\n    assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n    return checkNumber(this[i]);\n  }\n\n  setComponent(i, value) {\n    assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n    this[i] = value;\n    return this.check();\n  }\n\n  addVectors(a, b) {\n    return this.copy(a).add(b);\n  }\n\n  subVectors(a, b) {\n    return this.copy(a).subtract(b);\n  }\n\n  multiplyVectors(a, b) {\n    return this.copy(a).multiply(b);\n  }\n\n  addScaledVector(a, b) {\n    return this.add(new this.constructor(a).multiplyScalar(b));\n  }\n\n}\n//# sourceMappingURL=vector.js.map","export function vec2_transformMat4AsVector(out, a, m) {\n  const x = a[0];\n  const y = a[1];\n  const w = m[3] * x + m[7] * y || 1.0;\n  out[0] = (m[0] * x + m[4] * y) / w;\n  out[1] = (m[1] * x + m[5] * y) / w;\n  return out;\n}\nexport function vec3_transformMat4AsVector(out, a, m) {\n  const x = a[0];\n  const y = a[1];\n  const z = a[2];\n  const w = m[3] * x + m[7] * y + m[11] * z || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z) / w;\n  return out;\n}\nexport function vec3_transformMat2(out, a, m) {\n  const x = a[0];\n  const y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  out[2] = a[2];\n  return out;\n}\nexport function vec4_transformMat2(out, a, m) {\n  const x = a[0];\n  const y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\nexport function vec4_transformMat3(out, a, m) {\n  const x = a[0];\n  const y = a[1];\n  const z = a[2];\n  out[0] = m[0] * x + m[3] * y + m[6] * z;\n  out[1] = m[1] * x + m[4] * y + m[7] * z;\n  out[2] = m[2] * x + m[5] * y + m[8] * z;\n  out[3] = a[3];\n  return out;\n}\n//# sourceMappingURL=gl-matrix-extras.js.map","import Vector from './base/vector';\nimport { config, isArray } from '../lib/common';\nimport { checkNumber } from '../lib/validators';\nimport * as vec3 from 'gl-matrix/vec3';\nimport { vec3_transformMat2, vec3_transformMat4AsVector } from '../lib/gl-matrix-extras';\nconst ORIGIN = [0, 0, 0];\nlet ZERO;\nexport default class Vector3 extends Vector {\n  static get ZERO() {\n    if (!ZERO) {\n      ZERO = new Vector3(0, 0, 0);\n      Object.freeze(ZERO);\n    }\n\n    return ZERO;\n  }\n\n  constructor(x = 0, y = 0, z = 0) {\n    super(-0, -0, -0);\n\n    if (arguments.length === 1 && isArray(x)) {\n      this.copy(x);\n    } else {\n      if (config.debug) {\n        checkNumber(x);\n        checkNumber(y);\n        checkNumber(z);\n      }\n\n      this[0] = x;\n      this[1] = y;\n      this[2] = z;\n    }\n  }\n\n  set(x, y, z) {\n    this[0] = x;\n    this[1] = y;\n    this[2] = z;\n    return this.check();\n  }\n\n  copy(array) {\n    this[0] = array[0];\n    this[1] = array[1];\n    this[2] = array[2];\n    return this.check();\n  }\n\n  fromObject(object) {\n    if (config.debug) {\n      checkNumber(object.x);\n      checkNumber(object.y);\n      checkNumber(object.z);\n    }\n\n    this[0] = object.x;\n    this[1] = object.y;\n    this[2] = object.z;\n    return this.check();\n  }\n\n  toObject(object) {\n    object.x = this[0];\n    object.y = this[1];\n    object.z = this[2];\n    return object;\n  }\n\n  get ELEMENTS() {\n    return 3;\n  }\n\n  get z() {\n    return this[2];\n  }\n\n  set z(value) {\n    this[2] = checkNumber(value);\n  }\n\n  angle(vector) {\n    return vec3.angle(this, vector);\n  }\n\n  cross(vector) {\n    vec3.cross(this, this, vector);\n    return this.check();\n  }\n\n  rotateX({\n    radians,\n    origin = ORIGIN\n  }) {\n    vec3.rotateX(this, this, origin, radians);\n    return this.check();\n  }\n\n  rotateY({\n    radians,\n    origin = ORIGIN\n  }) {\n    vec3.rotateY(this, this, origin, radians);\n    return this.check();\n  }\n\n  rotateZ({\n    radians,\n    origin = ORIGIN\n  }) {\n    vec3.rotateZ(this, this, origin, radians);\n    return this.check();\n  }\n\n  transform(matrix4) {\n    return this.transformAsPoint(matrix4);\n  }\n\n  transformAsPoint(matrix4) {\n    vec3.transformMat4(this, this, matrix4);\n    return this.check();\n  }\n\n  transformAsVector(matrix4) {\n    vec3_transformMat4AsVector(this, this, matrix4);\n    return this.check();\n  }\n\n  transformByMatrix3(matrix3) {\n    vec3.transformMat3(this, this, matrix3);\n    return this.check();\n  }\n\n  transformByMatrix2(matrix2) {\n    vec3_transformMat2(this, this, matrix2);\n    return this.check();\n  }\n\n  transformByQuaternion(quaternion) {\n    vec3.transformQuat(this, this, quaternion);\n    return this.check();\n  }\n\n}\n//# sourceMappingURL=vector3.js.map","import MathArray from './math-array';\nimport { checkNumber } from '../../lib/validators';\nimport { config } from '../../lib/common';\nexport default class Matrix extends MathArray {\n  toString() {\n    let string = '[';\n\n    if (config.printRowMajor) {\n      string += 'row-major:';\n\n      for (let row = 0; row < this.RANK; ++row) {\n        for (let col = 0; col < this.RANK; ++col) {\n          string += \" \".concat(this[col * this.RANK + row]);\n        }\n      }\n    } else {\n      string += 'column-major:';\n\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        string += \" \".concat(this[i]);\n      }\n    }\n\n    string += ']';\n    return string;\n  }\n\n  getElementIndex(row, col) {\n    return col * this.RANK + row;\n  }\n\n  getElement(row, col) {\n    return this[col * this.RANK + row];\n  }\n\n  setElement(row, col, value) {\n    this[col * this.RANK + row] = checkNumber(value);\n    return this;\n  }\n\n  getColumn(columnIndex, result = new Array(this.RANK).fill(-0)) {\n    const firstIndex = columnIndex * this.RANK;\n\n    for (let i = 0; i < this.RANK; ++i) {\n      result[i] = this[firstIndex + i];\n    }\n\n    return result;\n  }\n\n  setColumn(columnIndex, columnVector) {\n    const firstIndex = columnIndex * this.RANK;\n\n    for (let i = 0; i < this.RANK; ++i) {\n      this[firstIndex + i] = columnVector[i];\n    }\n\n    return this;\n  }\n\n}\n//# sourceMappingURL=matrix.js.map","import Matrix from './base/matrix';\nimport { checkVector } from '../lib/validators';\nimport { vec2_transformMat4AsVector, vec3_transformMat4AsVector } from '../lib/gl-matrix-extras';\nimport * as mat4 from 'gl-matrix/mat4';\nimport * as vec2 from 'gl-matrix/vec2';\nimport * as vec3 from 'gl-matrix/vec3';\nimport * as vec4 from 'gl-matrix/vec4';\nvar INDICES;\n\n(function (INDICES) {\n  INDICES[INDICES[\"COL0ROW0\"] = 0] = \"COL0ROW0\";\n  INDICES[INDICES[\"COL0ROW1\"] = 1] = \"COL0ROW1\";\n  INDICES[INDICES[\"COL0ROW2\"] = 2] = \"COL0ROW2\";\n  INDICES[INDICES[\"COL0ROW3\"] = 3] = \"COL0ROW3\";\n  INDICES[INDICES[\"COL1ROW0\"] = 4] = \"COL1ROW0\";\n  INDICES[INDICES[\"COL1ROW1\"] = 5] = \"COL1ROW1\";\n  INDICES[INDICES[\"COL1ROW2\"] = 6] = \"COL1ROW2\";\n  INDICES[INDICES[\"COL1ROW3\"] = 7] = \"COL1ROW3\";\n  INDICES[INDICES[\"COL2ROW0\"] = 8] = \"COL2ROW0\";\n  INDICES[INDICES[\"COL2ROW1\"] = 9] = \"COL2ROW1\";\n  INDICES[INDICES[\"COL2ROW2\"] = 10] = \"COL2ROW2\";\n  INDICES[INDICES[\"COL2ROW3\"] = 11] = \"COL2ROW3\";\n  INDICES[INDICES[\"COL3ROW0\"] = 12] = \"COL3ROW0\";\n  INDICES[INDICES[\"COL3ROW1\"] = 13] = \"COL3ROW1\";\n  INDICES[INDICES[\"COL3ROW2\"] = 14] = \"COL3ROW2\";\n  INDICES[INDICES[\"COL3ROW3\"] = 15] = \"COL3ROW3\";\n})(INDICES || (INDICES = {}));\n\nconst DEFAULT_FOVY = 45 * Math.PI / 180;\nconst DEFAULT_ASPECT = 1;\nconst DEFAULT_NEAR = 0.1;\nconst DEFAULT_FAR = 500;\nconst IDENTITY_MATRIX = Object.freeze([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);\nexport default class Matrix4 extends Matrix {\n  static get IDENTITY() {\n    return getIdentityMatrix();\n  }\n\n  static get ZERO() {\n    return getZeroMatrix();\n  }\n\n  get ELEMENTS() {\n    return 16;\n  }\n\n  get RANK() {\n    return 4;\n  }\n\n  get INDICES() {\n    return INDICES;\n  }\n\n  constructor(array) {\n    super(-0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0);\n\n    if (arguments.length === 1 && Array.isArray(array)) {\n      this.copy(array);\n    } else {\n      this.identity();\n    }\n  }\n\n  copy(array) {\n    this[0] = array[0];\n    this[1] = array[1];\n    this[2] = array[2];\n    this[3] = array[3];\n    this[4] = array[4];\n    this[5] = array[5];\n    this[6] = array[6];\n    this[7] = array[7];\n    this[8] = array[8];\n    this[9] = array[9];\n    this[10] = array[10];\n    this[11] = array[11];\n    this[12] = array[12];\n    this[13] = array[13];\n    this[14] = array[14];\n    this[15] = array[15];\n    return this.check();\n  }\n\n  set(m00, m10, m20, m30, m01, m11, m21, m31, m02, m12, m22, m32, m03, m13, m23, m33) {\n    this[0] = m00;\n    this[1] = m10;\n    this[2] = m20;\n    this[3] = m30;\n    this[4] = m01;\n    this[5] = m11;\n    this[6] = m21;\n    this[7] = m31;\n    this[8] = m02;\n    this[9] = m12;\n    this[10] = m22;\n    this[11] = m32;\n    this[12] = m03;\n    this[13] = m13;\n    this[14] = m23;\n    this[15] = m33;\n    return this.check();\n  }\n\n  setRowMajor(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n    this[0] = m00;\n    this[1] = m10;\n    this[2] = m20;\n    this[3] = m30;\n    this[4] = m01;\n    this[5] = m11;\n    this[6] = m21;\n    this[7] = m31;\n    this[8] = m02;\n    this[9] = m12;\n    this[10] = m22;\n    this[11] = m32;\n    this[12] = m03;\n    this[13] = m13;\n    this[14] = m23;\n    this[15] = m33;\n    return this.check();\n  }\n\n  toRowMajor(result) {\n    result[0] = this[0];\n    result[1] = this[4];\n    result[2] = this[8];\n    result[3] = this[12];\n    result[4] = this[1];\n    result[5] = this[5];\n    result[6] = this[9];\n    result[7] = this[13];\n    result[8] = this[2];\n    result[9] = this[6];\n    result[10] = this[10];\n    result[11] = this[14];\n    result[12] = this[3];\n    result[13] = this[7];\n    result[14] = this[11];\n    result[15] = this[15];\n    return result;\n  }\n\n  identity() {\n    return this.copy(IDENTITY_MATRIX);\n  }\n\n  fromObject(object) {\n    return this.check();\n  }\n\n  fromQuaternion(quaternion) {\n    mat4.fromQuat(this, quaternion);\n    return this.check();\n  }\n\n  frustum(view) {\n    const {\n      left,\n      right,\n      bottom,\n      top,\n      near = DEFAULT_NEAR,\n      far = DEFAULT_FAR\n    } = view;\n\n    if (far === Infinity) {\n      computeInfinitePerspectiveOffCenter(this, left, right, bottom, top, near);\n    } else {\n      mat4.frustum(this, left, right, bottom, top, near, far);\n    }\n\n    return this.check();\n  }\n\n  lookAt(view) {\n    const {\n      eye,\n      center = [0, 0, 0],\n      up = [0, 1, 0]\n    } = view;\n    mat4.lookAt(this, eye, center, up);\n    return this.check();\n  }\n\n  ortho(view) {\n    const {\n      left,\n      right,\n      bottom,\n      top,\n      near = DEFAULT_NEAR,\n      far = DEFAULT_FAR\n    } = view;\n    mat4.ortho(this, left, right, bottom, top, near, far);\n    return this.check();\n  }\n\n  orthographic(view) {\n    const {\n      fovy = DEFAULT_FOVY,\n      aspect = DEFAULT_ASPECT,\n      focalDistance = 1,\n      near = DEFAULT_NEAR,\n      far = DEFAULT_FAR\n    } = view;\n    checkRadians(fovy);\n    const halfY = fovy / 2;\n    const top = focalDistance * Math.tan(halfY);\n    const right = top * aspect;\n    return this.ortho({\n      left: -right,\n      right,\n      bottom: -top,\n      top,\n      near,\n      far\n    });\n  }\n\n  perspective(view) {\n    const {\n      fovy = 45 * Math.PI / 180,\n      aspect = 1,\n      near = 0.1,\n      far = 500\n    } = view;\n    checkRadians(fovy);\n    mat4.perspective(this, fovy, aspect, near, far);\n    return this.check();\n  }\n\n  determinant() {\n    return mat4.determinant(this);\n  }\n\n  getScale(result = [-0, -0, -0]) {\n    result[0] = Math.sqrt(this[0] * this[0] + this[1] * this[1] + this[2] * this[2]);\n    result[1] = Math.sqrt(this[4] * this[4] + this[5] * this[5] + this[6] * this[6]);\n    result[2] = Math.sqrt(this[8] * this[8] + this[9] * this[9] + this[10] * this[10]);\n    return result;\n  }\n\n  getTranslation(result = [-0, -0, -0]) {\n    result[0] = this[12];\n    result[1] = this[13];\n    result[2] = this[14];\n    return result;\n  }\n\n  getRotation(result, scaleResult) {\n    result = result || [-0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0];\n    scaleResult = scaleResult || [-0, -0, -0];\n    const scale = this.getScale(scaleResult);\n    const inverseScale0 = 1 / scale[0];\n    const inverseScale1 = 1 / scale[1];\n    const inverseScale2 = 1 / scale[2];\n    result[0] = this[0] * inverseScale0;\n    result[1] = this[1] * inverseScale1;\n    result[2] = this[2] * inverseScale2;\n    result[3] = 0;\n    result[4] = this[4] * inverseScale0;\n    result[5] = this[5] * inverseScale1;\n    result[6] = this[6] * inverseScale2;\n    result[7] = 0;\n    result[8] = this[8] * inverseScale0;\n    result[9] = this[9] * inverseScale1;\n    result[10] = this[10] * inverseScale2;\n    result[11] = 0;\n    result[12] = 0;\n    result[13] = 0;\n    result[14] = 0;\n    result[15] = 1;\n    return result;\n  }\n\n  getRotationMatrix3(result, scaleResult) {\n    result = result || [-0, -0, -0, -0, -0, -0, -0, -0, -0];\n    scaleResult = scaleResult || [-0, -0, -0];\n    const scale = this.getScale(scaleResult);\n    const inverseScale0 = 1 / scale[0];\n    const inverseScale1 = 1 / scale[1];\n    const inverseScale2 = 1 / scale[2];\n    result[0] = this[0] * inverseScale0;\n    result[1] = this[1] * inverseScale1;\n    result[2] = this[2] * inverseScale2;\n    result[3] = this[4] * inverseScale0;\n    result[4] = this[5] * inverseScale1;\n    result[5] = this[6] * inverseScale2;\n    result[6] = this[8] * inverseScale0;\n    result[7] = this[9] * inverseScale1;\n    result[8] = this[10] * inverseScale2;\n    return result;\n  }\n\n  transpose() {\n    mat4.transpose(this, this);\n    return this.check();\n  }\n\n  invert() {\n    mat4.invert(this, this);\n    return this.check();\n  }\n\n  multiplyLeft(a) {\n    mat4.multiply(this, a, this);\n    return this.check();\n  }\n\n  multiplyRight(a) {\n    mat4.multiply(this, this, a);\n    return this.check();\n  }\n\n  rotateX(radians) {\n    mat4.rotateX(this, this, radians);\n    return this.check();\n  }\n\n  rotateY(radians) {\n    mat4.rotateY(this, this, radians);\n    return this.check();\n  }\n\n  rotateZ(radians) {\n    mat4.rotateZ(this, this, radians);\n    return this.check();\n  }\n\n  rotateXYZ(angleXYZ) {\n    return this.rotateX(angleXYZ[0]).rotateY(angleXYZ[1]).rotateZ(angleXYZ[2]);\n  }\n\n  rotateAxis(radians, axis) {\n    mat4.rotate(this, this, radians, axis);\n    return this.check();\n  }\n\n  scale(factor) {\n    mat4.scale(this, this, Array.isArray(factor) ? factor : [factor, factor, factor]);\n    return this.check();\n  }\n\n  translate(vector) {\n    mat4.translate(this, this, vector);\n    return this.check();\n  }\n\n  transform(vector, result) {\n    if (vector.length === 4) {\n      result = vec4.transformMat4(result || [-0, -0, -0, -0], vector, this);\n      checkVector(result, 4);\n      return result;\n    }\n\n    return this.transformAsPoint(vector, result);\n  }\n\n  transformAsPoint(vector, result) {\n    const {\n      length\n    } = vector;\n    let out;\n\n    switch (length) {\n      case 2:\n        out = vec2.transformMat4(result || [-0, -0], vector, this);\n        break;\n\n      case 3:\n        out = vec3.transformMat4(result || [-0, -0, -0], vector, this);\n        break;\n\n      default:\n        throw new Error('Illegal vector');\n    }\n\n    checkVector(out, vector.length);\n    return out;\n  }\n\n  transformAsVector(vector, result) {\n    let out;\n\n    switch (vector.length) {\n      case 2:\n        out = vec2_transformMat4AsVector(result || [-0, -0], vector, this);\n        break;\n\n      case 3:\n        out = vec3_transformMat4AsVector(result || [-0, -0, -0], vector, this);\n        break;\n\n      default:\n        throw new Error('Illegal vector');\n    }\n\n    checkVector(out, vector.length);\n    return out;\n  }\n\n  transformPoint(vector, result) {\n    return this.transformAsPoint(vector, result);\n  }\n\n  transformVector(vector, result) {\n    return this.transformAsPoint(vector, result);\n  }\n\n  transformDirection(vector, result) {\n    return this.transformAsVector(vector, result);\n  }\n\n  makeRotationX(radians) {\n    return this.identity().rotateX(radians);\n  }\n\n  makeTranslation(x, y, z) {\n    return this.identity().translate([x, y, z]);\n  }\n\n}\nlet ZERO;\nlet IDENTITY;\n\nfunction getZeroMatrix() {\n  if (!ZERO) {\n    ZERO = new Matrix4([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);\n    Object.freeze(ZERO);\n  }\n\n  return ZERO;\n}\n\nfunction getIdentityMatrix() {\n  if (!IDENTITY) {\n    IDENTITY = new Matrix4();\n    Object.freeze(IDENTITY);\n  }\n\n  return IDENTITY;\n}\n\nfunction checkRadians(possiblyDegrees) {\n  if (possiblyDegrees > Math.PI * 2) {\n    throw Error('expected radians');\n  }\n}\n\nfunction computeInfinitePerspectiveOffCenter(result, left, right, bottom, top, near) {\n  const column0Row0 = 2 * near / (right - left);\n  const column1Row1 = 2 * near / (top - bottom);\n  const column2Row0 = (right + left) / (right - left);\n  const column2Row1 = (top + bottom) / (top - bottom);\n  const column2Row2 = -1;\n  const column2Row3 = -1;\n  const column3Row2 = -2 * near;\n  result[0] = column0Row0;\n  result[1] = 0;\n  result[2] = 0;\n  result[3] = 0;\n  result[4] = 0;\n  result[5] = column1Row1;\n  result[6] = 0;\n  result[7] = 0;\n  result[8] = column2Row0;\n  result[9] = column2Row1;\n  result[10] = column2Row2;\n  result[11] = column2Row3;\n  result[12] = 0;\n  result[13] = 0;\n  result[14] = column3Row2;\n  result[15] = 0;\n  return result;\n}\n//# sourceMappingURL=matrix4.js.map","const DEFAULT_HIGHLIGHT_COLOR = new Uint8Array([0, 255, 255, 255]);\nconst DEFAULT_MODULE_OPTIONS = {\n  pickingSelectedColor: null,\n  pickingHighlightColor: DEFAULT_HIGHLIGHT_COLOR,\n  pickingActive: false,\n  pickingAttribute: false\n};\n\nfunction getUniforms() {\n  let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_MODULE_OPTIONS;\n  const uniforms = {};\n\n  if (opts.pickingSelectedColor !== undefined) {\n    if (!opts.pickingSelectedColor) {\n      uniforms.picking_uSelectedColorValid = 0;\n    } else {\n      const selectedColor = opts.pickingSelectedColor.slice(0, 3);\n      uniforms.picking_uSelectedColorValid = 1;\n      uniforms.picking_uSelectedColor = selectedColor;\n    }\n  }\n\n  if (opts.pickingHighlightColor) {\n    const color = Array.from(opts.pickingHighlightColor, x => x / 255);\n\n    if (!Number.isFinite(color[3])) {\n      color[3] = 1;\n    }\n\n    uniforms.picking_uHighlightColor = color;\n  }\n\n  if (opts.pickingActive !== undefined) {\n    uniforms.picking_uActive = Boolean(opts.pickingActive);\n    uniforms.picking_uAttribute = Boolean(opts.pickingAttribute);\n  }\n\n  return uniforms;\n}\n\nconst vs = \"uniform bool picking_uActive;\\nuniform bool picking_uAttribute;\\nuniform vec3 picking_uSelectedColor;\\nuniform bool picking_uSelectedColorValid;\\n\\nout vec4 picking_vRGBcolor_Avalid;\\n\\nconst float COLOR_SCALE = 1. / 255.;\\n\\nbool picking_isColorValid(vec3 color) {\\n  return dot(color, vec3(1.0)) > 0.001;\\n}\\n\\nbool isVertexPicked(vec3 vertexColor) {\\n  return\\n    picking_uSelectedColorValid &&\\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\\n}\\n\\nvoid picking_setPickingColor(vec3 pickingColor) {\\n  if (picking_uActive) {\\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\\n\\n    if (!picking_uAttribute) {\\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\\n    }\\n  } else {\\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\\n  }\\n}\\n\\nvoid picking_setPickingAttribute(float value) {\\n  if (picking_uAttribute) {\\n    picking_vRGBcolor_Avalid.r = value;\\n  }\\n}\\nvoid picking_setPickingAttribute(vec2 value) {\\n  if (picking_uAttribute) {\\n    picking_vRGBcolor_Avalid.rg = value;\\n  }\\n}\\nvoid picking_setPickingAttribute(vec3 value) {\\n  if (picking_uAttribute) {\\n    picking_vRGBcolor_Avalid.rgb = value;\\n  }\\n}\\n\";\nconst fs = \"uniform bool picking_uActive;\\nuniform vec3 picking_uSelectedColor;\\nuniform vec4 picking_uHighlightColor;\\n\\nin vec4 picking_vRGBcolor_Avalid;\\nvec4 picking_filterHighlightColor(vec4 color) {\\n  if (picking_uActive) {\\n    return color;\\n  }\\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\\n\\n  if (selected) {\\n    float highLightAlpha = picking_uHighlightColor.a;\\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\\n    float highLightRatio = highLightAlpha / blendedAlpha;\\n\\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\\n    return vec4(blendedRGB, blendedAlpha);\\n  } else {\\n    return color;\\n  }\\n}\\nvec4 picking_filterPickingColor(vec4 color) {\\n  if (picking_uActive) {\\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\\n      discard;\\n    }\\n    return picking_vRGBcolor_Avalid;\\n  }\\n  return color;\\n}\\nvec4 picking_filterColor(vec4 color) {\\n  vec4 highightColor = picking_filterHighlightColor(color);\\n  return picking_filterPickingColor(highightColor);\\n}\\n\\n\";\nexport const picking = {\n  name: 'picking',\n  vs,\n  fs,\n  getUniforms\n};\n//# sourceMappingURL=picking.js.map","const vs = \"attribute float transform_elementID;\\nvec2 transform_getPixelSizeHalf(vec2 size) {\\n  return vec2(1.) / (2. * size);\\n}\\n\\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\\n  return vec2(xIndex, yIndex);\\n}\\nvec2 transform_getTexCoord(vec2 size) {\\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\\n  vec2 coord = indices / size + pixelSizeHalf;\\n  return coord;\\n}\\nvec2 transform_getPos(vec2 size) {\\n  vec2 texCoord = transform_getTexCoord(size);\\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\\n  return pos;\\n}\\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\\n  vec2 texCoord = transform_getTexCoord(size);\\n  vec4 textureColor = texture2D(texSampler, texCoord);\\n  return textureColor;\\n}\\n\";\nexport const transform = {\n  name: 'transform',\n  vs,\n  fs: null\n};\n//# sourceMappingURL=transform.js.map","import { assembleShaders } from '@luma.gl/shadertools';\nimport { Program } from '@luma.gl/webgl';\nexport default class ProgramManager {\n  static getDefaultProgramManager(gl) {\n    gl.luma = gl.luma || {};\n    gl.luma.defaultProgramManager = gl.luma.defaultProgramManager || new ProgramManager(gl);\n    return gl.luma.defaultProgramManager;\n  }\n\n  constructor(gl) {\n    this.gl = gl;\n    this._programCache = {};\n    this._getUniforms = {};\n    this._registeredModules = {};\n    this._hookFunctions = [];\n    this._defaultModules = [];\n    this._hashes = {};\n    this._hashCounter = 0;\n    this.stateHash = 0;\n    this._useCounts = {};\n  }\n\n  addDefaultModule(module) {\n    if (!this._defaultModules.find(m => m.name === module.name)) {\n      this._defaultModules.push(module);\n    }\n\n    this.stateHash++;\n  }\n\n  removeDefaultModule(module) {\n    const moduleName = typeof module === 'string' ? module : module.name;\n    this._defaultModules = this._defaultModules.filter(m => m.name !== moduleName);\n    this.stateHash++;\n  }\n\n  addShaderHook(hook, opts) {\n    if (opts) {\n      hook = Object.assign(opts, {\n        hook\n      });\n    }\n\n    this._hookFunctions.push(hook);\n\n    this.stateHash++;\n  }\n\n  get() {\n    let props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      vs = '',\n      fs = '',\n      defines = {},\n      inject = {},\n      varyings = [],\n      bufferMode = 0x8c8d,\n      transpileToGLSL100 = false\n    } = props;\n\n    const modules = this._getModuleList(props.modules);\n\n    const vsHash = this._getHash(vs);\n\n    const fsHash = this._getHash(fs);\n\n    const moduleHashes = modules.map(m => this._getHash(m.name)).sort();\n    const varyingHashes = varyings.map(v => this._getHash(v));\n    const defineKeys = Object.keys(defines).sort();\n    const injectKeys = Object.keys(inject).sort();\n    const defineHashes = [];\n    const injectHashes = [];\n\n    for (const key of defineKeys) {\n      defineHashes.push(this._getHash(key));\n      defineHashes.push(this._getHash(defines[key]));\n    }\n\n    for (const key of injectKeys) {\n      injectHashes.push(this._getHash(key));\n      injectHashes.push(this._getHash(inject[key]));\n    }\n\n    const hash = \"\".concat(vsHash, \"/\").concat(fsHash, \"D\").concat(defineHashes.join('/'), \"M\").concat(moduleHashes.join('/'), \"I\").concat(injectHashes.join('/'), \"V\").concat(varyingHashes.join('/'), \"H\").concat(this.stateHash, \"B\").concat(bufferMode).concat(transpileToGLSL100 ? 'T' : '');\n\n    if (!this._programCache[hash]) {\n      const assembled = assembleShaders(this.gl, {\n        vs,\n        fs,\n        modules,\n        inject,\n        defines,\n        hookFunctions: this._hookFunctions,\n        transpileToGLSL100\n      });\n      this._programCache[hash] = new Program(this.gl, {\n        hash,\n        vs: assembled.vs,\n        fs: assembled.fs,\n        varyings,\n        bufferMode\n      });\n\n      this._getUniforms[hash] = assembled.getUniforms || (x => {});\n\n      this._useCounts[hash] = 0;\n    }\n\n    this._useCounts[hash]++;\n    return this._programCache[hash];\n  }\n\n  getUniforms(program) {\n    return this._getUniforms[program.hash] || null;\n  }\n\n  release(program) {\n    const hash = program.hash;\n    this._useCounts[hash]--;\n\n    if (this._useCounts[hash] === 0) {\n      this._programCache[hash].delete();\n\n      delete this._programCache[hash];\n      delete this._getUniforms[hash];\n      delete this._useCounts[hash];\n    }\n  }\n\n  _getHash(key) {\n    if (this._hashes[key] === undefined) {\n      this._hashes[key] = this._hashCounter++;\n    }\n\n    return this._hashes[key];\n  }\n\n  _getModuleList() {\n    let appModules = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    const modules = new Array(this._defaultModules.length + appModules.length);\n    const seen = {};\n    let count = 0;\n\n    for (let i = 0, len = this._defaultModules.length; i < len; ++i) {\n      const module = this._defaultModules[i];\n      const name = module.name;\n      modules[count++] = module;\n      seen[name] = true;\n    }\n\n    for (let i = 0, len = appModules.length; i < len; ++i) {\n      const module = appModules[i];\n      const name = module.name;\n\n      if (!seen[name]) {\n        modules[count++] = module;\n        seen[name] = true;\n      }\n    }\n\n    modules.length = count;\n    return modules;\n  }\n\n}\n//# sourceMappingURL=program-manager.js.map","import { Buffer, assert } from '@luma.gl/webgl';\nconst GLTF_TO_LUMA_ATTRIBUTE_MAP = {\n  POSITION: 'positions',\n  NORMAL: 'normals',\n  COLOR_0: 'colors',\n  TEXCOORD_0: 'texCoords',\n  TEXCOORD_1: 'texCoords1',\n  TEXCOORD_2: 'texCoords2'\n};\nexport function getBuffersFromGeometry(gl, geometry, options) {\n  const buffers = {};\n  let indices = geometry.indices;\n\n  for (const name in geometry.attributes) {\n    const attribute = geometry.attributes[name];\n    const remappedName = mapAttributeName(name, options);\n\n    if (name === 'indices') {\n      indices = attribute;\n    } else if (attribute.constant) {\n      buffers[remappedName] = attribute.value;\n    } else {\n      const typedArray = attribute.value;\n      const accessor = { ...attribute\n      };\n      delete accessor.value;\n      buffers[remappedName] = [new Buffer(gl, typedArray), accessor];\n      inferAttributeAccessor(name, accessor);\n    }\n  }\n\n  if (indices) {\n    const data = indices.value || indices;\n    assert(data instanceof Uint16Array || data instanceof Uint32Array, 'attribute array for \"indices\" must be of integer type');\n    const accessor = {\n      size: 1,\n      isIndexed: indices.isIndexed === undefined ? true : indices.isIndexed\n    };\n    buffers.indices = [new Buffer(gl, {\n      data,\n      target: 34963\n    }), accessor];\n  }\n\n  return buffers;\n}\n\nfunction mapAttributeName(name, options) {\n  const {\n    attributeMap = GLTF_TO_LUMA_ATTRIBUTE_MAP\n  } = options || {};\n  return attributeMap && attributeMap[name] || name;\n}\n\nexport function inferAttributeAccessor(attributeName, attribute) {\n  let category;\n\n  switch (attributeName) {\n    case 'texCoords':\n    case 'texCoord1':\n    case 'texCoord2':\n    case 'texCoord3':\n      category = 'uvs';\n      break;\n\n    case 'vertices':\n    case 'positions':\n    case 'normals':\n    case 'pickingColors':\n      category = 'vectors';\n      break;\n\n    default:\n  }\n\n  switch (category) {\n    case 'vectors':\n      attribute.size = attribute.size || 3;\n      break;\n\n    case 'uvs':\n      attribute.size = attribute.size || 2;\n      break;\n\n    default:\n  }\n\n  assert(Number.isFinite(attribute.size), \"attribute \".concat(attributeName, \" needs size\"));\n}\n//# sourceMappingURL=model-utils.js.map","import { isWebGL } from '@luma.gl/gltools';\nimport ProgramManager from './program-manager';\nimport { Program, VertexArray, clear, TransformFeedback, Buffer, log, isObjectEmpty, uid, assert } from '@luma.gl/webgl';\nimport { getDebugTableForUniforms, getDebugTableForVertexArray, getDebugTableForProgramConfiguration } from '@luma.gl/webgl';\nimport { getBuffersFromGeometry } from './model-utils';\nconst LOG_DRAW_PRIORITY = 2;\nconst LOG_DRAW_TIMEOUT = 10000;\nconst ERR_MODEL_PARAMS = 'Model needs drawMode and vertexCount';\n\nconst NOOP = () => {};\n\nconst DRAW_PARAMS = {};\nexport default class Model {\n  constructor(gl) {\n    let props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const {\n      id = uid('model')\n    } = props;\n    assert(isWebGL(gl));\n    this.id = id;\n    this.gl = gl;\n    this.id = props.id || uid('Model');\n    this.lastLogTime = 0;\n    this.animated = false;\n    this.initialize(props);\n  }\n\n  initialize(props) {\n    this.props = {};\n    this.programManager = props.programManager || ProgramManager.getDefaultProgramManager(this.gl);\n    this._programManagerState = -1;\n    this._managedProgram = false;\n    const {\n      program = null,\n      vs,\n      fs,\n      modules,\n      defines,\n      inject,\n      varyings,\n      bufferMode,\n      transpileToGLSL100\n    } = props;\n    this.programProps = {\n      program,\n      vs,\n      fs,\n      modules,\n      defines,\n      inject,\n      varyings,\n      bufferMode,\n      transpileToGLSL100\n    };\n    this.program = null;\n    this.vertexArray = null;\n    this._programDirty = true;\n    this.userData = {};\n    this.needsRedraw = true;\n    this._attributes = {};\n    this.attributes = {};\n    this.uniforms = {};\n    this.pickable = true;\n\n    this._checkProgram();\n\n    this.setUniforms(Object.assign({}, this.getModuleUniforms(props.moduleSettings)));\n    this.drawMode = props.drawMode !== undefined ? props.drawMode : 4;\n    this.vertexCount = props.vertexCount || 0;\n    this.geometryBuffers = {};\n    this.isInstanced = props.isInstanced || props.instanced || props.instanceCount > 0;\n\n    this._setModelProps(props);\n\n    this.geometry = {};\n    assert(this.drawMode !== undefined && Number.isFinite(this.vertexCount), ERR_MODEL_PARAMS);\n  }\n\n  setProps(props) {\n    this._setModelProps(props);\n  }\n\n  delete() {\n    for (const key in this._attributes) {\n      if (this._attributes[key] !== this.attributes[key]) {\n        this._attributes[key].delete();\n      }\n    }\n\n    if (this._managedProgram) {\n      this.programManager.release(this.program);\n      this._managedProgram = false;\n    }\n\n    this.vertexArray.delete();\n\n    this._deleteGeometryBuffers();\n  }\n\n  getDrawMode() {\n    return this.drawMode;\n  }\n\n  getVertexCount() {\n    return this.vertexCount;\n  }\n\n  getInstanceCount() {\n    return this.instanceCount;\n  }\n\n  getAttributes() {\n    return this.attributes;\n  }\n\n  getProgram() {\n    return this.program;\n  }\n\n  setProgram(props) {\n    const {\n      program,\n      vs,\n      fs,\n      modules,\n      defines,\n      inject,\n      varyings,\n      bufferMode,\n      transpileToGLSL100\n    } = props;\n    this.programProps = {\n      program,\n      vs,\n      fs,\n      modules,\n      defines,\n      inject,\n      varyings,\n      bufferMode,\n      transpileToGLSL100\n    };\n    this._programDirty = true;\n  }\n\n  getUniforms() {\n    return this.uniforms;\n  }\n\n  setDrawMode(drawMode) {\n    this.drawMode = drawMode;\n    return this;\n  }\n\n  setVertexCount(vertexCount) {\n    assert(Number.isFinite(vertexCount));\n    this.vertexCount = vertexCount;\n    return this;\n  }\n\n  setInstanceCount(instanceCount) {\n    assert(Number.isFinite(instanceCount));\n    this.instanceCount = instanceCount;\n    return this;\n  }\n\n  setGeometry(geometry) {\n    this.drawMode = geometry.drawMode;\n    this.vertexCount = geometry.getVertexCount();\n\n    this._deleteGeometryBuffers();\n\n    this.geometryBuffers = getBuffersFromGeometry(this.gl, geometry);\n    this.vertexArray.setAttributes(this.geometryBuffers);\n    return this;\n  }\n\n  setAttributes() {\n    let attributes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if (isObjectEmpty(attributes)) {\n      return this;\n    }\n\n    const normalizedAttributes = {};\n\n    for (const name in attributes) {\n      const attribute = attributes[name];\n      normalizedAttributes[name] = attribute.getValue ? attribute.getValue() : attribute;\n    }\n\n    this.vertexArray.setAttributes(normalizedAttributes);\n    return this;\n  }\n\n  setUniforms() {\n    let uniforms = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    Object.assign(this.uniforms, uniforms);\n    return this;\n  }\n\n  getModuleUniforms(opts) {\n    this._checkProgram();\n\n    const getUniforms = this.programManager.getUniforms(this.program);\n\n    if (getUniforms) {\n      return getUniforms(opts);\n    }\n\n    return {};\n  }\n\n  updateModuleSettings(opts) {\n    const uniforms = this.getModuleUniforms(opts || {});\n    return this.setUniforms(uniforms);\n  }\n\n  clear(opts) {\n    clear(this.program.gl, opts);\n    return this;\n  }\n\n  draw() {\n    let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    this._checkProgram();\n\n    const {\n      moduleSettings = null,\n      framebuffer,\n      uniforms = {},\n      attributes = {},\n      transformFeedback = this.transformFeedback,\n      parameters = {},\n      vertexArray = this.vertexArray\n    } = opts;\n    this.setAttributes(attributes);\n    this.updateModuleSettings(moduleSettings);\n    this.setUniforms(uniforms);\n    let logPriority;\n\n    if (log.priority >= LOG_DRAW_PRIORITY) {\n      logPriority = this._logDrawCallStart(LOG_DRAW_PRIORITY);\n    }\n\n    const drawParams = this.vertexArray.getDrawParams();\n    const {\n      isIndexed = drawParams.isIndexed,\n      indexType = drawParams.indexType,\n      indexOffset = drawParams.indexOffset,\n      vertexArrayInstanced = drawParams.isInstanced\n    } = this.props;\n\n    if (vertexArrayInstanced && !this.isInstanced) {\n      log.warn('Found instanced attributes on non-instanced model', this.id)();\n    }\n\n    const {\n      isInstanced,\n      instanceCount\n    } = this;\n    const {\n      onBeforeRender = NOOP,\n      onAfterRender = NOOP\n    } = this.props;\n    onBeforeRender();\n    this.program.setUniforms(this.uniforms);\n    const didDraw = this.program.draw(Object.assign(DRAW_PARAMS, opts, {\n      logPriority,\n      uniforms: null,\n      framebuffer,\n      parameters,\n      drawMode: this.getDrawMode(),\n      vertexCount: this.getVertexCount(),\n      vertexArray,\n      transformFeedback,\n      isIndexed,\n      indexType,\n      isInstanced,\n      instanceCount,\n      offset: isIndexed ? indexOffset : 0\n    }));\n    onAfterRender();\n\n    if (log.priority >= LOG_DRAW_PRIORITY) {\n      this._logDrawCallEnd(logPriority, vertexArray, framebuffer);\n    }\n\n    return didDraw;\n  }\n\n  transform() {\n    let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      discard = true,\n      feedbackBuffers,\n      unbindModels = []\n    } = opts;\n    let {\n      parameters\n    } = opts;\n\n    if (feedbackBuffers) {\n      this._setFeedbackBuffers(feedbackBuffers);\n    }\n\n    if (discard) {\n      parameters = Object.assign({}, parameters, {\n        [35977]: discard\n      });\n    }\n\n    unbindModels.forEach(model => model.vertexArray.unbindBuffers());\n\n    try {\n      this.draw(Object.assign({}, opts, {\n        parameters\n      }));\n    } finally {\n      unbindModels.forEach(model => model.vertexArray.bindBuffers());\n    }\n\n    return this;\n  }\n\n  render() {\n    let uniforms = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    log.warn('Model.render() is deprecated. Use Model.setUniforms() and Model.draw()')();\n    return this.setUniforms(uniforms).draw();\n  }\n\n  _setModelProps(props) {\n    Object.assign(this.props, props);\n\n    if ('uniforms' in props) {\n      this.setUniforms(props.uniforms);\n    }\n\n    if ('pickable' in props) {\n      this.pickable = props.pickable;\n    }\n\n    if ('instanceCount' in props) {\n      this.instanceCount = props.instanceCount;\n    }\n\n    if ('geometry' in props) {\n      this.setGeometry(props.geometry);\n    }\n\n    if ('attributes' in props) {\n      this.setAttributes(props.attributes);\n    }\n\n    if ('_feedbackBuffers' in props) {\n      this._setFeedbackBuffers(props._feedbackBuffers);\n    }\n  }\n\n  _checkProgram() {\n    const needsUpdate = this._programDirty || this.programManager.stateHash !== this._programManagerState;\n\n    if (!needsUpdate) {\n      return;\n    }\n\n    let {\n      program\n    } = this.programProps;\n\n    if (program) {\n      this._managedProgram = false;\n    } else {\n      const {\n        vs,\n        fs,\n        modules,\n        inject,\n        defines,\n        varyings,\n        bufferMode,\n        transpileToGLSL100\n      } = this.programProps;\n      program = this.programManager.get({\n        vs,\n        fs,\n        modules,\n        inject,\n        defines,\n        varyings,\n        bufferMode,\n        transpileToGLSL100\n      });\n\n      if (this.program && this._managedProgram) {\n        this.programManager.release(this.program);\n      }\n\n      this._programManagerState = this.programManager.stateHash;\n      this._managedProgram = true;\n    }\n\n    assert(program instanceof Program, 'Model needs a program');\n    this._programDirty = false;\n\n    if (program === this.program) {\n      return;\n    }\n\n    this.program = program;\n\n    if (this.vertexArray) {\n      this.vertexArray.setProps({\n        program: this.program,\n        attributes: this.vertexArray.attributes\n      });\n    } else {\n      this.vertexArray = new VertexArray(this.gl, {\n        program: this.program\n      });\n    }\n\n    this.setUniforms(Object.assign({}, this.getModuleUniforms()));\n  }\n\n  _deleteGeometryBuffers() {\n    for (const name in this.geometryBuffers) {\n      const buffer = this.geometryBuffers[name][0] || this.geometryBuffers[name];\n\n      if (buffer instanceof Buffer) {\n        buffer.delete();\n      }\n    }\n  }\n\n  _setAnimationProps(animationProps) {\n    if (this.animated) {\n      assert(animationProps, 'Model.draw(): animated uniforms but no animationProps');\n    }\n  }\n\n  _setFeedbackBuffers() {\n    let feedbackBuffers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if (isObjectEmpty(feedbackBuffers)) {\n      return this;\n    }\n\n    const {\n      gl\n    } = this.program;\n    this.transformFeedback = this.transformFeedback || new TransformFeedback(gl, {\n      program: this.program\n    });\n    this.transformFeedback.setBuffers(feedbackBuffers);\n    return this;\n  }\n\n  _logDrawCallStart(logLevel) {\n    const logDrawTimeout = logLevel > 3 ? 0 : LOG_DRAW_TIMEOUT;\n\n    if (Date.now() - this.lastLogTime < logDrawTimeout) {\n      return undefined;\n    }\n\n    this.lastLogTime = Date.now();\n    log.group(LOG_DRAW_PRIORITY, \">>> DRAWING MODEL \".concat(this.id), {\n      collapsed: log.level <= 2\n    })();\n    return logLevel;\n  }\n\n  _logDrawCallEnd(logLevel, vertexArray, uniforms, framebuffer) {\n    if (logLevel === undefined) {\n      return;\n    }\n\n    const attributeTable = getDebugTableForVertexArray({\n      vertexArray,\n      header: \"\".concat(this.id, \" attributes\"),\n      attributes: this._attributes\n    });\n    const {\n      table: uniformTable,\n      unusedTable,\n      unusedCount\n    } = getDebugTableForUniforms({\n      header: \"\".concat(this.id, \" uniforms\"),\n      program: this.program,\n      uniforms: Object.assign({}, this.program.uniforms, uniforms)\n    });\n    const {\n      table: missingTable,\n      count: missingCount\n    } = getDebugTableForUniforms({\n      header: \"\".concat(this.id, \" uniforms\"),\n      program: this.program,\n      uniforms: Object.assign({}, this.program.uniforms, uniforms),\n      undefinedOnly: true\n    });\n\n    if (missingCount > 0) {\n      log.log('MISSING UNIFORMS', Object.keys(missingTable))();\n    }\n\n    if (unusedCount > 0) {\n      log.log('UNUSED UNIFORMS', Object.keys(unusedTable))();\n    }\n\n    const configTable = getDebugTableForProgramConfiguration(this.vertexArray.configuration);\n    log.table(logLevel, attributeTable)();\n    log.table(logLevel, uniformTable)();\n    log.table(logLevel + 1, configTable)();\n\n    if (framebuffer) {\n      framebuffer.log({\n        logLevel: LOG_DRAW_PRIORITY,\n        message: \"Rendered to \".concat(framebuffer.id)\n      });\n    }\n\n    log.groupEnd(LOG_DRAW_PRIORITY)();\n  }\n\n}\n//# sourceMappingURL=model.js.map","import { isWebGL2 } from '@luma.gl/gltools';\nimport { Buffer, TransformFeedback } from '@luma.gl/webgl';\nimport { assert } from '@luma.gl/webgl';\nexport default class BufferTransform {\n  constructor(gl) {\n    let props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.gl = gl;\n    this.currentIndex = 0;\n    this.feedbackMap = {};\n    this.varyings = null;\n    this.bindings = [];\n    this.resources = {};\n\n    this._initialize(props);\n\n    Object.seal(this);\n  }\n\n  setupResources(opts) {\n    for (const binding of this.bindings) {\n      this._setupTransformFeedback(binding, opts);\n    }\n  }\n\n  updateModelProps() {\n    let props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      varyings\n    } = this;\n\n    if (varyings.length > 0) {\n      props = Object.assign({}, props, {\n        varyings\n      });\n    }\n\n    return props;\n  }\n\n  getDrawOptions() {\n    let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const binding = this.bindings[this.currentIndex];\n    const {\n      sourceBuffers,\n      transformFeedback\n    } = binding;\n    const attributes = Object.assign({}, sourceBuffers, opts.attributes);\n    return {\n      attributes,\n      transformFeedback\n    };\n  }\n\n  swap() {\n    if (this.feedbackMap) {\n      this.currentIndex = this._getNextIndex();\n      return true;\n    }\n\n    return false;\n  }\n\n  update() {\n    let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    this._setupBuffers(opts);\n  }\n\n  getBuffer(varyingName) {\n    const {\n      feedbackBuffers\n    } = this.bindings[this.currentIndex];\n    const bufferOrParams = varyingName ? feedbackBuffers[varyingName] : null;\n\n    if (!bufferOrParams) {\n      return null;\n    }\n\n    return bufferOrParams instanceof Buffer ? bufferOrParams : bufferOrParams.buffer;\n  }\n\n  getData() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      varyingName\n    } = options;\n    const buffer = this.getBuffer(varyingName);\n\n    if (buffer) {\n      return buffer.getData();\n    }\n\n    return null;\n  }\n\n  delete() {\n    for (const name in this.resources) {\n      this.resources[name].delete();\n    }\n  }\n\n  _initialize() {\n    let props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    this._setupBuffers(props);\n\n    this.varyings = props.varyings || Object.keys(this.bindings[this.currentIndex].feedbackBuffers);\n\n    if (this.varyings.length > 0) {\n      assert(isWebGL2(this.gl));\n    }\n  }\n\n  _getFeedbackBuffers(props) {\n    const {\n      sourceBuffers = {}\n    } = props;\n    const feedbackBuffers = {};\n\n    if (this.bindings[this.currentIndex]) {\n      Object.assign(feedbackBuffers, this.bindings[this.currentIndex].feedbackBuffers);\n    }\n\n    if (this.feedbackMap) {\n      for (const sourceName in this.feedbackMap) {\n        const feedbackName = this.feedbackMap[sourceName];\n\n        if (sourceName in sourceBuffers) {\n          feedbackBuffers[feedbackName] = sourceName;\n        }\n      }\n    }\n\n    Object.assign(feedbackBuffers, props.feedbackBuffers);\n\n    for (const bufferName in feedbackBuffers) {\n      const bufferOrRef = feedbackBuffers[bufferName];\n\n      if (typeof bufferOrRef === 'string') {\n        const sourceBuffer = sourceBuffers[bufferOrRef];\n        const {\n          byteLength,\n          usage,\n          accessor\n        } = sourceBuffer;\n        feedbackBuffers[bufferName] = this._createNewBuffer(bufferName, {\n          byteLength,\n          usage,\n          accessor\n        });\n      }\n    }\n\n    return feedbackBuffers;\n  }\n\n  _setupBuffers() {\n    let props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      sourceBuffers = null\n    } = props;\n    Object.assign(this.feedbackMap, props.feedbackMap);\n\n    const feedbackBuffers = this._getFeedbackBuffers(props);\n\n    this._updateBindings({\n      sourceBuffers,\n      feedbackBuffers\n    });\n  }\n\n  _setupTransformFeedback(binding, _ref) {\n    let {\n      model\n    } = _ref;\n    const {\n      program\n    } = model;\n    binding.transformFeedback = new TransformFeedback(this.gl, {\n      program,\n      buffers: binding.feedbackBuffers\n    });\n  }\n\n  _updateBindings(opts) {\n    this.bindings[this.currentIndex] = this._updateBinding(this.bindings[this.currentIndex], opts);\n\n    if (this.feedbackMap) {\n      const {\n        sourceBuffers,\n        feedbackBuffers\n      } = this._swapBuffers(this.bindings[this.currentIndex]);\n\n      const nextIndex = this._getNextIndex();\n\n      this.bindings[nextIndex] = this._updateBinding(this.bindings[nextIndex], {\n        sourceBuffers,\n        feedbackBuffers\n      });\n    }\n  }\n\n  _updateBinding(binding, opts) {\n    if (!binding) {\n      return {\n        sourceBuffers: Object.assign({}, opts.sourceBuffers),\n        feedbackBuffers: Object.assign({}, opts.feedbackBuffers)\n      };\n    }\n\n    Object.assign(binding.sourceBuffers, opts.sourceBuffers);\n    Object.assign(binding.feedbackBuffers, opts.feedbackBuffers);\n\n    if (binding.transformFeedback) {\n      binding.transformFeedback.setBuffers(binding.feedbackBuffers);\n    }\n\n    return binding;\n  }\n\n  _swapBuffers(opts) {\n    if (!this.feedbackMap) {\n      return null;\n    }\n\n    const sourceBuffers = Object.assign({}, opts.sourceBuffers);\n    const feedbackBuffers = Object.assign({}, opts.feedbackBuffers);\n\n    for (const srcName in this.feedbackMap) {\n      const dstName = this.feedbackMap[srcName];\n      sourceBuffers[srcName] = opts.feedbackBuffers[dstName];\n      feedbackBuffers[dstName] = opts.sourceBuffers[srcName];\n      assert(feedbackBuffers[dstName] instanceof Buffer);\n    }\n\n    return {\n      sourceBuffers,\n      feedbackBuffers\n    };\n  }\n\n  _createNewBuffer(name, opts) {\n    const buffer = new Buffer(this.gl, opts);\n\n    if (this.resources[name]) {\n      this.resources[name].delete();\n    }\n\n    this.resources[name] = buffer;\n    return buffer;\n  }\n\n  _getNextIndex() {\n    return (this.currentIndex + 1) % 2;\n  }\n\n}\n//# sourceMappingURL=buffer-transform.js.map","import { assert } from '@luma.gl/webgl';\nimport { combineInjects, getQualifierDetails, typeToChannelSuffix } from '@luma.gl/shadertools';\nconst SAMPLER_UNIFORM_PREFIX = 'transform_uSampler_';\nconst SIZE_UNIFORM_PREFIX = 'transform_uSize_';\nconst VS_POS_VARIABLE = 'transform_position';\nexport function updateForTextures(_ref) {\n  let {\n    vs,\n    sourceTextureMap,\n    targetTextureVarying,\n    targetTexture\n  } = _ref;\n  const texAttributeNames = Object.keys(sourceTextureMap);\n  let sourceCount = texAttributeNames.length;\n  let targetTextureType = null;\n  const samplerTextureMap = {};\n  let updatedVs = vs;\n  let finalInject = {};\n\n  if (sourceCount > 0 || targetTextureVarying) {\n    const vsLines = updatedVs.split('\\n');\n    const updateVsLines = vsLines.slice();\n    vsLines.forEach((line, index, lines) => {\n      if (sourceCount > 0) {\n        const updated = processAttributeDefinition(line, sourceTextureMap);\n\n        if (updated) {\n          const {\n            updatedLine,\n            inject\n          } = updated;\n          updateVsLines[index] = updatedLine;\n          finalInject = combineInjects([finalInject, inject]);\n          Object.assign(samplerTextureMap, updated.samplerTextureMap);\n          sourceCount--;\n        }\n      }\n\n      if (targetTextureVarying && !targetTextureType) {\n        targetTextureType = getVaryingType(line, targetTextureVarying);\n      }\n    });\n\n    if (targetTextureVarying) {\n      assert(targetTexture);\n      const sizeName = \"\".concat(SIZE_UNIFORM_PREFIX).concat(targetTextureVarying);\n      const uniformDeclaration = \"uniform vec2 \".concat(sizeName, \";\\n\");\n      const posInstructions = \"     vec2 \".concat(VS_POS_VARIABLE, \" = transform_getPos(\").concat(sizeName, \");\\n     gl_Position = vec4(\").concat(VS_POS_VARIABLE, \", 0, 1.);\\n\");\n      const inject = {\n        'vs:#decl': uniformDeclaration,\n        'vs:#main-start': posInstructions\n      };\n      finalInject = combineInjects([finalInject, inject]);\n    }\n\n    updatedVs = updateVsLines.join('\\n');\n  }\n\n  return {\n    vs: updatedVs,\n    targetTextureType,\n    inject: finalInject,\n    samplerTextureMap\n  };\n}\nexport function getSizeUniforms(_ref2) {\n  let {\n    sourceTextureMap,\n    targetTextureVarying,\n    targetTexture\n  } = _ref2;\n  const uniforms = {};\n  let width;\n  let height;\n\n  if (targetTextureVarying) {\n    ({\n      width,\n      height\n    } = targetTexture);\n    uniforms[\"\".concat(SIZE_UNIFORM_PREFIX).concat(targetTextureVarying)] = [width, height];\n  }\n\n  for (const textureName in sourceTextureMap) {\n    ({\n      width,\n      height\n    } = sourceTextureMap[textureName]);\n    uniforms[\"\".concat(SIZE_UNIFORM_PREFIX).concat(textureName)] = [width, height];\n  }\n\n  return uniforms;\n}\n\nfunction getAttributeDefinition(line) {\n  return getQualifierDetails(line, ['attribute', 'in']);\n}\n\nfunction getSamplerDeclerations(textureName) {\n  const samplerName = \"\".concat(SAMPLER_UNIFORM_PREFIX).concat(textureName);\n  const sizeName = \"\".concat(SIZE_UNIFORM_PREFIX).concat(textureName);\n  const uniformDeclerations = \"  uniform sampler2D \".concat(samplerName, \";\\n  uniform vec2 \").concat(sizeName, \";\");\n  return {\n    samplerName,\n    sizeName,\n    uniformDeclerations\n  };\n}\n\nexport function getVaryingType(line, varying) {\n  const qualaiferDetails = getQualifierDetails(line, ['varying', 'out']);\n\n  if (!qualaiferDetails) {\n    return null;\n  }\n\n  return qualaiferDetails.name === varying ? qualaiferDetails.type : null;\n}\nexport function processAttributeDefinition(line, textureMap) {\n  const samplerTextureMap = {};\n  const attributeData = getAttributeDefinition(line);\n\n  if (!attributeData) {\n    return null;\n  }\n\n  const {\n    type,\n    name\n  } = attributeData;\n\n  if (name && textureMap[name]) {\n    const updatedLine = \"// \".concat(line, \" => Replaced by Transform with a sampler\");\n    const {\n      samplerName,\n      sizeName,\n      uniformDeclerations\n    } = getSamplerDeclerations(name);\n    const channels = typeToChannelSuffix(type);\n    const sampleInstruction = \"  \".concat(type, \" \").concat(name, \" = transform_getInput(\").concat(samplerName, \", \").concat(sizeName, \").\").concat(channels, \";\\n\");\n    samplerTextureMap[samplerName] = name;\n    const inject = {\n      'vs:#decl': uniformDeclerations,\n      'vs:#main-start': sampleInstruction\n    };\n    return {\n      updatedLine,\n      inject,\n      samplerTextureMap\n    };\n  }\n\n  return null;\n}\n//# sourceMappingURL=transform-shader-utils.js.map","import { cloneTextureFrom, readPixelsToArray, getShaderVersion, Buffer, Texture2D, Framebuffer } from '@luma.gl/webgl';\nimport { _transform as transformModule, getPassthroughFS, typeToChannelCount, combineInjects } from '@luma.gl/shadertools';\nimport { updateForTextures, getSizeUniforms } from './transform-shader-utils';\nconst SRC_TEX_PARAMETER_OVERRIDES = {\n  [10241]: 9728,\n  [10240]: 9728,\n  [10242]: 33071,\n  [10243]: 33071\n};\nconst FS_OUTPUT_VARIABLE = 'transform_output';\nexport default class TextureTransform {\n  constructor(gl) {\n    let props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.gl = gl;\n    this.id = this.currentIndex = 0;\n    this._swapTexture = null;\n    this.targetTextureVarying = null;\n    this.targetTextureType = null;\n    this.samplerTextureMap = null;\n    this.bindings = [];\n    this.resources = {};\n\n    this._initialize(props);\n\n    Object.seal(this);\n  }\n\n  updateModelProps() {\n    let props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    const updatedModelProps = this._processVertexShader(props);\n\n    return Object.assign({}, props, updatedModelProps);\n  }\n\n  getDrawOptions() {\n    let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      sourceBuffers,\n      sourceTextures,\n      framebuffer,\n      targetTexture\n    } = this.bindings[this.currentIndex];\n    const attributes = Object.assign({}, sourceBuffers, opts.attributes);\n    const uniforms = Object.assign({}, opts.uniforms);\n    const parameters = Object.assign({}, opts.parameters);\n    let discard = opts.discard;\n\n    if (this.hasSourceTextures || this.hasTargetTexture) {\n      attributes.transform_elementID = this.elementIDBuffer;\n\n      for (const sampler in this.samplerTextureMap) {\n        const textureName = this.samplerTextureMap[sampler];\n        uniforms[sampler] = sourceTextures[textureName];\n      }\n\n      this._setSourceTextureParameters();\n\n      const sizeUniforms = getSizeUniforms({\n        sourceTextureMap: sourceTextures,\n        targetTextureVarying: this.targetTextureVarying,\n        targetTexture\n      });\n      Object.assign(uniforms, sizeUniforms);\n    }\n\n    if (this.hasTargetTexture) {\n      discard = false;\n      parameters.viewport = [0, 0, framebuffer.width, framebuffer.height];\n    }\n\n    return {\n      attributes,\n      framebuffer,\n      uniforms,\n      discard,\n      parameters\n    };\n  }\n\n  swap() {\n    if (this._swapTexture) {\n      this.currentIndex = this._getNextIndex();\n      return true;\n    }\n\n    return false;\n  }\n\n  update() {\n    let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    this._setupTextures(opts);\n  }\n\n  getTargetTexture() {\n    const {\n      targetTexture\n    } = this.bindings[this.currentIndex];\n    return targetTexture;\n  }\n\n  getData() {\n    let {\n      packed = false\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      framebuffer\n    } = this.bindings[this.currentIndex];\n    const pixels = readPixelsToArray(framebuffer);\n\n    if (!packed) {\n      return pixels;\n    }\n\n    const ArrayType = pixels.constructor;\n    const channelCount = typeToChannelCount(this.targetTextureType);\n    const packedPixels = new ArrayType(pixels.length * channelCount / 4);\n    let packCount = 0;\n\n    for (let i = 0; i < pixels.length; i += 4) {\n      for (let j = 0; j < channelCount; j++) {\n        packedPixels[packCount++] = pixels[i + j];\n      }\n    }\n\n    return packedPixels;\n  }\n\n  getFramebuffer() {\n    const currentResources = this.bindings[this.currentIndex];\n    return currentResources.framebuffer;\n  }\n\n  delete() {\n    if (this.ownTexture) {\n      this.ownTexture.delete();\n    }\n\n    if (this.elementIDBuffer) {\n      this.elementIDBuffer.delete();\n    }\n  }\n\n  _initialize() {\n    let props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      _targetTextureVarying,\n      _swapTexture\n    } = props;\n    this._swapTexture = _swapTexture;\n    this.targetTextureVarying = _targetTextureVarying;\n    this.hasTargetTexture = _targetTextureVarying;\n\n    this._setupTextures(props);\n  }\n\n  _createTargetTexture(props) {\n    const {\n      sourceTextures,\n      textureOrReference\n    } = props;\n\n    if (textureOrReference instanceof Texture2D) {\n      return textureOrReference;\n    }\n\n    const refTexture = sourceTextures[textureOrReference];\n\n    if (!refTexture) {\n      return null;\n    }\n\n    this._targetRefTexName = textureOrReference;\n    return this._createNewTexture(refTexture);\n  }\n\n  _setupTextures() {\n    let props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      sourceBuffers,\n      _sourceTextures = {},\n      _targetTexture\n    } = props;\n\n    const targetTexture = this._createTargetTexture({\n      sourceTextures: _sourceTextures,\n      textureOrReference: _targetTexture\n    });\n\n    this.hasSourceTextures = this.hasSourceTextures || _sourceTextures && Object.keys(_sourceTextures).length > 0;\n\n    this._updateBindings({\n      sourceBuffers,\n      sourceTextures: _sourceTextures,\n      targetTexture\n    });\n\n    if ('elementCount' in props) {\n      this._updateElementIDBuffer(props.elementCount);\n    }\n  }\n\n  _updateElementIDBuffer(elementCount) {\n    if (typeof elementCount !== 'number' || this.elementCount >= elementCount) {\n      return;\n    }\n\n    const elementIds = new Float32Array(elementCount);\n    elementIds.forEach((_, index, array) => {\n      array[index] = index;\n    });\n\n    if (!this.elementIDBuffer) {\n      this.elementIDBuffer = new Buffer(this.gl, {\n        data: elementIds,\n        accessor: {\n          size: 1\n        }\n      });\n    } else {\n      this.elementIDBuffer.setData({\n        data: elementIds\n      });\n    }\n\n    this.elementCount = elementCount;\n  }\n\n  _updateBindings(opts) {\n    this.bindings[this.currentIndex] = this._updateBinding(this.bindings[this.currentIndex], opts);\n\n    if (this._swapTexture) {\n      const {\n        sourceTextures,\n        targetTexture\n      } = this._swapTextures(this.bindings[this.currentIndex]);\n\n      const nextIndex = this._getNextIndex();\n\n      this.bindings[nextIndex] = this._updateBinding(this.bindings[nextIndex], {\n        sourceTextures,\n        targetTexture\n      });\n    }\n  }\n\n  _updateBinding(binding, opts) {\n    const {\n      sourceBuffers,\n      sourceTextures,\n      targetTexture\n    } = opts;\n\n    if (!binding) {\n      binding = {\n        sourceBuffers: {},\n        sourceTextures: {},\n        targetTexture: null\n      };\n    }\n\n    Object.assign(binding.sourceTextures, sourceTextures);\n    Object.assign(binding.sourceBuffers, sourceBuffers);\n\n    if (targetTexture) {\n      binding.targetTexture = targetTexture;\n      const {\n        width,\n        height\n      } = targetTexture;\n      const {\n        framebuffer\n      } = binding;\n\n      if (framebuffer) {\n        framebuffer.update({\n          attachments: {\n            [36064]: targetTexture\n          },\n          resizeAttachments: false\n        });\n        framebuffer.resize({\n          width,\n          height\n        });\n      } else {\n        binding.framebuffer = new Framebuffer(this.gl, {\n          id: \"transform-framebuffer\",\n          width,\n          height,\n          attachments: {\n            [36064]: targetTexture\n          }\n        });\n      }\n    }\n\n    return binding;\n  }\n\n  _setSourceTextureParameters() {\n    const index = this.currentIndex;\n    const {\n      sourceTextures\n    } = this.bindings[index];\n\n    for (const name in sourceTextures) {\n      sourceTextures[name].setParameters(SRC_TEX_PARAMETER_OVERRIDES);\n    }\n  }\n\n  _swapTextures(opts) {\n    if (!this._swapTexture) {\n      return null;\n    }\n\n    const sourceTextures = Object.assign({}, opts.sourceTextures);\n    sourceTextures[this._swapTexture] = opts.targetTexture;\n    const targetTexture = opts.sourceTextures[this._swapTexture];\n    return {\n      sourceTextures,\n      targetTexture\n    };\n  }\n\n  _createNewTexture(refTexture) {\n    const texture = cloneTextureFrom(refTexture, {\n      parameters: {\n        [10241]: 9728,\n        [10240]: 9728,\n        [10242]: 33071,\n        [10243]: 33071\n      },\n      pixelStore: {\n        [37440]: false\n      }\n    });\n\n    if (this.ownTexture) {\n      this.ownTexture.delete();\n    }\n\n    this.ownTexture = texture;\n    return texture;\n  }\n\n  _getNextIndex() {\n    return (this.currentIndex + 1) % 2;\n  }\n\n  _processVertexShader() {\n    let props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      sourceTextures,\n      targetTexture\n    } = this.bindings[this.currentIndex];\n    const {\n      vs,\n      uniforms,\n      targetTextureType,\n      inject,\n      samplerTextureMap\n    } = updateForTextures({\n      vs: props.vs,\n      sourceTextureMap: sourceTextures,\n      targetTextureVarying: this.targetTextureVarying,\n      targetTexture\n    });\n    const combinedInject = combineInjects([props.inject || {}, inject]);\n    this.targetTextureType = targetTextureType;\n    this.samplerTextureMap = samplerTextureMap;\n    const fs = props._fs || getPassthroughFS({\n      version: getShaderVersion(vs),\n      input: this.targetTextureVarying,\n      inputType: targetTextureType,\n      output: FS_OUTPUT_VARIABLE\n    });\n    const modules = this.hasSourceTextures || this.targetTextureVarying ? [transformModule].concat(props.modules || []) : props.modules;\n    return {\n      vs,\n      fs,\n      modules,\n      uniforms,\n      inject: combinedInject\n    };\n  }\n\n}\n//# sourceMappingURL=texture-transform.js.map","import { getPassthroughFS } from '@luma.gl/shadertools';\nimport BufferTransform from './buffer-transform';\nimport TextureTransform from './texture-transform';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { assert, isObjectEmpty, getShaderVersion } from '@luma.gl/webgl';\nimport Model from '../lib/model';\nexport default class Transform {\n  static isSupported(gl) {\n    return isWebGL2(gl);\n  }\n\n  constructor(gl) {\n    let props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.gl = gl;\n    this.model = null;\n    this.elementCount = 0;\n    this.bufferTransform = null;\n    this.textureTransform = null;\n    this.elementIDBuffer = null;\n\n    this._initialize(props);\n\n    Object.seal(this);\n  }\n\n  delete() {\n    const {\n      model,\n      bufferTransform,\n      textureTransform\n    } = this;\n\n    if (model) {\n      model.delete();\n    }\n\n    if (bufferTransform) {\n      bufferTransform.delete();\n    }\n\n    if (textureTransform) {\n      textureTransform.delete();\n    }\n  }\n\n  run() {\n    let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      clearRenderTarget = true\n    } = opts;\n\n    const updatedOpts = this._updateDrawOptions(opts);\n\n    if (clearRenderTarget && updatedOpts.framebuffer) {\n      updatedOpts.framebuffer.clear({\n        color: true\n      });\n    }\n\n    this.model.transform(updatedOpts);\n  }\n\n  swap() {\n    let swapped = false;\n    const resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n\n    for (const resourceTransform of resourceTransforms) {\n      swapped = swapped || resourceTransform.swap();\n    }\n\n    assert(swapped, 'Nothing to swap');\n  }\n\n  getBuffer() {\n    let varyingName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    return this.bufferTransform && this.bufferTransform.getBuffer(varyingName);\n  }\n\n  getData() {\n    let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n\n    for (const resourceTransform of resourceTransforms) {\n      const data = resourceTransform.getData(opts);\n\n      if (data) {\n        return data;\n      }\n    }\n\n    return null;\n  }\n\n  getFramebuffer() {\n    return this.textureTransform && this.textureTransform.getFramebuffer();\n  }\n\n  update() {\n    let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if ('elementCount' in opts) {\n      this.model.setVertexCount(opts.elementCount);\n    }\n\n    const resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n\n    for (const resourceTransform of resourceTransforms) {\n      resourceTransform.update(opts);\n    }\n  }\n\n  _initialize() {\n    let props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      gl\n    } = this;\n\n    this._buildResourceTransforms(gl, props);\n\n    props = this._updateModelProps(props);\n    this.model = new Model(gl, Object.assign({}, props, {\n      fs: props.fs || getPassthroughFS({\n        version: getShaderVersion(props.vs)\n      }),\n      id: props.id || 'transform-model',\n      drawMode: props.drawMode || 0,\n      vertexCount: props.elementCount\n    }));\n    this.bufferTransform && this.bufferTransform.setupResources({\n      model: this.model\n    });\n  }\n\n  _updateModelProps(props) {\n    let updatedProps = Object.assign({}, props);\n    const resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n\n    for (const resourceTransform of resourceTransforms) {\n      updatedProps = resourceTransform.updateModelProps(updatedProps);\n    }\n\n    return updatedProps;\n  }\n\n  _buildResourceTransforms(gl, props) {\n    if (canCreateBufferTransform(props)) {\n      this.bufferTransform = new BufferTransform(gl, props);\n    }\n\n    if (canCreateTextureTransform(props)) {\n      this.textureTransform = new TextureTransform(gl, props);\n    }\n\n    assert(this.bufferTransform || this.textureTransform, 'must provide source/feedback buffers or source/target textures');\n  }\n\n  _updateDrawOptions(opts) {\n    let updatedOpts = Object.assign({}, opts);\n    const resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n\n    for (const resourceTransform of resourceTransforms) {\n      updatedOpts = Object.assign(updatedOpts, resourceTransform.getDrawOptions(updatedOpts));\n    }\n\n    return updatedOpts;\n  }\n\n}\n\nfunction canCreateBufferTransform(props) {\n  if (!isObjectEmpty(props.feedbackBuffers) || !isObjectEmpty(props.feedbackMap) || props.varyings && props.varyings.length > 0) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction canCreateTextureTransform(props) {\n  if (!isObjectEmpty(props._sourceTextures) || props._targetTexture || props._targetTextureVarying) {\n    return true;\n  }\n\n  return false;\n}\n//# sourceMappingURL=transform.js.map","import { uid, assert } from '@luma.gl/webgl';\nexport const DRAW_MODE = {\n  POINTS: 0x0000,\n  LINES: 0x0001,\n  LINE_LOOP: 0x0002,\n  LINE_STRIP: 0x0003,\n  TRIANGLES: 0x0004,\n  TRIANGLE_STRIP: 0x0005,\n  TRIANGLE_FAN: 0x0006\n};\nexport default class Geometry {\n  static get DRAW_MODE() {\n    return DRAW_MODE;\n  }\n\n  constructor() {\n    let props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      id = uid('geometry'),\n      drawMode = DRAW_MODE.TRIANGLES,\n      attributes = {},\n      indices = null,\n      vertexCount = null\n    } = props;\n    this.id = id;\n    this.drawMode = drawMode | 0;\n    this.attributes = {};\n    this.userData = {};\n\n    this._setAttributes(attributes, indices);\n\n    this.vertexCount = vertexCount || this._calculateVertexCount(this.attributes, this.indices);\n  }\n\n  get mode() {\n    return this.drawMode;\n  }\n\n  getVertexCount() {\n    return this.vertexCount;\n  }\n\n  getAttributes() {\n    return this.indices ? {\n      indices: this.indices,\n      ...this.attributes\n    } : this.attributes;\n  }\n\n  _print(attributeName) {\n    return \"Geometry \".concat(this.id, \" attribute \").concat(attributeName);\n  }\n\n  _setAttributes(attributes, indices) {\n    if (indices) {\n      this.indices = ArrayBuffer.isView(indices) ? {\n        value: indices,\n        size: 1\n      } : indices;\n    }\n\n    for (const attributeName in attributes) {\n      let attribute = attributes[attributeName];\n      attribute = ArrayBuffer.isView(attribute) ? {\n        value: attribute\n      } : attribute;\n      assert(ArrayBuffer.isView(attribute.value), \"\".concat(this._print(attributeName), \": must be typed array or object with value as typed array\"));\n\n      if ((attributeName === 'POSITION' || attributeName === 'positions') && !attribute.size) {\n        attribute.size = 3;\n      }\n\n      if (attributeName === 'indices') {\n        assert(!this.indices);\n        this.indices = attribute;\n      } else {\n        this.attributes[attributeName] = attribute;\n      }\n    }\n\n    if (this.indices && this.indices.isIndexed !== undefined) {\n      this.indices = Object.assign({}, this.indices);\n      delete this.indices.isIndexed;\n    }\n\n    return this;\n  }\n\n  _calculateVertexCount(attributes, indices) {\n    if (indices) {\n      return indices.value.length;\n    }\n\n    let vertexCount = Infinity;\n\n    for (const attributeName in attributes) {\n      const attribute = attributes[attributeName];\n      const {\n        value,\n        size,\n        constant\n      } = attribute;\n\n      if (!constant && value && size >= 1) {\n        vertexCount = Math.min(vertexCount, value.length / size);\n      }\n    }\n\n    assert(Number.isFinite(vertexCount));\n    return vertexCount;\n  }\n\n}\n//# sourceMappingURL=geometry.js.map","let channelHandles = 1;\nlet animationHandles = 1;\nexport class Timeline {\n  constructor() {\n    this.time = 0;\n    this.channels = new Map();\n    this.animations = new Map();\n    this.playing = false;\n    this.lastEngineTime = -1;\n  }\n\n  addChannel(props) {\n    const {\n      delay = 0,\n      duration = Number.POSITIVE_INFINITY,\n      rate = 1,\n      repeat = 1\n    } = props;\n    const handle = channelHandles++;\n    const channel = {\n      time: 0,\n      delay,\n      duration,\n      rate,\n      repeat\n    };\n\n    this._setChannelTime(channel, this.time);\n\n    this.channels.set(handle, channel);\n    return handle;\n  }\n\n  removeChannel(handle) {\n    this.channels.delete(handle);\n\n    for (const [animationHandle, animation] of this.animations) {\n      if (animation.channel === handle) {\n        this.detachAnimation(animationHandle);\n      }\n    }\n  }\n\n  isFinished(handle) {\n    const channel = this.channels.get(handle);\n\n    if (channel === undefined) {\n      return false;\n    }\n\n    return this.time >= channel.delay + channel.duration * channel.repeat;\n  }\n\n  getTime(handle) {\n    if (handle === undefined) {\n      return this.time;\n    }\n\n    const channel = this.channels.get(handle);\n\n    if (channel === undefined) {\n      return -1;\n    }\n\n    return channel.time;\n  }\n\n  setTime(time) {\n    this.time = Math.max(0, time);\n    const channels = this.channels.values();\n\n    for (const channel of channels) {\n      this._setChannelTime(channel, this.time);\n    }\n\n    const animations = this.animations.values();\n\n    for (const animationData of animations) {\n      const {\n        animation,\n        channel\n      } = animationData;\n      animation.setTime(this.getTime(channel));\n    }\n  }\n\n  play() {\n    this.playing = true;\n  }\n\n  pause() {\n    this.playing = false;\n    this.lastEngineTime = -1;\n  }\n\n  reset() {\n    this.setTime(0);\n  }\n\n  attachAnimation(animation, channelHandle) {\n    const animationHandle = animationHandles++;\n    this.animations.set(animationHandle, {\n      animation,\n      channel: channelHandle\n    });\n    animation.setTime(this.getTime(channelHandle));\n    return animationHandle;\n  }\n\n  detachAnimation(handle) {\n    this.animations.delete(handle);\n  }\n\n  update(engineTime) {\n    if (this.playing) {\n      if (this.lastEngineTime === -1) {\n        this.lastEngineTime = engineTime;\n      }\n\n      this.setTime(this.time + (engineTime - this.lastEngineTime));\n      this.lastEngineTime = engineTime;\n    }\n  }\n\n  _setChannelTime(channel, time) {\n    const offsetTime = time - channel.delay;\n    const totalDuration = channel.duration * channel.repeat;\n\n    if (offsetTime >= totalDuration) {\n      channel.time = channel.duration * channel.rate;\n    } else {\n      channel.time = Math.max(0, offsetTime) % channel.duration;\n      channel.time *= channel.rate;\n    }\n  }\n\n}\n//# sourceMappingURL=timeline.js.map","const defines = '#define SMOOTH_EDGE_RADIUS 0.5';\nconst vs = \"\\n\".concat(defines, \"\\n\\nstruct VertexGeometry {\\n  vec4 position;\\n  vec3 worldPosition;\\n  vec3 worldPositionAlt;\\n  vec3 normal;\\n  vec2 uv;\\n  vec3 pickingColor;\\n} geometry = VertexGeometry(\\n  vec4(0.0, 0.0, 1.0, 0.0),\\n  vec3(0.0),\\n  vec3(0.0),\\n  vec3(0.0),\\n  vec2(0.0),\\n  vec3(0.0)\\n);\\n\");\nconst fs = \"\\n\".concat(defines, \"\\n\\nstruct FragmentGeometry {\\n  vec2 uv;\\n} geometry;\\n\\nfloat smoothedge(float edge, float x) {\\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\\n}\\n\");\nexport default {\n  name: 'geometry',\n  vs,\n  fs\n};\n//# sourceMappingURL=geometry.js.map","import log from '../utils/log';\nexport const COORDINATE_SYSTEM = {\n  DEFAULT: -1,\n  LNGLAT: 1,\n  METER_OFFSETS: 2,\n  LNGLAT_OFFSETS: 3,\n  CARTESIAN: 0\n};\nObject.defineProperty(COORDINATE_SYSTEM, 'IDENTITY', {\n  get: () => {\n    log.deprecated('COORDINATE_SYSTEM.IDENTITY', 'COORDINATE_SYSTEM.CARTESIAN')();\n    return 0;\n  }\n});\nexport const PROJECTION_MODE = {\n  WEB_MERCATOR: 1,\n  GLOBE: 2,\n  WEB_MERCATOR_AUTO_OFFSET: 4,\n  IDENTITY: 0\n};\nexport const UNIT = {\n  common: 0,\n  meters: 1,\n  pixels: 2\n};\nexport const EVENTS = {\n  click: {\n    handler: 'onClick'\n  },\n  panstart: {\n    handler: 'onDragStart'\n  },\n  panmove: {\n    handler: 'onDrag'\n  },\n  panend: {\n    handler: 'onDragEnd'\n  }\n};\nexport const OPERATION = {\n  DRAW: 'draw',\n  MASK: 'mask'\n};\n//# sourceMappingURL=constants.js.map","import { COORDINATE_SYSTEM, PROJECTION_MODE, UNIT } from '../../lib/constants';\nconst COORDINATE_SYSTEM_GLSL_CONSTANTS = Object.keys(COORDINATE_SYSTEM).map(key => \"const int COORDINATE_SYSTEM_\".concat(key, \" = \").concat(COORDINATE_SYSTEM[key], \";\")).join('');\nconst PROJECTION_MODE_GLSL_CONSTANTS = Object.keys(PROJECTION_MODE).map(key => \"const int PROJECTION_MODE_\".concat(key, \" = \").concat(PROJECTION_MODE[key], \";\")).join('');\nconst UNIT_GLSL_CONSTANTS = Object.keys(UNIT).map(key => \"const int UNIT_\".concat(key.toUpperCase(), \" = \").concat(UNIT[key], \";\")).join('');\nexport default \"\".concat(COORDINATE_SYSTEM_GLSL_CONSTANTS, \"\\n\").concat(PROJECTION_MODE_GLSL_CONSTANTS, \"\\n\").concat(UNIT_GLSL_CONSTANTS, \"\\n\\nuniform int project_uCoordinateSystem;\\nuniform int project_uProjectionMode;\\nuniform float project_uScale;\\nuniform bool project_uWrapLongitude;\\nuniform vec3 project_uCommonUnitsPerMeter;\\nuniform vec3 project_uCommonUnitsPerWorldUnit;\\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\\nuniform vec4 project_uCenter;\\nuniform mat4 project_uModelMatrix;\\nuniform mat4 project_uViewProjectionMatrix;\\nuniform vec2 project_uViewportSize;\\nuniform float project_uDevicePixelRatio;\\nuniform float project_uFocalDistance;\\nuniform vec3 project_uCameraPosition;\\nuniform vec3 project_uCoordinateOrigin;\\nuniform vec3 project_uCommonOrigin;\\nuniform bool project_uPseudoMeters;\\n\\nconst float TILE_SIZE = 512.0;\\nconst float PI = 3.1415926536;\\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\\nconst vec3 ZERO_64_LOW = vec3(0.0);\\nconst float EARTH_RADIUS = 6370972.0; // meters\\nconst float GLOBE_RADIUS = 256.0;\\n\\n// returns an adjustment factor for uCommonUnitsPerMeter\\nfloat project_size_at_latitude(float lat) {\\n  float y = clamp(lat, -89.9, 89.9);\\n  return 1.0 / cos(radians(y));\\n}\\n\\nfloat project_size() {\\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&\\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\\n    project_uPseudoMeters == false) {\\n\\n    // uCommonUnitsPerMeter in low-zoom Web Mercator is non-linear\\n    // Adjust by 1 / cos(latitude)\\n    // If geometry.position (vertex in common space) is populated, use it\\n    // Otherwise use geometry.worldPosition (anchor in world space)\\n    \\n    if (geometry.position.w == 0.0) {\\n      return project_size_at_latitude(geometry.worldPosition.y);\\n    }\\n\\n    // latitude from common y: 2.0 * (atan(exp(y / TILE_SIZE * 2.0 * PI - PI)) - PI / 4.0)\\n    // Taylor series of 1 / cos(latitude)\\n    // Max error < 0.003\\n  \\n    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\\n    float y2 = y * y;\\n    float y4 = y2 * y2;\\n    float y6 = y4 * y2;\\n    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\\n  }\\n  return 1.0;\\n}\\n\\nfloat project_size_at_latitude(float meters, float lat) {\\n  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);\\n}\\n\\n//\\n// Scaling offsets - scales meters to \\\"world distance\\\"\\n// Note the scalar version of project_size is for scaling the z component only\\n//\\nfloat project_size(float meters) {\\n  return meters * project_uCommonUnitsPerMeter.z * project_size();\\n}\\n\\nvec2 project_size(vec2 meters) {\\n  return meters * project_uCommonUnitsPerMeter.xy * project_size();\\n}\\n\\nvec3 project_size(vec3 meters) {\\n  return meters * project_uCommonUnitsPerMeter * project_size();\\n}\\n\\nvec4 project_size(vec4 meters) {\\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\\n}\\n\\n// Get rotation matrix that aligns the z axis with the given up vector\\n// Find 3 unit vectors ux, uy, uz that are perpendicular to each other and uz == up\\nmat3 project_get_orientation_matrix(vec3 up) {\\n  vec3 uz = normalize(up);\\n  // Tangent on XY plane\\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\\n  vec3 uy = cross(uz, ux);\\n  return mat3(ux, uy, uz);\\n}\\n\\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\\n    transform = project_get_orientation_matrix(commonPosition);\\n    return true;\\n  }\\n  return false;\\n}\\n\\n//\\n// Projecting normal - transform deltas from current coordinate system to\\n// normals in the worldspace\\n//\\nvec3 project_normal(vec3 vector) {\\n  // Apply model matrix\\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\\n  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\\n  mat3 rotation;\\n  if (project_needs_rotation(geometry.position.xyz, rotation)) {\\n    n = rotation * n;\\n  }\\n  return n;\\n}\\n\\nvec4 project_offset_(vec4 offset) {\\n  float dy = offset.y;\\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\\n}\\n\\n//\\n// Projecting positions - non-linear projection: lnglats => unit tile [0-1, 0-1]\\n//\\nvec2 project_mercator_(vec2 lnglat) {\\n  float x = lnglat.x;\\n  if (project_uWrapLongitude) {\\n    x = mod(x + 180., 360.0) - 180.;\\n  }\\n  float y = clamp(lnglat.y, -89.9, 89.9);\\n  return vec2(\\n    radians(x) + PI,\\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\\n  ) * WORLD_SCALE;\\n}\\n\\nvec3 project_globe_(vec3 lnglatz) {\\n  float lambda = radians(lnglatz.x);\\n  float phi = radians(lnglatz.y);\\n  float cosPhi = cos(phi);\\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\\n\\n  return vec3(\\n    sin(lambda) * cosPhi,\\n    -cos(lambda) * cosPhi,\\n    sin(phi)\\n  ) * D;\\n}\\n\\n//\\n// Projects positions (defined by project_uCoordinateSystem) to common space (defined by project_uProjectionMode)\\n//\\nvec4 project_position(vec4 position, vec3 position64Low) {\\n  vec4 position_world = project_uModelMatrix * position;\\n\\n  // Work around for a Mac+NVIDIA bug https://github.com/visgl/deck.gl/issues/4145\\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\\n      return vec4(\\n        project_mercator_(position_world.xy),\\n        project_size_at_latitude(position_world.z, position_world.y),\\n        position_world.w\\n      );\\n    }\\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\\n      position_world.xyz += project_uCoordinateOrigin;\\n    }\\n  }\\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\\n      return vec4(\\n        project_globe_(position_world.xyz),\\n        position_world.w\\n      );\\n    }\\n  }\\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\\n      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\\n        // Too far from the projection center for offset mode to be accurate\\n        // Only use high parts\\n        return vec4(\\n          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,\\n          project_size(position_world.z),\\n          position_world.w\\n        );\\n      }\\n    }\\n  }\\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\\n    // Subtract high part of 64 bit value. Convert remainder to float32, preserving precision.\\n    position_world.xyz -= project_uCoordinateOrigin;\\n  }\\n\\n  // Translation is already added to the high parts\\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\\n}\\n\\nvec4 project_position(vec4 position) {\\n  return project_position(position, ZERO_64_LOW);\\n}\\n\\nvec3 project_position(vec3 position, vec3 position64Low) {\\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\\n  return projected_position.xyz;\\n}\\n\\nvec3 project_position(vec3 position) {\\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\\n  return projected_position.xyz;\\n}\\n\\nvec2 project_position(vec2 position) {\\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\\n  return projected_position.xy;\\n}\\n\\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\\n  return viewProjectionMatrix * position + center;\\n}\\n\\n//\\n// Projects from common space coordinates to clip space.\\n// Uses project_uViewProjectionMatrix\\n//\\nvec4 project_common_position_to_clipspace(vec4 position) {\\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\\n}\\n\\n// Returns a clip space offset that corresponds to a given number of screen pixels\\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\\n  return offset * project_uFocalDistance;\\n}\\n\\nfloat project_size_to_pixel(float meters) {\\n  return project_size(meters) * project_uScale;\\n}\\nfloat project_size_to_pixel(float size, int unit) {\\n  if (unit == UNIT_METERS) return project_size_to_pixel(size);\\n  if (unit == UNIT_COMMON) return size * project_uScale;\\n  // UNIT_PIXELS\\n  return size;\\n}\\nfloat project_pixel_size(float pixels) {\\n  return pixels / project_uScale;\\n}\\nvec2 project_pixel_size(vec2 pixels) {\\n  return pixels / project_uScale;\\n}\\n\");\n//# sourceMappingURL=project.glsl.js.map","function isEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (Array.isArray(a)) {\n    const len = a.length;\n\n    if (!b || b.length !== len) {\n      return false;\n    }\n\n    for (let i = 0; i < len; i++) {\n      if (a[i] !== b[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\n\nexport default function memoize(compute) {\n  let cachedArgs = {};\n  let cachedResult;\n  return args => {\n    for (const key in args) {\n      if (!isEqual(args[key], cachedArgs[key])) {\n        cachedResult = compute(args);\n        cachedArgs = args;\n        break;\n      }\n    }\n\n    return cachedResult;\n  };\n}\n//# sourceMappingURL=memoize.js.map","import * as mat4 from 'gl-matrix/mat4';\nimport * as vec4 from 'gl-matrix/vec4';\nimport { COORDINATE_SYSTEM, PROJECTION_MODE } from '../../lib/constants';\nimport memoize from '../../utils/memoize';\nconst ZERO_VECTOR = [0, 0, 0, 0];\nconst VECTOR_TO_POINT_MATRIX = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0];\nconst IDENTITY_MATRIX = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\nconst DEFAULT_PIXELS_PER_UNIT2 = [0, 0, 0];\nconst DEFAULT_COORDINATE_ORIGIN = [0, 0, 0];\nconst getMemoizedViewportUniforms = memoize(calculateViewportUniforms);\nexport function getOffsetOrigin(viewport, coordinateSystem, coordinateOrigin = DEFAULT_COORDINATE_ORIGIN) {\n  if (coordinateOrigin.length < 3) {\n    coordinateOrigin = [coordinateOrigin[0], coordinateOrigin[1], 0];\n  }\n\n  let shaderCoordinateOrigin = coordinateOrigin;\n  let geospatialOrigin;\n  let offsetMode = true;\n\n  if (coordinateSystem === COORDINATE_SYSTEM.LNGLAT_OFFSETS || coordinateSystem === COORDINATE_SYSTEM.METER_OFFSETS) {\n    geospatialOrigin = coordinateOrigin;\n  } else {\n    geospatialOrigin = viewport.isGeospatial ? [Math.fround(viewport.longitude), Math.fround(viewport.latitude), 0] : null;\n  }\n\n  switch (viewport.projectionMode) {\n    case PROJECTION_MODE.WEB_MERCATOR:\n      if (coordinateSystem === COORDINATE_SYSTEM.LNGLAT || coordinateSystem === COORDINATE_SYSTEM.CARTESIAN) {\n        geospatialOrigin = [0, 0, 0];\n        offsetMode = false;\n      }\n\n      break;\n\n    case PROJECTION_MODE.WEB_MERCATOR_AUTO_OFFSET:\n      if (coordinateSystem === COORDINATE_SYSTEM.LNGLAT) {\n        shaderCoordinateOrigin = geospatialOrigin;\n      } else if (coordinateSystem === COORDINATE_SYSTEM.CARTESIAN) {\n        shaderCoordinateOrigin = [Math.fround(viewport.center[0]), Math.fround(viewport.center[1]), 0];\n        geospatialOrigin = viewport.unprojectPosition(shaderCoordinateOrigin);\n        shaderCoordinateOrigin[0] -= coordinateOrigin[0];\n        shaderCoordinateOrigin[1] -= coordinateOrigin[1];\n        shaderCoordinateOrigin[2] -= coordinateOrigin[2];\n      }\n\n      break;\n\n    case PROJECTION_MODE.IDENTITY:\n      shaderCoordinateOrigin = viewport.position.map(Math.fround);\n      shaderCoordinateOrigin[2] = shaderCoordinateOrigin[2] || 0;\n      break;\n\n    case PROJECTION_MODE.GLOBE:\n      offsetMode = false;\n      geospatialOrigin = null;\n      break;\n\n    default:\n      offsetMode = false;\n  }\n\n  return {\n    geospatialOrigin,\n    shaderCoordinateOrigin,\n    offsetMode\n  };\n}\n\nfunction calculateMatrixAndOffset(viewport, coordinateSystem, coordinateOrigin) {\n  const {\n    viewMatrixUncentered,\n    projectionMatrix\n  } = viewport;\n  let {\n    viewMatrix,\n    viewProjectionMatrix\n  } = viewport;\n  let projectionCenter = ZERO_VECTOR;\n  let originCommon = ZERO_VECTOR;\n  let cameraPosCommon = viewport.cameraPosition;\n  const {\n    geospatialOrigin,\n    shaderCoordinateOrigin,\n    offsetMode\n  } = getOffsetOrigin(viewport, coordinateSystem, coordinateOrigin);\n\n  if (offsetMode) {\n    originCommon = viewport.projectPosition(geospatialOrigin || shaderCoordinateOrigin);\n    cameraPosCommon = [cameraPosCommon[0] - originCommon[0], cameraPosCommon[1] - originCommon[1], cameraPosCommon[2] - originCommon[2]];\n    originCommon[3] = 1;\n    projectionCenter = vec4.transformMat4([], originCommon, viewProjectionMatrix);\n    viewMatrix = viewMatrixUncentered || viewMatrix;\n    viewProjectionMatrix = mat4.multiply([], projectionMatrix, viewMatrix);\n    viewProjectionMatrix = mat4.multiply([], viewProjectionMatrix, VECTOR_TO_POINT_MATRIX);\n  }\n\n  return {\n    viewMatrix,\n    viewProjectionMatrix,\n    projectionCenter,\n    originCommon,\n    cameraPosCommon,\n    shaderCoordinateOrigin,\n    geospatialOrigin\n  };\n}\n\nexport function getUniformsFromViewport({\n  viewport,\n  devicePixelRatio = 1,\n  modelMatrix = null,\n  coordinateSystem = COORDINATE_SYSTEM.DEFAULT,\n  coordinateOrigin = DEFAULT_COORDINATE_ORIGIN,\n  autoWrapLongitude = false\n}) {\n  if (coordinateSystem === COORDINATE_SYSTEM.DEFAULT) {\n    coordinateSystem = viewport.isGeospatial ? COORDINATE_SYSTEM.LNGLAT : COORDINATE_SYSTEM.CARTESIAN;\n  }\n\n  const uniforms = getMemoizedViewportUniforms({\n    viewport,\n    devicePixelRatio,\n    coordinateSystem,\n    coordinateOrigin\n  });\n  uniforms.project_uWrapLongitude = autoWrapLongitude;\n  uniforms.project_uModelMatrix = modelMatrix || IDENTITY_MATRIX;\n  return uniforms;\n}\n\nfunction calculateViewportUniforms({\n  viewport,\n  devicePixelRatio,\n  coordinateSystem,\n  coordinateOrigin\n}) {\n  const {\n    projectionCenter,\n    viewProjectionMatrix,\n    originCommon,\n    cameraPosCommon,\n    shaderCoordinateOrigin,\n    geospatialOrigin\n  } = calculateMatrixAndOffset(viewport, coordinateSystem, coordinateOrigin);\n  const distanceScales = viewport.getDistanceScales();\n  const viewportSize = [viewport.width * devicePixelRatio, viewport.height * devicePixelRatio];\n  const focalDistance = vec4.transformMat4([], [0, 0, -viewport.focalDistance, 1], viewport.projectionMatrix)[3] || 1;\n  const uniforms = {\n    project_uCoordinateSystem: coordinateSystem,\n    project_uProjectionMode: viewport.projectionMode,\n    project_uCoordinateOrigin: shaderCoordinateOrigin,\n    project_uCommonOrigin: originCommon.slice(0, 3),\n    project_uCenter: projectionCenter,\n    project_uPseudoMeters: Boolean(viewport._pseudoMeters),\n    project_uViewportSize: viewportSize,\n    project_uDevicePixelRatio: devicePixelRatio,\n    project_uFocalDistance: focalDistance,\n    project_uCommonUnitsPerMeter: distanceScales.unitsPerMeter,\n    project_uCommonUnitsPerWorldUnit: distanceScales.unitsPerMeter,\n    project_uCommonUnitsPerWorldUnit2: DEFAULT_PIXELS_PER_UNIT2,\n    project_uScale: viewport.scale,\n    project_uWrapLongitude: false,\n    project_uViewProjectionMatrix: viewProjectionMatrix,\n    project_uModelMatrix: IDENTITY_MATRIX,\n    project_uCameraPosition: cameraPosCommon\n  };\n\n  if (geospatialOrigin) {\n    const distanceScalesAtOrigin = viewport.getDistanceScales(geospatialOrigin);\n\n    switch (coordinateSystem) {\n      case COORDINATE_SYSTEM.METER_OFFSETS:\n        uniforms.project_uCommonUnitsPerWorldUnit = distanceScalesAtOrigin.unitsPerMeter;\n        uniforms.project_uCommonUnitsPerWorldUnit2 = distanceScalesAtOrigin.unitsPerMeter2;\n        break;\n\n      case COORDINATE_SYSTEM.LNGLAT:\n      case COORDINATE_SYSTEM.LNGLAT_OFFSETS:\n        if (!viewport._pseudoMeters) {\n          uniforms.project_uCommonUnitsPerMeter = distanceScalesAtOrigin.unitsPerMeter;\n        }\n\n        uniforms.project_uCommonUnitsPerWorldUnit = distanceScalesAtOrigin.unitsPerDegree;\n        uniforms.project_uCommonUnitsPerWorldUnit2 = distanceScalesAtOrigin.unitsPerDegree2;\n        break;\n\n      case COORDINATE_SYSTEM.CARTESIAN:\n        uniforms.project_uCommonUnitsPerWorldUnit = [1, 1, distanceScalesAtOrigin.unitsPerMeter[2]];\n        uniforms.project_uCommonUnitsPerWorldUnit2 = [0, 0, distanceScalesAtOrigin.unitsPerMeter2[2]];\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  return uniforms;\n}\n//# sourceMappingURL=viewport-uniforms.js.map","import { fp32 } from '@luma.gl/core';\nimport geometry from '../misc/geometry';\nimport projectShader from './project.glsl';\nimport { getUniformsFromViewport } from './viewport-uniforms';\nconst INITIAL_MODULE_OPTIONS = {};\n\nfunction getUniforms(opts = INITIAL_MODULE_OPTIONS) {\n  if ('viewport' in opts) {\n    return getUniformsFromViewport(opts);\n  }\n\n  return {};\n}\n\nexport default {\n  name: 'project',\n  dependencies: [fp32, geometry],\n  vs: projectShader,\n  getUniforms\n};\n//# sourceMappingURL=project.js.map","import project from '../project/project';\nconst vs = \"\\nvec4 project_position_to_clipspace(\\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\\n) {\\n  vec3 projectedPosition = project_position(position, position64Low);\\n  mat3 rotation;\\n  if (project_needs_rotation(projectedPosition, rotation)) {\\n    // offset is specified as ENU\\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\\n    offset = rotation * offset;\\n  }\\n  commonPosition = vec4(projectedPosition + offset, 1.0);\\n  return project_common_position_to_clipspace(commonPosition);\\n}\\n\\nvec4 project_position_to_clipspace(\\n  vec3 position, vec3 position64Low, vec3 offset\\n) {\\n  vec4 commonPosition;\\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\\n}\\n\";\nexport default {\n  name: 'project32',\n  dependencies: [project],\n  vs\n};\n//# sourceMappingURL=project32.js.map","import { COORDINATE_SYSTEM, PROJECTION_MODE } from '../../lib/constants';\nimport project from '../project/project';\nimport { Vector3, Matrix4 } from '@math.gl/core';\nimport memoize from '../../utils/memoize';\nimport { pixelsToWorld } from '@math.gl/web-mercator';\nconst vs = \"\\nconst int max_lights = 2;\\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\\nuniform vec4 shadow_uProjectCenters[max_lights];\\nuniform bool shadow_uDrawShadowMap;\\nuniform bool shadow_uUseShadowMap;\\nuniform int shadow_uLightId;\\nuniform float shadow_uLightCount;\\n\\nvarying vec3 shadow_vPosition[max_lights];\\n\\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\\n  if (shadow_uDrawShadowMap) {\\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\\n  }\\n  if (shadow_uUseShadowMap) {\\n    for (int i = 0; i < max_lights; i++) {\\n      if(i < int(shadow_uLightCount)) {\\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\\n      }\\n    }\\n  }\\n  return gl_Position;\\n}\\n\";\nconst fs = \"\\nconst int max_lights = 2;\\nuniform bool shadow_uDrawShadowMap;\\nuniform bool shadow_uUseShadowMap;\\nuniform sampler2D shadow_uShadowMap0;\\nuniform sampler2D shadow_uShadowMap1;\\nuniform vec4 shadow_uColor;\\nuniform float shadow_uLightCount;\\n\\nvarying vec3 shadow_vPosition[max_lights];\\n\\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\\n\\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\\n\\n  float z = dot(rgbaDepth, bitUnpackShift);\\n  return smoothstep(0.001, 0.01, position.z - z);\\n}\\n\\nvec4 shadow_filterShadowColor(vec4 color) {\\n  if (shadow_uDrawShadowMap) {\\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\\n    return rgbaDepth;\\n  }\\n  if (shadow_uUseShadowMap) {\\n    float shadowAlpha = 0.0;\\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\\n    if(shadow_uLightCount > 1.0) {\\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\\n    }\\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\\n\\n    return vec4(\\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\\n      blendedAlpha\\n    );\\n  }\\n  return color;\\n}\\n\";\nconst getMemoizedViewportCenterPosition = memoize(getViewportCenterPosition);\nconst getMemoizedViewProjectionMatrices = memoize(getViewProjectionMatrices);\nconst DEFAULT_SHADOW_COLOR = [0, 0, 0, 1.0];\nconst VECTOR_TO_POINT_MATRIX = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0];\n\nfunction screenToCommonSpace(xyz, pixelUnprojectionMatrix) {\n  const [x, y, z] = xyz;\n  const coord = pixelsToWorld([x, y, z], pixelUnprojectionMatrix);\n\n  if (Number.isFinite(z)) {\n    return coord;\n  }\n\n  return [coord[0], coord[1], 0];\n}\n\nfunction getViewportCenterPosition({\n  viewport,\n  center\n}) {\n  return new Matrix4(viewport.viewProjectionMatrix).invert().transform(center);\n}\n\nfunction getViewProjectionMatrices({\n  viewport,\n  shadowMatrices\n}) {\n  const projectionMatrices = [];\n  const pixelUnprojectionMatrix = viewport.pixelUnprojectionMatrix;\n  const farZ = viewport.isGeospatial ? undefined : 1;\n  const corners = [[0, 0, farZ], [viewport.width, 0, farZ], [0, viewport.height, farZ], [viewport.width, viewport.height, farZ], [0, 0, -1], [viewport.width, 0, -1], [0, viewport.height, -1], [viewport.width, viewport.height, -1]].map(pixel => screenToCommonSpace(pixel, pixelUnprojectionMatrix));\n\n  for (const shadowMatrix of shadowMatrices) {\n    const viewMatrix = shadowMatrix.clone().translate(new Vector3(viewport.center).negate());\n    const positions = corners.map(corner => viewMatrix.transform(corner));\n    const projectionMatrix = new Matrix4().ortho({\n      left: Math.min(...positions.map(position => position[0])),\n      right: Math.max(...positions.map(position => position[0])),\n      bottom: Math.min(...positions.map(position => position[1])),\n      top: Math.max(...positions.map(position => position[1])),\n      near: Math.min(...positions.map(position => -position[2])),\n      far: Math.max(...positions.map(position => -position[2]))\n    });\n    projectionMatrices.push(projectionMatrix.multiplyRight(shadowMatrix));\n  }\n\n  return projectionMatrices;\n}\n\nfunction createShadowUniforms(opts, context) {\n  const {\n    shadowEnabled = true\n  } = opts;\n\n  if (!shadowEnabled || !opts.shadowMatrices || !opts.shadowMatrices.length) {\n    return {\n      shadow_uDrawShadowMap: false,\n      shadow_uUseShadowMap: false\n    };\n  }\n\n  const uniforms = {\n    shadow_uDrawShadowMap: Boolean(opts.drawToShadowMap),\n    shadow_uUseShadowMap: opts.shadowMaps ? opts.shadowMaps.length > 0 : false,\n    shadow_uColor: opts.shadowColor || DEFAULT_SHADOW_COLOR,\n    shadow_uLightId: opts.shadowLightId || 0,\n    shadow_uLightCount: opts.shadowMatrices.length\n  };\n  const center = getMemoizedViewportCenterPosition({\n    viewport: opts.viewport,\n    center: context.project_uCenter\n  });\n  const projectCenters = [];\n  const viewProjectionMatrices = getMemoizedViewProjectionMatrices({\n    shadowMatrices: opts.shadowMatrices,\n    viewport: opts.viewport\n  }).slice();\n\n  for (let i = 0; i < opts.shadowMatrices.length; i++) {\n    const viewProjectionMatrix = viewProjectionMatrices[i];\n    const viewProjectionMatrixCentered = viewProjectionMatrix.clone().translate(new Vector3(opts.viewport.center).negate());\n\n    if (context.project_uCoordinateSystem === COORDINATE_SYSTEM.LNGLAT && context.project_uProjectionMode === PROJECTION_MODE.WEB_MERCATOR) {\n      viewProjectionMatrices[i] = viewProjectionMatrixCentered;\n      projectCenters[i] = center;\n    } else {\n      viewProjectionMatrices[i] = viewProjectionMatrix.clone().multiplyRight(VECTOR_TO_POINT_MATRIX);\n      projectCenters[i] = viewProjectionMatrixCentered.transform(center);\n    }\n  }\n\n  for (let i = 0; i < viewProjectionMatrices.length; i++) {\n    uniforms[\"shadow_uViewProjectionMatrices[\".concat(i, \"]\")] = viewProjectionMatrices[i];\n    uniforms[\"shadow_uProjectCenters[\".concat(i, \"]\")] = projectCenters[i];\n\n    if (opts.shadowMaps && opts.shadowMaps.length > 0) {\n      uniforms[\"shadow_uShadowMap\".concat(i)] = opts.shadowMaps[i];\n    } else {\n      uniforms[\"shadow_uShadowMap\".concat(i)] = opts.dummyShadowMap;\n    }\n  }\n\n  return uniforms;\n}\n\nexport default {\n  name: 'shadow',\n  dependencies: [project],\n  vs,\n  fs,\n  inject: {\n    'vs:DECKGL_FILTER_GL_POSITION': \"\\n    position = shadow_setVertexPosition(geometry.position);\\n    \",\n    'fs:DECKGL_FILTER_COLOR': \"\\n    color = shadow_filterShadowColor(color);\\n    \"\n  },\n  getUniforms: (opts = {}, context = {}) => {\n    if ('viewport' in opts && (opts.drawToShadowMap || opts.shadowMaps && opts.shadowMaps.length > 0)) {\n      return createShadowUniforms(opts, context);\n    }\n\n    return {};\n  }\n};\n//# sourceMappingURL=shadow.js.map","import { picking } from '@luma.gl/core';\nexport default {\n  inject: {\n    'vs:DECKGL_FILTER_GL_POSITION': \"\\n    // for picking depth values\\n    picking_setPickingAttribute(position.z / position.w);\\n  \",\n    'vs:DECKGL_FILTER_COLOR': \"\\n  picking_setPickingColor(geometry.pickingColor);\\n  \",\n    'fs:DECKGL_FILTER_COLOR': {\n      order: 99,\n      injection: \"\\n  // use highlight color if this fragment belongs to the selected object.\\n  color = picking_filterHighlightColor(color);\\n\\n  // use picking color if rendering to picking FBO.\\n  color = picking_filterPickingColor(color);\\n    \"\n    }\n  },\n  ...picking\n};\n//# sourceMappingURL=picking.js.map","import { ProgramManager } from '@luma.gl/core';\nimport { gouraudLighting, phongLighting } from '@luma.gl/core';\nimport project from './project/project';\nimport project32 from './project32/project32';\nimport shadow from './shadow/shadow';\nimport picking from './picking/picking';\nconst DEFAULT_MODULES = [project];\nconst SHADER_HOOKS = ['vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)', 'vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)', 'vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)', 'fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)'];\nexport function createProgramManager(gl) {\n  const programManager = ProgramManager.getDefaultProgramManager(gl);\n\n  for (const shaderModule of DEFAULT_MODULES) {\n    programManager.addDefaultModule(shaderModule);\n  }\n\n  for (const shaderHook of SHADER_HOOKS) {\n    programManager.addShaderHook(shaderHook);\n  }\n\n  return programManager;\n}\nexport { picking, project, project32, gouraudLighting, phongLighting, shadow };\n//# sourceMappingURL=index.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nconst DEFAULT_LIGHT_COLOR = [255, 255, 255];\nconst DEFAULT_LIGHT_INTENSITY = 1.0;\nlet idCount = 0;\nexport class AmbientLight {\n  constructor(props = {}) {\n    _defineProperty(this, \"id\", void 0);\n\n    _defineProperty(this, \"color\", void 0);\n\n    _defineProperty(this, \"intensity\", void 0);\n\n    _defineProperty(this, \"type\", 'ambient');\n\n    const {\n      color = DEFAULT_LIGHT_COLOR\n    } = props;\n    const {\n      intensity = DEFAULT_LIGHT_INTENSITY\n    } = props;\n    this.id = props.id || \"ambient-\".concat(idCount++);\n    this.color = color;\n    this.intensity = intensity;\n  }\n\n}\n//# sourceMappingURL=ambient-light.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { Vector3 } from '@math.gl/core';\nconst DEFAULT_LIGHT_COLOR = [255, 255, 255];\nconst DEFAULT_LIGHT_INTENSITY = 1.0;\nconst DEFAULT_LIGHT_DIRECTION = [0.0, 0.0, -1.0];\nlet idCount = 0;\nexport class DirectionalLight {\n  constructor(props = {}) {\n    _defineProperty(this, \"id\", void 0);\n\n    _defineProperty(this, \"color\", void 0);\n\n    _defineProperty(this, \"intensity\", void 0);\n\n    _defineProperty(this, \"type\", 'directional');\n\n    _defineProperty(this, \"direction\", void 0);\n\n    _defineProperty(this, \"shadow\", void 0);\n\n    const {\n      color = DEFAULT_LIGHT_COLOR\n    } = props;\n    const {\n      intensity = DEFAULT_LIGHT_INTENSITY\n    } = props;\n    const {\n      direction = DEFAULT_LIGHT_DIRECTION\n    } = props;\n    const {\n      _shadow = false\n    } = props;\n    this.id = props.id || \"directional-\".concat(idCount++);\n    this.color = color;\n    this.intensity = intensity;\n    this.type = 'directional';\n    this.direction = new Vector3(direction).normalize().toArray();\n    this.shadow = _shadow;\n  }\n\n  getProjectedLight(opts) {\n    return this;\n  }\n\n}\n//# sourceMappingURL=directional-light.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nexport default class Pass {\n  constructor(gl, props = {\n    id: 'pass'\n  }) {\n    _defineProperty(this, \"id\", void 0);\n\n    _defineProperty(this, \"gl\", void 0);\n\n    _defineProperty(this, \"props\", void 0);\n\n    const {\n      id\n    } = props;\n    this.id = id;\n    this.gl = gl;\n    this.props = { ...props\n    };\n  }\n\n  setProps(props) {\n    Object.assign(this.props, props);\n  }\n\n  render(params) {}\n\n  cleanup() {}\n\n}\n//# sourceMappingURL=pass.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport Pass from './pass';\nimport { clear, setParameters, withParameters, cssToDeviceRatio } from '@luma.gl/core';\nexport default class LayersPass extends Pass {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"_lastRenderIndex\", -1);\n  }\n\n  render(options) {\n    const gl = this.gl;\n    setParameters(gl, {\n      framebuffer: options.target\n    });\n    return this._drawLayers(options);\n  }\n\n  _drawLayers(options) {\n    const {\n      target,\n      moduleParameters,\n      viewports,\n      views,\n      onViewportActive,\n      clearStack = true,\n      clearCanvas = true\n    } = options;\n    options.pass = options.pass || 'unknown';\n    const gl = this.gl;\n\n    if (clearCanvas) {\n      clearGLCanvas(gl);\n    }\n\n    if (clearStack) {\n      this._lastRenderIndex = -1;\n    }\n\n    const renderStats = [];\n\n    for (const viewport of viewports) {\n      const view = views && views[viewport.id];\n      onViewportActive(viewport);\n\n      const drawLayerParams = this._getDrawLayerParams(viewport, options);\n\n      const subViewports = viewport.subViewports || [viewport];\n\n      for (const subViewport of subViewports) {\n        const stats = this._drawLayersInViewport(gl, {\n          target,\n          moduleParameters,\n          viewport: subViewport,\n          view,\n          pass: options.pass,\n          layers: options.layers\n        }, drawLayerParams);\n\n        renderStats.push(stats);\n      }\n    }\n\n    return renderStats;\n  }\n\n  _getDrawLayerParams(viewport, {\n    layers,\n    pass,\n    layerFilter,\n    cullRect,\n    effects,\n    moduleParameters\n  }) {\n    const drawLayerParams = [];\n    const indexResolver = layerIndexResolver(this._lastRenderIndex + 1);\n    const drawContext = {\n      layer: layers[0],\n      viewport,\n      isPicking: pass.startsWith('picking'),\n      renderPass: pass,\n      cullRect\n    };\n    const layerFilterCache = {};\n\n    for (let layerIndex = 0; layerIndex < layers.length; layerIndex++) {\n      const layer = layers[layerIndex];\n\n      const shouldDrawLayer = this._shouldDrawLayer(layer, drawContext, layerFilter, layerFilterCache);\n\n      const layerParam = {\n        shouldDrawLayer\n      };\n\n      if (shouldDrawLayer) {\n        layerParam.layerRenderIndex = indexResolver(layer, shouldDrawLayer);\n        layerParam.moduleParameters = this._getModuleParameters(layer, effects, pass, moduleParameters);\n        layerParam.layerParameters = this.getLayerParameters(layer, layerIndex, viewport);\n      }\n\n      drawLayerParams[layerIndex] = layerParam;\n    }\n\n    return drawLayerParams;\n  }\n\n  _drawLayersInViewport(gl, {\n    layers,\n    moduleParameters: globalModuleParameters,\n    pass,\n    target,\n    viewport,\n    view\n  }, drawLayerParams) {\n    const glViewport = getGLViewport(gl, {\n      moduleParameters: globalModuleParameters,\n      target,\n      viewport\n    });\n\n    if (view && view.props.clear) {\n      const clearOpts = view.props.clear === true ? {\n        color: true,\n        depth: true\n      } : view.props.clear;\n      withParameters(gl, {\n        scissorTest: true,\n        scissor: glViewport\n      }, () => clear(gl, clearOpts));\n    }\n\n    const renderStatus = {\n      totalCount: layers.length,\n      visibleCount: 0,\n      compositeCount: 0,\n      pickableCount: 0\n    };\n    setParameters(gl, {\n      viewport: glViewport\n    });\n\n    for (let layerIndex = 0; layerIndex < layers.length; layerIndex++) {\n      const layer = layers[layerIndex];\n      const {\n        shouldDrawLayer,\n        layerRenderIndex,\n        moduleParameters,\n        layerParameters\n      } = drawLayerParams[layerIndex];\n\n      if (shouldDrawLayer && layer.props.pickable) {\n        renderStatus.pickableCount++;\n      }\n\n      if (layer.isComposite) {\n        renderStatus.compositeCount++;\n      } else if (shouldDrawLayer) {\n        renderStatus.visibleCount++;\n        this._lastRenderIndex = Math.max(this._lastRenderIndex, layerRenderIndex);\n        moduleParameters.viewport = viewport;\n\n        try {\n          layer._drawLayer({\n            moduleParameters,\n            uniforms: {\n              layerIndex: layerRenderIndex\n            },\n            parameters: layerParameters\n          });\n        } catch (err) {\n          layer.raiseError(err, \"drawing \".concat(layer, \" to \").concat(pass));\n        }\n      }\n    }\n\n    return renderStatus;\n  }\n\n  shouldDrawLayer(layer) {\n    return true;\n  }\n\n  getModuleParameters(layer, effects) {\n    return null;\n  }\n\n  getLayerParameters(layer, layerIndex, viewport) {\n    return layer.props.parameters;\n  }\n\n  _shouldDrawLayer(layer, drawContext, layerFilter, layerFilterCache) {\n    const shouldDrawLayer = layer.props.visible && this.shouldDrawLayer(layer);\n\n    if (!shouldDrawLayer) {\n      return false;\n    }\n\n    drawContext.layer = layer;\n    let parent = layer.parent;\n\n    while (parent) {\n      if (!parent.props.visible || !parent.filterSubLayer(drawContext)) {\n        return false;\n      }\n\n      drawContext.layer = parent;\n      parent = parent.parent;\n    }\n\n    if (layerFilter) {\n      const rootLayerId = drawContext.layer.id;\n\n      if (!(rootLayerId in layerFilterCache)) {\n        layerFilterCache[rootLayerId] = layerFilter(drawContext);\n      }\n\n      if (!layerFilterCache[rootLayerId]) {\n        return false;\n      }\n    }\n\n    layer.activateViewport(drawContext.viewport);\n    return true;\n  }\n\n  _getModuleParameters(layer, effects, pass, overrides) {\n    var _layer$internalState;\n\n    const moduleParameters = Object.assign(Object.create(((_layer$internalState = layer.internalState) === null || _layer$internalState === void 0 ? void 0 : _layer$internalState.propsInTransition) || layer.props), {\n      autoWrapLongitude: layer.wrapLongitude,\n      viewport: layer.context.viewport,\n      mousePosition: layer.context.mousePosition,\n      pickingActive: 0,\n      devicePixelRatio: cssToDeviceRatio(this.gl)\n    });\n\n    if (effects) {\n      for (const effect of effects) {\n        var _effect$getModulePara;\n\n        Object.assign(moduleParameters, (_effect$getModulePara = effect.getModuleParameters) === null || _effect$getModulePara === void 0 ? void 0 : _effect$getModulePara.call(effect, layer));\n      }\n    }\n\n    return Object.assign(moduleParameters, this.getModuleParameters(layer, effects), overrides);\n  }\n\n}\nexport function layerIndexResolver(startIndex = 0, layerIndices = {}) {\n  const resolvers = {};\n\n  const resolveLayerIndex = (layer, isDrawn) => {\n    const indexOverride = layer.props._offset;\n    const layerId = layer.id;\n    const parentId = layer.parent && layer.parent.id;\n    let index;\n\n    if (parentId && !(parentId in layerIndices)) {\n      resolveLayerIndex(layer.parent, false);\n    }\n\n    if (parentId in resolvers) {\n      const resolver = resolvers[parentId] = resolvers[parentId] || layerIndexResolver(layerIndices[parentId], layerIndices);\n      index = resolver(layer, isDrawn);\n      resolvers[layerId] = resolver;\n    } else if (Number.isFinite(indexOverride)) {\n      index = indexOverride + (layerIndices[parentId] || 0);\n      resolvers[layerId] = null;\n    } else {\n      index = startIndex;\n    }\n\n    if (isDrawn && index >= startIndex) {\n      startIndex = index + 1;\n    }\n\n    layerIndices[layerId] = index;\n    return index;\n  };\n\n  return resolveLayerIndex;\n}\n\nfunction getGLViewport(gl, {\n  moduleParameters,\n  target,\n  viewport\n}) {\n  const useTarget = target && target.id !== 'default-framebuffer';\n  const pixelRatio = moduleParameters && moduleParameters.devicePixelRatio || cssToDeviceRatio(gl);\n  const height = useTarget ? target.height : gl.drawingBufferHeight;\n  const dimensions = viewport;\n  return [dimensions.x * pixelRatio, height - (dimensions.y + dimensions.height) * pixelRatio, dimensions.width * pixelRatio, dimensions.height * pixelRatio];\n}\n\nfunction clearGLCanvas(gl) {\n  const width = gl.drawingBufferWidth;\n  const height = gl.drawingBufferHeight;\n  setParameters(gl, {\n    viewport: [0, 0, width, height]\n  });\n  gl.clear(16384 | 256);\n}\n//# sourceMappingURL=layers-pass.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { default as LayersPass } from './layers-pass';\nimport { Framebuffer, Texture2D, Renderbuffer, withParameters, cssToDeviceRatio } from '@luma.gl/core';\nexport default class ShadowPass extends LayersPass {\n  constructor(gl, props) {\n    super(gl, props);\n\n    _defineProperty(this, \"shadowMap\", void 0);\n\n    _defineProperty(this, \"depthBuffer\", void 0);\n\n    _defineProperty(this, \"fbo\", void 0);\n\n    this.shadowMap = new Texture2D(gl, {\n      width: 1,\n      height: 1,\n      parameters: {\n        [10241]: 9729,\n        [10240]: 9729,\n        [10242]: 33071,\n        [10243]: 33071\n      }\n    });\n    this.depthBuffer = new Renderbuffer(gl, {\n      format: 33189,\n      width: 1,\n      height: 1\n    });\n    this.fbo = new Framebuffer(gl, {\n      id: 'shadowmap',\n      width: 1,\n      height: 1,\n      attachments: {\n        [36064]: this.shadowMap,\n        [36096]: this.depthBuffer\n      }\n    });\n  }\n\n  render(params) {\n    const target = this.fbo;\n    withParameters(this.gl, {\n      depthRange: [0, 1],\n      depthTest: true,\n      blend: false,\n      clearColor: [1, 1, 1, 1]\n    }, () => {\n      const viewport = params.viewports[0];\n      const pixelRatio = cssToDeviceRatio(this.gl);\n      const width = viewport.width * pixelRatio;\n      const height = viewport.height * pixelRatio;\n\n      if (width !== target.width || height !== target.height) {\n        target.resize({\n          width,\n          height\n        });\n      }\n\n      super.render({ ...params,\n        target,\n        pass: 'shadow'\n      });\n    });\n  }\n\n  shouldDrawLayer(layer) {\n    return layer.props.shadowEnabled !== false;\n  }\n\n  getModuleParameters() {\n    return {\n      drawToShadowMap: true\n    };\n  }\n\n  delete() {\n    if (this.fbo) {\n      this.fbo.delete();\n      this.fbo = null;\n    }\n\n    if (this.shadowMap) {\n      this.shadowMap.delete();\n      this.shadowMap = null;\n    }\n\n    if (this.depthBuffer) {\n      this.depthBuffer.delete();\n      this.depthBuffer = null;\n    }\n  }\n\n}\n//# sourceMappingURL=shadow-pass.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { Texture2D, ProgramManager } from '@luma.gl/core';\nimport { AmbientLight } from './ambient-light';\nimport { DirectionalLight } from './directional-light';\nimport { Matrix4, Vector3 } from '@math.gl/core';\nimport ShadowPass from '../../passes/shadow-pass';\nimport shadow from '../../shaderlib/shadow/shadow';\nconst DEFAULT_AMBIENT_LIGHT_PROPS = {\n  color: [255, 255, 255],\n  intensity: 1.0\n};\nconst DEFAULT_DIRECTIONAL_LIGHT_PROPS = [{\n  color: [255, 255, 255],\n  intensity: 1.0,\n  direction: [-1, 3, -1]\n}, {\n  color: [255, 255, 255],\n  intensity: 0.9,\n  direction: [1, -8, -2.5]\n}];\nconst DEFAULT_SHADOW_COLOR = [0, 0, 0, 200 / 255];\nexport default class LightingEffect {\n  constructor(props = {}) {\n    _defineProperty(this, \"id\", 'lighting-effect');\n\n    _defineProperty(this, \"props\", null);\n\n    _defineProperty(this, \"shadowColor\", DEFAULT_SHADOW_COLOR);\n\n    _defineProperty(this, \"shadow\", void 0);\n\n    _defineProperty(this, \"ambientLight\", null);\n\n    _defineProperty(this, \"directionalLights\", []);\n\n    _defineProperty(this, \"pointLights\", []);\n\n    _defineProperty(this, \"shadowPasses\", []);\n\n    _defineProperty(this, \"shadowMaps\", []);\n\n    _defineProperty(this, \"dummyShadowMap\", null);\n\n    _defineProperty(this, \"programManager\", void 0);\n\n    _defineProperty(this, \"shadowMatrices\", void 0);\n\n    for (const key in props) {\n      const lightSource = props[key];\n\n      switch (lightSource.type) {\n        case 'ambient':\n          this.ambientLight = lightSource;\n          break;\n\n        case 'directional':\n          this.directionalLights.push(lightSource);\n          break;\n\n        case 'point':\n          this.pointLights.push(lightSource);\n          break;\n\n        default:\n      }\n    }\n\n    this._applyDefaultLights();\n\n    this.shadow = this.directionalLights.some(light => light.shadow);\n  }\n\n  preRender(gl, {\n    layers,\n    layerFilter,\n    viewports,\n    onViewportActive,\n    views\n  }) {\n    if (!this.shadow) return;\n    this.shadowMatrices = this._calculateMatrices();\n\n    if (this.shadowPasses.length === 0) {\n      this._createShadowPasses(gl);\n    }\n\n    if (!this.programManager) {\n      this.programManager = ProgramManager.getDefaultProgramManager(gl);\n\n      if (shadow) {\n        this.programManager.addDefaultModule(shadow);\n      }\n    }\n\n    if (!this.dummyShadowMap) {\n      this.dummyShadowMap = new Texture2D(gl, {\n        width: 1,\n        height: 1\n      });\n    }\n\n    for (let i = 0; i < this.shadowPasses.length; i++) {\n      const shadowPass = this.shadowPasses[i];\n      shadowPass.render({\n        layers,\n        layerFilter,\n        viewports,\n        onViewportActive,\n        views,\n        moduleParameters: {\n          shadowLightId: i,\n          dummyShadowMap: this.dummyShadowMap,\n          shadowMatrices: this.shadowMatrices\n        }\n      });\n    }\n  }\n\n  getModuleParameters(layer) {\n    const parameters = this.shadow ? {\n      shadowMaps: this.shadowMaps,\n      dummyShadowMap: this.dummyShadowMap,\n      shadowColor: this.shadowColor,\n      shadowMatrices: this.shadowMatrices\n    } : {};\n    parameters.lightSources = {\n      ambientLight: this.ambientLight,\n      directionalLights: this.directionalLights.map(directionalLight => directionalLight.getProjectedLight({\n        layer\n      })),\n      pointLights: this.pointLights.map(pointLight => pointLight.getProjectedLight({\n        layer\n      }))\n    };\n    return parameters;\n  }\n\n  cleanup() {\n    for (const shadowPass of this.shadowPasses) {\n      shadowPass.delete();\n    }\n\n    this.shadowPasses.length = 0;\n    this.shadowMaps.length = 0;\n\n    if (this.dummyShadowMap) {\n      this.dummyShadowMap.delete();\n      this.dummyShadowMap = null;\n    }\n\n    if (this.shadow && this.programManager) {\n      this.programManager.removeDefaultModule(shadow);\n      this.programManager = null;\n    }\n  }\n\n  _calculateMatrices() {\n    const lightMatrices = [];\n\n    for (const light of this.directionalLights) {\n      const viewMatrix = new Matrix4().lookAt({\n        eye: new Vector3(light.direction).negate()\n      });\n      lightMatrices.push(viewMatrix);\n    }\n\n    return lightMatrices;\n  }\n\n  _createShadowPasses(gl) {\n    for (let i = 0; i < this.directionalLights.length; i++) {\n      const shadowPass = new ShadowPass(gl);\n      this.shadowPasses[i] = shadowPass;\n      this.shadowMaps[i] = shadowPass.shadowMap;\n    }\n  }\n\n  _applyDefaultLights() {\n    const {\n      ambientLight,\n      pointLights,\n      directionalLights\n    } = this;\n\n    if (!ambientLight && pointLights.length === 0 && directionalLights.length === 0) {\n      this.ambientLight = new AmbientLight(DEFAULT_AMBIENT_LIGHT_PROPS);\n      this.directionalLights.push(new DirectionalLight(DEFAULT_DIRECTIONAL_LIGHT_PROPS[0]), new DirectionalLight(DEFAULT_DIRECTIONAL_LIGHT_PROPS[1]));\n    }\n  }\n\n}\n//# sourceMappingURL=lighting-effect.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nexport class TypedArrayManager {\n  constructor(options = {}) {\n    _defineProperty(this, \"_pool\", []);\n\n    _defineProperty(this, \"opts\", {\n      overAlloc: 2,\n      poolSize: 100\n    });\n\n    this.setOptions(options);\n  }\n\n  setOptions(options) {\n    Object.assign(this.opts, options);\n  }\n\n  allocate(typedArray, count, {\n    size = 1,\n    type,\n    padding = 0,\n    copy = false,\n    initialize = false,\n    maxCount\n  }) {\n    const Type = type || typedArray && typedArray.constructor || Float32Array;\n    const newSize = count * size + padding;\n\n    if (ArrayBuffer.isView(typedArray)) {\n      if (newSize <= typedArray.length) {\n        return typedArray;\n      }\n\n      if (newSize * typedArray.BYTES_PER_ELEMENT <= typedArray.buffer.byteLength) {\n        return new Type(typedArray.buffer, 0, newSize);\n      }\n    }\n\n    let maxSize = Infinity;\n\n    if (maxCount) {\n      maxSize = maxCount * size + padding;\n    }\n\n    const newArray = this._allocate(Type, newSize, initialize, maxSize);\n\n    if (typedArray && copy) {\n      newArray.set(typedArray);\n    } else if (!initialize) {\n      newArray.fill(0, 0, 4);\n    }\n\n    this._release(typedArray);\n\n    return newArray;\n  }\n\n  release(typedArray) {\n    this._release(typedArray);\n  }\n\n  _allocate(Type, size, initialize, maxSize) {\n    let sizeToAllocate = Math.max(Math.ceil(size * this.opts.overAlloc), 1);\n\n    if (sizeToAllocate > maxSize) {\n      sizeToAllocate = maxSize;\n    }\n\n    const pool = this._pool;\n    const byteLength = Type.BYTES_PER_ELEMENT * sizeToAllocate;\n    const i = pool.findIndex(b => b.byteLength >= byteLength);\n\n    if (i >= 0) {\n      const array = new Type(pool.splice(i, 1)[0], 0, sizeToAllocate);\n\n      if (initialize) {\n        array.fill(0);\n      }\n\n      return array;\n    }\n\n    return new Type(sizeToAllocate);\n  }\n\n  _release(typedArray) {\n    if (!ArrayBuffer.isView(typedArray)) {\n      return;\n    }\n\n    const pool = this._pool;\n    const {\n      buffer\n    } = typedArray;\n    const {\n      byteLength\n    } = buffer;\n    const i = pool.findIndex(b => b.byteLength >= byteLength);\n\n    if (i < 0) {\n      pool.push(buffer);\n    } else if (i > 0 || pool.length < this.opts.poolSize) {\n      pool.splice(i, 0, buffer);\n    }\n\n    if (pool.length > this.opts.poolSize) {\n      pool.shift();\n    }\n  }\n\n}\nexport default new TypedArrayManager();\n//# sourceMappingURL=typed-array-manager.js.map","import typedArrayManager from './typed-array-manager';\nimport { Vector3 } from '@math.gl/core';\nexport function createMat4() {\n  return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n}\nexport function mod(value, divisor) {\n  const modulus = value % divisor;\n  return modulus < 0 ? divisor + modulus : modulus;\n}\nexport function getCameraPosition(viewMatrixInverse) {\n  return [viewMatrixInverse[12], viewMatrixInverse[13], viewMatrixInverse[14]];\n}\nexport function getFrustumPlanes(viewProjectionMatrix) {\n  return {\n    left: getFrustumPlane(viewProjectionMatrix[3] + viewProjectionMatrix[0], viewProjectionMatrix[7] + viewProjectionMatrix[4], viewProjectionMatrix[11] + viewProjectionMatrix[8], viewProjectionMatrix[15] + viewProjectionMatrix[12]),\n    right: getFrustumPlane(viewProjectionMatrix[3] - viewProjectionMatrix[0], viewProjectionMatrix[7] - viewProjectionMatrix[4], viewProjectionMatrix[11] - viewProjectionMatrix[8], viewProjectionMatrix[15] - viewProjectionMatrix[12]),\n    bottom: getFrustumPlane(viewProjectionMatrix[3] + viewProjectionMatrix[1], viewProjectionMatrix[7] + viewProjectionMatrix[5], viewProjectionMatrix[11] + viewProjectionMatrix[9], viewProjectionMatrix[15] + viewProjectionMatrix[13]),\n    top: getFrustumPlane(viewProjectionMatrix[3] - viewProjectionMatrix[1], viewProjectionMatrix[7] - viewProjectionMatrix[5], viewProjectionMatrix[11] - viewProjectionMatrix[9], viewProjectionMatrix[15] - viewProjectionMatrix[13]),\n    near: getFrustumPlane(viewProjectionMatrix[3] + viewProjectionMatrix[2], viewProjectionMatrix[7] + viewProjectionMatrix[6], viewProjectionMatrix[11] + viewProjectionMatrix[10], viewProjectionMatrix[15] + viewProjectionMatrix[14]),\n    far: getFrustumPlane(viewProjectionMatrix[3] - viewProjectionMatrix[2], viewProjectionMatrix[7] - viewProjectionMatrix[6], viewProjectionMatrix[11] - viewProjectionMatrix[10], viewProjectionMatrix[15] - viewProjectionMatrix[14])\n  };\n}\nconst scratchVector = new Vector3();\n\nfunction getFrustumPlane(a, b, c, d) {\n  scratchVector.set(a, b, c);\n  const L = scratchVector.len();\n  return {\n    distance: d / L,\n    normal: new Vector3(-a / L, -b / L, -c / L)\n  };\n}\n\nexport function fp64LowPart(x) {\n  return x - Math.fround(x);\n}\nlet scratchArray;\nexport function toDoublePrecisionArray(typedArray, options) {\n  const {\n    size = 1,\n    startIndex = 0\n  } = options;\n  const endIndex = options.endIndex !== undefined ? options.endIndex : typedArray.length;\n  const count = (endIndex - startIndex) / size;\n  scratchArray = typedArrayManager.allocate(scratchArray, count, {\n    type: Float32Array,\n    size: size * 2\n  });\n  let sourceIndex = startIndex;\n  let targetIndex = 0;\n\n  while (sourceIndex < endIndex) {\n    for (let j = 0; j < size; j++) {\n      const value = typedArray[sourceIndex++];\n      scratchArray[targetIndex + j] = value;\n      scratchArray[targetIndex + j + size] = fp64LowPart(value);\n    }\n\n    targetIndex += size * 2;\n  }\n\n  return scratchArray.subarray(0, count * size * 2);\n}\n//# sourceMappingURL=math-utils.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport log from '../utils/log';\nimport { createMat4, getCameraPosition, getFrustumPlanes } from '../utils/math-utils';\nimport { Matrix4, Vector3, equals, clamp } from '@math.gl/core';\nimport * as mat4 from 'gl-matrix/mat4';\nimport { getDistanceScales, getMeterZoom, lngLatToWorld, worldToLngLat, worldToPixels, pixelsToWorld } from '@math.gl/web-mercator';\nimport { PROJECTION_MODE } from '../lib/constants';\nconst DEGREES_TO_RADIANS = Math.PI / 180;\nconst IDENTITY = createMat4();\nconst ZERO_VECTOR = [0, 0, 0];\nconst DEFAULT_DISTANCE_SCALES = {\n  unitsPerMeter: [1, 1, 1],\n  metersPerUnit: [1, 1, 1]\n};\n\nfunction createProjectionMatrix({\n  width,\n  height,\n  orthographic,\n  fovyRadians,\n  focalDistance,\n  padding,\n  near,\n  far\n}) {\n  const aspect = width / height;\n  const matrix = orthographic ? new Matrix4().orthographic({\n    fovy: fovyRadians,\n    aspect,\n    focalDistance,\n    near,\n    far\n  }) : new Matrix4().perspective({\n    fovy: fovyRadians,\n    aspect,\n    near,\n    far\n  });\n\n  if (padding) {\n    const {\n      left = 0,\n      right = 0,\n      top = 0,\n      bottom = 0\n    } = padding;\n    const offsetX = clamp((left + width - right) / 2, 0, width) - width / 2;\n    const offsetY = clamp((top + height - bottom) / 2, 0, height) - height / 2;\n    matrix[8] -= offsetX * 2 / width;\n    matrix[9] += offsetY * 2 / height;\n  }\n\n  return matrix;\n}\n\nexport default class Viewport {\n  constructor(opts = {}) {\n    _defineProperty(this, \"id\", void 0);\n\n    _defineProperty(this, \"x\", void 0);\n\n    _defineProperty(this, \"y\", void 0);\n\n    _defineProperty(this, \"width\", void 0);\n\n    _defineProperty(this, \"height\", void 0);\n\n    _defineProperty(this, \"padding\", void 0);\n\n    _defineProperty(this, \"isGeospatial\", void 0);\n\n    _defineProperty(this, \"zoom\", void 0);\n\n    _defineProperty(this, \"focalDistance\", void 0);\n\n    _defineProperty(this, \"position\", void 0);\n\n    _defineProperty(this, \"modelMatrix\", void 0);\n\n    _defineProperty(this, \"distanceScales\", void 0);\n\n    _defineProperty(this, \"scale\", void 0);\n\n    _defineProperty(this, \"center\", void 0);\n\n    _defineProperty(this, \"cameraPosition\", void 0);\n\n    _defineProperty(this, \"projectionMatrix\", void 0);\n\n    _defineProperty(this, \"viewMatrix\", void 0);\n\n    _defineProperty(this, \"viewMatrixUncentered\", void 0);\n\n    _defineProperty(this, \"viewMatrixInverse\", void 0);\n\n    _defineProperty(this, \"viewProjectionMatrix\", void 0);\n\n    _defineProperty(this, \"pixelProjectionMatrix\", void 0);\n\n    _defineProperty(this, \"pixelUnprojectionMatrix\", void 0);\n\n    _defineProperty(this, \"resolution\", void 0);\n\n    _defineProperty(this, \"_frustumPlanes\", {});\n\n    this.id = opts.id || this.constructor.displayName || 'viewport';\n    this.x = opts.x || 0;\n    this.y = opts.y || 0;\n    this.width = opts.width || 1;\n    this.height = opts.height || 1;\n    this.zoom = opts.zoom || 0;\n    this.padding = opts.padding;\n    this.distanceScales = opts.distanceScales || DEFAULT_DISTANCE_SCALES;\n    this.focalDistance = opts.focalDistance || 1;\n    this.position = opts.position || ZERO_VECTOR;\n    this.modelMatrix = opts.modelMatrix || null;\n    const {\n      longitude,\n      latitude\n    } = opts;\n    this.isGeospatial = Number.isFinite(latitude) && Number.isFinite(longitude);\n\n    this._initProps(opts);\n\n    this._initMatrices(opts);\n\n    this.equals = this.equals.bind(this);\n    this.project = this.project.bind(this);\n    this.unproject = this.unproject.bind(this);\n    this.projectPosition = this.projectPosition.bind(this);\n    this.unprojectPosition = this.unprojectPosition.bind(this);\n    this.projectFlat = this.projectFlat.bind(this);\n    this.unprojectFlat = this.unprojectFlat.bind(this);\n  }\n\n  get metersPerPixel() {\n    return this.distanceScales.metersPerUnit[2] / this.scale;\n  }\n\n  get projectionMode() {\n    if (this.isGeospatial) {\n      return this.zoom < 12 ? PROJECTION_MODE.WEB_MERCATOR : PROJECTION_MODE.WEB_MERCATOR_AUTO_OFFSET;\n    }\n\n    return PROJECTION_MODE.IDENTITY;\n  }\n\n  equals(viewport) {\n    if (!(viewport instanceof Viewport)) {\n      return false;\n    }\n\n    if (this === viewport) {\n      return true;\n    }\n\n    return viewport.width === this.width && viewport.height === this.height && viewport.scale === this.scale && equals(viewport.projectionMatrix, this.projectionMatrix) && equals(viewport.viewMatrix, this.viewMatrix);\n  }\n\n  project(xyz, {\n    topLeft = true\n  } = {}) {\n    const worldPosition = this.projectPosition(xyz);\n    const coord = worldToPixels(worldPosition, this.pixelProjectionMatrix);\n    const [x, y] = coord;\n    const y2 = topLeft ? y : this.height - y;\n    return xyz.length === 2 ? [x, y2] : [x, y2, coord[2]];\n  }\n\n  unproject(xyz, {\n    topLeft = true,\n    targetZ\n  } = {}) {\n    const [x, y, z] = xyz;\n    const y2 = topLeft ? y : this.height - y;\n    const targetZWorld = targetZ && targetZ * this.distanceScales.unitsPerMeter[2];\n    const coord = pixelsToWorld([x, y2, z], this.pixelUnprojectionMatrix, targetZWorld);\n    const [X, Y, Z] = this.unprojectPosition(coord);\n\n    if (Number.isFinite(z)) {\n      return [X, Y, Z];\n    }\n\n    return Number.isFinite(targetZ) ? [X, Y, targetZ] : [X, Y];\n  }\n\n  projectPosition(xyz) {\n    const [X, Y] = this.projectFlat(xyz);\n    const Z = (xyz[2] || 0) * this.distanceScales.unitsPerMeter[2];\n    return [X, Y, Z];\n  }\n\n  unprojectPosition(xyz) {\n    const [X, Y] = this.unprojectFlat(xyz);\n    const Z = (xyz[2] || 0) * this.distanceScales.metersPerUnit[2];\n    return [X, Y, Z];\n  }\n\n  projectFlat(xyz) {\n    if (this.isGeospatial) {\n      const result = lngLatToWorld(xyz);\n      result[1] = clamp(result[1], -318, 830);\n      return result;\n    }\n\n    return xyz;\n  }\n\n  unprojectFlat(xyz) {\n    if (this.isGeospatial) {\n      return worldToLngLat(xyz);\n    }\n\n    return xyz;\n  }\n\n  getBounds(options = {}) {\n    const unprojectOption = {\n      targetZ: options.z || 0\n    };\n    const topLeft = this.unproject([0, 0], unprojectOption);\n    const topRight = this.unproject([this.width, 0], unprojectOption);\n    const bottomLeft = this.unproject([0, this.height], unprojectOption);\n    const bottomRight = this.unproject([this.width, this.height], unprojectOption);\n    return [Math.min(topLeft[0], topRight[0], bottomLeft[0], bottomRight[0]), Math.min(topLeft[1], topRight[1], bottomLeft[1], bottomRight[1]), Math.max(topLeft[0], topRight[0], bottomLeft[0], bottomRight[0]), Math.max(topLeft[1], topRight[1], bottomLeft[1], bottomRight[1])];\n  }\n\n  getDistanceScales(coordinateOrigin) {\n    if (coordinateOrigin) {\n      return getDistanceScales({\n        longitude: coordinateOrigin[0],\n        latitude: coordinateOrigin[1],\n        highPrecision: true\n      });\n    }\n\n    return this.distanceScales;\n  }\n\n  containsPixel({\n    x,\n    y,\n    width = 1,\n    height = 1\n  }) {\n    return x < this.x + this.width && this.x < x + width && y < this.y + this.height && this.y < y + height;\n  }\n\n  getFrustumPlanes() {\n    if (this._frustumPlanes.near) {\n      return this._frustumPlanes;\n    }\n\n    Object.assign(this._frustumPlanes, getFrustumPlanes(this.viewProjectionMatrix));\n    return this._frustumPlanes;\n  }\n\n  panByPosition(coords, pixel) {\n    return null;\n  }\n\n  _initProps(opts) {\n    const longitude = opts.longitude;\n    const latitude = opts.latitude;\n\n    if (this.isGeospatial) {\n      if (!Number.isFinite(opts.zoom)) {\n        this.zoom = getMeterZoom({\n          latitude\n        }) + Math.log2(this.focalDistance);\n      }\n\n      this.distanceScales = opts.distanceScales || getDistanceScales({\n        latitude,\n        longitude\n      });\n    }\n\n    const scale = Math.pow(2, this.zoom);\n    this.scale = scale;\n    const {\n      position,\n      modelMatrix\n    } = opts;\n    let meterOffset = ZERO_VECTOR;\n\n    if (position) {\n      meterOffset = modelMatrix ? new Matrix4(modelMatrix).transformAsVector(position, []) : position;\n    }\n\n    if (this.isGeospatial) {\n      const center = this.projectPosition([longitude, latitude, 0]);\n      this.center = new Vector3(meterOffset).scale(this.distanceScales.unitsPerMeter).add(center);\n    } else {\n      this.center = this.projectPosition(meterOffset);\n    }\n  }\n\n  _initMatrices(opts) {\n    const {\n      viewMatrix = IDENTITY,\n      projectionMatrix = null,\n      orthographic = false,\n      fovyRadians,\n      fovy = 75,\n      near = 0.1,\n      far = 1000,\n      padding = null,\n      focalDistance = 1\n    } = opts;\n    this.viewMatrixUncentered = viewMatrix;\n    this.viewMatrix = new Matrix4().multiplyRight(viewMatrix).translate(new Vector3(this.center).negate());\n    this.projectionMatrix = projectionMatrix || createProjectionMatrix({\n      width: this.width,\n      height: this.height,\n      orthographic,\n      fovyRadians: fovyRadians || fovy * DEGREES_TO_RADIANS,\n      focalDistance,\n      padding,\n      near,\n      far\n    });\n    const vpm = createMat4();\n    mat4.multiply(vpm, vpm, this.projectionMatrix);\n    mat4.multiply(vpm, vpm, this.viewMatrix);\n    this.viewProjectionMatrix = vpm;\n    this.viewMatrixInverse = mat4.invert([], this.viewMatrix) || this.viewMatrix;\n    this.cameraPosition = getCameraPosition(this.viewMatrixInverse);\n    const viewportMatrix = createMat4();\n    const pixelProjectionMatrix = createMat4();\n    mat4.scale(viewportMatrix, viewportMatrix, [this.width / 2, -this.height / 2, 1]);\n    mat4.translate(viewportMatrix, viewportMatrix, [1, -1, 0]);\n    mat4.multiply(pixelProjectionMatrix, viewportMatrix, this.viewProjectionMatrix);\n    this.pixelProjectionMatrix = pixelProjectionMatrix;\n    this.pixelUnprojectionMatrix = mat4.invert(createMat4(), this.pixelProjectionMatrix);\n\n    if (!this.pixelUnprojectionMatrix) {\n      log.warn('Pixel project matrix not invertible')();\n    }\n  }\n\n}\n\n_defineProperty(Viewport, \"displayName\", 'Viewport');\n//# sourceMappingURL=viewport.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport Viewport from './viewport';\nimport { pixelsToWorld, getViewMatrix, addMetersToLngLat, getProjectionParameters, altitudeToFovy, fovyToAltitude, fitBounds, getBounds } from '@math.gl/web-mercator';\nimport * as vec2 from 'gl-matrix/vec2';\nimport { Matrix4 } from '@math.gl/core';\nconst TILE_SIZE = 512;\nconst EARTH_CIRCUMFERENCE = 40.03e6;\nconst DEGREES_TO_RADIANS = Math.PI / 180;\n\nfunction unitsPerMeter(latitude) {\n  const latCosine = Math.cos(latitude * DEGREES_TO_RADIANS);\n  return TILE_SIZE / EARTH_CIRCUMFERENCE / latCosine;\n}\n\nexport default class WebMercatorViewport extends Viewport {\n  constructor(opts = {}) {\n    const {\n      latitude = 0,\n      longitude = 0,\n      zoom = 0,\n      pitch = 0,\n      bearing = 0,\n      nearZMultiplier = 0.1,\n      farZMultiplier = 1.01,\n      orthographic = false,\n      projectionMatrix,\n      repeat = false,\n      worldOffset = 0,\n      legacyMeterSizes = false\n    } = opts;\n    let {\n      width,\n      height,\n      altitude = 1.5\n    } = opts;\n    const scale = Math.pow(2, zoom);\n    width = width || 1;\n    height = height || 1;\n    let fovy;\n    let projectionParameters = null;\n\n    if (projectionMatrix) {\n      altitude = projectionMatrix[5] / 2;\n      fovy = altitudeToFovy(altitude);\n    } else {\n      if (opts.fovy) {\n        fovy = opts.fovy;\n        altitude = fovyToAltitude(fovy);\n      } else {\n        fovy = altitudeToFovy(altitude);\n      }\n\n      projectionParameters = getProjectionParameters({\n        width,\n        height,\n        pitch,\n        fovy,\n        nearZMultiplier,\n        farZMultiplier\n      });\n    }\n\n    let viewMatrixUncentered = getViewMatrix({\n      height,\n      pitch,\n      bearing,\n      scale,\n      altitude\n    });\n\n    if (worldOffset) {\n      const viewOffset = new Matrix4().translate([512 * worldOffset, 0, 0]);\n      viewMatrixUncentered = viewOffset.multiplyLeft(viewMatrixUncentered);\n    }\n\n    super({ ...opts,\n      width,\n      height,\n      viewMatrix: viewMatrixUncentered,\n      longitude,\n      latitude,\n      zoom,\n      ...projectionParameters,\n      fovy,\n      focalDistance: altitude\n    });\n\n    _defineProperty(this, \"longitude\", void 0);\n\n    _defineProperty(this, \"latitude\", void 0);\n\n    _defineProperty(this, \"pitch\", void 0);\n\n    _defineProperty(this, \"bearing\", void 0);\n\n    _defineProperty(this, \"altitude\", void 0);\n\n    _defineProperty(this, \"fovy\", void 0);\n\n    _defineProperty(this, \"orthographic\", void 0);\n\n    _defineProperty(this, \"_subViewports\", void 0);\n\n    _defineProperty(this, \"_pseudoMeters\", void 0);\n\n    this.latitude = latitude;\n    this.longitude = longitude;\n    this.zoom = zoom;\n    this.pitch = pitch;\n    this.bearing = bearing;\n    this.altitude = altitude;\n    this.fovy = fovy;\n    this.orthographic = orthographic;\n    this._subViewports = repeat ? [] : null;\n    this._pseudoMeters = legacyMeterSizes;\n    Object.freeze(this);\n  }\n\n  get subViewports() {\n    if (this._subViewports && !this._subViewports.length) {\n      const bounds = this.getBounds();\n      const minOffset = Math.floor((bounds[0] + 180) / 360);\n      const maxOffset = Math.ceil((bounds[2] - 180) / 360);\n\n      for (let x = minOffset; x <= maxOffset; x++) {\n        const offsetViewport = x ? new WebMercatorViewport({ ...this,\n          worldOffset: x\n        }) : this;\n\n        this._subViewports.push(offsetViewport);\n      }\n    }\n\n    return this._subViewports;\n  }\n\n  projectPosition(xyz) {\n    if (this._pseudoMeters) {\n      return super.projectPosition(xyz);\n    }\n\n    const [X, Y] = this.projectFlat(xyz);\n    const Z = (xyz[2] || 0) * unitsPerMeter(xyz[1]);\n    return [X, Y, Z];\n  }\n\n  unprojectPosition(xyz) {\n    if (this._pseudoMeters) {\n      return super.unprojectPosition(xyz);\n    }\n\n    const [X, Y] = this.unprojectFlat(xyz);\n    const Z = (xyz[2] || 0) / unitsPerMeter(Y);\n    return [X, Y, Z];\n  }\n\n  addMetersToLngLat(lngLatZ, xyz) {\n    return addMetersToLngLat(lngLatZ, xyz);\n  }\n\n  panByPosition(coords, pixel) {\n    const fromLocation = pixelsToWorld(pixel, this.pixelUnprojectionMatrix);\n    const toLocation = this.projectFlat(coords);\n    const translate = vec2.add([], toLocation, vec2.negate([], fromLocation));\n    const newCenter = vec2.add([], this.center, translate);\n    const [longitude, latitude] = this.unprojectFlat(newCenter);\n    return {\n      longitude,\n      latitude\n    };\n  }\n\n  getBounds(options = {}) {\n    const corners = getBounds(this, options.z || 0);\n    return [Math.min(corners[0][0], corners[1][0], corners[2][0], corners[3][0]), Math.min(corners[0][1], corners[1][1], corners[2][1], corners[3][1]), Math.max(corners[0][0], corners[1][0], corners[2][0], corners[3][0]), Math.max(corners[0][1], corners[1][1], corners[2][1], corners[3][1])];\n  }\n\n  fitBounds(bounds, options = {}) {\n    const {\n      width,\n      height\n    } = this;\n    const {\n      longitude,\n      latitude,\n      zoom\n    } = fitBounds({\n      width,\n      height,\n      bounds,\n      ...options\n    });\n    return new WebMercatorViewport({\n      width,\n      height,\n      longitude,\n      latitude,\n      zoom\n    });\n  }\n\n}\n\n_defineProperty(WebMercatorViewport, \"displayName\", 'WebMercatorViewport');\n//# sourceMappingURL=web-mercator-viewport.js.map","import { COORDINATE_SYSTEM } from '../../lib/constants';\nimport { getOffsetOrigin } from './viewport-uniforms';\nimport WebMercatorViewport from '../../viewports/web-mercator-viewport';\nimport * as vec4 from 'gl-matrix/vec4';\nimport * as vec3 from 'gl-matrix/vec3';\nimport { addMetersToLngLat } from '@math.gl/web-mercator';\n\nfunction lngLatZToWorldPosition(lngLatZ, viewport, offsetMode = false) {\n  const p = viewport.projectPosition(lngLatZ);\n\n  if (offsetMode && viewport instanceof WebMercatorViewport) {\n    const [longitude, latitude, z = 0] = lngLatZ;\n    const distanceScales = viewport.getDistanceScales([longitude, latitude]);\n    p[2] = z * distanceScales.unitsPerMeter[2];\n  }\n\n  return p;\n}\n\nfunction normalizeParameters(opts) {\n  const {\n    viewport,\n    modelMatrix,\n    coordinateOrigin\n  } = opts;\n  let {\n    coordinateSystem,\n    fromCoordinateSystem,\n    fromCoordinateOrigin\n  } = opts;\n\n  if (coordinateSystem === COORDINATE_SYSTEM.DEFAULT) {\n    coordinateSystem = viewport.isGeospatial ? COORDINATE_SYSTEM.LNGLAT : COORDINATE_SYSTEM.CARTESIAN;\n  }\n\n  if (fromCoordinateSystem === undefined) {\n    fromCoordinateSystem = coordinateSystem;\n  }\n\n  if (fromCoordinateOrigin === undefined) {\n    fromCoordinateOrigin = coordinateOrigin;\n  }\n\n  return {\n    viewport,\n    coordinateSystem,\n    coordinateOrigin,\n    modelMatrix,\n    fromCoordinateSystem,\n    fromCoordinateOrigin\n  };\n}\n\nexport function getWorldPosition(position, {\n  viewport,\n  modelMatrix,\n  coordinateSystem,\n  coordinateOrigin,\n  offsetMode\n}) {\n  let [x, y, z = 0] = position;\n\n  if (modelMatrix) {\n    [x, y, z] = vec4.transformMat4([], [x, y, z, 1.0], modelMatrix);\n  }\n\n  switch (coordinateSystem) {\n    case COORDINATE_SYSTEM.LNGLAT:\n      return lngLatZToWorldPosition([x, y, z], viewport, offsetMode);\n\n    case COORDINATE_SYSTEM.LNGLAT_OFFSETS:\n      return lngLatZToWorldPosition([x + coordinateOrigin[0], y + coordinateOrigin[1], z + (coordinateOrigin[2] || 0)], viewport, offsetMode);\n\n    case COORDINATE_SYSTEM.METER_OFFSETS:\n      return lngLatZToWorldPosition(addMetersToLngLat(coordinateOrigin, [x, y, z]), viewport, offsetMode);\n\n    case COORDINATE_SYSTEM.CARTESIAN:\n    default:\n      return viewport.isGeospatial ? [x + coordinateOrigin[0], y + coordinateOrigin[1], z + coordinateOrigin[2]] : viewport.projectPosition([x, y, z]);\n  }\n}\nexport function projectPosition(position, params) {\n  const {\n    viewport,\n    coordinateSystem,\n    coordinateOrigin,\n    modelMatrix,\n    fromCoordinateSystem,\n    fromCoordinateOrigin\n  } = normalizeParameters(params);\n  const {\n    geospatialOrigin,\n    shaderCoordinateOrigin,\n    offsetMode\n  } = getOffsetOrigin(viewport, coordinateSystem, coordinateOrigin);\n  const worldPosition = getWorldPosition(position, {\n    viewport,\n    modelMatrix,\n    coordinateSystem: fromCoordinateSystem,\n    coordinateOrigin: fromCoordinateOrigin,\n    offsetMode\n  });\n\n  if (offsetMode) {\n    const positionCommonSpace = viewport.projectPosition(geospatialOrigin || shaderCoordinateOrigin);\n    vec3.sub(worldPosition, worldPosition, positionCommonSpace);\n  }\n\n  return worldPosition;\n}\n//# sourceMappingURL=project-functions.js.map","export const LIFECYCLE = {\n  NO_STATE: 'Awaiting state',\n  MATCHED: 'Matched. State transferred from previous layer',\n  INITIALIZED: 'Initialized',\n  AWAITING_GC: 'Discarded. Awaiting garbage collection',\n  AWAITING_FINALIZATION: 'No longer matched. Awaiting garbage collection',\n  FINALIZED: 'Finalized! Awaiting garbage collection'\n};\nexport const COMPONENT_SYMBOL = Symbol.for('component');\nexport const ASYNC_DEFAULTS_SYMBOL = Symbol.for('asyncPropDefaults');\nexport const ASYNC_ORIGINAL_SYMBOL = Symbol.for('asyncPropOriginal');\nexport const ASYNC_RESOLVED_SYMBOL = Symbol.for('asyncPropResolved');\n//# sourceMappingURL=constants.js.map","export function flatten(array, filter = () => true) {\n  if (!Array.isArray(array)) {\n    return filter(array) ? [array] : [];\n  }\n\n  return flattenArray(array, filter, []);\n}\n\nfunction flattenArray(array, filter, result) {\n  let index = -1;\n\n  while (++index < array.length) {\n    const value = array[index];\n\n    if (Array.isArray(value)) {\n      flattenArray(value, filter, result);\n    } else if (filter(value)) {\n      result.push(value);\n    }\n  }\n\n  return result;\n}\n\nexport function fillArray({\n  target,\n  source,\n  start = 0,\n  count = 1\n}) {\n  const length = source.length;\n  const total = count * length;\n  let copied = 0;\n\n  for (let i = start; copied < length; copied++) {\n    target[i++] = source[copied];\n  }\n\n  while (copied < total) {\n    if (copied < total - copied) {\n      target.copyWithin(start + copied, start, start + copied);\n      copied *= 2;\n    } else {\n      target.copyWithin(start + copied, start, start + total - copied);\n      copied = total;\n    }\n  }\n\n  return target;\n}\n//# sourceMappingURL=flatten.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { load } from '@loaders.gl/core';\nexport default class Resource {\n  constructor(id, data, context) {\n    _defineProperty(this, \"id\", void 0);\n\n    _defineProperty(this, \"context\", void 0);\n\n    _defineProperty(this, \"isLoaded\", void 0);\n\n    _defineProperty(this, \"persistent\", void 0);\n\n    _defineProperty(this, \"_loadCount\", 0);\n\n    _defineProperty(this, \"_subscribers\", new Set());\n\n    _defineProperty(this, \"_data\", void 0);\n\n    _defineProperty(this, \"_loader\", void 0);\n\n    _defineProperty(this, \"_error\", void 0);\n\n    _defineProperty(this, \"_content\", void 0);\n\n    this.id = id;\n    this.context = context;\n    this.setData(data);\n  }\n\n  subscribe(consumer) {\n    this._subscribers.add(consumer);\n  }\n\n  unsubscribe(consumer) {\n    this._subscribers.delete(consumer);\n  }\n\n  inUse() {\n    return this._subscribers.size > 0;\n  }\n\n  delete() {}\n\n  getData() {\n    return this.isLoaded ? this._error ? Promise.reject(this._error) : this._content : this._loader.then(() => this.getData());\n  }\n\n  setData(data, forceUpdate) {\n    if (data === this._data && !forceUpdate) {\n      return;\n    }\n\n    this._data = data;\n    const loadCount = ++this._loadCount;\n    let loader = data;\n\n    if (typeof data === 'string') {\n      loader = load(data);\n    }\n\n    if (loader instanceof Promise) {\n      this.isLoaded = false;\n      this._loader = loader.then(result => {\n        if (this._loadCount === loadCount) {\n          this.isLoaded = true;\n          this._error = undefined;\n          this._content = result;\n        }\n      }).catch(error => {\n        if (this._loadCount === loadCount) {\n          this.isLoaded = true;\n          this._error = error || true;\n        }\n      });\n    } else {\n      this.isLoaded = true;\n      this._error = undefined;\n      this._content = data;\n    }\n\n    for (const subscriber of this._subscribers) {\n      subscriber.onChange(this.getData());\n    }\n  }\n\n}\n//# sourceMappingURL=resource.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport Resource from './resource';\nexport default class ResourceManager {\n  constructor({\n    gl,\n    protocol\n  }) {\n    _defineProperty(this, \"protocol\", void 0);\n\n    _defineProperty(this, \"_context\", void 0);\n\n    _defineProperty(this, \"_resources\", void 0);\n\n    _defineProperty(this, \"_consumers\", void 0);\n\n    _defineProperty(this, \"_pruneRequest\", void 0);\n\n    this.protocol = protocol || 'resource://';\n    this._context = {\n      gl,\n      resourceManager: this\n    };\n    this._resources = {};\n    this._consumers = {};\n    this._pruneRequest = null;\n  }\n\n  contains(resourceId) {\n    if (resourceId.startsWith(this.protocol)) {\n      return true;\n    }\n\n    return resourceId in this._resources;\n  }\n\n  add({\n    resourceId,\n    data,\n    forceUpdate = false,\n    persistent = true\n  }) {\n    let res = this._resources[resourceId];\n\n    if (res) {\n      res.setData(data, forceUpdate);\n    } else {\n      res = new Resource(resourceId, data, this._context);\n      this._resources[resourceId] = res;\n    }\n\n    res.persistent = persistent;\n  }\n\n  remove(resourceId) {\n    const res = this._resources[resourceId];\n\n    if (res) {\n      res.delete();\n      delete this._resources[resourceId];\n    }\n  }\n\n  unsubscribe({\n    consumerId\n  }) {\n    const consumer = this._consumers[consumerId];\n\n    if (consumer) {\n      for (const requestId in consumer) {\n        const request = consumer[requestId];\n        const resource = this._resources[request.resourceId];\n\n        if (resource) {\n          resource.unsubscribe(request);\n        }\n      }\n\n      delete this._consumers[consumerId];\n      this.prune();\n    }\n  }\n\n  subscribe({\n    resourceId,\n    onChange,\n    consumerId,\n    requestId = 'default'\n  }) {\n    const {\n      _resources: resources,\n      protocol\n    } = this;\n\n    if (resourceId.startsWith(protocol)) {\n      resourceId = resourceId.replace(protocol, '');\n\n      if (!resources[resourceId]) {\n        this.add({\n          resourceId,\n          data: null,\n          persistent: false\n        });\n      }\n    }\n\n    const res = resources[resourceId];\n\n    this._track(consumerId, requestId, res, onChange);\n\n    if (res) {\n      return res.getData();\n    }\n\n    return undefined;\n  }\n\n  prune() {\n    if (!this._pruneRequest) {\n      this._pruneRequest = setTimeout(() => this._prune(), 0);\n    }\n  }\n\n  finalize() {\n    for (const key in this._resources) {\n      this._resources[key].delete();\n    }\n  }\n\n  _track(consumerId, requestId, resource, onChange) {\n    const consumers = this._consumers;\n    const consumer = consumers[consumerId] = consumers[consumerId] || {};\n    const request = consumer[requestId] || {};\n    const oldResource = request.resourceId && this._resources[request.resourceId];\n\n    if (oldResource) {\n      oldResource.unsubscribe(request);\n      this.prune();\n    }\n\n    if (resource) {\n      consumer[requestId] = request;\n      request.onChange = onChange;\n      request.resourceId = resource.id;\n      resource.subscribe(request);\n    }\n  }\n\n  _prune() {\n    this._pruneRequest = null;\n\n    for (const key of Object.keys(this._resources)) {\n      const res = this._resources[key];\n\n      if (!res.persistent && !res.inUse()) {\n        res.delete();\n        delete this._resources[key];\n      }\n    }\n  }\n\n}\n//# sourceMappingURL=resource-manager.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { Timeline } from '@luma.gl/core';\nimport { LIFECYCLE } from '../lifecycle/constants';\nimport log from '../utils/log';\nimport debug from '../debug';\nimport { flatten } from '../utils/flatten';\nimport { Stats } from '@probe.gl/stats';\nimport ResourceManager from './resource/resource-manager';\nimport Viewport from '../viewports/viewport';\nimport { createProgramManager } from '../shaderlib';\nconst TRACE_SET_LAYERS = 'layerManager.setLayers';\nconst TRACE_ACTIVATE_VIEWPORT = 'layerManager.activateViewport';\nexport default class LayerManager {\n  constructor(gl, {\n    deck,\n    stats,\n    viewport: _viewport,\n    timeline\n  } = {}) {\n    _defineProperty(this, \"layers\", void 0);\n\n    _defineProperty(this, \"context\", void 0);\n\n    _defineProperty(this, \"resourceManager\", void 0);\n\n    _defineProperty(this, \"_lastRenderedLayers\", []);\n\n    _defineProperty(this, \"_needsRedraw\", false);\n\n    _defineProperty(this, \"_needsUpdate\", false);\n\n    _defineProperty(this, \"_nextLayers\", null);\n\n    _defineProperty(this, \"_debug\", false);\n\n    _defineProperty(this, \"activateViewport\", viewport => {\n      debug(TRACE_ACTIVATE_VIEWPORT, this, viewport);\n\n      if (viewport) {\n        this.context.viewport = viewport;\n      }\n    });\n\n    this.layers = [];\n    this.resourceManager = new ResourceManager({\n      gl,\n      protocol: 'deck://'\n    });\n    this.context = {\n      mousePosition: null,\n      userData: {},\n      layerManager: this,\n      gl,\n      deck,\n      programManager: gl && createProgramManager(gl),\n      stats: stats || new Stats({\n        id: 'deck.gl'\n      }),\n      viewport: _viewport || new Viewport({\n        id: 'DEFAULT-INITIAL-VIEWPORT'\n      }),\n      timeline: timeline || new Timeline(),\n      resourceManager: this.resourceManager,\n      onError: undefined\n    };\n    Object.seal(this);\n  }\n\n  finalize() {\n    this.resourceManager.finalize();\n\n    for (const layer of this.layers) {\n      this._finalizeLayer(layer);\n    }\n  }\n\n  needsRedraw(opts = {\n    clearRedrawFlags: false\n  }) {\n    let redraw = this._needsRedraw;\n\n    if (opts.clearRedrawFlags) {\n      this._needsRedraw = false;\n    }\n\n    for (const layer of this.layers) {\n      const layerNeedsRedraw = layer.getNeedsRedraw(opts);\n      redraw = redraw || layerNeedsRedraw;\n    }\n\n    return redraw;\n  }\n\n  needsUpdate() {\n    if (this._nextLayers && this._nextLayers !== this._lastRenderedLayers) {\n      return 'layers changed';\n    }\n\n    return this._needsUpdate;\n  }\n\n  setNeedsRedraw(reason) {\n    this._needsRedraw = this._needsRedraw || reason;\n  }\n\n  setNeedsUpdate(reason) {\n    this._needsUpdate = this._needsUpdate || reason;\n  }\n\n  getLayers({\n    layerIds\n  } = {}) {\n    return layerIds ? this.layers.filter(layer => layerIds.find(layerId => layer.id.indexOf(layerId) === 0)) : this.layers;\n  }\n\n  setProps(props) {\n    if ('debug' in props) {\n      this._debug = props.debug;\n    }\n\n    if ('userData' in props) {\n      this.context.userData = props.userData;\n    }\n\n    if ('layers' in props) {\n      this._nextLayers = props.layers;\n    }\n\n    if ('onError' in props) {\n      this.context.onError = props.onError;\n    }\n  }\n\n  setLayers(newLayers, reason) {\n    debug(TRACE_SET_LAYERS, this, reason, newLayers);\n    this._lastRenderedLayers = newLayers;\n    const flatLayers = flatten(newLayers, Boolean);\n\n    for (const layer of flatLayers) {\n      layer.context = this.context;\n    }\n\n    this._updateLayers(this.layers, flatLayers);\n  }\n\n  updateLayers() {\n    const reason = this.needsUpdate();\n\n    if (reason) {\n      this.setNeedsRedraw(\"updating layers: \".concat(reason));\n      this.setLayers(this._nextLayers || this._lastRenderedLayers, reason);\n    }\n\n    this._nextLayers = null;\n  }\n\n  _handleError(stage, error, layer) {\n    layer.raiseError(error, \"\".concat(stage, \" of \").concat(layer));\n  }\n\n  _updateLayers(oldLayers, newLayers) {\n    const oldLayerMap = {};\n\n    for (const oldLayer of oldLayers) {\n      if (oldLayerMap[oldLayer.id]) {\n        log.warn(\"Multiple old layers with same id \".concat(oldLayer.id))();\n      } else {\n        oldLayerMap[oldLayer.id] = oldLayer;\n      }\n    }\n\n    const generatedLayers = [];\n\n    this._updateSublayersRecursively(newLayers, oldLayerMap, generatedLayers);\n\n    this._finalizeOldLayers(oldLayerMap);\n\n    let needsUpdate = false;\n\n    for (const layer of generatedLayers) {\n      if (layer.hasUniformTransition()) {\n        needsUpdate = \"Uniform transition in \".concat(layer);\n        break;\n      }\n    }\n\n    this._needsUpdate = needsUpdate;\n    this.layers = generatedLayers;\n  }\n\n  _updateSublayersRecursively(newLayers, oldLayerMap, generatedLayers) {\n    for (const newLayer of newLayers) {\n      newLayer.context = this.context;\n      const oldLayer = oldLayerMap[newLayer.id];\n\n      if (oldLayer === null) {\n        log.warn(\"Multiple new layers with same id \".concat(newLayer.id))();\n      }\n\n      oldLayerMap[newLayer.id] = null;\n      let sublayers = null;\n\n      try {\n        if (this._debug && oldLayer !== newLayer) {\n          newLayer.validateProps();\n        }\n\n        if (!oldLayer) {\n          this._initializeLayer(newLayer);\n        } else {\n          this._transferLayerState(oldLayer, newLayer);\n\n          this._updateLayer(newLayer);\n        }\n\n        generatedLayers.push(newLayer);\n        sublayers = newLayer.isComposite ? newLayer.getSubLayers() : null;\n      } catch (err) {\n        this._handleError('matching', err, newLayer);\n      }\n\n      if (sublayers) {\n        this._updateSublayersRecursively(sublayers, oldLayerMap, generatedLayers);\n      }\n    }\n  }\n\n  _finalizeOldLayers(oldLayerMap) {\n    for (const layerId in oldLayerMap) {\n      const layer = oldLayerMap[layerId];\n\n      if (layer) {\n        this._finalizeLayer(layer);\n      }\n    }\n  }\n\n  _initializeLayer(layer) {\n    try {\n      layer._initialize();\n\n      layer.lifecycle = LIFECYCLE.INITIALIZED;\n    } catch (err) {\n      this._handleError('initialization', err, layer);\n    }\n  }\n\n  _transferLayerState(oldLayer, newLayer) {\n    newLayer._transferState(oldLayer);\n\n    newLayer.lifecycle = LIFECYCLE.MATCHED;\n\n    if (newLayer !== oldLayer) {\n      oldLayer.lifecycle = LIFECYCLE.AWAITING_GC;\n    }\n  }\n\n  _updateLayer(layer) {\n    try {\n      layer._update();\n    } catch (err) {\n      this._handleError('update', err, layer);\n    }\n  }\n\n  _finalizeLayer(layer) {\n    this._needsRedraw = this._needsRedraw || \"finalized \".concat(layer);\n    layer.lifecycle = LIFECYCLE.AWAITING_FINALIZATION;\n\n    try {\n      layer._finalize();\n\n      layer.lifecycle = LIFECYCLE.FINALIZED;\n    } catch (err) {\n      this._handleError('finalization', err, layer);\n    }\n  }\n\n}\n//# sourceMappingURL=layer-manager.js.map","export function deepEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (!a || !b) {\n    return false;\n  }\n\n  for (const key in a) {\n    const aValue = a[key];\n    const bValue = b[key];\n    const equals = aValue === bValue || Array.isArray(aValue) && Array.isArray(bValue) && deepEqual(aValue, bValue);\n\n    if (!equals) {\n      return false;\n    }\n  }\n\n  return true;\n}\n//# sourceMappingURL=deep-equal.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { deepEqual } from '../utils/deep-equal';\nimport log from '../utils/log';\nimport { flatten } from '../utils/flatten';\nexport default class ViewManager {\n  constructor(props) {\n    _defineProperty(this, \"width\", void 0);\n\n    _defineProperty(this, \"height\", void 0);\n\n    _defineProperty(this, \"views\", void 0);\n\n    _defineProperty(this, \"viewState\", void 0);\n\n    _defineProperty(this, \"controllers\", void 0);\n\n    _defineProperty(this, \"timeline\", void 0);\n\n    _defineProperty(this, \"_viewports\", void 0);\n\n    _defineProperty(this, \"_viewportMap\", void 0);\n\n    _defineProperty(this, \"_isUpdating\", void 0);\n\n    _defineProperty(this, \"_needsRedraw\", void 0);\n\n    _defineProperty(this, \"_needsUpdate\", void 0);\n\n    _defineProperty(this, \"_eventManager\", void 0);\n\n    _defineProperty(this, \"_eventCallbacks\", void 0);\n\n    this.views = [];\n    this.width = 100;\n    this.height = 100;\n    this.viewState = {};\n    this.controllers = {};\n    this.timeline = props.timeline;\n    this._viewports = [];\n    this._viewportMap = {};\n    this._isUpdating = false;\n    this._needsRedraw = 'First render';\n    this._needsUpdate = 'Initialize';\n    this._eventManager = props.eventManager;\n    this._eventCallbacks = {\n      onViewStateChange: props.onViewStateChange,\n      onInteractionStateChange: props.onInteractionStateChange\n    };\n    Object.seal(this);\n    this.setProps(props);\n  }\n\n  finalize() {\n    for (const key in this.controllers) {\n      const controller = this.controllers[key];\n\n      if (controller) {\n        controller.finalize();\n      }\n    }\n\n    this.controllers = {};\n  }\n\n  needsRedraw(opts = {\n    clearRedrawFlags: false\n  }) {\n    const redraw = this._needsRedraw;\n\n    if (opts.clearRedrawFlags) {\n      this._needsRedraw = false;\n    }\n\n    return redraw;\n  }\n\n  setNeedsUpdate(reason) {\n    this._needsUpdate = this._needsUpdate || reason;\n    this._needsRedraw = this._needsRedraw || reason;\n  }\n\n  updateViewStates() {\n    for (const viewId in this.controllers) {\n      const controller = this.controllers[viewId];\n\n      if (controller) {\n        controller.updateTransition();\n      }\n    }\n  }\n\n  getViewports(rect) {\n    if (rect) {\n      return this._viewports.filter(viewport => viewport.containsPixel(rect));\n    }\n\n    return this._viewports;\n  }\n\n  getViews() {\n    const viewMap = {};\n    this.views.forEach(view => {\n      viewMap[view.id] = view;\n    });\n    return viewMap;\n  }\n\n  getView(viewId) {\n    return this.views.find(view => view.id === viewId);\n  }\n\n  getViewState(viewOrViewId) {\n    const view = typeof viewOrViewId === 'string' ? this.getView(viewOrViewId) : viewOrViewId;\n    const viewState = view && this.viewState[view.getViewStateId()] || this.viewState;\n    return view ? view.filterViewState(viewState) : viewState;\n  }\n\n  getViewport(viewId) {\n    return this._viewportMap[viewId];\n  }\n\n  unproject(xyz, opts) {\n    const viewports = this.getViewports();\n    const pixel = {\n      x: xyz[0],\n      y: xyz[1]\n    };\n\n    for (let i = viewports.length - 1; i >= 0; --i) {\n      const viewport = viewports[i];\n\n      if (viewport.containsPixel(pixel)) {\n        const p = xyz.slice();\n        p[0] -= viewport.x;\n        p[1] -= viewport.y;\n        return viewport.unproject(p, opts);\n      }\n    }\n\n    return null;\n  }\n\n  setProps(props) {\n    if (props.views) {\n      this._setViews(props.views);\n    }\n\n    if (props.viewState) {\n      this._setViewState(props.viewState);\n    }\n\n    if ('width' in props || 'height' in props) {\n      this._setSize(props.width, props.height);\n    }\n\n    if (!this._isUpdating) {\n      this._update();\n    }\n  }\n\n  _update() {\n    this._isUpdating = true;\n\n    if (this._needsUpdate) {\n      this._needsUpdate = false;\n\n      this._rebuildViewports();\n    }\n\n    if (this._needsUpdate) {\n      this._needsUpdate = false;\n\n      this._rebuildViewports();\n    }\n\n    this._isUpdating = false;\n  }\n\n  _setSize(width, height) {\n    if (width !== this.width || height !== this.height) {\n      this.width = width;\n      this.height = height;\n      this.setNeedsUpdate('Size changed');\n    }\n  }\n\n  _setViews(views) {\n    views = flatten(views, Boolean);\n\n    const viewsChanged = this._diffViews(views, this.views);\n\n    if (viewsChanged) {\n      this.setNeedsUpdate('views changed');\n    }\n\n    this.views = views;\n  }\n\n  _setViewState(viewState) {\n    if (viewState) {\n      const viewStateChanged = !deepEqual(viewState, this.viewState);\n\n      if (viewStateChanged) {\n        this.setNeedsUpdate('viewState changed');\n      }\n\n      this.viewState = viewState;\n    } else {\n      log.warn('missing `viewState` or `initialViewState`')();\n    }\n  }\n\n  _onViewStateChange(viewId, event) {\n    if (this._eventCallbacks.onViewStateChange) {\n      this._eventCallbacks.onViewStateChange({ ...event,\n        viewId\n      });\n    }\n  }\n\n  _createController(view, props) {\n    const Controller = props.type;\n    const controller = new Controller({\n      timeline: this.timeline,\n      eventManager: this._eventManager,\n      onViewStateChange: this._onViewStateChange.bind(this, props.id),\n      onStateChange: this._eventCallbacks.onInteractionStateChange,\n      makeViewport: viewState => {\n        var _this$getView;\n\n        return (_this$getView = this.getView(view.id)) === null || _this$getView === void 0 ? void 0 : _this$getView.makeViewport({\n          viewState,\n          width: this.width,\n          height: this.height\n        });\n      }\n    });\n    return controller;\n  }\n\n  _updateController(view, viewState, viewport, controller) {\n    const controllerProps = view.controller;\n\n    if (controllerProps) {\n      const resolvedProps = { ...viewState,\n        ...controllerProps,\n        id: view.id,\n        x: viewport.x,\n        y: viewport.y,\n        width: viewport.width,\n        height: viewport.height\n      };\n\n      if (!controller) {\n        controller = this._createController(view, resolvedProps);\n      }\n\n      if (controller) {\n        controller.setProps(resolvedProps);\n      }\n\n      return controller;\n    }\n\n    return null;\n  }\n\n  _rebuildViewports() {\n    const {\n      views\n    } = this;\n    const oldControllers = this.controllers;\n    this._viewports = [];\n    this.controllers = {};\n    let invalidateControllers = false;\n\n    for (let i = views.length; i--;) {\n      const view = views[i];\n      const viewState = this.getViewState(view);\n      const viewport = view.makeViewport({\n        viewState,\n        width: this.width,\n        height: this.height\n      });\n      let oldController = oldControllers[view.id];\n      const hasController = Boolean(view.controller);\n\n      if (hasController && !oldController) {\n        invalidateControllers = true;\n      }\n\n      if ((invalidateControllers || !hasController) && oldController) {\n        oldController.finalize();\n        oldController = null;\n      }\n\n      this.controllers[view.id] = this._updateController(view, viewState, viewport, oldController);\n\n      this._viewports.unshift(viewport);\n    }\n\n    for (const id in oldControllers) {\n      const oldController = oldControllers[id];\n\n      if (oldController && !this.controllers[id]) {\n        oldController.finalize();\n      }\n    }\n\n    this._buildViewportMap();\n  }\n\n  _buildViewportMap() {\n    this._viewportMap = {};\n\n    this._viewports.forEach(viewport => {\n      if (viewport.id) {\n        this._viewportMap[viewport.id] = this._viewportMap[viewport.id] || viewport;\n      }\n    });\n  }\n\n  _diffViews(newViews, oldViews) {\n    if (newViews.length !== oldViews.length) {\n      return true;\n    }\n\n    return newViews.some((_, i) => !newViews[i].equals(oldViews[i]));\n  }\n\n}\n//# sourceMappingURL=view-manager.js.map","const PERCENT_OR_PIXELS_REGEX = /([0-9]+\\.?[0-9]*)(%|px)/;\nexport function parsePosition(value) {\n  switch (typeof value) {\n    case 'number':\n      return {\n        position: value,\n        relative: false\n      };\n\n    case 'string':\n      const match = PERCENT_OR_PIXELS_REGEX.exec(value);\n\n      if (match && match.length >= 3) {\n        const relative = match[2] === '%';\n        const position = parseFloat(match[1]);\n        return {\n          position: relative ? position / 100 : position,\n          relative\n        };\n      }\n\n    default:\n      throw new Error(\"Could not parse position string \".concat(value));\n  }\n}\nexport function getPosition(position, extent) {\n  return position.relative ? Math.round(position.position * extent) : position.position;\n}\n//# sourceMappingURL=positions.js.map","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'deck.gl: assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport Viewport from '../viewports/viewport';\nimport { parsePosition, getPosition } from '../utils/positions';\nimport { deepEqual } from '../utils/deep-equal';\nimport assert from '../utils/assert';\nexport default class View {\n  constructor(props) {\n    _defineProperty(this, \"id\", void 0);\n\n    _defineProperty(this, \"viewportInstance\", void 0);\n\n    _defineProperty(this, \"_x\", void 0);\n\n    _defineProperty(this, \"_y\", void 0);\n\n    _defineProperty(this, \"_width\", void 0);\n\n    _defineProperty(this, \"_height\", void 0);\n\n    _defineProperty(this, \"_padding\", void 0);\n\n    _defineProperty(this, \"props\", void 0);\n\n    const {\n      id,\n      x = 0,\n      y = 0,\n      width = '100%',\n      height = '100%',\n      padding = null,\n      viewportInstance\n    } = props || {};\n    assert(!viewportInstance || viewportInstance instanceof Viewport);\n    this.viewportInstance = viewportInstance;\n    this.id = id || this.constructor.displayName || 'view';\n    this.props = { ...props,\n      id: this.id\n    };\n    this._x = parsePosition(x);\n    this._y = parsePosition(y);\n    this._width = parsePosition(width);\n    this._height = parsePosition(height);\n    this._padding = padding && {\n      left: parsePosition(padding.left || 0),\n      right: parsePosition(padding.right || 0),\n      top: parsePosition(padding.top || 0),\n      bottom: parsePosition(padding.bottom || 0)\n    };\n    this.equals = this.equals.bind(this);\n    Object.seal(this);\n  }\n\n  equals(view) {\n    if (this === view) {\n      return true;\n    }\n\n    if (this.viewportInstance) {\n      return view.viewportInstance ? this.viewportInstance.equals(view.viewportInstance) : false;\n    }\n\n    return this.ViewportType === view.ViewportType && deepEqual(this.props, view.props);\n  }\n\n  makeViewport({\n    width,\n    height,\n    viewState\n  }) {\n    if (this.viewportInstance) {\n      return this.viewportInstance;\n    }\n\n    viewState = this.filterViewState(viewState);\n    const viewportDimensions = this.getDimensions({\n      width,\n      height\n    });\n    return new this.ViewportType({ ...viewState,\n      ...this.props,\n      ...viewportDimensions\n    });\n  }\n\n  getViewStateId() {\n    const {\n      viewState\n    } = this.props;\n\n    if (typeof viewState === 'string') {\n      return viewState;\n    }\n\n    return (viewState === null || viewState === void 0 ? void 0 : viewState.id) || this.id;\n  }\n\n  filterViewState(viewState) {\n    if (this.props.viewState && typeof this.props.viewState === 'object') {\n      if (!this.props.viewState.id) {\n        return this.props.viewState;\n      }\n\n      const newViewState = { ...viewState\n      };\n\n      for (const key in this.props.viewState) {\n        if (key !== 'id') {\n          newViewState[key] = this.props.viewState[key];\n        }\n      }\n\n      return newViewState;\n    }\n\n    return viewState;\n  }\n\n  getDimensions({\n    width,\n    height\n  }) {\n    const dimensions = {\n      x: getPosition(this._x, width),\n      y: getPosition(this._y, height),\n      width: getPosition(this._width, width),\n      height: getPosition(this._height, height)\n    };\n\n    if (this._padding) {\n      dimensions.padding = {\n        left: getPosition(this._padding.left, width),\n        top: getPosition(this._padding.top, height),\n        right: getPosition(this._padding.right, width),\n        bottom: getPosition(this._padding.bottom, height)\n      };\n    }\n\n    return dimensions;\n  }\n\n  get controller() {\n    const opts = this.props.controller;\n\n    if (!opts) {\n      return null;\n    }\n\n    if (opts === true) {\n      return {\n        type: this.ControllerType\n      };\n    }\n\n    if (typeof opts === 'function') {\n      return {\n        type: opts\n      };\n    }\n\n    return {\n      type: this.ControllerType,\n      ...opts\n    };\n  }\n\n}\n//# sourceMappingURL=view.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nexport default class Transition {\n  constructor(timeline) {\n    _defineProperty(this, \"_inProgress\", void 0);\n\n    _defineProperty(this, \"_handle\", void 0);\n\n    _defineProperty(this, \"_timeline\", void 0);\n\n    _defineProperty(this, \"time\", void 0);\n\n    _defineProperty(this, \"settings\", void 0);\n\n    this._inProgress = false;\n    this._handle = null;\n    this._timeline = timeline;\n    this.time = 0;\n    this.settings = {\n      duration: 0\n    };\n  }\n\n  get inProgress() {\n    return this._inProgress;\n  }\n\n  start(settings) {\n    var _this$settings$onStar, _this$settings;\n\n    this.cancel();\n    this.settings = settings;\n    this._inProgress = true;\n    (_this$settings$onStar = (_this$settings = this.settings).onStart) === null || _this$settings$onStar === void 0 ? void 0 : _this$settings$onStar.call(_this$settings, this);\n  }\n\n  end() {\n    if (this._inProgress) {\n      var _this$settings$onEnd, _this$settings2;\n\n      this._timeline.removeChannel(this._handle);\n\n      this._handle = null;\n      this._inProgress = false;\n      (_this$settings$onEnd = (_this$settings2 = this.settings).onEnd) === null || _this$settings$onEnd === void 0 ? void 0 : _this$settings$onEnd.call(_this$settings2, this);\n    }\n  }\n\n  cancel() {\n    if (this._inProgress) {\n      var _this$settings$onInte, _this$settings3;\n\n      (_this$settings$onInte = (_this$settings3 = this.settings).onInterrupt) === null || _this$settings$onInte === void 0 ? void 0 : _this$settings$onInte.call(_this$settings3, this);\n\n      this._timeline.removeChannel(this._handle);\n\n      this._handle = null;\n      this._inProgress = false;\n    }\n  }\n\n  update() {\n    var _this$settings$onUpda, _this$settings4;\n\n    if (!this._inProgress) {\n      return false;\n    }\n\n    if (this._handle === null) {\n      const {\n        _timeline: timeline,\n        settings\n      } = this;\n      this._handle = timeline.addChannel({\n        delay: timeline.getTime(),\n        duration: settings.duration\n      });\n    }\n\n    this.time = this._timeline.getTime(this._handle);\n\n    this._onUpdate();\n\n    (_this$settings$onUpda = (_this$settings4 = this.settings).onUpdate) === null || _this$settings$onUpda === void 0 ? void 0 : _this$settings$onUpda.call(_this$settings4, this);\n\n    if (this._timeline.isFinished(this._handle)) {\n      this.end();\n    }\n\n    return true;\n  }\n\n  _onUpdate() {}\n\n}\n//# sourceMappingURL=transition.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport Transition from '../transitions/transition';\n\nconst noop = () => {};\n\nexport const TRANSITION_EVENTS = {\n  BREAK: 1,\n  SNAP_TO_END: 2,\n  IGNORE: 3\n};\n\nconst DEFAULT_EASING = t => t;\n\nconst DEFAULT_INTERRUPTION = TRANSITION_EVENTS.BREAK;\nexport default class TransitionManager {\n  constructor(opts) {\n    _defineProperty(this, \"getControllerState\", void 0);\n\n    _defineProperty(this, \"props\", void 0);\n\n    _defineProperty(this, \"propsInTransition\", void 0);\n\n    _defineProperty(this, \"transition\", void 0);\n\n    _defineProperty(this, \"onViewStateChange\", void 0);\n\n    _defineProperty(this, \"onStateChange\", void 0);\n\n    _defineProperty(this, \"_onTransitionUpdate\", transition => {\n      const {\n        time,\n        settings: {\n          interpolator,\n          startProps,\n          endProps,\n          duration,\n          easing\n        }\n      } = transition;\n      const t = easing(time / duration);\n      const viewport = interpolator.interpolateProps(startProps, endProps, t);\n      this.propsInTransition = this.getControllerState({ ...this.props,\n        ...viewport\n      }).getViewportProps();\n      this.onViewStateChange({\n        viewState: this.propsInTransition,\n        oldViewState: this.props\n      });\n    });\n\n    this.getControllerState = opts.getControllerState;\n    this.propsInTransition = null;\n    this.transition = new Transition(opts.timeline);\n    this.onViewStateChange = opts.onViewStateChange || noop;\n    this.onStateChange = opts.onStateChange || noop;\n  }\n\n  finalize() {\n    this.transition.cancel();\n  }\n\n  getViewportInTransition() {\n    return this.propsInTransition;\n  }\n\n  processViewStateChange(nextProps) {\n    let transitionTriggered = false;\n    const currentProps = this.props;\n    this.props = nextProps;\n\n    if (!currentProps || this._shouldIgnoreViewportChange(currentProps, nextProps)) {\n      return false;\n    }\n\n    if (this._isTransitionEnabled(nextProps)) {\n      let startProps = currentProps;\n\n      if (this.transition.inProgress) {\n        const {\n          interruption,\n          endProps\n        } = this.transition.settings;\n        startProps = { ...currentProps,\n          ...(interruption === TRANSITION_EVENTS.SNAP_TO_END ? endProps : this.propsInTransition || currentProps)\n        };\n      }\n\n      this._triggerTransition(startProps, nextProps);\n\n      transitionTriggered = true;\n    } else {\n      this.transition.cancel();\n    }\n\n    return transitionTriggered;\n  }\n\n  updateTransition() {\n    this.transition.update();\n  }\n\n  _isTransitionEnabled(props) {\n    const {\n      transitionDuration,\n      transitionInterpolator\n    } = props;\n    return (transitionDuration > 0 || transitionDuration === 'auto') && Boolean(transitionInterpolator);\n  }\n\n  _isUpdateDueToCurrentTransition(props) {\n    if (this.transition.inProgress && this.propsInTransition) {\n      return this.transition.settings.interpolator.arePropsEqual(props, this.propsInTransition);\n    }\n\n    return false;\n  }\n\n  _shouldIgnoreViewportChange(currentProps, nextProps) {\n    if (this.transition.inProgress) {\n      return this.transition.settings.interruption === TRANSITION_EVENTS.IGNORE || this._isUpdateDueToCurrentTransition(nextProps);\n    }\n\n    if (this._isTransitionEnabled(nextProps)) {\n      return nextProps.transitionInterpolator.arePropsEqual(currentProps, nextProps);\n    }\n\n    return true;\n  }\n\n  _triggerTransition(startProps, endProps) {\n    const startViewstate = this.getControllerState(startProps);\n    const endViewStateProps = this.getControllerState(endProps).shortestPathFrom(startViewstate);\n    const transitionInterpolator = endProps.transitionInterpolator;\n    const duration = transitionInterpolator.getDuration ? transitionInterpolator.getDuration(startProps, endProps) : endProps.transitionDuration;\n\n    if (duration === 0) {\n      return;\n    }\n\n    const initialProps = transitionInterpolator.initializeProps(startProps, endViewStateProps);\n    this.propsInTransition = {};\n    const transitionSettings = {\n      duration,\n      easing: endProps.transitionEasing || DEFAULT_EASING,\n      interpolator: transitionInterpolator,\n      interruption: endProps.transitionInterruption || DEFAULT_INTERRUPTION,\n      startProps: initialProps.start,\n      endProps: initialProps.end,\n      onStart: endProps.onTransitionStart,\n      onUpdate: this._onTransitionUpdate,\n      onInterrupt: this._onTransitionEnd(endProps.onTransitionInterrupt),\n      onEnd: this._onTransitionEnd(endProps.onTransitionEnd)\n    };\n    this.transition.start(transitionSettings);\n    this.onStateChange({\n      inTransition: true\n    });\n    this.updateTransition();\n  }\n\n  _onTransitionEnd(callback) {\n    return transition => {\n      this.propsInTransition = null;\n      this.onStateChange({\n        inTransition: false,\n        isZooming: false,\n        isPanning: false,\n        isRotating: false\n      });\n      callback === null || callback === void 0 ? void 0 : callback(transition);\n    };\n  }\n\n}\n//# sourceMappingURL=transition-manager.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { equals } from '@math.gl/core';\nimport assert from '../utils/assert';\nexport default class TransitionInterpolator {\n  constructor(opts) {\n    _defineProperty(this, \"_propsToCompare\", void 0);\n\n    _defineProperty(this, \"_propsToExtract\", void 0);\n\n    _defineProperty(this, \"_requiredProps\", void 0);\n\n    const {\n      compare,\n      extract,\n      required\n    } = opts;\n    this._propsToCompare = compare;\n    this._propsToExtract = extract || compare;\n    this._requiredProps = required;\n  }\n\n  arePropsEqual(currentProps, nextProps) {\n    for (const key of this._propsToCompare) {\n      if (!(key in currentProps) || !(key in nextProps) || !equals(currentProps[key], nextProps[key])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  initializeProps(startProps, endProps) {\n    const startViewStateProps = {};\n    const endViewStateProps = {};\n\n    for (const key of this._propsToExtract) {\n      if (key in startProps || key in endProps) {\n        startViewStateProps[key] = startProps[key];\n        endViewStateProps[key] = endProps[key];\n      }\n    }\n\n    this._checkRequiredProps(startViewStateProps);\n\n    this._checkRequiredProps(endViewStateProps);\n\n    return {\n      start: startViewStateProps,\n      end: endViewStateProps\n    };\n  }\n\n  getDuration(startProps, endProps) {\n    return endProps.transitionDuration;\n  }\n\n  _checkRequiredProps(props) {\n    if (!this._requiredProps) {\n      return;\n    }\n\n    this._requiredProps.forEach(propName => {\n      const value = props[propName];\n      assert(Number.isFinite(value) || Array.isArray(value), \"\".concat(propName, \" is required for transition\"));\n    });\n  }\n\n}\n//# sourceMappingURL=transition-interpolator.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport TransitionInterpolator from './transition-interpolator';\nimport { lerp } from '@math.gl/core';\nconst DEFAULT_PROPS = ['longitude', 'latitude', 'zoom', 'bearing', 'pitch'];\nconst DEFAULT_REQUIRED_PROPS = ['longitude', 'latitude', 'zoom'];\nexport default class LinearInterpolator extends TransitionInterpolator {\n  constructor(opts = {}) {\n    const transitionProps = Array.isArray(opts) ? opts : opts.transitionProps;\n    const normalizedOpts = Array.isArray(opts) ? {} : opts;\n    normalizedOpts.transitionProps = Array.isArray(transitionProps) ? {\n      compare: transitionProps,\n      required: transitionProps\n    } : transitionProps || {\n      compare: DEFAULT_PROPS,\n      required: DEFAULT_REQUIRED_PROPS\n    };\n    super(normalizedOpts.transitionProps);\n\n    _defineProperty(this, \"opts\", void 0);\n\n    this.opts = normalizedOpts;\n  }\n\n  initializeProps(startProps, endProps) {\n    const result = super.initializeProps(startProps, endProps);\n    const {\n      makeViewport,\n      around\n    } = this.opts;\n\n    if (makeViewport && around) {\n      const startViewport = makeViewport(startProps);\n      const endViewport = makeViewport(endProps);\n      const aroundPosition = startViewport.unproject(around);\n      result.start.around = around;\n      Object.assign(result.end, {\n        around: endViewport.project(aroundPosition),\n        aroundPosition,\n        width: endProps.width,\n        height: endProps.height\n      });\n    }\n\n    return result;\n  }\n\n  interpolateProps(startProps, endProps, t) {\n    const propsInTransition = {};\n\n    for (const key of this._propsToExtract) {\n      propsInTransition[key] = lerp(startProps[key] || 0, endProps[key] || 0, t);\n    }\n\n    if (endProps.aroundPosition && this.opts.makeViewport) {\n      const viewport = this.opts.makeViewport({ ...endProps,\n        ...propsInTransition\n      });\n      Object.assign(propsInTransition, viewport.panByPosition(endProps.aroundPosition, lerp(startProps.around, endProps.around, t)));\n    }\n\n    return propsInTransition;\n  }\n\n}\n//# sourceMappingURL=linear-interpolator.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport TransitionManager from './transition-manager';\nimport LinearInterpolator from '../transitions/linear-interpolator';\nconst NO_TRANSITION_PROPS = {\n  transitionDuration: 0\n};\nconst DEFAULT_INERTIA = 300;\n\nconst INERTIA_EASING = t => 1 - (1 - t) * (1 - t);\n\nconst EVENT_TYPES = {\n  WHEEL: ['wheel'],\n  PAN: ['panstart', 'panmove', 'panend'],\n  PINCH: ['pinchstart', 'pinchmove', 'pinchend'],\n  TRIPLE_PAN: ['tripanstart', 'tripanmove', 'tripanend'],\n  DOUBLE_TAP: ['doubletap'],\n  KEYBOARD: ['keydown']\n};\nconst pinchEventWorkaround = {};\nexport default class Controller {\n  constructor(opts) {\n    _defineProperty(this, \"props\", void 0);\n\n    _defineProperty(this, \"state\", {});\n\n    _defineProperty(this, \"transitionManager\", void 0);\n\n    _defineProperty(this, \"eventManager\", void 0);\n\n    _defineProperty(this, \"onViewStateChange\", void 0);\n\n    _defineProperty(this, \"onStateChange\", void 0);\n\n    _defineProperty(this, \"makeViewport\", void 0);\n\n    _defineProperty(this, \"_controllerState\", void 0);\n\n    _defineProperty(this, \"_events\", {});\n\n    _defineProperty(this, \"_interactionState\", {\n      isDragging: false\n    });\n\n    _defineProperty(this, \"_customEvents\", []);\n\n    _defineProperty(this, \"_eventStartBlocked\", null);\n\n    _defineProperty(this, \"_panMove\", false);\n\n    _defineProperty(this, \"invertPan\", false);\n\n    _defineProperty(this, \"dragMode\", 'rotate');\n\n    _defineProperty(this, \"inertia\", 0);\n\n    _defineProperty(this, \"scrollZoom\", true);\n\n    _defineProperty(this, \"dragPan\", true);\n\n    _defineProperty(this, \"dragRotate\", true);\n\n    _defineProperty(this, \"doubleClickZoom\", true);\n\n    _defineProperty(this, \"touchZoom\", true);\n\n    _defineProperty(this, \"touchRotate\", false);\n\n    _defineProperty(this, \"keyboard\", true);\n\n    this.transitionManager = new TransitionManager({ ...opts,\n      getControllerState: props => new this.ControllerState(props),\n      onViewStateChange: this._onTransition.bind(this),\n      onStateChange: this._setInteractionState.bind(this)\n    });\n    this.handleEvent = this.handleEvent.bind(this);\n    this.eventManager = opts.eventManager;\n\n    this.onViewStateChange = opts.onViewStateChange || (() => {});\n\n    this.onStateChange = opts.onStateChange || (() => {});\n\n    this.makeViewport = opts.makeViewport;\n  }\n\n  set events(customEvents) {\n    this.toggleEvents(this._customEvents, false);\n    this.toggleEvents(customEvents, true);\n    this._customEvents = customEvents;\n\n    if (this.props) {\n      this.setProps(this.props);\n    }\n  }\n\n  finalize() {\n    for (const eventName in this._events) {\n      if (this._events[eventName]) {\n        var _this$eventManager;\n\n        (_this$eventManager = this.eventManager) === null || _this$eventManager === void 0 ? void 0 : _this$eventManager.off(eventName, this.handleEvent);\n      }\n    }\n\n    this.transitionManager.finalize();\n  }\n\n  handleEvent(event) {\n    this._controllerState = undefined;\n    const eventStartBlocked = this._eventStartBlocked;\n\n    switch (event.type) {\n      case 'panstart':\n        return eventStartBlocked ? false : this._onPanStart(event);\n\n      case 'panmove':\n        return this._onPan(event);\n\n      case 'panend':\n        return this._onPanEnd(event);\n\n      case 'pinchstart':\n        return eventStartBlocked ? false : this._onPinchStart(event);\n\n      case 'pinchmove':\n        return this._onPinch(event);\n\n      case 'pinchend':\n        return this._onPinchEnd(event);\n\n      case 'tripanstart':\n        return eventStartBlocked ? false : this._onTriplePanStart(event);\n\n      case 'tripanmove':\n        return this._onTriplePan(event);\n\n      case 'tripanend':\n        return this._onTriplePanEnd(event);\n\n      case 'doubletap':\n        return this._onDoubleTap(event);\n\n      case 'wheel':\n        return this._onWheel(event);\n\n      case 'keydown':\n        return this._onKeyDown(event);\n\n      default:\n        return false;\n    }\n  }\n\n  get controllerState() {\n    this._controllerState = this._controllerState || new this.ControllerState({\n      makeViewport: this.makeViewport,\n      ...this.props,\n      ...this.state\n    });\n    return this._controllerState;\n  }\n\n  getCenter(event) {\n    const {\n      x,\n      y\n    } = this.props;\n    const {\n      offsetCenter\n    } = event;\n    return [offsetCenter.x - x, offsetCenter.y - y];\n  }\n\n  isPointInBounds(pos, event) {\n    const {\n      width,\n      height\n    } = this.props;\n\n    if (event && event.handled) {\n      return false;\n    }\n\n    const inside = pos[0] >= 0 && pos[0] <= width && pos[1] >= 0 && pos[1] <= height;\n\n    if (inside && event) {\n      event.stopPropagation();\n    }\n\n    return inside;\n  }\n\n  isFunctionKeyPressed(event) {\n    const {\n      srcEvent\n    } = event;\n    return Boolean(srcEvent.metaKey || srcEvent.altKey || srcEvent.ctrlKey || srcEvent.shiftKey);\n  }\n\n  isDragging() {\n    return this._interactionState.isDragging || false;\n  }\n\n  blockEvents(timeout) {\n    const timer = setTimeout(() => {\n      if (this._eventStartBlocked === timer) {\n        this._eventStartBlocked = null;\n      }\n    }, timeout);\n    this._eventStartBlocked = timer;\n  }\n\n  setProps(props) {\n    if (props.dragMode) {\n      this.dragMode = props.dragMode;\n    }\n\n    this.props = props;\n\n    if (!('transitionInterpolator' in props)) {\n      props.transitionInterpolator = this._getTransitionProps().transitionInterpolator;\n    }\n\n    this.transitionManager.processViewStateChange(props);\n    const {\n      inertia\n    } = props;\n    this.inertia = Number.isFinite(inertia) ? inertia : inertia === true ? DEFAULT_INERTIA : 0;\n    const {\n      scrollZoom = true,\n      dragPan = true,\n      dragRotate = true,\n      doubleClickZoom = true,\n      touchZoom = true,\n      touchRotate = false,\n      keyboard = true\n    } = props;\n    const isInteractive = Boolean(this.onViewStateChange);\n    this.toggleEvents(EVENT_TYPES.WHEEL, isInteractive && scrollZoom);\n    this.toggleEvents(EVENT_TYPES.PAN, isInteractive && (dragPan || dragRotate));\n    this.toggleEvents(EVENT_TYPES.PINCH, isInteractive && (touchZoom || touchRotate));\n    this.toggleEvents(EVENT_TYPES.TRIPLE_PAN, isInteractive && touchRotate);\n    this.toggleEvents(EVENT_TYPES.DOUBLE_TAP, isInteractive && doubleClickZoom);\n    this.toggleEvents(EVENT_TYPES.KEYBOARD, isInteractive && keyboard);\n    this.scrollZoom = scrollZoom;\n    this.dragPan = dragPan;\n    this.dragRotate = dragRotate;\n    this.doubleClickZoom = doubleClickZoom;\n    this.touchZoom = touchZoom;\n    this.touchRotate = touchRotate;\n    this.keyboard = keyboard;\n  }\n\n  updateTransition() {\n    this.transitionManager.updateTransition();\n  }\n\n  toggleEvents(eventNames, enabled) {\n    if (this.eventManager) {\n      eventNames.forEach(eventName => {\n        if (this._events[eventName] !== enabled) {\n          this._events[eventName] = enabled;\n\n          if (enabled) {\n            this.eventManager.on(eventName, this.handleEvent);\n          } else {\n            this.eventManager.off(eventName, this.handleEvent);\n          }\n        }\n      });\n    }\n  }\n\n  updateViewport(newControllerState, extraProps = null, interactionState = {}) {\n    const viewState = { ...newControllerState.getViewportProps(),\n      ...extraProps\n    };\n    const changed = this.controllerState !== newControllerState;\n    this.state = newControllerState.getState();\n\n    this._setInteractionState(interactionState);\n\n    if (changed) {\n      const oldViewState = this.controllerState && this.controllerState.getViewportProps();\n\n      if (this.onViewStateChange) {\n        this.onViewStateChange({\n          viewState,\n          interactionState: this._interactionState,\n          oldViewState\n        });\n      }\n    }\n  }\n\n  _onTransition(params) {\n    this.onViewStateChange({ ...params,\n      interactionState: this._interactionState\n    });\n  }\n\n  _setInteractionState(newStates) {\n    Object.assign(this._interactionState, newStates);\n    this.onStateChange(this._interactionState);\n  }\n\n  _onPanStart(event) {\n    const pos = this.getCenter(event);\n\n    if (!this.isPointInBounds(pos, event)) {\n      return false;\n    }\n\n    let alternateMode = this.isFunctionKeyPressed(event) || event.rightButton || false;\n\n    if (this.invertPan || this.dragMode === 'pan') {\n      alternateMode = !alternateMode;\n    }\n\n    const newControllerState = this.controllerState[alternateMode ? 'panStart' : 'rotateStart']({\n      pos\n    });\n    this._panMove = alternateMode;\n    this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n      isDragging: true\n    });\n    return true;\n  }\n\n  _onPan(event) {\n    if (!this.isDragging()) {\n      return false;\n    }\n\n    return this._panMove ? this._onPanMove(event) : this._onPanRotate(event);\n  }\n\n  _onPanEnd(event) {\n    if (!this.isDragging()) {\n      return false;\n    }\n\n    return this._panMove ? this._onPanMoveEnd(event) : this._onPanRotateEnd(event);\n  }\n\n  _onPanMove(event) {\n    if (!this.dragPan) {\n      return false;\n    }\n\n    const pos = this.getCenter(event);\n    const newControllerState = this.controllerState.pan({\n      pos\n    });\n    this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n      isDragging: true,\n      isPanning: true\n    });\n    return true;\n  }\n\n  _onPanMoveEnd(event) {\n    const {\n      inertia\n    } = this;\n\n    if (this.dragPan && inertia && event.velocity) {\n      const pos = this.getCenter(event);\n      const endPos = [pos[0] + event.velocityX * inertia / 2, pos[1] + event.velocityY * inertia / 2];\n      const newControllerState = this.controllerState.pan({\n        pos: endPos\n      }).panEnd();\n      this.updateViewport(newControllerState, { ...this._getTransitionProps(),\n        transitionDuration: inertia,\n        transitionEasing: INERTIA_EASING\n      }, {\n        isDragging: false,\n        isPanning: true\n      });\n    } else {\n      const newControllerState = this.controllerState.panEnd();\n      this.updateViewport(newControllerState, null, {\n        isDragging: false,\n        isPanning: false\n      });\n    }\n\n    return true;\n  }\n\n  _onPanRotate(event) {\n    if (!this.dragRotate) {\n      return false;\n    }\n\n    const pos = this.getCenter(event);\n    const newControllerState = this.controllerState.rotate({\n      pos\n    });\n    this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n      isDragging: true,\n      isRotating: true\n    });\n    return true;\n  }\n\n  _onPanRotateEnd(event) {\n    const {\n      inertia\n    } = this;\n\n    if (this.dragRotate && inertia && event.velocity) {\n      const pos = this.getCenter(event);\n      const endPos = [pos[0] + event.velocityX * inertia / 2, pos[1] + event.velocityY * inertia / 2];\n      const newControllerState = this.controllerState.rotate({\n        pos: endPos\n      }).rotateEnd();\n      this.updateViewport(newControllerState, { ...this._getTransitionProps(),\n        transitionDuration: inertia,\n        transitionEasing: INERTIA_EASING\n      }, {\n        isDragging: false,\n        isRotating: true\n      });\n    } else {\n      const newControllerState = this.controllerState.rotateEnd();\n      this.updateViewport(newControllerState, null, {\n        isDragging: false,\n        isRotating: false\n      });\n    }\n\n    return true;\n  }\n\n  _onWheel(event) {\n    if (!this.scrollZoom) {\n      return false;\n    }\n\n    event.srcEvent.preventDefault();\n    const pos = this.getCenter(event);\n\n    if (!this.isPointInBounds(pos, event)) {\n      return false;\n    }\n\n    const {\n      speed = 0.01,\n      smooth = false\n    } = this.scrollZoom === true ? {} : this.scrollZoom;\n    const {\n      delta\n    } = event;\n    let scale = 2 / (1 + Math.exp(-Math.abs(delta * speed)));\n\n    if (delta < 0 && scale !== 0) {\n      scale = 1 / scale;\n    }\n\n    const newControllerState = this.controllerState.zoom({\n      pos,\n      scale\n    });\n    this.updateViewport(newControllerState, { ...this._getTransitionProps({\n        around: pos\n      }),\n      transitionDuration: smooth ? 250 : 1\n    }, {\n      isZooming: true,\n      isPanning: true\n    });\n    return true;\n  }\n\n  _onTriplePanStart(event) {\n    const pos = this.getCenter(event);\n\n    if (!this.isPointInBounds(pos, event)) {\n      return false;\n    }\n\n    const newControllerState = this.controllerState.rotateStart({\n      pos\n    });\n    this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n      isDragging: true\n    });\n    return true;\n  }\n\n  _onTriplePan(event) {\n    if (!this.touchRotate) {\n      return false;\n    }\n\n    if (!this.isDragging()) {\n      return false;\n    }\n\n    const pos = this.getCenter(event);\n    pos[0] -= event.deltaX;\n    const newControllerState = this.controllerState.rotate({\n      pos\n    });\n    this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n      isDragging: true,\n      isRotating: true\n    });\n    return true;\n  }\n\n  _onTriplePanEnd(event) {\n    if (!this.isDragging()) {\n      return false;\n    }\n\n    const {\n      inertia\n    } = this;\n\n    if (this.touchRotate && inertia && event.velocityY) {\n      const pos = this.getCenter(event);\n      const endPos = [pos[0], pos[1] += event.velocityY * inertia / 2];\n      const newControllerState = this.controllerState.rotate({\n        pos: endPos\n      });\n      this.updateViewport(newControllerState, { ...this._getTransitionProps(),\n        transitionDuration: inertia,\n        transitionEasing: INERTIA_EASING\n      }, {\n        isDragging: false,\n        isRotating: true\n      });\n      this.blockEvents(inertia);\n    } else {\n      const newControllerState = this.controllerState.rotateEnd();\n      this.updateViewport(newControllerState, null, {\n        isDragging: false,\n        isRotating: false\n      });\n    }\n\n    return true;\n  }\n\n  _onPinchStart(event) {\n    const pos = this.getCenter(event);\n\n    if (!this.isPointInBounds(pos, event)) {\n      return false;\n    }\n\n    const newControllerState = this.controllerState.zoomStart({\n      pos\n    }).rotateStart({\n      pos\n    });\n    pinchEventWorkaround._startPinchRotation = event.rotation;\n    pinchEventWorkaround._lastPinchEvent = event;\n    this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n      isDragging: true\n    });\n    return true;\n  }\n\n  _onPinch(event) {\n    if (!this.touchZoom && !this.touchRotate) {\n      return false;\n    }\n\n    if (!this.isDragging()) {\n      return false;\n    }\n\n    let newControllerState = this.controllerState;\n\n    if (this.touchZoom) {\n      const {\n        scale\n      } = event;\n      const pos = this.getCenter(event);\n      newControllerState = newControllerState.zoom({\n        pos,\n        scale\n      });\n    }\n\n    if (this.touchRotate) {\n      const {\n        rotation\n      } = event;\n      newControllerState = newControllerState.rotate({\n        deltaAngleX: pinchEventWorkaround._startPinchRotation - rotation\n      });\n    }\n\n    this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n      isDragging: true,\n      isPanning: this.touchZoom,\n      isZooming: this.touchZoom,\n      isRotating: this.touchRotate\n    });\n    pinchEventWorkaround._lastPinchEvent = event;\n    return true;\n  }\n\n  _onPinchEnd(event) {\n    if (!this.isDragging()) {\n      return false;\n    }\n\n    const {\n      inertia\n    } = this;\n    const {\n      _lastPinchEvent\n    } = pinchEventWorkaround;\n\n    if (this.touchZoom && inertia && _lastPinchEvent && event.scale !== _lastPinchEvent.scale) {\n      const pos = this.getCenter(event);\n      let newControllerState = this.controllerState.rotateEnd();\n      const z = Math.log2(event.scale);\n\n      const velocityZ = (z - Math.log2(_lastPinchEvent.scale)) / (event.deltaTime - _lastPinchEvent.deltaTime);\n\n      const endScale = Math.pow(2, z + velocityZ * inertia / 2);\n      newControllerState = newControllerState.zoom({\n        pos,\n        scale: endScale\n      }).zoomEnd();\n      this.updateViewport(newControllerState, { ...this._getTransitionProps({\n          around: pos\n        }),\n        transitionDuration: inertia,\n        transitionEasing: INERTIA_EASING\n      }, {\n        isDragging: false,\n        isPanning: this.touchZoom,\n        isZooming: this.touchZoom,\n        isRotating: false\n      });\n      this.blockEvents(inertia);\n    } else {\n      const newControllerState = this.controllerState.zoomEnd().rotateEnd();\n      this.updateViewport(newControllerState, null, {\n        isDragging: false,\n        isPanning: false,\n        isZooming: false,\n        isRotating: false\n      });\n    }\n\n    pinchEventWorkaround._startPinchRotation = null;\n    pinchEventWorkaround._lastPinchEvent = null;\n    return true;\n  }\n\n  _onDoubleTap(event) {\n    if (!this.doubleClickZoom) {\n      return false;\n    }\n\n    const pos = this.getCenter(event);\n\n    if (!this.isPointInBounds(pos, event)) {\n      return false;\n    }\n\n    const isZoomOut = this.isFunctionKeyPressed(event);\n    const newControllerState = this.controllerState.zoom({\n      pos,\n      scale: isZoomOut ? 0.5 : 2\n    });\n    this.updateViewport(newControllerState, this._getTransitionProps({\n      around: pos\n    }), {\n      isZooming: true,\n      isPanning: true\n    });\n    this.blockEvents(100);\n    return true;\n  }\n\n  _onKeyDown(event) {\n    if (!this.keyboard) {\n      return false;\n    }\n\n    const funcKey = this.isFunctionKeyPressed(event);\n    const {\n      zoomSpeed,\n      moveSpeed,\n      rotateSpeedX,\n      rotateSpeedY\n    } = this.keyboard === true ? {} : this.keyboard;\n    const {\n      controllerState\n    } = this;\n    let newControllerState;\n    const interactionState = {};\n\n    switch (event.srcEvent.code) {\n      case 'Minus':\n        newControllerState = funcKey ? controllerState.zoomOut(zoomSpeed).zoomOut(zoomSpeed) : controllerState.zoomOut(zoomSpeed);\n        interactionState.isZooming = true;\n        break;\n\n      case 'Equal':\n        newControllerState = funcKey ? controllerState.zoomIn(zoomSpeed).zoomIn(zoomSpeed) : controllerState.zoomIn(zoomSpeed);\n        interactionState.isZooming = true;\n        break;\n\n      case 'ArrowLeft':\n        if (funcKey) {\n          newControllerState = controllerState.rotateLeft(rotateSpeedX);\n          interactionState.isRotating = true;\n        } else {\n          newControllerState = controllerState.moveLeft(moveSpeed);\n          interactionState.isPanning = true;\n        }\n\n        break;\n\n      case 'ArrowRight':\n        if (funcKey) {\n          newControllerState = controllerState.rotateRight(rotateSpeedX);\n          interactionState.isRotating = true;\n        } else {\n          newControllerState = controllerState.moveRight(moveSpeed);\n          interactionState.isPanning = true;\n        }\n\n        break;\n\n      case 'ArrowUp':\n        if (funcKey) {\n          newControllerState = controllerState.rotateUp(rotateSpeedY);\n          interactionState.isRotating = true;\n        } else {\n          newControllerState = controllerState.moveUp(moveSpeed);\n          interactionState.isPanning = true;\n        }\n\n        break;\n\n      case 'ArrowDown':\n        if (funcKey) {\n          newControllerState = controllerState.rotateDown(rotateSpeedY);\n          interactionState.isRotating = true;\n        } else {\n          newControllerState = controllerState.moveDown(moveSpeed);\n          interactionState.isPanning = true;\n        }\n\n        break;\n\n      default:\n        return false;\n    }\n\n    this.updateViewport(newControllerState, this._getTransitionProps(), interactionState);\n    return true;\n  }\n\n  _getTransitionProps(opts) {\n    const {\n      transition\n    } = this;\n\n    if (!transition || !transition.transitionInterpolator) {\n      return NO_TRANSITION_PROPS;\n    }\n\n    return opts ? { ...transition,\n      transitionInterpolator: new LinearInterpolator({ ...opts,\n        ...transition.transitionInterpolator.opts,\n        makeViewport: this.controllerState.makeViewport\n      })\n    } : transition;\n  }\n\n}\n//# sourceMappingURL=controller.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nexport default class ViewState {\n  constructor(props, state) {\n    _defineProperty(this, \"_viewportProps\", void 0);\n\n    _defineProperty(this, \"_state\", void 0);\n\n    this._viewportProps = this.applyConstraints(props);\n    this._state = state;\n  }\n\n  getViewportProps() {\n    return this._viewportProps;\n  }\n\n  getState() {\n    return this._state;\n  }\n\n}\n//# sourceMappingURL=view-state.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { clamp } from '@math.gl/core';\nimport Controller from './controller';\nimport ViewState from './view-state';\nimport { normalizeViewportProps } from '@math.gl/web-mercator';\nimport assert from '../utils/assert';\nimport LinearInterpolator from '../transitions/linear-interpolator';\nconst PITCH_MOUSE_THRESHOLD = 5;\nconst PITCH_ACCEL = 1.2;\nexport class MapState extends ViewState {\n  constructor(options) {\n    const {\n      width,\n      height,\n      latitude,\n      longitude,\n      zoom,\n      bearing = 0,\n      pitch = 0,\n      altitude = 1.5,\n      position = [0, 0, 0],\n      maxZoom = 20,\n      minZoom = 0,\n      maxPitch = 60,\n      minPitch = 0,\n      startPanLngLat,\n      startZoomLngLat,\n      startRotatePos,\n      startBearing,\n      startPitch,\n      startZoom,\n      normalize = true\n    } = options;\n    assert(Number.isFinite(longitude));\n    assert(Number.isFinite(latitude));\n    assert(Number.isFinite(zoom));\n    super({\n      width,\n      height,\n      latitude,\n      longitude,\n      zoom,\n      bearing,\n      pitch,\n      altitude,\n      maxZoom,\n      minZoom,\n      maxPitch,\n      minPitch,\n      normalize,\n      position\n    }, {\n      startPanLngLat,\n      startZoomLngLat,\n      startRotatePos,\n      startBearing,\n      startPitch,\n      startZoom\n    });\n\n    _defineProperty(this, \"makeViewport\", void 0);\n\n    this.makeViewport = options.makeViewport;\n  }\n\n  panStart({\n    pos\n  }) {\n    return this._getUpdatedState({\n      startPanLngLat: this._unproject(pos)\n    });\n  }\n\n  pan({\n    pos,\n    startPos\n  }) {\n    const startPanLngLat = this.getState().startPanLngLat || this._unproject(startPos);\n\n    if (!startPanLngLat) {\n      return this;\n    }\n\n    const viewport = this.makeViewport(this.getViewportProps());\n    const newProps = viewport.panByPosition(startPanLngLat, pos);\n    return this._getUpdatedState(newProps);\n  }\n\n  panEnd() {\n    return this._getUpdatedState({\n      startPanLngLat: null\n    });\n  }\n\n  rotateStart({\n    pos\n  }) {\n    return this._getUpdatedState({\n      startRotatePos: pos,\n      startBearing: this.getViewportProps().bearing,\n      startPitch: this.getViewportProps().pitch\n    });\n  }\n\n  rotate({\n    pos,\n    deltaAngleX = 0,\n    deltaAngleY = 0\n  }) {\n    const {\n      startRotatePos,\n      startBearing,\n      startPitch\n    } = this.getState();\n\n    if (!startRotatePos || startBearing === undefined || startPitch === undefined) {\n      return this;\n    }\n\n    let newRotation;\n\n    if (pos) {\n      newRotation = this._getNewRotation(pos, startRotatePos, startPitch, startBearing);\n    } else {\n      newRotation = {\n        bearing: startBearing + deltaAngleX,\n        pitch: startPitch + deltaAngleY\n      };\n    }\n\n    return this._getUpdatedState(newRotation);\n  }\n\n  rotateEnd() {\n    return this._getUpdatedState({\n      startBearing: null,\n      startPitch: null\n    });\n  }\n\n  zoomStart({\n    pos\n  }) {\n    return this._getUpdatedState({\n      startZoomLngLat: this._unproject(pos),\n      startZoom: this.getViewportProps().zoom\n    });\n  }\n\n  zoom({\n    pos,\n    startPos,\n    scale\n  }) {\n    let {\n      startZoom,\n      startZoomLngLat\n    } = this.getState();\n\n    if (!startZoomLngLat) {\n      startZoom = this.getViewportProps().zoom;\n      startZoomLngLat = this._unproject(startPos) || this._unproject(pos);\n    }\n\n    if (!startZoomLngLat) {\n      return this;\n    }\n\n    const {\n      maxZoom,\n      minZoom\n    } = this.getViewportProps();\n    let zoom = startZoom + Math.log2(scale);\n    zoom = clamp(zoom, minZoom, maxZoom);\n    const zoomedViewport = this.makeViewport({ ...this.getViewportProps(),\n      zoom\n    });\n    return this._getUpdatedState({\n      zoom,\n      ...zoomedViewport.panByPosition(startZoomLngLat, pos)\n    });\n  }\n\n  zoomEnd() {\n    return this._getUpdatedState({\n      startZoomLngLat: null,\n      startZoom: null\n    });\n  }\n\n  zoomIn(speed = 2) {\n    return this._zoomFromCenter(speed);\n  }\n\n  zoomOut(speed = 2) {\n    return this._zoomFromCenter(1 / speed);\n  }\n\n  moveLeft(speed = 100) {\n    return this._panFromCenter([speed, 0]);\n  }\n\n  moveRight(speed = 100) {\n    return this._panFromCenter([-speed, 0]);\n  }\n\n  moveUp(speed = 100) {\n    return this._panFromCenter([0, speed]);\n  }\n\n  moveDown(speed = 100) {\n    return this._panFromCenter([0, -speed]);\n  }\n\n  rotateLeft(speed = 15) {\n    return this._getUpdatedState({\n      bearing: this.getViewportProps().bearing - speed\n    });\n  }\n\n  rotateRight(speed = 15) {\n    return this._getUpdatedState({\n      bearing: this.getViewportProps().bearing + speed\n    });\n  }\n\n  rotateUp(speed = 10) {\n    return this._getUpdatedState({\n      pitch: this.getViewportProps().pitch + speed\n    });\n  }\n\n  rotateDown(speed = 10) {\n    return this._getUpdatedState({\n      pitch: this.getViewportProps().pitch - speed\n    });\n  }\n\n  shortestPathFrom(viewState) {\n    const fromProps = viewState.getViewportProps();\n    const props = { ...this.getViewportProps()\n    };\n    const {\n      bearing,\n      longitude\n    } = props;\n\n    if (Math.abs(bearing - fromProps.bearing) > 180) {\n      props.bearing = bearing < 0 ? bearing + 360 : bearing - 360;\n    }\n\n    if (Math.abs(longitude - fromProps.longitude) > 180) {\n      props.longitude = longitude < 0 ? longitude + 360 : longitude - 360;\n    }\n\n    return props;\n  }\n\n  applyConstraints(props) {\n    const {\n      maxZoom,\n      minZoom,\n      zoom\n    } = props;\n    props.zoom = clamp(zoom, minZoom, maxZoom);\n    const {\n      maxPitch,\n      minPitch,\n      pitch\n    } = props;\n    props.pitch = clamp(pitch, minPitch, maxPitch);\n    const {\n      normalize = true\n    } = props;\n\n    if (normalize) {\n      Object.assign(props, normalizeViewportProps(props));\n    }\n\n    return props;\n  }\n\n  _zoomFromCenter(scale) {\n    const {\n      width,\n      height\n    } = this.getViewportProps();\n    return this.zoom({\n      pos: [width / 2, height / 2],\n      scale\n    });\n  }\n\n  _panFromCenter(offset) {\n    const {\n      width,\n      height\n    } = this.getViewportProps();\n    return this.pan({\n      startPos: [width / 2, height / 2],\n      pos: [width / 2 + offset[0], height / 2 + offset[1]]\n    });\n  }\n\n  _getUpdatedState(newProps) {\n    return new this.constructor({\n      makeViewport: this.makeViewport,\n      ...this.getViewportProps(),\n      ...this.getState(),\n      ...newProps\n    });\n  }\n\n  _unproject(pos) {\n    const viewport = this.makeViewport(this.getViewportProps());\n    return pos && viewport.unproject(pos);\n  }\n\n  _getNewRotation(pos, startPos, startPitch, startBearing) {\n    const deltaX = pos[0] - startPos[0];\n    const deltaY = pos[1] - startPos[1];\n    const centerY = pos[1];\n    const startY = startPos[1];\n    const {\n      width,\n      height\n    } = this.getViewportProps();\n    const deltaScaleX = deltaX / width;\n    let deltaScaleY = 0;\n\n    if (deltaY > 0) {\n      if (Math.abs(height - startY) > PITCH_MOUSE_THRESHOLD) {\n        deltaScaleY = deltaY / (startY - height) * PITCH_ACCEL;\n      }\n    } else if (deltaY < 0) {\n      if (startY > PITCH_MOUSE_THRESHOLD) {\n        deltaScaleY = 1 - centerY / startY;\n      }\n    }\n\n    deltaScaleY = clamp(deltaScaleY, -1, 1);\n    const {\n      minPitch,\n      maxPitch\n    } = this.getViewportProps();\n    const bearing = startBearing + 180 * deltaScaleX;\n    let pitch = startPitch;\n\n    if (deltaScaleY > 0) {\n      pitch = startPitch + deltaScaleY * (maxPitch - startPitch);\n    } else if (deltaScaleY < 0) {\n      pitch = startPitch - deltaScaleY * (minPitch - startPitch);\n    }\n\n    return {\n      pitch,\n      bearing\n    };\n  }\n\n}\nexport default class MapController extends Controller {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"ControllerState\", MapState);\n\n    _defineProperty(this, \"transition\", {\n      transitionDuration: 300,\n      transitionInterpolator: new LinearInterpolator({\n        transitionProps: {\n          compare: ['longitude', 'latitude', 'zoom', 'bearing', 'pitch', 'position'],\n          required: ['longitude', 'latitude', 'zoom']\n        }\n      })\n    });\n\n    _defineProperty(this, \"dragMode\", 'pan');\n  }\n\n  setProps(props) {\n    props.position = props.position || [0, 0, 0];\n    const oldProps = this.props;\n    super.setProps(props);\n    const dimensionChanged = !oldProps || oldProps.height !== props.height;\n\n    if (dimensionChanged) {\n      this.updateViewport(new this.ControllerState({\n        makeViewport: this.makeViewport,\n        ...props,\n        ...this.state\n      }));\n    }\n  }\n\n}\n//# sourceMappingURL=map-controller.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport View from './view';\nimport WebMercatorViewport from '../viewports/web-mercator-viewport';\nimport MapController from '../controllers/map-controller';\nexport default class MapView extends View {\n  get ViewportType() {\n    return WebMercatorViewport;\n  }\n\n  get ControllerType() {\n    return MapController;\n  }\n\n}\n\n_defineProperty(MapView, \"displayName\", 'MapView');\n//# sourceMappingURL=map-view.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { Framebuffer, Texture2D, withParameters } from '@luma.gl/core';\nimport { OPERATION } from '../lib/constants';\nimport LayersPass from './layers-pass';\nexport default class MaskPass extends LayersPass {\n  constructor(gl, props) {\n    super(gl, props);\n\n    _defineProperty(this, \"maskMap\", void 0);\n\n    _defineProperty(this, \"fbo\", void 0);\n\n    const {\n      mapSize = 2048\n    } = props;\n    this.maskMap = new Texture2D(gl, {\n      width: mapSize,\n      height: mapSize,\n      parameters: {\n        [10241]: 9729,\n        [10240]: 9729,\n        [10242]: 33071,\n        [10243]: 33071\n      }\n    });\n    this.fbo = new Framebuffer(gl, {\n      id: 'maskmap',\n      width: mapSize,\n      height: mapSize,\n      attachments: {\n        [36064]: this.maskMap\n      }\n    });\n  }\n\n  render(options) {\n    const gl = this.gl;\n    const colorMask = [false, false, false, false];\n    colorMask[options.channel] = true;\n    return withParameters(gl, {\n      clearColor: [255, 255, 255, 255],\n      blend: true,\n      blendFunc: [0, 1],\n      blendEquation: 32778,\n      colorMask,\n      depthTest: false\n    }, () => super.render({ ...options,\n      target: this.fbo,\n      pass: 'mask'\n    }));\n  }\n\n  shouldDrawLayer(layer) {\n    return layer.props.operation === OPERATION.MASK;\n  }\n\n  delete() {\n    this.fbo.delete();\n    this.maskMap.delete();\n  }\n\n}\n//# sourceMappingURL=mask-pass.js.map","import Viewport from '../viewports/viewport';\nimport { Matrix4, clamp } from '@math.gl/core';\nimport { pixelsToWorld } from '@math.gl/web-mercator';\nimport * as vec2 from 'gl-matrix/vec2';\nconst viewMatrix = new Matrix4().lookAt({\n  eye: [0, 0, 1]\n});\n\nfunction getProjectionMatrix({\n  width,\n  height,\n  near,\n  far,\n  padding\n}) {\n  let left = -width / 2;\n  let right = width / 2;\n  let bottom = -height / 2;\n  let top = height / 2;\n\n  if (padding) {\n    const {\n      left: l = 0,\n      right: r = 0,\n      top: t = 0,\n      bottom: b = 0\n    } = padding;\n    const offsetX = clamp((l + width - r) / 2, 0, width) - width / 2;\n    const offsetY = clamp((t + height - b) / 2, 0, height) - height / 2;\n    left -= offsetX;\n    right -= offsetX;\n    bottom += offsetY;\n    top += offsetY;\n  }\n\n  return new Matrix4().ortho({\n    left,\n    right,\n    bottom,\n    top,\n    near,\n    far\n  });\n}\n\nexport default class OrthographicViewport extends Viewport {\n  constructor(props) {\n    const {\n      width,\n      height,\n      near = 0.1,\n      far = 1000,\n      zoom = 0,\n      target = [0, 0, 0],\n      padding = null,\n      flipY = true\n    } = props;\n    const zoomX = Array.isArray(zoom) ? zoom[0] : zoom;\n    const zoomY = Array.isArray(zoom) ? zoom[1] : zoom;\n    const zoom_ = Math.min(zoomX, zoomY);\n    const scale = Math.pow(2, zoom_);\n    let distanceScales;\n\n    if (zoomX !== zoomY) {\n      const scaleX = Math.pow(2, zoomX);\n      const scaleY = Math.pow(2, zoomY);\n      distanceScales = {\n        unitsPerMeter: [scaleX / scale, scaleY / scale, 1],\n        metersPerUnit: [scale / scaleX, scale / scaleY, 1]\n      };\n    }\n\n    super({ ...props,\n      longitude: undefined,\n      position: target,\n      viewMatrix: viewMatrix.clone().scale([scale, scale * (flipY ? -1 : 1), scale]),\n      projectionMatrix: getProjectionMatrix({\n        width: width || 1,\n        height: height || 1,\n        padding,\n        near,\n        far\n      }),\n      zoom: zoom_,\n      distanceScales\n    });\n  }\n\n  projectFlat([X, Y]) {\n    const {\n      unitsPerMeter\n    } = this.distanceScales;\n    return [X * unitsPerMeter[0], Y * unitsPerMeter[1]];\n  }\n\n  unprojectFlat([x, y]) {\n    const {\n      metersPerUnit\n    } = this.distanceScales;\n    return [x * metersPerUnit[0], y * metersPerUnit[1]];\n  }\n\n  panByPosition(coords, pixel) {\n    const fromLocation = pixelsToWorld(pixel, this.pixelUnprojectionMatrix);\n    const toLocation = this.projectFlat(coords);\n    const translate = vec2.add([], toLocation, vec2.negate([], fromLocation));\n    const newCenter = vec2.add([], this.center, translate);\n    return {\n      target: this.unprojectFlat(newCenter)\n    };\n  }\n\n}\n//# sourceMappingURL=orthographic-viewport.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { clamp } from '@math.gl/core';\nimport Controller from './controller';\nimport ViewState from './view-state';\nimport { mod } from '../utils/math-utils';\nimport LinearInterpolator from '../transitions/linear-interpolator';\nexport class OrbitState extends ViewState {\n  constructor(options) {\n    const {\n      width,\n      height,\n      rotationX = 0,\n      rotationOrbit = 0,\n      target = [0, 0, 0],\n      zoom = 0,\n      minRotationX = -90,\n      maxRotationX = 90,\n      minZoom = -Infinity,\n      maxZoom = Infinity,\n      startPanPosition,\n      startRotatePos,\n      startRotationX,\n      startRotationOrbit,\n      startZoomPosition,\n      startZoom\n    } = options;\n    super({\n      width,\n      height,\n      rotationX,\n      rotationOrbit,\n      target,\n      zoom,\n      minRotationX,\n      maxRotationX,\n      minZoom,\n      maxZoom\n    }, {\n      startPanPosition,\n      startRotatePos,\n      startRotationX,\n      startRotationOrbit,\n      startZoomPosition,\n      startZoom\n    });\n\n    _defineProperty(this, \"makeViewport\", void 0);\n\n    this.makeViewport = options.makeViewport;\n  }\n\n  panStart({\n    pos\n  }) {\n    return this._getUpdatedState({\n      startPanPosition: this._unproject(pos)\n    });\n  }\n\n  pan({\n    pos,\n    startPosition\n  }) {\n    const startPanPosition = this.getState().startPanPosition || startPosition;\n\n    if (!startPanPosition) {\n      return this;\n    }\n\n    const viewport = this.makeViewport(this.getViewportProps());\n    const newProps = viewport.panByPosition(startPanPosition, pos);\n    return this._getUpdatedState(newProps);\n  }\n\n  panEnd() {\n    return this._getUpdatedState({\n      startPanPosition: null\n    });\n  }\n\n  rotateStart({\n    pos\n  }) {\n    return this._getUpdatedState({\n      startRotatePos: pos,\n      startRotationX: this.getViewportProps().rotationX,\n      startRotationOrbit: this.getViewportProps().rotationOrbit\n    });\n  }\n\n  rotate({\n    pos,\n    deltaAngleX = 0,\n    deltaAngleY = 0\n  }) {\n    const {\n      startRotatePos,\n      startRotationX,\n      startRotationOrbit\n    } = this.getState();\n    const {\n      width,\n      height\n    } = this.getViewportProps();\n\n    if (!startRotatePos || startRotationX === undefined || startRotationOrbit === undefined) {\n      return this;\n    }\n\n    let newRotation;\n\n    if (pos) {\n      let deltaScaleX = (pos[0] - startRotatePos[0]) / width;\n      const deltaScaleY = (pos[1] - startRotatePos[1]) / height;\n\n      if (startRotationX < -90 || startRotationX > 90) {\n        deltaScaleX *= -1;\n      }\n\n      newRotation = {\n        rotationX: startRotationX + deltaScaleY * 180,\n        rotationOrbit: startRotationOrbit + deltaScaleX * 180\n      };\n    } else {\n      newRotation = {\n        rotationX: startRotationX + deltaAngleY,\n        rotationOrbit: startRotationOrbit + deltaAngleX\n      };\n    }\n\n    return this._getUpdatedState(newRotation);\n  }\n\n  rotateEnd() {\n    return this._getUpdatedState({\n      startRotationX: null,\n      startRotationOrbit: null\n    });\n  }\n\n  shortestPathFrom(viewState) {\n    const fromProps = viewState.getViewportProps();\n    const props = { ...this.getViewportProps()\n    };\n    const {\n      rotationOrbit\n    } = props;\n\n    if (Math.abs(rotationOrbit - fromProps.rotationOrbit) > 180) {\n      props.rotationOrbit = rotationOrbit < 0 ? rotationOrbit + 360 : rotationOrbit - 360;\n    }\n\n    return props;\n  }\n\n  zoomStart({\n    pos\n  }) {\n    return this._getUpdatedState({\n      startZoomPosition: this._unproject(pos),\n      startZoom: this.getViewportProps().zoom\n    });\n  }\n\n  zoom({\n    pos,\n    startPos,\n    scale\n  }) {\n    let {\n      startZoom,\n      startZoomPosition\n    } = this.getState();\n\n    if (!startZoomPosition) {\n      startZoom = this.getViewportProps().zoom;\n      startZoomPosition = this._unproject(startPos) || this._unproject(pos);\n    }\n\n    if (!startZoomPosition) {\n      return this;\n    }\n\n    const newZoom = this._calculateNewZoom({\n      scale,\n      startZoom\n    });\n\n    const zoomedViewport = this.makeViewport({ ...this.getViewportProps(),\n      zoom: newZoom\n    });\n    return this._getUpdatedState({\n      zoom: newZoom,\n      ...zoomedViewport.panByPosition(startZoomPosition, pos)\n    });\n  }\n\n  zoomEnd() {\n    return this._getUpdatedState({\n      startZoomPosition: null,\n      startZoom: null\n    });\n  }\n\n  zoomIn(speed = 2) {\n    return this._getUpdatedState({\n      zoom: this._calculateNewZoom({\n        scale: speed\n      })\n    });\n  }\n\n  zoomOut(speed = 2) {\n    return this._getUpdatedState({\n      zoom: this._calculateNewZoom({\n        scale: 1 / speed\n      })\n    });\n  }\n\n  moveLeft(speed = 50) {\n    return this._panFromCenter([-speed, 0]);\n  }\n\n  moveRight(speed = 50) {\n    return this._panFromCenter([speed, 0]);\n  }\n\n  moveUp(speed = 50) {\n    return this._panFromCenter([0, -speed]);\n  }\n\n  moveDown(speed = 50) {\n    return this._panFromCenter([0, speed]);\n  }\n\n  rotateLeft(speed = 15) {\n    return this._getUpdatedState({\n      rotationOrbit: this.getViewportProps().rotationOrbit - speed\n    });\n  }\n\n  rotateRight(speed = 15) {\n    return this._getUpdatedState({\n      rotationOrbit: this.getViewportProps().rotationOrbit + speed\n    });\n  }\n\n  rotateUp(speed = 10) {\n    return this._getUpdatedState({\n      rotationX: this.getViewportProps().rotationX - speed\n    });\n  }\n\n  rotateDown(speed = 10) {\n    return this._getUpdatedState({\n      rotationX: this.getViewportProps().rotationX + speed\n    });\n  }\n\n  _unproject(pos) {\n    const viewport = this.makeViewport(this.getViewportProps());\n    return pos && viewport.unproject(pos);\n  }\n\n  _calculateNewZoom({\n    scale,\n    startZoom\n  }) {\n    const {\n      maxZoom,\n      minZoom\n    } = this.getViewportProps();\n\n    if (startZoom === undefined) {\n      startZoom = this.getViewportProps().zoom;\n    }\n\n    const zoom = startZoom + Math.log2(scale);\n    return clamp(zoom, minZoom, maxZoom);\n  }\n\n  _panFromCenter(offset) {\n    const {\n      width,\n      height,\n      target\n    } = this.getViewportProps();\n    return this.pan({\n      startPosition: target,\n      pos: [width / 2 + offset[0], height / 2 + offset[1]]\n    });\n  }\n\n  _getUpdatedState(newProps) {\n    return new this.constructor({\n      makeViewport: this.makeViewport,\n      ...this.getViewportProps(),\n      ...this.getState(),\n      ...newProps\n    });\n  }\n\n  applyConstraints(props) {\n    const {\n      maxZoom,\n      minZoom,\n      zoom,\n      maxRotationX,\n      minRotationX,\n      rotationOrbit\n    } = props;\n    props.zoom = Array.isArray(zoom) ? [clamp(zoom[0], minZoom, maxZoom), clamp(zoom[1], minZoom, maxZoom)] : clamp(zoom, minZoom, maxZoom);\n    props.rotationX = clamp(props.rotationX, minRotationX, maxRotationX);\n\n    if (rotationOrbit < -180 || rotationOrbit > 180) {\n      props.rotationOrbit = mod(rotationOrbit + 180, 360) - 180;\n    }\n\n    return props;\n  }\n\n}\nexport default class OrbitController extends Controller {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"ControllerState\", OrbitState);\n\n    _defineProperty(this, \"transition\", {\n      transitionDuration: 300,\n      transitionInterpolator: new LinearInterpolator({\n        transitionProps: {\n          compare: ['target', 'zoom', 'rotationX', 'rotationOrbit'],\n          required: ['target', 'zoom']\n        }\n      })\n    });\n  }\n\n}\n//# sourceMappingURL=orbit-controller.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { clamp } from '@math.gl/core';\nimport Controller from './controller';\nimport { OrbitState } from './orbit-controller';\nimport LinearInterpolator from '../transitions/linear-interpolator';\n\nclass OrthographicState extends OrbitState {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"zoomAxis\", void 0);\n\n    this.zoomAxis = props.zoomAxis || 'all';\n  }\n\n  _calculateNewZoom({\n    scale,\n    startZoom\n  }) {\n    const {\n      maxZoom,\n      minZoom\n    } = this.getViewportProps();\n\n    if (startZoom === undefined) {\n      startZoom = this.getViewportProps().zoom;\n    }\n\n    let deltaZoom = Math.log2(scale);\n\n    if (Array.isArray(startZoom)) {\n      let [newZoomX, newZoomY] = startZoom;\n\n      switch (this.zoomAxis) {\n        case 'X':\n          newZoomX = clamp(newZoomX + deltaZoom, minZoom, maxZoom);\n          break;\n\n        case 'Y':\n          newZoomY = clamp(newZoomY + deltaZoom, minZoom, maxZoom);\n          break;\n\n        default:\n          let z = Math.min(newZoomX + deltaZoom, newZoomY + deltaZoom);\n\n          if (z < minZoom) {\n            deltaZoom += minZoom - z;\n          }\n\n          z = Math.max(newZoomX + deltaZoom, newZoomY + deltaZoom);\n\n          if (z > maxZoom) {\n            deltaZoom += maxZoom - z;\n          }\n\n          newZoomX += deltaZoom;\n          newZoomY += deltaZoom;\n      }\n\n      return [newZoomX, newZoomY];\n    }\n\n    return clamp(startZoom + deltaZoom, minZoom, maxZoom);\n  }\n\n}\n\nexport default class OrthographicController extends Controller {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"ControllerState\", OrthographicState);\n\n    _defineProperty(this, \"transition\", {\n      transitionDuration: 300,\n      transitionInterpolator: new LinearInterpolator(['target', 'zoom'])\n    });\n\n    _defineProperty(this, \"dragMode\", 'pan');\n  }\n\n  _onPanRotate() {\n    return false;\n  }\n\n}\n//# sourceMappingURL=orthographic-controller.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport View from './view';\nimport OrthographicViewport from '../viewports/orthographic-viewport';\nimport OrthographicController from '../controllers/orthographic-controller';\nexport default class OrthographicView extends View {\n  get ViewportType() {\n    return OrthographicViewport;\n  }\n\n  get ControllerType() {\n    return OrthographicController;\n  }\n\n}\n\n_defineProperty(OrthographicView, \"displayName\", 'OrthographicView');\n//# sourceMappingURL=orthographic-view.js.map","import OrthographicView from '../../views/orthographic-view';\nimport WebMercatorViewport from '../../viewports/web-mercator-viewport';\nimport { fitBounds } from '@math.gl/web-mercator';\nexport function getMaskBounds({\n  layers,\n  viewport\n}) {\n  let bounds = null;\n\n  for (const layer of layers) {\n    const subLayerBounds = layer.getBounds();\n\n    if (subLayerBounds) {\n      if (bounds) {\n        bounds[0] = Math.min(bounds[0], subLayerBounds[0][0]);\n        bounds[1] = Math.min(bounds[1], subLayerBounds[0][1]);\n        bounds[2] = Math.max(bounds[2], subLayerBounds[1][0]);\n        bounds[3] = Math.max(bounds[3], subLayerBounds[1][1]);\n      } else {\n        bounds = [subLayerBounds[0][0], subLayerBounds[0][1], subLayerBounds[1][0], subLayerBounds[1][1]];\n      }\n    }\n  }\n\n  const viewportBounds = viewport.getBounds();\n\n  if (!bounds) {\n    return viewportBounds;\n  }\n\n  const paddedBounds = _doubleBounds(viewportBounds);\n\n  if (bounds[2] - bounds[0] < paddedBounds[2] - paddedBounds[0] || bounds[3] - bounds[1] < paddedBounds[3] - paddedBounds[1]) {\n    return bounds;\n  }\n\n  bounds[0] = Math.max(bounds[0], paddedBounds[0]);\n  bounds[1] = Math.max(bounds[1], paddedBounds[1]);\n  bounds[2] = Math.min(bounds[2], paddedBounds[2]);\n  bounds[3] = Math.min(bounds[3], paddedBounds[3]);\n  return bounds;\n}\nexport function getMaskViewport({\n  bounds,\n  viewport,\n  width,\n  height\n}) {\n  if (bounds[2] <= bounds[0] || bounds[3] <= bounds[1]) {\n    return null;\n  }\n\n  const padding = 1;\n  width -= padding * 2;\n  height -= padding * 2;\n\n  if (viewport instanceof WebMercatorViewport) {\n    const {\n      longitude,\n      latitude,\n      zoom\n    } = fitBounds({\n      width,\n      height,\n      bounds: [[bounds[0], bounds[1]], [bounds[2], bounds[3]]],\n      maxZoom: 20\n    });\n    return new WebMercatorViewport({\n      longitude,\n      latitude,\n      zoom,\n      x: padding,\n      y: padding,\n      width,\n      height\n    });\n  }\n\n  const center = [(bounds[0] + bounds[2]) / 2, (bounds[1] + bounds[3]) / 2, 0];\n  const scale = Math.min(20, width / (bounds[2] - bounds[0]), height / (bounds[3] - bounds[1]));\n  return new OrthographicView({\n    x: padding,\n    y: padding\n  }).makeViewport({\n    width,\n    height,\n    viewState: {\n      target: center,\n      zoom: Math.log2(scale)\n    }\n  });\n}\n\nfunction _doubleBounds(bounds) {\n  const size = {\n    x: bounds[2] - bounds[0],\n    y: bounds[3] - bounds[1]\n  };\n  const center = {\n    x: bounds[0] + 0.5 * size.x,\n    y: bounds[1] + 0.5 * size.y\n  };\n  return [center.x - size.x, center.y - size.y, center.x + size.x, center.y + size.y];\n}\n//# sourceMappingURL=utils.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { Texture2D } from '@luma.gl/core';\nimport { equals } from '@math.gl/core';\nimport MaskPass from '../../passes/mask-pass';\nimport { OPERATION } from '../../lib/constants';\nimport { getMaskBounds, getMaskViewport } from './utils';\nimport log from '../../utils/log';\nexport default class MaskEffect {\n  constructor() {\n    _defineProperty(this, \"id\", 'mask-effect');\n\n    _defineProperty(this, \"props\", null);\n\n    _defineProperty(this, \"useInPicking\", true);\n\n    _defineProperty(this, \"dummyMaskMap\", void 0);\n\n    _defineProperty(this, \"channels\", []);\n\n    _defineProperty(this, \"masks\", null);\n\n    _defineProperty(this, \"maskPass\", void 0);\n\n    _defineProperty(this, \"maskMap\", void 0);\n\n    _defineProperty(this, \"lastViewport\", void 0);\n  }\n\n  preRender(gl, {\n    layers,\n    layerFilter,\n    viewports,\n    onViewportActive,\n    views\n  }) {\n    if (!this.dummyMaskMap) {\n      this.dummyMaskMap = new Texture2D(gl, {\n        width: 1,\n        height: 1\n      });\n    }\n\n    const maskLayers = layers.filter(l => l.props.visible && l.props.operation === OPERATION.MASK);\n\n    if (maskLayers.length === 0) {\n      this.masks = null;\n      this.channels.length = 0;\n      return;\n    }\n\n    this.masks = {};\n\n    if (!this.maskPass) {\n      this.maskPass = new MaskPass(gl, {\n        id: 'default-mask'\n      });\n      this.maskMap = this.maskPass.maskMap;\n    }\n\n    const channelMap = this._sortMaskChannels(maskLayers);\n\n    const viewport = viewports[0];\n    const viewportChanged = !this.lastViewport || !this.lastViewport.equals(viewport);\n\n    for (const maskId in channelMap) {\n      this._renderChannel(channelMap[maskId], {\n        layerFilter,\n        onViewportActive,\n        views,\n        viewport,\n        viewportChanged\n      });\n    }\n  }\n\n  _renderChannel(channelInfo, {\n    layerFilter,\n    onViewportActive,\n    views,\n    viewport,\n    viewportChanged\n  }) {\n    const oldChannelInfo = this.channels[channelInfo.index];\n\n    if (!oldChannelInfo) {\n      return;\n    }\n\n    const maskChanged = channelInfo === oldChannelInfo || oldChannelInfo.layers.length !== channelInfo.layers.length || channelInfo.layerBounds.some((b, i) => b !== oldChannelInfo.layerBounds[i]);\n    channelInfo.bounds = oldChannelInfo.bounds;\n    channelInfo.maskBounds = oldChannelInfo.maskBounds;\n    this.channels[channelInfo.index] = channelInfo;\n\n    if (maskChanged || viewportChanged) {\n      this.lastViewport = viewport;\n      channelInfo.bounds = getMaskBounds({\n        layers: channelInfo.layers,\n        viewport\n      });\n\n      if (maskChanged || !equals(channelInfo.bounds, oldChannelInfo.bounds)) {\n        const {\n          maskPass,\n          maskMap\n        } = this;\n        const maskViewport = getMaskViewport({\n          bounds: channelInfo.bounds,\n          viewport,\n          width: maskMap.width,\n          height: maskMap.height\n        });\n        channelInfo.maskBounds = maskViewport ? maskViewport.getBounds() : [0, 0, 1, 1];\n        maskPass.render({\n          pass: 'mask',\n          channel: channelInfo.index,\n          layers: channelInfo.layers,\n          layerFilter,\n          viewports: maskViewport ? [maskViewport] : [],\n          onViewportActive,\n          views,\n          moduleParameters: {\n            devicePixelRatio: 1\n          }\n        });\n      }\n    }\n\n    this.masks[channelInfo.id] = {\n      index: channelInfo.index,\n      bounds: channelInfo.maskBounds,\n      coordinateOrigin: channelInfo.coordinateOrigin,\n      coordinateSystem: channelInfo.coordinateSystem\n    };\n  }\n\n  _sortMaskChannels(maskLayers) {\n    const channelMap = {};\n    let channelCount = 0;\n\n    for (const layer of maskLayers) {\n      const {\n        id\n      } = layer.root;\n      let channelInfo = channelMap[id];\n\n      if (!channelInfo) {\n        if (++channelCount > 4) {\n          log.warn('Too many mask layers. The max supported is 4')();\n          continue;\n        }\n\n        channelInfo = {\n          id,\n          index: this.channels.findIndex(c => (c === null || c === void 0 ? void 0 : c.id) === id),\n          layers: [],\n          layerBounds: [],\n          coordinateOrigin: layer.root.props.coordinateOrigin,\n          coordinateSystem: layer.root.props.coordinateSystem\n        };\n        channelMap[id] = channelInfo;\n      }\n\n      channelInfo.layers.push(layer);\n      channelInfo.layerBounds.push(layer.getBounds());\n    }\n\n    for (let i = 0; i < 4; i++) {\n      const channelInfo = this.channels[i];\n\n      if (!channelInfo || !(channelInfo.id in channelMap)) {\n        this.channels[i] = null;\n      }\n    }\n\n    for (const maskId in channelMap) {\n      const channelInfo = channelMap[maskId];\n\n      if (channelInfo.index < 0) {\n        channelInfo.index = this.channels.findIndex(c => !c);\n        this.channels[channelInfo.index] = channelInfo;\n      }\n    }\n\n    return channelMap;\n  }\n\n  getModuleParameters() {\n    return {\n      maskMap: this.masks ? this.maskMap : this.dummyMaskMap,\n      maskChannels: this.masks\n    };\n  }\n\n  cleanup() {\n    if (this.dummyMaskMap) {\n      this.dummyMaskMap.delete();\n      this.dummyMaskMap = undefined;\n    }\n\n    if (this.maskPass) {\n      this.maskPass.delete();\n      this.maskPass = undefined;\n      this.maskMap = undefined;\n    }\n\n    this.lastViewport = undefined;\n    this.masks = null;\n    this.channels.length = 0;\n  }\n\n}\n//# sourceMappingURL=mask-effect.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { deepEqual } from '../utils/deep-equal';\nimport LightingEffect from '../effects/lighting/lighting-effect';\nimport MaskEffect from '../effects/mask/mask-effect';\nconst DEFAULT_LIGHTING_EFFECT = new LightingEffect();\nexport default class EffectManager {\n  constructor() {\n    _defineProperty(this, \"effects\", void 0);\n\n    _defineProperty(this, \"_internalEffects\", void 0);\n\n    _defineProperty(this, \"_needsRedraw\", void 0);\n\n    this.effects = [];\n    this._internalEffects = [];\n    this._needsRedraw = 'Initial render';\n    this.setEffects();\n  }\n\n  setProps(props) {\n    if ('effects' in props) {\n      if (props.effects.length !== this.effects.length || !deepEqual(props.effects, this.effects)) {\n        this.setEffects(props.effects);\n        this._needsRedraw = 'effects changed';\n      }\n    }\n  }\n\n  needsRedraw(opts = {\n    clearRedrawFlags: false\n  }) {\n    const redraw = this._needsRedraw;\n\n    if (opts.clearRedrawFlags) {\n      this._needsRedraw = false;\n    }\n\n    return redraw;\n  }\n\n  getEffects() {\n    return this._internalEffects;\n  }\n\n  finalize() {\n    this.cleanup();\n  }\n\n  setEffects(effects = []) {\n    this.cleanup();\n    this.effects = effects;\n    this._internalEffects = effects.slice();\n\n    this._internalEffects.push(new MaskEffect());\n\n    if (!effects.some(effect => effect instanceof LightingEffect)) {\n      this._internalEffects.push(DEFAULT_LIGHTING_EFFECT);\n    }\n  }\n\n  cleanup() {\n    for (const effect of this.effects) {\n      effect.cleanup();\n    }\n\n    for (const effect of this._internalEffects) {\n      effect.cleanup();\n    }\n\n    this.effects.length = 0;\n    this._internalEffects.length = 0;\n  }\n\n}\n//# sourceMappingURL=effect-manager.js.map","import { OPERATION } from '../lib/constants';\nimport LayersPass from './layers-pass';\nexport default class DrawLayersPass extends LayersPass {\n  shouldDrawLayer(layer) {\n    return layer.props.operation === OPERATION.DRAW;\n  }\n\n}\n//# sourceMappingURL=draw-layers-pass.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport LayersPass from './layers-pass';\nimport { withParameters } from '@luma.gl/core';\nimport { OPERATION } from '../lib/constants';\nimport log from '../utils/log';\nconst PICKING_PARAMETERS = {\n  blendFunc: [1, 0, 32771, 0],\n  blendEquation: 32774\n};\nexport default class PickLayersPass extends LayersPass {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"pickZ\", void 0);\n\n    _defineProperty(this, \"_colors\", null);\n  }\n\n  render(props) {\n    if (props.pickingFBO) {\n      return this._drawPickingBuffer(props);\n    }\n\n    return super.render(props);\n  }\n\n  _drawPickingBuffer({\n    layers,\n    layerFilter,\n    views,\n    viewports,\n    onViewportActive,\n    pickingFBO,\n    deviceRect: {\n      x,\n      y,\n      width,\n      height\n    },\n    cullRect,\n    effects,\n    pass = 'picking',\n    pickZ\n  }) {\n    const gl = this.gl;\n    this.pickZ = pickZ;\n    const encodedColors = pickZ ? null : {\n      byLayer: new Map(),\n      byAlpha: []\n    };\n    this._colors = encodedColors;\n    const renderStatus = withParameters(gl, {\n      scissorTest: true,\n      scissor: [x, y, width, height],\n      clearColor: [0, 0, 0, 0],\n      depthMask: true,\n      depthTest: true,\n      depthRange: [0, 1],\n      colorMask: [true, true, true, true],\n      ...PICKING_PARAMETERS,\n      blend: !pickZ\n    }, () => super.render({\n      target: pickingFBO,\n      layers,\n      layerFilter,\n      views,\n      viewports,\n      onViewportActive,\n      cullRect,\n      effects: effects === null || effects === void 0 ? void 0 : effects.filter(e => e.useInPicking),\n      pass\n    }));\n    this._colors = null;\n    const decodePickingColor = encodedColors && decodeColor.bind(null, encodedColors);\n    return {\n      decodePickingColor,\n      stats: renderStatus\n    };\n  }\n\n  shouldDrawLayer(layer) {\n    return layer.props.pickable && layer.props.operation === OPERATION.DRAW;\n  }\n\n  getModuleParameters() {\n    return {\n      pickingActive: 1,\n      pickingAttribute: this.pickZ,\n      lightSources: {}\n    };\n  }\n\n  getLayerParameters(layer, layerIndex, viewport) {\n    const pickParameters = { ...layer.props.parameters\n    };\n\n    if (!this._colors) {\n      pickParameters.blend = false;\n    } else {\n      Object.assign(pickParameters, PICKING_PARAMETERS);\n      pickParameters.blend = true;\n      pickParameters.blendColor = encodeColor(this._colors, layer, viewport);\n    }\n\n    return pickParameters;\n  }\n\n}\n\nfunction encodeColor(encoded, layer, viewport) {\n  const {\n    byLayer,\n    byAlpha\n  } = encoded;\n  let a;\n  let entry = byLayer.get(layer);\n\n  if (entry) {\n    entry.viewports.push(viewport);\n    a = entry.a;\n  } else {\n    a = byLayer.size + 1;\n\n    if (a <= 255) {\n      entry = {\n        a,\n        layer,\n        viewports: [viewport]\n      };\n      byLayer.set(layer, entry);\n      byAlpha[a] = entry;\n    } else {\n      log.warn('Too many pickable layers, only picking the first 255')();\n      a = 0;\n    }\n  }\n\n  return [0, 0, 0, a / 255];\n}\n\nfunction decodeColor(encoded, pickedColor) {\n  const entry = encoded.byAlpha[pickedColor[3]];\n  return entry && {\n    pickedLayer: entry.layer,\n    pickedViewports: entry.viewports,\n    pickedObjectIndex: entry.layer.decodePickingColor(pickedColor)\n  };\n}\n//# sourceMappingURL=pick-layers-pass.js.map","import debug from '../debug';\nimport DrawLayersPass from '../passes/draw-layers-pass';\nimport PickLayersPass from '../passes/pick-layers-pass';\nimport { Framebuffer } from '@luma.gl/core';\nconst TRACE_RENDER_LAYERS = 'deckRenderer.renderLayers';\nexport default class DeckRenderer {\n  constructor(gl) {\n    this.gl = gl;\n    this.layerFilter = null;\n    this.drawPickingColors = false;\n    this.drawLayersPass = new DrawLayersPass(gl);\n    this.pickLayersPass = new PickLayersPass(gl);\n    this.renderCount = 0;\n    this._needsRedraw = 'Initial render';\n    this.renderBuffers = [];\n    this.lastPostProcessEffect = null;\n  }\n\n  setProps(props) {\n    if ('layerFilter' in props && this.layerFilter !== props.layerFilter) {\n      this.layerFilter = props.layerFilter;\n      this._needsRedraw = 'layerFilter changed';\n    }\n\n    if ('drawPickingColors' in props && this.drawPickingColors !== props.drawPickingColors) {\n      this.drawPickingColors = props.drawPickingColors;\n      this._needsRedraw = 'drawPickingColors changed';\n    }\n  }\n\n  renderLayers(opts) {\n    const layerPass = this.drawPickingColors ? this.pickLayersPass : this.drawLayersPass;\n    opts.layerFilter = opts.layerFilter || this.layerFilter;\n    opts.effects = opts.effects || [];\n    opts.target = opts.target || Framebuffer.getDefaultFramebuffer(this.gl);\n\n    this._preRender(opts.effects, opts);\n\n    const outputBuffer = this.lastPostProcessEffect ? this.renderBuffers[0] : opts.target;\n    const renderStats = layerPass.render({ ...opts,\n      target: outputBuffer\n    });\n\n    this._postRender(opts.effects, opts);\n\n    this.renderCount++;\n    debug(TRACE_RENDER_LAYERS, this, renderStats, opts);\n  }\n\n  needsRedraw(opts = {\n    clearRedrawFlags: false\n  }) {\n    const redraw = this._needsRedraw;\n\n    if (opts.clearRedrawFlags) {\n      this._needsRedraw = false;\n    }\n\n    return redraw;\n  }\n\n  finalize() {\n    const {\n      renderBuffers\n    } = this;\n\n    for (const buffer of renderBuffers) {\n      buffer.delete();\n    }\n\n    renderBuffers.length = 0;\n  }\n\n  _preRender(effects, opts) {\n    let lastPostProcessEffect = null;\n\n    for (const effect of effects) {\n      effect.preRender(this.gl, opts);\n\n      if (effect.postRender) {\n        lastPostProcessEffect = effect;\n      }\n    }\n\n    if (lastPostProcessEffect) {\n      this._resizeRenderBuffers();\n    }\n\n    this.lastPostProcessEffect = lastPostProcessEffect;\n  }\n\n  _resizeRenderBuffers() {\n    const {\n      renderBuffers\n    } = this;\n\n    if (renderBuffers.length === 0) {\n      renderBuffers.push(new Framebuffer(this.gl), new Framebuffer(this.gl));\n    }\n\n    for (const buffer of renderBuffers) {\n      buffer.resize();\n    }\n  }\n\n  _postRender(effects, opts) {\n    const {\n      renderBuffers\n    } = this;\n    const params = {\n      inputBuffer: renderBuffers[0],\n      swapBuffer: renderBuffers[1],\n      target: null\n    };\n\n    for (const effect of effects) {\n      if (effect.postRender) {\n        if (effect === this.lastPostProcessEffect) {\n          params.target = opts.target;\n          effect.postRender(this.gl, params);\n          break;\n        }\n\n        const buffer = effect.postRender(this.gl, params);\n        params.inputBuffer = buffer;\n        params.swapBuffer = buffer === renderBuffers[0] ? renderBuffers[1] : renderBuffers[0];\n      }\n    }\n  }\n\n}\n//# sourceMappingURL=deck-renderer.js.map","import log from '../../utils/log';\nconst NO_PICKED_OBJECT = {\n  pickedColor: null,\n  pickedObjectIndex: -1\n};\nexport function getClosestObject({\n  pickedColors,\n  decodePickingColor,\n  deviceX,\n  deviceY,\n  deviceRadius,\n  deviceRect\n}) {\n  const {\n    x,\n    y,\n    width,\n    height\n  } = deviceRect;\n  let minSquareDistanceToCenter = deviceRadius * deviceRadius;\n  let closestPixelIndex = -1;\n  let i = 0;\n\n  for (let row = 0; row < height; row++) {\n    const dy = row + y - deviceY;\n    const dy2 = dy * dy;\n\n    if (dy2 > minSquareDistanceToCenter) {\n      i += 4 * width;\n    } else {\n      for (let col = 0; col < width; col++) {\n        const pickedLayerIndex = pickedColors[i + 3] - 1;\n\n        if (pickedLayerIndex >= 0) {\n          const dx = col + x - deviceX;\n          const d2 = dx * dx + dy2;\n\n          if (d2 <= minSquareDistanceToCenter) {\n            minSquareDistanceToCenter = d2;\n            closestPixelIndex = i;\n          }\n        }\n\n        i += 4;\n      }\n    }\n  }\n\n  if (closestPixelIndex >= 0) {\n    const pickedColor = pickedColors.slice(closestPixelIndex, closestPixelIndex + 4);\n    const pickedObject = decodePickingColor(pickedColor);\n\n    if (pickedObject) {\n      const dy = Math.floor(closestPixelIndex / 4 / width);\n      const dx = closestPixelIndex / 4 - dy * width;\n      return { ...pickedObject,\n        pickedColor,\n        pickedX: x + dx,\n        pickedY: y + dy\n      };\n    }\n\n    log.error('Picked non-existent layer. Is picking buffer corrupt?')();\n  }\n\n  return NO_PICKED_OBJECT;\n}\nexport function getUniqueObjects({\n  pickedColors,\n  decodePickingColor\n}) {\n  const uniqueColors = new Map();\n\n  if (pickedColors) {\n    for (let i = 0; i < pickedColors.length; i += 4) {\n      const pickedLayerIndex = pickedColors[i + 3] - 1;\n\n      if (pickedLayerIndex >= 0) {\n        const pickedColor = pickedColors.slice(i, i + 4);\n        const colorKey = pickedColor.join(',');\n\n        if (!uniqueColors.has(colorKey)) {\n          const pickedObject = decodePickingColor(pickedColor);\n\n          if (pickedObject) {\n            uniqueColors.set(colorKey, { ...pickedObject,\n              color: pickedColor\n            });\n          } else {\n            log.error('Picked non-existent layer. Is picking buffer corrupt?')();\n          }\n        }\n      }\n    }\n  }\n\n  return Array.from(uniqueColors.values());\n}\n//# sourceMappingURL=query-object.js.map","export function getEmptyPickingInfo({\n  pickInfo,\n  viewports,\n  pixelRatio,\n  x,\n  y,\n  z\n}) {\n  let pickedViewport = viewports[0];\n\n  if (viewports.length > 1) {\n    pickedViewport = getViewportFromCoordinates((pickInfo === null || pickInfo === void 0 ? void 0 : pickInfo.pickedViewports) || viewports, {\n      x,\n      y\n    });\n  }\n\n  let coordinate;\n\n  if (pickedViewport) {\n    const point = [x - pickedViewport.x, y - pickedViewport.y];\n\n    if (z !== undefined) {\n      point[2] = z;\n    }\n\n    coordinate = pickedViewport.unproject(point);\n  }\n\n  return {\n    color: null,\n    layer: null,\n    viewport: pickedViewport,\n    index: -1,\n    picked: false,\n    x,\n    y,\n    pixel: [x, y],\n    coordinate,\n    devicePixel: pickInfo && 'pickedX' in pickInfo ? [pickInfo.pickedX, pickInfo.pickedY] : undefined,\n    pixelRatio\n  };\n}\nexport function processPickInfo(opts) {\n  const {\n    pickInfo,\n    lastPickedInfo,\n    mode,\n    layers\n  } = opts;\n  const {\n    pickedColor,\n    pickedLayer,\n    pickedObjectIndex\n  } = pickInfo;\n  const affectedLayers = pickedLayer ? [pickedLayer] : [];\n\n  if (mode === 'hover') {\n    const lastPickedPixelIndex = lastPickedInfo.index;\n    const lastPickedLayerId = lastPickedInfo.layerId;\n    const pickedLayerId = pickedLayer ? pickedLayer.props.id : null;\n\n    if (pickedLayerId !== lastPickedLayerId || pickedObjectIndex !== lastPickedPixelIndex) {\n      if (pickedLayerId !== lastPickedLayerId) {\n        const lastPickedLayer = layers.find(layer => layer.props.id === lastPickedLayerId);\n\n        if (lastPickedLayer) {\n          affectedLayers.unshift(lastPickedLayer);\n        }\n      }\n\n      lastPickedInfo.layerId = pickedLayerId;\n      lastPickedInfo.index = pickedObjectIndex;\n      lastPickedInfo.info = null;\n    }\n  }\n\n  const baseInfo = getEmptyPickingInfo(opts);\n  const infos = new Map();\n  infos.set(null, baseInfo);\n  affectedLayers.forEach(layer => {\n    let info = { ...baseInfo\n    };\n\n    if (layer === pickedLayer) {\n      info.color = pickedColor;\n      info.index = pickedObjectIndex;\n      info.picked = true;\n    }\n\n    info = getLayerPickingInfo({\n      layer,\n      info,\n      mode\n    });\n    const rootLayer = info.layer;\n\n    if (layer === pickedLayer && mode === 'hover') {\n      lastPickedInfo.info = info;\n    }\n\n    infos.set(rootLayer.id, info);\n\n    if (mode === 'hover') {\n      rootLayer.updateAutoHighlight(info);\n    }\n  });\n  return infos;\n}\nexport function getLayerPickingInfo({\n  layer,\n  info,\n  mode\n}) {\n  while (layer && info) {\n    const sourceLayer = info.layer || null;\n    info.sourceLayer = sourceLayer;\n    info.layer = layer;\n    info = layer.getPickingInfo({\n      info,\n      mode,\n      sourceLayer\n    });\n    layer = layer.parent;\n  }\n\n  return info;\n}\n\nfunction getViewportFromCoordinates(viewports, pixel) {\n  for (let i = viewports.length - 1; i >= 0; i--) {\n    const viewport = viewports[i];\n\n    if (viewport.containsPixel(pixel)) {\n      return viewport;\n    }\n  }\n\n  return viewports[0];\n}\n//# sourceMappingURL=pick-info.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { Framebuffer, Texture2D, isWebGL2, readPixelsToArray, cssToDeviceRatio, cssToDevicePixels } from '@luma.gl/core';\nimport PickLayersPass from '../passes/pick-layers-pass';\nimport { getClosestObject, getUniqueObjects } from './picking/query-object';\nimport { processPickInfo, getLayerPickingInfo, getEmptyPickingInfo } from './picking/pick-info';\nexport default class DeckPicker {\n  constructor(gl) {\n    _defineProperty(this, \"gl\", void 0);\n\n    _defineProperty(this, \"pickingFBO\", void 0);\n\n    _defineProperty(this, \"depthFBO\", void 0);\n\n    _defineProperty(this, \"pickLayersPass\", void 0);\n\n    _defineProperty(this, \"layerFilter\", void 0);\n\n    _defineProperty(this, \"lastPickedInfo\", void 0);\n\n    _defineProperty(this, \"_pickable\", true);\n\n    this.gl = gl;\n    this.pickLayersPass = new PickLayersPass(gl);\n    this.lastPickedInfo = {\n      index: -1,\n      layerId: null,\n      info: null\n    };\n  }\n\n  setProps(props) {\n    if ('layerFilter' in props) {\n      this.layerFilter = props.layerFilter;\n    }\n\n    if ('_pickable' in props) {\n      this._pickable = props._pickable;\n    }\n  }\n\n  finalize() {\n    if (this.pickingFBO) {\n      this.pickingFBO.delete();\n    }\n\n    if (this.depthFBO) {\n      this.depthFBO.color.delete();\n      this.depthFBO.delete();\n    }\n  }\n\n  pickObject(opts) {\n    return this._pickClosestObject(opts);\n  }\n\n  pickObjects(opts) {\n    return this._pickVisibleObjects(opts);\n  }\n\n  getLastPickedObject({\n    x,\n    y,\n    layers,\n    viewports\n  }, lastPickedInfo = this.lastPickedInfo.info) {\n    const lastPickedLayerId = lastPickedInfo && lastPickedInfo.layer && lastPickedInfo.layer.id;\n    const lastPickedViewportId = lastPickedInfo && lastPickedInfo.viewport && lastPickedInfo.viewport.id;\n    const layer = lastPickedLayerId ? layers.find(l => l.id === lastPickedLayerId) : null;\n    const viewport = lastPickedViewportId && viewports.find(v => v.id === lastPickedViewportId) || viewports[0];\n    const coordinate = viewport && viewport.unproject([x - viewport.x, y - viewport.y]);\n    const info = {\n      x,\n      y,\n      viewport,\n      coordinate,\n      layer\n    };\n    return { ...lastPickedInfo,\n      ...info\n    };\n  }\n\n  _resizeBuffer() {\n    var _this$pickingFBO, _this$depthFBO;\n\n    const {\n      gl\n    } = this;\n\n    if (!this.pickingFBO) {\n      this.pickingFBO = new Framebuffer(gl);\n\n      if (Framebuffer.isSupported(gl, {\n        colorBufferFloat: true\n      })) {\n        const depthFBO = new Framebuffer(gl);\n        depthFBO.attach({\n          [36064]: new Texture2D(gl, {\n            format: isWebGL2(gl) ? 34836 : 6408,\n            type: 5126\n          })\n        });\n        this.depthFBO = depthFBO;\n      }\n    }\n\n    (_this$pickingFBO = this.pickingFBO) === null || _this$pickingFBO === void 0 ? void 0 : _this$pickingFBO.resize({\n      width: gl.canvas.width,\n      height: gl.canvas.height\n    });\n    (_this$depthFBO = this.depthFBO) === null || _this$depthFBO === void 0 ? void 0 : _this$depthFBO.resize({\n      width: gl.canvas.width,\n      height: gl.canvas.height\n    });\n  }\n\n  _getPickable(layers) {\n    if (this._pickable === false) {\n      return null;\n    }\n\n    const pickableLayers = layers.filter(layer => layer.isPickable() && !layer.isComposite);\n    return pickableLayers.length ? pickableLayers : null;\n  }\n\n  _pickClosestObject({\n    layers,\n    views,\n    viewports,\n    x,\n    y,\n    radius = 0,\n    depth = 1,\n    mode = 'query',\n    unproject3D,\n    onViewportActive,\n    effects\n  }) {\n    const pickableLayers = this._getPickable(layers);\n\n    const pixelRatio = cssToDeviceRatio(this.gl);\n\n    if (!pickableLayers) {\n      return {\n        result: [],\n        emptyInfo: getEmptyPickingInfo({\n          viewports,\n          x,\n          y,\n          pixelRatio\n        })\n      };\n    }\n\n    this._resizeBuffer();\n\n    const devicePixelRange = cssToDevicePixels(this.gl, [x, y], true);\n    const devicePixel = [devicePixelRange.x + Math.floor(devicePixelRange.width / 2), devicePixelRange.y + Math.floor(devicePixelRange.height / 2)];\n    const deviceRadius = Math.round(radius * pixelRatio);\n    const {\n      width,\n      height\n    } = this.pickingFBO;\n\n    const deviceRect = this._getPickingRect({\n      deviceX: devicePixel[0],\n      deviceY: devicePixel[1],\n      deviceRadius,\n      deviceWidth: width,\n      deviceHeight: height\n    });\n\n    const cullRect = {\n      x: x - radius,\n      y: y - radius,\n      width: radius * 2 + 1,\n      height: radius * 2 + 1\n    };\n    let infos;\n    const result = [];\n    const affectedLayers = new Set();\n\n    for (let i = 0; i < depth; i++) {\n      let pickInfo;\n\n      if (deviceRect) {\n        const pickedResult = this._drawAndSample({\n          layers: pickableLayers,\n          views,\n          viewports,\n          onViewportActive,\n          deviceRect,\n          cullRect,\n          effects,\n          pass: \"picking:\".concat(mode)\n        });\n\n        pickInfo = getClosestObject({ ...pickedResult,\n          deviceX: devicePixel[0],\n          deviceY: devicePixel[1],\n          deviceRadius,\n          deviceRect\n        });\n      } else {\n        pickInfo = {\n          pickedColor: null,\n          pickedObjectIndex: -1\n        };\n      }\n\n      let z;\n\n      if (pickInfo.pickedLayer && unproject3D && this.depthFBO) {\n        const pickedResultPass2 = this._drawAndSample({\n          layers: [pickInfo.pickedLayer],\n          views,\n          viewports,\n          onViewportActive,\n          deviceRect: {\n            x: pickInfo.pickedX,\n            y: pickInfo.pickedY,\n            width: 1,\n            height: 1\n          },\n          cullRect,\n          effects,\n          pass: \"picking:\".concat(mode, \":z\")\n        }, true);\n\n        z = pickedResultPass2.pickedColors[0];\n      }\n\n      if (pickInfo.pickedLayer && i + 1 < depth) {\n        affectedLayers.add(pickInfo.pickedLayer);\n        pickInfo.pickedLayer.disablePickingIndex(pickInfo.pickedObjectIndex);\n      }\n\n      infos = processPickInfo({\n        pickInfo,\n        lastPickedInfo: this.lastPickedInfo,\n        mode,\n        layers: pickableLayers,\n        viewports,\n        x,\n        y,\n        z,\n        pixelRatio\n      });\n\n      for (const info of infos.values()) {\n        if (info.layer) {\n          result.push(info);\n        }\n      }\n\n      if (!pickInfo.pickedColor) {\n        break;\n      }\n    }\n\n    for (const layer of affectedLayers) {\n      layer.restorePickingColors();\n    }\n\n    return {\n      result,\n      emptyInfo: infos.get(null)\n    };\n  }\n\n  _pickVisibleObjects({\n    layers,\n    views,\n    viewports,\n    x,\n    y,\n    width = 1,\n    height = 1,\n    mode = 'query',\n    maxObjects = null,\n    onViewportActive,\n    effects\n  }) {\n    const pickableLayers = this._getPickable(layers);\n\n    if (!pickableLayers) {\n      return [];\n    }\n\n    this._resizeBuffer();\n\n    const pixelRatio = cssToDeviceRatio(this.gl);\n    const leftTop = cssToDevicePixels(this.gl, [x, y], true);\n    const deviceLeft = leftTop.x;\n    const deviceTop = leftTop.y + leftTop.height;\n    const rightBottom = cssToDevicePixels(this.gl, [x + width, y + height], true);\n    const deviceRight = rightBottom.x + rightBottom.width;\n    const deviceBottom = rightBottom.y;\n    const deviceRect = {\n      x: deviceLeft,\n      y: deviceBottom,\n      width: deviceRight - deviceLeft,\n      height: deviceTop - deviceBottom\n    };\n\n    const pickedResult = this._drawAndSample({\n      layers: pickableLayers,\n      views,\n      viewports,\n      onViewportActive,\n      deviceRect,\n      cullRect: {\n        x,\n        y,\n        width,\n        height\n      },\n      effects,\n      pass: \"picking:\".concat(mode)\n    });\n\n    const pickInfos = getUniqueObjects(pickedResult);\n    const uniqueInfos = new Map();\n    const isMaxObjects = Number.isFinite(maxObjects);\n\n    for (let i = 0; i < pickInfos.length; i++) {\n      if (isMaxObjects && maxObjects && uniqueInfos.size >= maxObjects) {\n        break;\n      }\n\n      const pickInfo = pickInfos[i];\n      let info = {\n        color: pickInfo.pickedColor,\n        layer: null,\n        index: pickInfo.pickedObjectIndex,\n        picked: true,\n        x,\n        y,\n        pixelRatio\n      };\n      info = getLayerPickingInfo({\n        layer: pickInfo.pickedLayer,\n        info,\n        mode\n      });\n\n      if (!uniqueInfos.has(info.object)) {\n        uniqueInfos.set(info.object, info);\n      }\n    }\n\n    return Array.from(uniqueInfos.values());\n  }\n\n  _drawAndSample({\n    layers,\n    views,\n    viewports,\n    onViewportActive,\n    deviceRect,\n    cullRect,\n    effects,\n    pass\n  }, pickZ = false) {\n    const pickingFBO = pickZ ? this.depthFBO : this.pickingFBO;\n    const {\n      decodePickingColor\n    } = this.pickLayersPass.render({\n      layers,\n      layerFilter: this.layerFilter,\n      views,\n      viewports,\n      onViewportActive,\n      pickingFBO,\n      deviceRect,\n      cullRect,\n      effects,\n      pass,\n      pickZ\n    });\n    const {\n      x,\n      y,\n      width,\n      height\n    } = deviceRect;\n    const pickedColors = new (pickZ ? Float32Array : Uint8Array)(width * height * 4);\n    readPixelsToArray(pickingFBO, {\n      sourceX: x,\n      sourceY: y,\n      sourceWidth: width,\n      sourceHeight: height,\n      target: pickedColors\n    });\n    return {\n      pickedColors,\n      decodePickingColor\n    };\n  }\n\n  _getPickingRect({\n    deviceX,\n    deviceY,\n    deviceRadius,\n    deviceWidth,\n    deviceHeight\n  }) {\n    const x = Math.max(0, deviceX - deviceRadius);\n    const y = Math.max(0, deviceY - deviceRadius);\n    const width = Math.min(deviceWidth, deviceX + deviceRadius + 1) - x;\n    const height = Math.min(deviceHeight, deviceY + deviceRadius + 1) - y;\n\n    if (width <= 0 || height <= 0) {\n      return null;\n    }\n\n    return {\n      x,\n      y,\n      width,\n      height\n    };\n  }\n\n}\n//# sourceMappingURL=deck-picker.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nconst defaultStyle = {\n  zIndex: '1',\n  position: 'absolute',\n  pointerEvents: 'none',\n  color: '#a0a7b4',\n  backgroundColor: '#29323c',\n  padding: '10px',\n  top: '0',\n  left: '0',\n  display: 'none'\n};\nexport default class Tooltip {\n  constructor(canvas) {\n    _defineProperty(this, \"el\", null);\n\n    _defineProperty(this, \"isVisible\", false);\n\n    const canvasParent = canvas.parentElement;\n\n    if (canvasParent) {\n      this.el = document.createElement('div');\n      this.el.className = 'deck-tooltip';\n      Object.assign(this.el.style, defaultStyle);\n      canvasParent.appendChild(this.el);\n    }\n  }\n\n  setTooltip(displayInfo, x, y) {\n    const el = this.el;\n\n    if (!el) {\n      return;\n    }\n\n    if (typeof displayInfo === 'string') {\n      el.innerText = displayInfo;\n    } else if (!displayInfo) {\n      this.isVisible = false;\n      el.style.display = 'none';\n      return;\n    } else {\n      if (displayInfo.text) {\n        el.innerText = displayInfo.text;\n      }\n\n      if (displayInfo.html) {\n        el.innerHTML = displayInfo.html;\n      }\n\n      if (displayInfo.className) {\n        el.className = displayInfo.className;\n      }\n\n      Object.assign(el.style, displayInfo.style);\n    }\n\n    this.isVisible = true;\n    el.style.display = 'block';\n    el.style.transform = \"translate(\".concat(x, \"px, \").concat(y, \"px)\");\n  }\n\n  remove() {\n    if (this.el) {\n      this.el.remove();\n      this.el = null;\n    }\n  }\n\n}\n//# sourceMappingURL=tooltip.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport LayerManager from './layer-manager';\nimport ViewManager from './view-manager';\nimport MapView from '../views/map-view';\nimport EffectManager from './effect-manager';\nimport DeckRenderer from './deck-renderer';\nimport DeckPicker from './deck-picker';\nimport Tooltip from './tooltip';\nimport log from '../utils/log';\nimport { deepEqual } from '../utils/deep-equal';\nimport typedArrayManager from '../utils/typed-array-manager';\nimport deckGlobal from './init';\nimport { getBrowser } from '@probe.gl/env';\nimport { AnimationLoop, createGLContext, instrumentGLContext, setParameters, Timeline, lumaStats } from '@luma.gl/core';\nimport { Stats } from '@probe.gl/stats';\nimport { EventManager } from 'mjolnir.js';\nimport assert from '../utils/assert';\nimport { EVENTS } from './constants';\n\nfunction noop() {}\n\nconst getCursor = ({\n  isDragging\n}) => isDragging ? 'grabbing' : 'grab';\n\nconst defaultProps = {\n  id: '',\n  width: '100%',\n  height: '100%',\n  style: null,\n  viewState: null,\n  initialViewState: null,\n  pickingRadius: 0,\n  layerFilter: null,\n  glOptions: {},\n  parameters: {},\n  parent: null,\n  gl: null,\n  canvas: null,\n  layers: [],\n  effects: [],\n  views: null,\n  controller: null,\n  useDevicePixels: true,\n  touchAction: 'none',\n  eventRecognizerOptions: {},\n  _framebuffer: null,\n  _animate: false,\n  _pickable: true,\n  _typedArrayManagerProps: {},\n  _customRender: null,\n  onWebGLInitialized: noop,\n  onResize: noop,\n  onViewStateChange: noop,\n  onInteractionStateChange: noop,\n  onBeforeRender: noop,\n  onAfterRender: noop,\n  onLoad: noop,\n  onError: error => log.error(error.message)(),\n  onHover: null,\n  onClick: null,\n  onDragStart: null,\n  onDrag: null,\n  onDragEnd: null,\n  _onMetrics: null,\n  getCursor,\n  getTooltip: null,\n  debug: false,\n  drawPickingColors: false\n};\nexport default class Deck {\n  constructor(props) {\n    _defineProperty(this, \"props\", void 0);\n\n    _defineProperty(this, \"width\", 0);\n\n    _defineProperty(this, \"height\", 0);\n\n    _defineProperty(this, \"userData\", {});\n\n    _defineProperty(this, \"canvas\", null);\n\n    _defineProperty(this, \"viewManager\", null);\n\n    _defineProperty(this, \"layerManager\", null);\n\n    _defineProperty(this, \"effectManager\", null);\n\n    _defineProperty(this, \"deckRenderer\", null);\n\n    _defineProperty(this, \"deckPicker\", null);\n\n    _defineProperty(this, \"eventManager\", null);\n\n    _defineProperty(this, \"tooltip\", null);\n\n    _defineProperty(this, \"metrics\", void 0);\n\n    _defineProperty(this, \"animationLoop\", void 0);\n\n    _defineProperty(this, \"stats\", void 0);\n\n    _defineProperty(this, \"viewState\", void 0);\n\n    _defineProperty(this, \"cursorState\", void 0);\n\n    _defineProperty(this, \"_needsRedraw\", void 0);\n\n    _defineProperty(this, \"_pickRequest\", void 0);\n\n    _defineProperty(this, \"_lastPointerDownInfo\", null);\n\n    _defineProperty(this, \"_metricsCounter\", void 0);\n\n    _defineProperty(this, \"_onPointerMove\", event => {\n      const {\n        _pickRequest\n      } = this;\n\n      if (event.type === 'pointerleave') {\n        _pickRequest.x = -1;\n        _pickRequest.y = -1;\n        _pickRequest.radius = 0;\n      } else if (event.leftButton || event.rightButton) {\n        return;\n      } else {\n        const pos = event.offsetCenter;\n\n        if (!pos) {\n          return;\n        }\n\n        _pickRequest.x = pos.x;\n        _pickRequest.y = pos.y;\n        _pickRequest.radius = this.props.pickingRadius;\n      }\n\n      if (this.layerManager) {\n        this.layerManager.context.mousePosition = {\n          x: _pickRequest.x,\n          y: _pickRequest.y\n        };\n      }\n\n      _pickRequest.event = event;\n    });\n\n    _defineProperty(this, \"_onEvent\", event => {\n      const eventOptions = EVENTS[event.type];\n      const pos = event.offsetCenter;\n\n      if (!eventOptions || !pos || !this.layerManager) {\n        return;\n      }\n\n      const layers = this.layerManager.getLayers();\n      const info = this.deckPicker.getLastPickedObject({\n        x: pos.x,\n        y: pos.y,\n        layers,\n        viewports: this.getViewports(pos)\n      }, this._lastPointerDownInfo);\n      const {\n        layer\n      } = info;\n      const layerHandler = layer && (layer[eventOptions.handler] || layer.props[eventOptions.handler]);\n      const rootHandler = this.props[eventOptions.handler];\n      let handled = false;\n\n      if (layerHandler) {\n        handled = layerHandler.call(layer, info, event);\n      }\n\n      if (!handled && rootHandler) {\n        rootHandler(info, event);\n      }\n    });\n\n    _defineProperty(this, \"_onPointerDown\", event => {\n      const pos = event.offsetCenter;\n\n      const pickedInfo = this._pick('pickObject', 'pickObject Time', {\n        x: pos.x,\n        y: pos.y,\n        radius: this.props.pickingRadius\n      });\n\n      this._lastPointerDownInfo = pickedInfo.result[0] || pickedInfo.emptyInfo;\n    });\n\n    this.props = { ...defaultProps,\n      ...props\n    };\n    props = this.props;\n    this._needsRedraw = 'Initial render';\n    this._pickRequest = {\n      mode: 'hover',\n      x: -1,\n      y: -1,\n      radius: 0,\n      event: null\n    };\n    this.cursorState = {\n      isHovering: false,\n      isDragging: false\n    };\n\n    if (props.viewState && props.initialViewState) {\n      log.warn('View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.')();\n    }\n\n    if (getBrowser() === 'IE') {\n      log.warn('IE 11 is not supported')();\n    }\n\n    this.viewState = props.initialViewState;\n\n    if (!props.gl) {\n      if (typeof document !== 'undefined') {\n        this.canvas = this._createCanvas(props);\n      }\n    }\n\n    this.animationLoop = this._createAnimationLoop(props);\n    this.stats = new Stats({\n      id: 'deck.gl'\n    });\n    this.metrics = {\n      fps: 0,\n      setPropsTime: 0,\n      updateAttributesTime: 0,\n      framesRedrawn: 0,\n      pickTime: 0,\n      pickCount: 0,\n      gpuTime: 0,\n      gpuTimePerFrame: 0,\n      cpuTime: 0,\n      cpuTimePerFrame: 0,\n      bufferMemory: 0,\n      textureMemory: 0,\n      renderbufferMemory: 0,\n      gpuMemory: 0\n    };\n    this._metricsCounter = 0;\n    this.setProps(props);\n\n    if (props._typedArrayManagerProps) {\n      typedArrayManager.setOptions(props._typedArrayManagerProps);\n    }\n\n    this.animationLoop.start();\n  }\n\n  finalize() {\n    var _this$layerManager, _this$viewManager, _this$effectManager, _this$deckRenderer, _this$deckPicker, _this$eventManager, _this$tooltip;\n\n    this.animationLoop.stop();\n    this.animationLoop = null;\n    this._lastPointerDownInfo = null;\n    (_this$layerManager = this.layerManager) === null || _this$layerManager === void 0 ? void 0 : _this$layerManager.finalize();\n    this.layerManager = null;\n    (_this$viewManager = this.viewManager) === null || _this$viewManager === void 0 ? void 0 : _this$viewManager.finalize();\n    this.viewManager = null;\n    (_this$effectManager = this.effectManager) === null || _this$effectManager === void 0 ? void 0 : _this$effectManager.finalize();\n    this.effectManager = null;\n    (_this$deckRenderer = this.deckRenderer) === null || _this$deckRenderer === void 0 ? void 0 : _this$deckRenderer.finalize();\n    this.deckRenderer = null;\n    (_this$deckPicker = this.deckPicker) === null || _this$deckPicker === void 0 ? void 0 : _this$deckPicker.finalize();\n    this.deckPicker = null;\n    (_this$eventManager = this.eventManager) === null || _this$eventManager === void 0 ? void 0 : _this$eventManager.destroy();\n    this.eventManager = null;\n    (_this$tooltip = this.tooltip) === null || _this$tooltip === void 0 ? void 0 : _this$tooltip.remove();\n    this.tooltip = null;\n\n    if (!this.props.canvas && !this.props.gl && this.canvas) {\n      var _this$canvas$parentEl;\n\n      (_this$canvas$parentEl = this.canvas.parentElement) === null || _this$canvas$parentEl === void 0 ? void 0 : _this$canvas$parentEl.removeChild(this.canvas);\n      this.canvas = null;\n    }\n  }\n\n  setProps(props) {\n    this.stats.get('setProps Time').timeStart();\n\n    if ('onLayerHover' in props) {\n      log.removed('onLayerHover', 'onHover')();\n    }\n\n    if ('onLayerClick' in props) {\n      log.removed('onLayerClick', 'onClick')();\n    }\n\n    if (props.initialViewState && !deepEqual(this.props.initialViewState, props.initialViewState)) {\n      this.viewState = props.initialViewState;\n    }\n\n    Object.assign(this.props, props);\n\n    this._setCanvasSize(this.props);\n\n    const resolvedProps = Object.create(this.props);\n    Object.assign(resolvedProps, {\n      views: this._getViews(),\n      width: this.width,\n      height: this.height,\n      viewState: this._getViewState()\n    });\n    this.animationLoop.setProps(resolvedProps);\n\n    if (this.layerManager) {\n      this.viewManager.setProps(resolvedProps);\n      this.layerManager.activateViewport(this.getViewports()[0]);\n      this.layerManager.setProps(resolvedProps);\n      this.effectManager.setProps(resolvedProps);\n      this.deckRenderer.setProps(resolvedProps);\n      this.deckPicker.setProps(resolvedProps);\n    }\n\n    this.stats.get('setProps Time').timeEnd();\n  }\n\n  needsRedraw(opts = {\n    clearRedrawFlags: false\n  }) {\n    if (!this.layerManager) {\n      return false;\n    }\n\n    if (this.props._animate) {\n      return 'Deck._animate';\n    }\n\n    let redraw = this._needsRedraw;\n\n    if (opts.clearRedrawFlags) {\n      this._needsRedraw = false;\n    }\n\n    const viewManagerNeedsRedraw = this.viewManager.needsRedraw(opts);\n    const layerManagerNeedsRedraw = this.layerManager.needsRedraw(opts);\n    const effectManagerNeedsRedraw = this.effectManager.needsRedraw(opts);\n    const deckRendererNeedsRedraw = this.deckRenderer.needsRedraw(opts);\n    redraw = redraw || viewManagerNeedsRedraw || layerManagerNeedsRedraw || effectManagerNeedsRedraw || deckRendererNeedsRedraw;\n    return redraw;\n  }\n\n  redraw(reason) {\n    if (!this.layerManager) {\n      return;\n    }\n\n    let redrawReason = this.needsRedraw({\n      clearRedrawFlags: true\n    });\n    redrawReason = reason || redrawReason;\n\n    if (!redrawReason) {\n      return;\n    }\n\n    this.stats.get('Redraw Count').incrementCount();\n\n    if (this.props._customRender) {\n      this.props._customRender(redrawReason);\n    } else {\n      this._drawLayers(redrawReason);\n    }\n  }\n\n  get isInitialized() {\n    return this.viewManager !== null;\n  }\n\n  getViews() {\n    assert(this.viewManager);\n    return this.viewManager.views;\n  }\n\n  getViewports(rect) {\n    assert(this.viewManager);\n    return this.viewManager.getViewports(rect);\n  }\n\n  pickObject(opts) {\n    const infos = this._pick('pickObject', 'pickObject Time', opts).result;\n\n    return infos.length ? infos[0] : null;\n  }\n\n  pickMultipleObjects(opts) {\n    opts.depth = opts.depth || 10;\n    return this._pick('pickObject', 'pickMultipleObjects Time', opts).result;\n  }\n\n  pickObjects(opts) {\n    return this._pick('pickObjects', 'pickObjects Time', opts);\n  }\n\n  _addResources(resources, forceUpdate = false) {\n    for (const id in resources) {\n      this.layerManager.resourceManager.add({\n        resourceId: id,\n        data: resources[id],\n        forceUpdate\n      });\n    }\n  }\n\n  _removeResources(resourceIds) {\n    for (const id of resourceIds) {\n      this.layerManager.resourceManager.remove(id);\n    }\n  }\n\n  _pick(method, statKey, opts) {\n    assert(this.deckPicker);\n    const {\n      stats\n    } = this;\n    stats.get('Pick Count').incrementCount();\n    stats.get(statKey).timeStart();\n    const infos = this.deckPicker[method]({\n      layers: this.layerManager.getLayers(opts),\n      views: this.viewManager.getViews(),\n      viewports: this.getViewports(opts),\n      onViewportActive: this.layerManager.activateViewport,\n      effects: this.effectManager.getEffects(),\n      ...opts\n    });\n    stats.get(statKey).timeEnd();\n    return infos;\n  }\n\n  _createCanvas(props) {\n    let canvas = props.canvas;\n\n    if (typeof canvas === 'string') {\n      canvas = document.getElementById(canvas);\n      assert(canvas);\n    }\n\n    if (!canvas) {\n      canvas = document.createElement('canvas');\n      canvas.id = props.id || 'deckgl-overlay';\n      const parent = props.parent || document.body;\n      parent.appendChild(canvas);\n    }\n\n    Object.assign(canvas.style, props.style);\n    return canvas;\n  }\n\n  _setCanvasSize(props) {\n    if (!this.canvas) {\n      return;\n    }\n\n    const {\n      width,\n      height\n    } = props;\n\n    if (width || width === 0) {\n      const cssWidth = Number.isFinite(width) ? \"\".concat(width, \"px\") : width;\n      this.canvas.style.width = cssWidth;\n    }\n\n    if (height || height === 0) {\n      var _props$style;\n\n      const cssHeight = Number.isFinite(height) ? \"\".concat(height, \"px\") : height;\n      this.canvas.style.position = ((_props$style = props.style) === null || _props$style === void 0 ? void 0 : _props$style.position) || 'absolute';\n      this.canvas.style.height = cssHeight;\n    }\n  }\n\n  _updateCanvasSize() {\n    const {\n      canvas\n    } = this;\n\n    if (!canvas) {\n      return;\n    }\n\n    const newWidth = canvas.clientWidth || canvas.width;\n    const newHeight = canvas.clientHeight || canvas.height;\n\n    if (newWidth !== this.width || newHeight !== this.height) {\n      var _this$viewManager2;\n\n      this.width = newWidth;\n      this.height = newHeight;\n      (_this$viewManager2 = this.viewManager) === null || _this$viewManager2 === void 0 ? void 0 : _this$viewManager2.setProps({\n        width: newWidth,\n        height: newHeight\n      });\n      this.props.onResize({\n        width: newWidth,\n        height: newHeight\n      });\n    }\n  }\n\n  _createAnimationLoop(props) {\n    const {\n      width,\n      height,\n      gl,\n      glOptions,\n      debug,\n      onError,\n      onBeforeRender,\n      onAfterRender,\n      useDevicePixels\n    } = props;\n    return new AnimationLoop({\n      width,\n      height,\n      useDevicePixels,\n      autoResizeViewport: false,\n      gl,\n      onCreateContext: opts => createGLContext({ ...glOptions,\n        ...opts,\n        canvas: this.canvas,\n        debug,\n        onContextLost: () => this._onContextLost()\n      }),\n      onInitialize: context => this._setGLContext(context.gl),\n      onRender: this._onRenderFrame.bind(this),\n      onBeforeRender,\n      onAfterRender,\n      onError\n    });\n  }\n\n  _getViewState() {\n    return this.props.viewState || this.viewState;\n  }\n\n  _getViews() {\n    let views = this.props.views || [new MapView({\n      id: 'default-view'\n    })];\n    views = Array.isArray(views) ? views : [views];\n\n    if (views.length && this.props.controller) {\n      views[0].props.controller = this.props.controller;\n    }\n\n    return views;\n  }\n\n  _onContextLost() {\n    const {\n      onError\n    } = this.props;\n\n    if (this.animationLoop && onError) {\n      onError(new Error('WebGL context is lost'));\n    }\n  }\n\n  _pickAndCallback() {\n    const {\n      _pickRequest\n    } = this;\n\n    if (_pickRequest.event) {\n      const {\n        result,\n        emptyInfo\n      } = this._pick('pickObject', 'pickObject Time', _pickRequest);\n\n      this.cursorState.isHovering = result.length > 0;\n      let pickedInfo = emptyInfo;\n      let handled = false;\n\n      for (const info of result) {\n        var _info$layer;\n\n        pickedInfo = info;\n        handled = ((_info$layer = info.layer) === null || _info$layer === void 0 ? void 0 : _info$layer.onHover(info, _pickRequest.event)) || handled;\n      }\n\n      if (!handled && this.props.onHover) {\n        this.props.onHover(pickedInfo, _pickRequest.event);\n      }\n\n      if (this.props.getTooltip && this.tooltip) {\n        const displayInfo = this.props.getTooltip(pickedInfo);\n        this.tooltip.setTooltip(displayInfo, pickedInfo.x, pickedInfo.y);\n      }\n\n      _pickRequest.event = null;\n    }\n  }\n\n  _updateCursor() {\n    const container = this.props.parent || this.canvas;\n\n    if (container) {\n      container.style.cursor = this.props.getCursor(this.cursorState);\n    }\n  }\n\n  _setGLContext(gl) {\n    if (this.layerManager) {\n      return;\n    }\n\n    if (!this.canvas) {\n      this.canvas = gl.canvas;\n      instrumentGLContext(gl, {\n        enable: true,\n        copyState: true\n      });\n    }\n\n    this.tooltip = new Tooltip(this.canvas);\n    setParameters(gl, {\n      blend: true,\n      blendFunc: [770, 771, 1, 771],\n      polygonOffsetFill: true,\n      depthTest: true,\n      depthFunc: 515\n    });\n    this.props.onWebGLInitialized(gl);\n    const timeline = new Timeline();\n    timeline.play();\n    this.animationLoop.attachTimeline(timeline);\n    this.eventManager = new EventManager(this.props.parent || gl.canvas, {\n      touchAction: this.props.touchAction,\n      recognizerOptions: this.props.eventRecognizerOptions,\n      events: {\n        pointerdown: this._onPointerDown,\n        pointermove: this._onPointerMove,\n        pointerleave: this._onPointerMove\n      }\n    });\n\n    for (const eventType in EVENTS) {\n      this.eventManager.on(eventType, this._onEvent);\n    }\n\n    this.viewManager = new ViewManager({\n      timeline,\n      eventManager: this.eventManager,\n      onViewStateChange: this._onViewStateChange.bind(this),\n      onInteractionStateChange: this._onInteractionStateChange.bind(this),\n      views: this._getViews(),\n      viewState: this._getViewState(),\n      width: this.width,\n      height: this.height\n    });\n    const viewport = this.viewManager.getViewports()[0];\n    this.layerManager = new LayerManager(gl, {\n      deck: this,\n      stats: this.stats,\n      viewport,\n      timeline\n    });\n    this.effectManager = new EffectManager();\n    this.deckRenderer = new DeckRenderer(gl);\n    this.deckPicker = new DeckPicker(gl);\n    this.setProps(this.props);\n\n    this._updateCanvasSize();\n\n    this.props.onLoad();\n  }\n\n  _drawLayers(redrawReason, renderOptions) {\n    const {\n      gl\n    } = this.layerManager.context;\n    setParameters(gl, this.props.parameters);\n    this.props.onBeforeRender({\n      gl\n    });\n    this.deckRenderer.renderLayers({\n      target: this.props._framebuffer,\n      layers: this.layerManager.getLayers(),\n      viewports: this.viewManager.getViewports(),\n      onViewportActive: this.layerManager.activateViewport,\n      views: this.viewManager.getViews(),\n      pass: 'screen',\n      redrawReason,\n      effects: this.effectManager.getEffects(),\n      ...renderOptions\n    });\n    this.props.onAfterRender({\n      gl\n    });\n  }\n\n  _onRenderFrame(animationProps) {\n    this._getFrameStats();\n\n    if (this._metricsCounter++ % 60 === 0) {\n      this._getMetrics();\n\n      this.stats.reset();\n      log.table(4, this.metrics)();\n\n      if (this.props._onMetrics) {\n        this.props._onMetrics(this.metrics);\n      }\n    }\n\n    this._updateCanvasSize();\n\n    this._updateCursor();\n\n    if (this.tooltip.isVisible && this.viewManager.needsRedraw()) {\n      this.tooltip.setTooltip(null);\n    }\n\n    this.layerManager.updateLayers();\n\n    this._pickAndCallback();\n\n    this.redraw();\n\n    if (this.viewManager) {\n      this.viewManager.updateViewStates();\n    }\n  }\n\n  _onViewStateChange(params) {\n    const viewState = this.props.onViewStateChange(params) || params.viewState;\n\n    if (this.viewState) {\n      this.viewState = { ...this.viewState,\n        [params.viewId]: viewState\n      };\n\n      if (!this.props.viewState) {\n        if (this.viewManager) {\n          this.viewManager.setProps({\n            viewState: this.viewState\n          });\n        }\n      }\n    }\n  }\n\n  _onInteractionStateChange(interactionState) {\n    this.cursorState.isDragging = interactionState.isDragging || false;\n    this.props.onInteractionStateChange(interactionState);\n  }\n\n  _getFrameStats() {\n    const {\n      stats\n    } = this;\n    stats.get('frameRate').timeEnd();\n    stats.get('frameRate').timeStart();\n    const animationLoopStats = this.animationLoop.stats;\n    stats.get('GPU Time').addTime(animationLoopStats.get('GPU Time').lastTiming);\n    stats.get('CPU Time').addTime(animationLoopStats.get('CPU Time').lastTiming);\n  }\n\n  _getMetrics() {\n    const {\n      metrics,\n      stats\n    } = this;\n    metrics.fps = stats.get('frameRate').getHz();\n    metrics.setPropsTime = stats.get('setProps Time').time;\n    metrics.updateAttributesTime = stats.get('Update Attributes').time;\n    metrics.framesRedrawn = stats.get('Redraw Count').count;\n    metrics.pickTime = stats.get('pickObject Time').time + stats.get('pickMultipleObjects Time').time + stats.get('pickObjects Time').time;\n    metrics.pickCount = stats.get('Pick Count').count;\n    metrics.gpuTime = stats.get('GPU Time').time;\n    metrics.cpuTime = stats.get('CPU Time').time;\n    metrics.gpuTimePerFrame = stats.get('GPU Time').getAverageTime();\n    metrics.cpuTimePerFrame = stats.get('CPU Time').getAverageTime();\n    const memoryStats = lumaStats.get('Memory Usage');\n    metrics.bufferMemory = memoryStats.get('Buffer Memory').count;\n    metrics.textureMemory = memoryStats.get('Texture Memory').count;\n    metrics.renderbufferMemory = memoryStats.get('Renderbuffer Memory').count;\n    metrics.gpuMemory = memoryStats.get('GPU Memory').count;\n  }\n\n}\n\n_defineProperty(Deck, \"defaultProps\", defaultProps);\n\n_defineProperty(Deck, \"VERSION\", deckGlobal.VERSION);\n//# sourceMappingURL=deck.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nexport default class ShaderAttribute {\n  constructor(dataColumn, opts) {\n    _defineProperty(this, \"opts\", void 0);\n\n    _defineProperty(this, \"source\", void 0);\n\n    this.opts = opts;\n    this.source = dataColumn;\n  }\n\n  get value() {\n    return this.source.value;\n  }\n\n  getValue() {\n    const buffer = this.source.getBuffer();\n    const accessor = this.getAccessor();\n\n    if (buffer) {\n      return [buffer, accessor];\n    }\n\n    const {\n      value\n    } = this.source;\n    const {\n      size\n    } = accessor;\n    let constantValue = value;\n\n    if (value && value.length !== size) {\n      constantValue = new Float32Array(size);\n      const index = accessor.elementOffset || 0;\n\n      for (let i = 0; i < size; ++i) {\n        constantValue[i] = value[index + i];\n      }\n    }\n\n    return constantValue;\n  }\n\n  getAccessor() {\n    return { ...this.source.getAccessor(),\n      ...this.opts\n    };\n  }\n\n}\n//# sourceMappingURL=shader-attribute.js.map","export function glArrayFromType(glType) {\n  switch (glType) {\n    case 5126:\n      return Float32Array;\n\n    case 5130:\n      return Float64Array;\n\n    case 5123:\n    case 33635:\n    case 32819:\n    case 32820:\n      return Uint16Array;\n\n    case 5125:\n      return Uint32Array;\n\n    case 5121:\n      return Uint8ClampedArray;\n\n    case 5120:\n      return Int8Array;\n\n    case 5122:\n      return Int16Array;\n\n    case 5124:\n      return Int32Array;\n\n    default:\n      throw new Error('Unknown GL type');\n  }\n}\n//# sourceMappingURL=gl-utils.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { hasFeature, FEATURES, Buffer } from '@luma.gl/core';\nimport ShaderAttribute from './shader-attribute';\nimport { glArrayFromType } from './gl-utils';\nimport typedArrayManager from '../../utils/typed-array-manager';\nimport { toDoublePrecisionArray } from '../../utils/math-utils';\nimport log from '../../utils/log';\n\nfunction getStride(accessor) {\n  return accessor.stride || accessor.size * accessor.bytesPerElement;\n}\n\nfunction resolveShaderAttribute(baseAccessor, shaderAttributeOptions) {\n  if (shaderAttributeOptions.offset) {\n    log.removed('shaderAttribute.offset', 'vertexOffset, elementOffset')();\n  }\n\n  const stride = getStride(baseAccessor);\n  const vertexOffset = shaderAttributeOptions.vertexOffset !== undefined ? shaderAttributeOptions.vertexOffset : baseAccessor.vertexOffset || 0;\n  const elementOffset = shaderAttributeOptions.elementOffset || 0;\n  const offset = vertexOffset * stride + elementOffset * baseAccessor.bytesPerElement + (baseAccessor.offset || 0);\n  return { ...shaderAttributeOptions,\n    offset,\n    stride\n  };\n}\n\nfunction resolveDoublePrecisionShaderAttributes(baseAccessor, shaderAttributeOptions) {\n  const resolvedOptions = resolveShaderAttribute(baseAccessor, shaderAttributeOptions);\n  return {\n    high: resolvedOptions,\n    low: { ...resolvedOptions,\n      offset: resolvedOptions.offset + baseAccessor.size * 4\n    }\n  };\n}\n\nexport default class DataColumn {\n  constructor(gl, opts, state) {\n    _defineProperty(this, \"gl\", void 0);\n\n    _defineProperty(this, \"id\", void 0);\n\n    _defineProperty(this, \"size\", void 0);\n\n    _defineProperty(this, \"settings\", void 0);\n\n    _defineProperty(this, \"value\", void 0);\n\n    _defineProperty(this, \"doublePrecision\", void 0);\n\n    _defineProperty(this, \"_buffer\", void 0);\n\n    _defineProperty(this, \"state\", void 0);\n\n    this.gl = gl;\n    this.id = opts.id || '';\n    this.size = opts.size || 1;\n    const logicalType = opts.logicalType || opts.type;\n    const doublePrecision = logicalType === 5130;\n    let {\n      defaultValue\n    } = opts;\n    defaultValue = Number.isFinite(defaultValue) ? [defaultValue] : defaultValue || new Array(this.size).fill(0);\n    let bufferType;\n\n    if (doublePrecision) {\n      bufferType = 5126;\n    } else if (!logicalType && opts.isIndexed) {\n      bufferType = gl && hasFeature(gl, FEATURES.ELEMENT_INDEX_UINT32) ? 5125 : 5123;\n    } else {\n      bufferType = logicalType || 5126;\n    }\n\n    let defaultType = glArrayFromType(logicalType || bufferType || 5126);\n    this.doublePrecision = doublePrecision;\n\n    if (doublePrecision && opts.fp64 === false) {\n      defaultType = Float32Array;\n    }\n\n    this.value = null;\n    this.settings = { ...opts,\n      defaultType,\n      defaultValue: defaultValue,\n      logicalType,\n      type: bufferType,\n      size: this.size,\n      bytesPerElement: defaultType.BYTES_PER_ELEMENT\n    };\n    this.state = { ...state,\n      externalBuffer: null,\n      bufferAccessor: this.settings,\n      allocatedValue: null,\n      numInstances: 0,\n      bounds: null,\n      constant: false\n    };\n    this._buffer = null;\n  }\n\n  get isConstant() {\n    return this.state.constant;\n  }\n\n  get buffer() {\n    if (!this._buffer) {\n      const {\n        isIndexed,\n        type\n      } = this.settings;\n      this._buffer = new Buffer(this.gl, {\n        id: this.id,\n        target: isIndexed ? 34963 : 34962,\n        accessor: {\n          type\n        }\n      });\n    }\n\n    return this._buffer;\n  }\n\n  get byteOffset() {\n    const accessor = this.getAccessor();\n\n    if (accessor.vertexOffset) {\n      return accessor.vertexOffset * getStride(accessor);\n    }\n\n    return 0;\n  }\n\n  get numInstances() {\n    return this.state.numInstances;\n  }\n\n  set numInstances(n) {\n    this.state.numInstances = n;\n  }\n\n  delete() {\n    if (this._buffer) {\n      this._buffer.delete();\n\n      this._buffer = null;\n    }\n\n    typedArrayManager.release(this.state.allocatedValue);\n  }\n\n  getShaderAttributes(id, options) {\n    if (this.doublePrecision) {\n      const shaderAttributes = {};\n      const isBuffer64Bit = this.value instanceof Float64Array;\n      const doubleShaderAttributeDefs = resolveDoublePrecisionShaderAttributes(this.getAccessor(), options || {});\n      shaderAttributes[id] = new ShaderAttribute(this, doubleShaderAttributeDefs.high);\n      shaderAttributes[\"\".concat(id, \"64Low\")] = isBuffer64Bit ? new ShaderAttribute(this, doubleShaderAttributeDefs.low) : new Float32Array(this.size);\n      return shaderAttributes;\n    }\n\n    if (options) {\n      const shaderAttributeDef = resolveShaderAttribute(this.getAccessor(), options);\n      return {\n        [id]: new ShaderAttribute(this, shaderAttributeDef)\n      };\n    }\n\n    return {\n      [id]: this\n    };\n  }\n\n  getBuffer() {\n    if (this.state.constant) {\n      return null;\n    }\n\n    return this.state.externalBuffer || this._buffer;\n  }\n\n  getValue() {\n    if (this.state.constant) {\n      return this.value;\n    }\n\n    return [this.getBuffer(), this.getAccessor()];\n  }\n\n  getAccessor() {\n    return this.state.bufferAccessor;\n  }\n\n  getBounds() {\n    if (this.state.bounds) {\n      return this.state.bounds;\n    }\n\n    let result = null;\n\n    if (this.state.constant && this.value) {\n      const min = Array.from(this.value);\n      result = [min, min];\n    } else {\n      const {\n        value,\n        numInstances,\n        size\n      } = this;\n      const len = numInstances * size;\n\n      if (value && len && value.length >= len) {\n        const min = new Array(size).fill(Infinity);\n        const max = new Array(size).fill(-Infinity);\n\n        for (let i = 0; i < len;) {\n          for (let j = 0; j < size; j++) {\n            const v = value[i++];\n            if (v < min[j]) min[j] = v;\n            if (v > max[j]) max[j] = v;\n          }\n        }\n\n        result = [min, max];\n      }\n    }\n\n    this.state.bounds = result;\n    return result;\n  }\n\n  setData(data) {\n    const {\n      state\n    } = this;\n    let opts;\n\n    if (ArrayBuffer.isView(data)) {\n      opts = {\n        value: data\n      };\n    } else if (data instanceof Buffer) {\n      opts = {\n        buffer: data\n      };\n    } else {\n      opts = data;\n    }\n\n    const accessor = { ...this.settings,\n      ...opts\n    };\n    state.bufferAccessor = accessor;\n    state.bounds = null;\n\n    if (opts.constant) {\n      let value = opts.value;\n      value = this._normalizeValue(value, [], 0);\n\n      if (this.settings.normalized) {\n        value = this.normalizeConstant(value);\n      }\n\n      const hasChanged = !state.constant || !this._areValuesEqual(value, this.value);\n\n      if (!hasChanged) {\n        return false;\n      }\n\n      state.externalBuffer = null;\n      state.constant = true;\n      this.value = value;\n    } else if (opts.buffer) {\n      const buffer = opts.buffer;\n      state.externalBuffer = buffer;\n      state.constant = false;\n      this.value = opts.value || null;\n      const isBuffer64Bit = opts.value instanceof Float64Array;\n      accessor.type = opts.type || buffer.accessor.type;\n      accessor.bytesPerElement = buffer.accessor.BYTES_PER_ELEMENT * (isBuffer64Bit ? 2 : 1);\n      accessor.stride = getStride(accessor);\n    } else if (opts.value) {\n      this._checkExternalBuffer(opts);\n\n      let value = opts.value;\n      state.externalBuffer = null;\n      state.constant = false;\n      this.value = value;\n      accessor.bytesPerElement = value.BYTES_PER_ELEMENT;\n      accessor.stride = getStride(accessor);\n      const {\n        buffer,\n        byteOffset\n      } = this;\n\n      if (this.doublePrecision && value instanceof Float64Array) {\n        value = toDoublePrecisionArray(value, accessor);\n      }\n\n      const requiredBufferSize = value.byteLength + byteOffset + accessor.stride * 2;\n\n      if (buffer.byteLength < requiredBufferSize) {\n        buffer.reallocate(requiredBufferSize);\n      }\n\n      buffer.setAccessor(null);\n      buffer.subData({\n        data: value,\n        offset: byteOffset\n      });\n      accessor.type = opts.type || buffer.accessor.type;\n    }\n\n    return true;\n  }\n\n  updateSubBuffer(opts = {}) {\n    this.state.bounds = null;\n    const value = this.value;\n    const {\n      startOffset = 0,\n      endOffset\n    } = opts;\n    this.buffer.subData({\n      data: this.doublePrecision && value instanceof Float64Array ? toDoublePrecisionArray(value, {\n        size: this.size,\n        startIndex: startOffset,\n        endIndex: endOffset\n      }) : value.subarray(startOffset, endOffset),\n      offset: startOffset * value.BYTES_PER_ELEMENT + this.byteOffset\n    });\n  }\n\n  allocate(numInstances, copy = false) {\n    const {\n      state\n    } = this;\n    const oldValue = state.allocatedValue;\n    const value = typedArrayManager.allocate(oldValue, numInstances + 1, {\n      size: this.size,\n      type: this.settings.defaultType,\n      copy\n    });\n    this.value = value;\n    const {\n      buffer,\n      byteOffset\n    } = this;\n\n    if (buffer.byteLength < value.byteLength + byteOffset) {\n      buffer.reallocate(value.byteLength + byteOffset);\n\n      if (copy && oldValue) {\n        buffer.subData({\n          data: oldValue instanceof Float64Array ? toDoublePrecisionArray(oldValue, this) : oldValue,\n          offset: byteOffset\n        });\n      }\n    }\n\n    state.allocatedValue = value;\n    state.constant = false;\n    state.externalBuffer = null;\n    state.bufferAccessor = this.settings;\n    return true;\n  }\n\n  _checkExternalBuffer(opts) {\n    const {\n      value\n    } = opts;\n\n    if (!ArrayBuffer.isView(value)) {\n      throw new Error(\"Attribute \".concat(this.id, \" value is not TypedArray\"));\n    }\n\n    const ArrayType = this.settings.defaultType;\n    let illegalArrayType = false;\n\n    if (this.doublePrecision) {\n      illegalArrayType = value.BYTES_PER_ELEMENT < 4;\n    }\n\n    if (illegalArrayType) {\n      throw new Error(\"Attribute \".concat(this.id, \" does not support \").concat(value.constructor.name));\n    }\n\n    if (!(value instanceof ArrayType) && this.settings.normalized && !('normalized' in opts)) {\n      log.warn(\"Attribute \".concat(this.id, \" is normalized\"))();\n    }\n  }\n\n  normalizeConstant(value) {\n    switch (this.settings.type) {\n      case 5120:\n        return new Float32Array(value).map(x => (x + 128) / 255 * 2 - 1);\n\n      case 5122:\n        return new Float32Array(value).map(x => (x + 32768) / 65535 * 2 - 1);\n\n      case 5121:\n        return new Float32Array(value).map(x => x / 255);\n\n      case 5123:\n        return new Float32Array(value).map(x => x / 65535);\n\n      default:\n        return value;\n    }\n  }\n\n  _normalizeValue(value, out, start) {\n    const {\n      defaultValue,\n      size\n    } = this.settings;\n\n    if (Number.isFinite(value)) {\n      out[start] = value;\n      return out;\n    }\n\n    if (!value) {\n      out[start] = defaultValue[0];\n      return out;\n    }\n\n    switch (size) {\n      case 4:\n        out[start + 3] = Number.isFinite(value[3]) ? value[3] : defaultValue[3];\n\n      case 3:\n        out[start + 2] = Number.isFinite(value[2]) ? value[2] : defaultValue[2];\n\n      case 2:\n        out[start + 1] = Number.isFinite(value[1]) ? value[1] : defaultValue[1];\n\n      case 1:\n        out[start + 0] = Number.isFinite(value[0]) ? value[0] : defaultValue[0];\n        break;\n\n      default:\n        let i = size;\n\n        while (--i >= 0) {\n          out[start + i] = Number.isFinite(value[i]) ? value[i] : defaultValue[i];\n        }\n\n    }\n\n    return out;\n  }\n\n  _areValuesEqual(value1, value2) {\n    if (!value1 || !value2) {\n      return false;\n    }\n\n    const {\n      size\n    } = this;\n\n    for (let i = 0; i < size; i++) {\n      if (value1[i] !== value2[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n}\n//# sourceMappingURL=data-column.js.map","const EMPTY_ARRAY = [];\nconst placeholderArray = [];\nexport function createIterable(data, startRow = 0, endRow = Infinity) {\n  let iterable = EMPTY_ARRAY;\n  const objectInfo = {\n    index: -1,\n    data,\n    target: []\n  };\n\n  if (!data) {\n    iterable = EMPTY_ARRAY;\n  } else if (typeof data[Symbol.iterator] === 'function') {\n    iterable = data;\n  } else if (data.length > 0) {\n    placeholderArray.length = data.length;\n    iterable = placeholderArray;\n  }\n\n  if (startRow > 0 || Number.isFinite(endRow)) {\n    iterable = (Array.isArray(iterable) ? iterable : Array.from(iterable)).slice(startRow, endRow);\n    objectInfo.index = startRow - 1;\n  }\n\n  return {\n    iterable,\n    objectInfo\n  };\n}\nexport function isAsyncIterable(data) {\n  return data && data[Symbol.asyncIterator];\n}\nexport function getAccessorFromBuffer(typedArray, options) {\n  const {\n    size,\n    stride,\n    offset,\n    startIndices,\n    nested\n  } = options;\n  const bytesPerElement = typedArray.BYTES_PER_ELEMENT;\n  const elementStride = stride ? stride / bytesPerElement : size;\n  const elementOffset = offset ? offset / bytesPerElement : 0;\n  const vertexCount = Math.floor((typedArray.length - elementOffset) / elementStride);\n  return (_, {\n    index,\n    target\n  }) => {\n    if (!startIndices) {\n      const sourceIndex = index * elementStride + elementOffset;\n\n      for (let j = 0; j < size; j++) {\n        target[j] = typedArray[sourceIndex + j];\n      }\n\n      return target;\n    }\n\n    const startIndex = startIndices[index];\n    const endIndex = startIndices[index + 1] || vertexCount;\n    let result;\n\n    if (nested) {\n      result = new Array(endIndex - startIndex);\n\n      for (let i = startIndex; i < endIndex; i++) {\n        const sourceIndex = i * elementStride + elementOffset;\n        target = new Array(size);\n\n        for (let j = 0; j < size; j++) {\n          target[j] = typedArray[sourceIndex + j];\n        }\n\n        result[i - startIndex] = target;\n      }\n    } else if (elementStride === size) {\n      result = typedArray.subarray(startIndex * size + elementOffset, endIndex * size + elementOffset);\n    } else {\n      result = new typedArray.constructor((endIndex - startIndex) * size);\n      let targetIndex = 0;\n\n      for (let i = startIndex; i < endIndex; i++) {\n        const sourceIndex = i * elementStride + elementOffset;\n\n        for (let j = 0; j < size; j++) {\n          result[targetIndex++] = typedArray[sourceIndex + j];\n        }\n      }\n    }\n\n    return result;\n  };\n}\n//# sourceMappingURL=iterable-utils.js.map","export const EMPTY = [];\nexport const FULL = [[0, Infinity]];\nexport function add(rangeList, range) {\n  if (rangeList === FULL) {\n    return rangeList;\n  }\n\n  if (range[0] < 0) {\n    range[0] = 0;\n  }\n\n  if (range[0] >= range[1]) {\n    return rangeList;\n  }\n\n  const newRangeList = [];\n  const len = rangeList.length;\n  let insertPosition = 0;\n\n  for (let i = 0; i < len; i++) {\n    const range0 = rangeList[i];\n\n    if (range0[1] < range[0]) {\n      newRangeList.push(range0);\n      insertPosition = i + 1;\n    } else if (range0[0] > range[1]) {\n      newRangeList.push(range0);\n    } else {\n      range = [Math.min(range0[0], range[0]), Math.max(range0[1], range[1])];\n    }\n  }\n\n  newRangeList.splice(insertPosition, 0, range);\n  return newRangeList;\n}\n//# sourceMappingURL=range.js.map","function padArrayChunk(options) {\n  const {\n    source,\n    target,\n    start = 0,\n    size,\n    getData\n  } = options;\n  const end = options.end || target.length;\n  const sourceLength = source.length;\n  const targetLength = end - start;\n\n  if (sourceLength > targetLength) {\n    target.set(source.subarray(0, targetLength), start);\n    return;\n  }\n\n  target.set(source, start);\n\n  if (!getData) {\n    return;\n  }\n\n  let i = sourceLength;\n\n  while (i < targetLength) {\n    const datum = getData(i, source);\n\n    for (let j = 0; j < size; j++) {\n      target[start + i] = datum[j] || 0;\n      i++;\n    }\n  }\n}\n\nexport function padArray({\n  source,\n  target,\n  size,\n  getData,\n  sourceStartIndices,\n  targetStartIndices\n}) {\n  if (!Array.isArray(targetStartIndices)) {\n    padArrayChunk({\n      source,\n      target,\n      size,\n      getData\n    });\n    return target;\n  }\n\n  let sourceIndex = 0;\n  let targetIndex = 0;\n\n  const getChunkData = getData && ((i, chunk) => getData(i + targetIndex, chunk));\n\n  const n = Math.min(sourceStartIndices.length, targetStartIndices.length);\n\n  for (let i = 1; i < n; i++) {\n    const nextSourceIndex = sourceStartIndices[i] * size;\n    const nextTargetIndex = targetStartIndices[i] * size;\n    padArrayChunk({\n      source: source.subarray(sourceIndex, nextSourceIndex),\n      target,\n      start: targetIndex,\n      end: nextTargetIndex,\n      size,\n      getData: getChunkData\n    });\n    sourceIndex = nextSourceIndex;\n    targetIndex = nextTargetIndex;\n  }\n\n  if (targetIndex < target.length) {\n    padArrayChunk({\n      source: [],\n      target,\n      start: targetIndex,\n      size,\n      getData: getChunkData\n    });\n  }\n\n  return target;\n}\n//# sourceMappingURL=array-utils.js.map","import { padArray } from '../../utils/array-utils';\nconst DEFAULT_TRANSITION_SETTINGS = {\n  interpolation: {\n    duration: 0,\n    easing: t => t\n  },\n  spring: {\n    stiffness: 0.05,\n    damping: 0.5\n  }\n};\nexport function normalizeTransitionSettings(userSettings, layerSettings) {\n  if (!userSettings) {\n    return null;\n  }\n\n  if (Number.isFinite(userSettings)) {\n    userSettings = {\n      type: 'interpolation',\n      duration: userSettings\n    };\n  }\n\n  const type = userSettings.type || 'interpolation';\n  return { ...DEFAULT_TRANSITION_SETTINGS[type],\n    ...layerSettings,\n    ...userSettings,\n    type\n  };\n}\nexport function getSourceBufferAttribute(gl, attribute) {\n  const buffer = attribute.getBuffer();\n\n  if (buffer) {\n    return [buffer, {\n      divisor: 0,\n      size: attribute.size,\n      normalized: attribute.settings.normalized\n    }];\n  }\n\n  return attribute.value;\n}\nexport function getAttributeTypeFromSize(size) {\n  switch (size) {\n    case 1:\n      return 'float';\n\n    case 2:\n      return 'vec2';\n\n    case 3:\n      return 'vec3';\n\n    case 4:\n      return 'vec4';\n\n    default:\n      throw new Error(\"No defined attribute type for size \\\"\".concat(size, \"\\\"\"));\n  }\n}\nexport function cycleBuffers(buffers) {\n  buffers.push(buffers.shift());\n}\nexport function getAttributeBufferLength(attribute, numInstances) {\n  const {\n    doublePrecision,\n    settings,\n    value,\n    size\n  } = attribute;\n  const multiplier = doublePrecision && value instanceof Float64Array ? 2 : 1;\n  return (settings.noAlloc ? value.length : numInstances * size) * multiplier;\n}\nexport function padBuffer({\n  buffer,\n  numInstances,\n  attribute,\n  fromLength,\n  fromStartIndices,\n  getData = x => x\n}) {\n  const precisionMultiplier = attribute.doublePrecision && attribute.value instanceof Float64Array ? 2 : 1;\n  const size = attribute.size * precisionMultiplier;\n  const byteOffset = attribute.byteOffset;\n  const toStartIndices = attribute.startIndices;\n  const hasStartIndices = fromStartIndices && toStartIndices;\n  const toLength = getAttributeBufferLength(attribute, numInstances);\n  const isConstant = attribute.isConstant;\n\n  if (!hasStartIndices && fromLength >= toLength) {\n    return;\n  }\n\n  const toData = isConstant ? attribute.value : attribute.getBuffer().getData({\n    srcByteOffset: byteOffset\n  });\n\n  if (attribute.settings.normalized && !isConstant) {\n    const getter = getData;\n\n    getData = (value, chunk) => attribute.normalizeConstant(getter(value, chunk));\n  }\n\n  const getMissingData = isConstant ? (i, chunk) => getData(toData, chunk) : (i, chunk) => getData(toData.subarray(i, i + size), chunk);\n  const source = buffer.getData({\n    length: fromLength\n  });\n  const data = new Float32Array(toLength);\n  padArray({\n    source,\n    target: data,\n    sourceStartIndices: fromStartIndices,\n    targetStartIndices: toStartIndices,\n    size,\n    getData: getMissingData\n  });\n\n  if (buffer.byteLength < data.byteLength + byteOffset) {\n    buffer.reallocate(data.byteLength + byteOffset);\n  }\n\n  buffer.subData({\n    data,\n    offset: byteOffset\n  });\n}\n//# sourceMappingURL=attribute-transition-utils.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport DataColumn from './data-column';\nimport assert from '../../utils/assert';\nimport { createIterable, getAccessorFromBuffer } from '../../utils/iterable-utils';\nimport { fillArray } from '../../utils/flatten';\nimport * as range from '../../utils/range';\nimport { normalizeTransitionSettings } from './attribute-transition-utils';\nexport default class Attribute extends DataColumn {\n  constructor(gl, opts) {\n    super(gl, opts, {\n      startIndices: null,\n      lastExternalBuffer: null,\n      binaryValue: null,\n      binaryAccessor: null,\n      needsUpdate: true,\n      needsRedraw: false,\n      updateRanges: range.FULL\n    });\n\n    _defineProperty(this, \"constant\", false);\n\n    this.settings.update = opts.update || (opts.accessor ? this._autoUpdater : undefined);\n    Object.seal(this.settings);\n    Object.seal(this.state);\n\n    this._validateAttributeUpdaters();\n  }\n\n  get startIndices() {\n    return this.state.startIndices;\n  }\n\n  set startIndices(layout) {\n    this.state.startIndices = layout;\n  }\n\n  needsUpdate() {\n    return this.state.needsUpdate;\n  }\n\n  needsRedraw({\n    clearChangedFlags = false\n  } = {}) {\n    const needsRedraw = this.state.needsRedraw;\n    this.state.needsRedraw = needsRedraw && !clearChangedFlags;\n    return needsRedraw;\n  }\n\n  getUpdateTriggers() {\n    const {\n      accessor\n    } = this.settings;\n    return [this.id].concat(typeof accessor !== 'function' && accessor || []);\n  }\n\n  supportsTransition() {\n    return Boolean(this.settings.transition);\n  }\n\n  getTransitionSetting(opts) {\n    if (!opts || !this.supportsTransition()) {\n      return null;\n    }\n\n    const {\n      accessor\n    } = this.settings;\n    const layerSettings = this.settings.transition;\n    const userSettings = Array.isArray(accessor) ? opts[accessor.find(a => opts[a])] : opts[accessor];\n    return normalizeTransitionSettings(userSettings, layerSettings);\n  }\n\n  setNeedsUpdate(reason = this.id, dataRange) {\n    this.state.needsUpdate = this.state.needsUpdate || reason;\n    this.setNeedsRedraw(reason);\n\n    if (dataRange) {\n      const {\n        startRow = 0,\n        endRow = Infinity\n      } = dataRange;\n      this.state.updateRanges = range.add(this.state.updateRanges, [startRow, endRow]);\n    } else {\n      this.state.updateRanges = range.FULL;\n    }\n  }\n\n  clearNeedsUpdate() {\n    this.state.needsUpdate = false;\n    this.state.updateRanges = range.EMPTY;\n  }\n\n  setNeedsRedraw(reason = this.id) {\n    this.state.needsRedraw = this.state.needsRedraw || reason;\n  }\n\n  allocate(numInstances) {\n    const {\n      state,\n      settings\n    } = this;\n\n    if (settings.noAlloc) {\n      return false;\n    }\n\n    if (settings.update) {\n      super.allocate(numInstances, state.updateRanges !== range.FULL);\n      return true;\n    }\n\n    return false;\n  }\n\n  updateBuffer({\n    numInstances,\n    data,\n    props,\n    context\n  }) {\n    if (!this.needsUpdate()) {\n      return false;\n    }\n\n    const {\n      state: {\n        updateRanges\n      },\n      settings: {\n        update,\n        noAlloc\n      }\n    } = this;\n    let updated = true;\n\n    if (update) {\n      for (const [startRow, endRow] of updateRanges) {\n        update.call(context, this, {\n          data,\n          startRow,\n          endRow,\n          props,\n          numInstances\n        });\n      }\n\n      if (!this.value) {} else if (this.constant || this.buffer.byteLength < this.value.byteLength + this.byteOffset) {\n        this.setData({\n          value: this.value,\n          constant: this.constant\n        });\n        this.constant = false;\n      } else {\n        for (const [startRow, endRow] of updateRanges) {\n          const startOffset = Number.isFinite(startRow) ? this.getVertexOffset(startRow) : 0;\n          const endOffset = Number.isFinite(endRow) ? this.getVertexOffset(endRow) : noAlloc || !Number.isFinite(numInstances) ? this.value.length : numInstances * this.size;\n          super.updateSubBuffer({\n            startOffset,\n            endOffset\n          });\n        }\n      }\n\n      this._checkAttributeArray();\n    } else {\n      updated = false;\n    }\n\n    this.clearNeedsUpdate();\n    this.setNeedsRedraw();\n    return updated;\n  }\n\n  setConstantValue(value) {\n    if (value === undefined || typeof value === 'function') {\n      return false;\n    }\n\n    const hasChanged = this.setData({\n      constant: true,\n      value\n    });\n\n    if (hasChanged) {\n      this.setNeedsRedraw();\n    }\n\n    this.clearNeedsUpdate();\n    return true;\n  }\n\n  setExternalBuffer(buffer) {\n    const {\n      state\n    } = this;\n\n    if (!buffer) {\n      state.lastExternalBuffer = null;\n      return false;\n    }\n\n    this.clearNeedsUpdate();\n\n    if (state.lastExternalBuffer === buffer) {\n      return true;\n    }\n\n    state.lastExternalBuffer = buffer;\n    this.setNeedsRedraw();\n    this.setData(buffer);\n    return true;\n  }\n\n  setBinaryValue(buffer, startIndices = null) {\n    const {\n      state,\n      settings\n    } = this;\n\n    if (!buffer) {\n      state.binaryValue = null;\n      state.binaryAccessor = null;\n      return false;\n    }\n\n    if (settings.noAlloc) {\n      return false;\n    }\n\n    if (state.binaryValue === buffer) {\n      this.clearNeedsUpdate();\n      return true;\n    }\n\n    state.binaryValue = buffer;\n    this.setNeedsRedraw();\n    const needsUpdate = settings.transform || startIndices !== this.startIndices;\n\n    if (needsUpdate) {\n      if (ArrayBuffer.isView(buffer)) {\n        buffer = {\n          value: buffer\n        };\n      }\n\n      const binaryValue = buffer;\n      assert(ArrayBuffer.isView(binaryValue.value), \"invalid \".concat(settings.accessor));\n      const needsNormalize = Boolean(binaryValue.size) && binaryValue.size !== this.size;\n      state.binaryAccessor = getAccessorFromBuffer(binaryValue.value, {\n        size: binaryValue.size || this.size,\n        stride: binaryValue.stride,\n        offset: binaryValue.offset,\n        startIndices: startIndices,\n        nested: needsNormalize\n      });\n      return false;\n    }\n\n    this.clearNeedsUpdate();\n    this.setData(buffer);\n    return true;\n  }\n\n  getVertexOffset(row) {\n    const {\n      startIndices\n    } = this;\n    const vertexIndex = startIndices ? row < startIndices.length ? startIndices[row] : this.numInstances : row;\n    return vertexIndex * this.size;\n  }\n\n  getShaderAttributes() {\n    const shaderAttributeDefs = this.settings.shaderAttributes || {\n      [this.id]: null\n    };\n    const shaderAttributes = {};\n\n    for (const shaderAttributeName in shaderAttributeDefs) {\n      Object.assign(shaderAttributes, super.getShaderAttributes(shaderAttributeName, shaderAttributeDefs[shaderAttributeName]));\n    }\n\n    return shaderAttributes;\n  }\n\n  _autoUpdater(attribute, {\n    data,\n    startRow,\n    endRow,\n    props,\n    numInstances\n  }) {\n    if (attribute.constant) {\n      return;\n    }\n\n    const {\n      settings,\n      state,\n      value,\n      size,\n      startIndices\n    } = attribute;\n    const {\n      accessor,\n      transform\n    } = settings;\n    const accessorFunc = state.binaryAccessor || (typeof accessor === 'function' ? accessor : props[accessor]);\n    assert(typeof accessorFunc === 'function', \"accessor \\\"\".concat(accessor, \"\\\" is not a function\"));\n    let i = attribute.getVertexOffset(startRow);\n    const {\n      iterable,\n      objectInfo\n    } = createIterable(data, startRow, endRow);\n\n    for (const object of iterable) {\n      objectInfo.index++;\n      let objectValue = accessorFunc(object, objectInfo);\n\n      if (transform) {\n        objectValue = transform.call(this, objectValue);\n      }\n\n      if (startIndices) {\n        const numVertices = (objectInfo.index < startIndices.length - 1 ? startIndices[objectInfo.index + 1] : numInstances) - startIndices[objectInfo.index];\n\n        if (objectValue && Array.isArray(objectValue[0])) {\n          let startIndex = i;\n\n          for (const item of objectValue) {\n            attribute._normalizeValue(item, value, startIndex);\n\n            startIndex += size;\n          }\n        } else if (objectValue && objectValue.length > size) {\n          value.set(objectValue, i);\n        } else {\n          attribute._normalizeValue(objectValue, objectInfo.target, 0);\n\n          fillArray({\n            target: value,\n            source: objectInfo.target,\n            start: i,\n            count: numVertices\n          });\n        }\n\n        i += numVertices * size;\n      } else {\n        attribute._normalizeValue(objectValue, value, i);\n\n        i += size;\n      }\n    }\n  }\n\n  _validateAttributeUpdaters() {\n    const {\n      settings\n    } = this;\n    const hasUpdater = settings.noAlloc || typeof settings.update === 'function';\n\n    if (!hasUpdater) {\n      throw new Error(\"Attribute \".concat(this.id, \" missing update or accessor\"));\n    }\n  }\n\n  _checkAttributeArray() {\n    const {\n      value\n    } = this;\n    const limit = Math.min(4, this.size);\n\n    if (value && value.length >= limit) {\n      let valid = true;\n\n      switch (limit) {\n        case 4:\n          valid = valid && Number.isFinite(value[3]);\n\n        case 3:\n          valid = valid && Number.isFinite(value[2]);\n\n        case 2:\n          valid = valid && Number.isFinite(value[1]);\n\n        case 1:\n          valid = valid && Number.isFinite(value[0]);\n          break;\n\n        default:\n          valid = false;\n      }\n\n      if (!valid) {\n        throw new Error(\"Illegal attribute generated for \".concat(this.id));\n      }\n    }\n  }\n\n}\n//# sourceMappingURL=attribute.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { Buffer, Transform } from '@luma.gl/core';\nimport Attribute from '../lib/attribute/attribute';\nimport { padBuffer, getAttributeTypeFromSize, getSourceBufferAttribute, getAttributeBufferLength, cycleBuffers } from '../lib/attribute/attribute-transition-utils';\nimport Transition from './transition';\nexport default class GPUInterpolationTransition {\n  constructor({\n    gl,\n    attribute,\n    timeline\n  }) {\n    _defineProperty(this, \"gl\", void 0);\n\n    _defineProperty(this, \"type\", 'interpolation');\n\n    _defineProperty(this, \"attributeInTransition\", void 0);\n\n    _defineProperty(this, \"settings\", void 0);\n\n    _defineProperty(this, \"attribute\", void 0);\n\n    _defineProperty(this, \"transition\", void 0);\n\n    _defineProperty(this, \"currentStartIndices\", void 0);\n\n    _defineProperty(this, \"currentLength\", void 0);\n\n    _defineProperty(this, \"transform\", void 0);\n\n    _defineProperty(this, \"buffers\", void 0);\n\n    this.gl = gl;\n    this.transition = new Transition(timeline);\n    this.attribute = attribute;\n    this.attributeInTransition = new Attribute(gl, attribute.settings);\n    this.currentStartIndices = attribute.startIndices;\n    this.currentLength = 0;\n    this.transform = getTransform(gl, attribute);\n    const bufferOpts = {\n      byteLength: 0,\n      usage: 35050\n    };\n    this.buffers = [new Buffer(gl, bufferOpts), new Buffer(gl, bufferOpts)];\n  }\n\n  get inProgress() {\n    return this.transition.inProgress;\n  }\n\n  start(transitionSettings, numInstances) {\n    if (transitionSettings.duration <= 0) {\n      this.transition.cancel();\n      return;\n    }\n\n    this.settings = transitionSettings;\n    const {\n      gl,\n      buffers,\n      attribute\n    } = this;\n    cycleBuffers(buffers);\n    const padBufferOpts = {\n      numInstances,\n      attribute,\n      fromLength: this.currentLength,\n      fromStartIndices: this.currentStartIndices,\n      getData: transitionSettings.enter\n    };\n\n    for (const buffer of buffers) {\n      padBuffer({\n        buffer,\n        ...padBufferOpts\n      });\n    }\n\n    this.currentStartIndices = attribute.startIndices;\n    this.currentLength = getAttributeBufferLength(attribute, numInstances);\n    this.attributeInTransition.setData({\n      buffer: buffers[1],\n      value: attribute.value\n    });\n    this.transition.start(transitionSettings);\n    this.transform.update({\n      elementCount: Math.floor(this.currentLength / attribute.size),\n      sourceBuffers: {\n        aFrom: buffers[0],\n        aTo: getSourceBufferAttribute(gl, attribute)\n      },\n      feedbackBuffers: {\n        vCurrent: buffers[1]\n      }\n    });\n  }\n\n  update() {\n    const updated = this.transition.update();\n\n    if (updated) {\n      const {\n        duration,\n        easing\n      } = this.settings;\n      const {\n        time\n      } = this.transition;\n      let t = time / duration;\n\n      if (easing) {\n        t = easing(t);\n      }\n\n      this.transform.run({\n        uniforms: {\n          time: t\n        }\n      });\n    }\n\n    return updated;\n  }\n\n  cancel() {\n    this.transition.cancel();\n    this.transform.delete();\n\n    for (const buffer of this.buffers) {\n      buffer.delete();\n    }\n\n    this.buffers.length = 0;\n  }\n\n}\nconst vs = \"\\n#define SHADER_NAME interpolation-transition-vertex-shader\\n\\nuniform float time;\\nattribute ATTRIBUTE_TYPE aFrom;\\nattribute ATTRIBUTE_TYPE aTo;\\nvarying ATTRIBUTE_TYPE vCurrent;\\n\\nvoid main(void) {\\n  vCurrent = mix(aFrom, aTo, time);\\n  gl_Position = vec4(0.0);\\n}\\n\";\n\nfunction getTransform(gl, attribute) {\n  const attributeType = getAttributeTypeFromSize(attribute.size);\n  return new Transform(gl, {\n    vs,\n    defines: {\n      ATTRIBUTE_TYPE: attributeType\n    },\n    varyings: ['vCurrent']\n  });\n}\n//# sourceMappingURL=gpu-interpolation-transition.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { Buffer, Transform, Framebuffer, Texture2D, readPixelsToArray } from '@luma.gl/core';\nimport { padBuffer, getAttributeTypeFromSize, getSourceBufferAttribute, getAttributeBufferLength, cycleBuffers } from '../lib/attribute/attribute-transition-utils';\nimport Attribute from '../lib/attribute/attribute';\nimport Transition from './transition';\nexport default class GPUSpringTransition {\n  constructor({\n    gl,\n    attribute,\n    timeline\n  }) {\n    _defineProperty(this, \"gl\", void 0);\n\n    _defineProperty(this, \"type\", 'spring');\n\n    _defineProperty(this, \"attributeInTransition\", void 0);\n\n    _defineProperty(this, \"settings\", void 0);\n\n    _defineProperty(this, \"attribute\", void 0);\n\n    _defineProperty(this, \"transition\", void 0);\n\n    _defineProperty(this, \"currentStartIndices\", void 0);\n\n    _defineProperty(this, \"currentLength\", void 0);\n\n    _defineProperty(this, \"texture\", void 0);\n\n    _defineProperty(this, \"framebuffer\", void 0);\n\n    _defineProperty(this, \"transform\", void 0);\n\n    _defineProperty(this, \"buffers\", void 0);\n\n    this.gl = gl;\n    this.type = 'spring';\n    this.transition = new Transition(timeline);\n    this.attribute = attribute;\n    this.attributeInTransition = new Attribute(gl, { ...attribute.settings,\n      normalized: false\n    });\n    this.currentStartIndices = attribute.startIndices;\n    this.currentLength = 0;\n    this.texture = getTexture(gl);\n    this.framebuffer = getFramebuffer(gl, this.texture);\n    this.transform = getTransform(gl, attribute, this.framebuffer);\n    const bufferOpts = {\n      byteLength: 0,\n      usage: 35050\n    };\n    this.buffers = [new Buffer(gl, bufferOpts), new Buffer(gl, bufferOpts), new Buffer(gl, bufferOpts)];\n  }\n\n  get inProgress() {\n    return this.transition.inProgress;\n  }\n\n  start(transitionSettings, numInstances) {\n    const {\n      gl,\n      buffers,\n      attribute\n    } = this;\n    const padBufferOpts = {\n      numInstances,\n      attribute,\n      fromLength: this.currentLength,\n      fromStartIndices: this.currentStartIndices,\n      getData: transitionSettings.enter\n    };\n\n    for (const buffer of buffers) {\n      padBuffer({\n        buffer,\n        ...padBufferOpts\n      });\n    }\n\n    this.settings = transitionSettings;\n    this.currentStartIndices = attribute.startIndices;\n    this.currentLength = getAttributeBufferLength(attribute, numInstances);\n    this.attributeInTransition.setData({\n      buffer: buffers[1],\n      value: attribute.value\n    });\n    this.transition.start({ ...transitionSettings,\n      duration: Infinity\n    });\n    this.transform.update({\n      elementCount: Math.floor(this.currentLength / attribute.size),\n      sourceBuffers: {\n        aTo: getSourceBufferAttribute(gl, attribute)\n      }\n    });\n  }\n\n  update() {\n    const {\n      buffers,\n      transform,\n      framebuffer,\n      transition\n    } = this;\n    const updated = transition.update();\n\n    if (!updated) {\n      return false;\n    }\n\n    const settings = this.settings;\n    transform.update({\n      sourceBuffers: {\n        aPrev: buffers[0],\n        aCur: buffers[1]\n      },\n      feedbackBuffers: {\n        vNext: buffers[2]\n      }\n    });\n    transform.run({\n      framebuffer,\n      discard: false,\n      clearRenderTarget: true,\n      uniforms: {\n        stiffness: settings.stiffness,\n        damping: settings.damping\n      },\n      parameters: {\n        depthTest: false,\n        blend: true,\n        viewport: [0, 0, 1, 1],\n        blendFunc: [1, 1],\n        blendEquation: [32776, 32776]\n      }\n    });\n    cycleBuffers(buffers);\n    this.attributeInTransition.setData({\n      buffer: buffers[1],\n      value: this.attribute.value\n    });\n    const isTransitioning = readPixelsToArray(framebuffer)[0] > 0;\n\n    if (!isTransitioning) {\n      transition.end();\n    }\n\n    return true;\n  }\n\n  cancel() {\n    this.transition.cancel();\n    this.transform.delete();\n\n    for (const buffer of this.buffers) {\n      buffer.delete();\n    }\n\n    this.buffers.length = 0;\n    this.texture.delete();\n    this.framebuffer.delete();\n  }\n\n}\n\nfunction getTransform(gl, attribute, framebuffer) {\n  const attributeType = getAttributeTypeFromSize(attribute.size);\n  return new Transform(gl, {\n    framebuffer,\n    vs: \"\\n#define SHADER_NAME spring-transition-vertex-shader\\n\\n#define EPSILON 0.00001\\n\\nuniform float stiffness;\\nuniform float damping;\\nattribute ATTRIBUTE_TYPE aPrev;\\nattribute ATTRIBUTE_TYPE aCur;\\nattribute ATTRIBUTE_TYPE aTo;\\nvarying ATTRIBUTE_TYPE vNext;\\nvarying float vIsTransitioningFlag;\\n\\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\\n  ATTRIBUTE_TYPE velocity = cur - prev;\\n  ATTRIBUTE_TYPE delta = dest - cur;\\n  ATTRIBUTE_TYPE spring = delta * stiffness;\\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\\n  return spring + damper + velocity + cur;\\n}\\n\\nvoid main(void) {\\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\\n\\n  vNext = getNextValue(aCur, aPrev, aTo);\\n  gl_Position = vec4(0, 0, 0, 1);\\n  gl_PointSize = 100.0;\\n}\\n\",\n    fs: \"\\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\\n\\nvarying float vIsTransitioningFlag;\\n\\nvoid main(void) {\\n  if (vIsTransitioningFlag == 0.0) {\\n    discard;\\n  }\\n  gl_FragColor = vec4(1.0);\\n}\",\n    defines: {\n      ATTRIBUTE_TYPE: attributeType\n    },\n    varyings: ['vNext']\n  });\n}\n\nfunction getTexture(gl) {\n  return new Texture2D(gl, {\n    data: new Uint8Array(4),\n    format: 6408,\n    type: 5121,\n    border: 0,\n    mipmaps: false,\n    dataFormat: 6408,\n    width: 1,\n    height: 1\n  });\n}\n\nfunction getFramebuffer(gl, texture) {\n  return new Framebuffer(gl, {\n    id: 'spring-transition-is-transitioning-framebuffer',\n    width: 1,\n    height: 1,\n    attachments: {\n      [36064]: texture\n    }\n  });\n}\n//# sourceMappingURL=gpu-spring-transition.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { Transform } from '@luma.gl/core';\nimport GPUInterpolationTransition from '../../transitions/gpu-interpolation-transition';\nimport GPUSpringTransition from '../../transitions/gpu-spring-transition';\nimport log from '../../utils/log';\nconst TRANSITION_TYPES = {\n  interpolation: GPUInterpolationTransition,\n  spring: GPUSpringTransition\n};\nexport default class AttributeTransitionManager {\n  constructor(gl, {\n    id,\n    timeline\n  }) {\n    _defineProperty(this, \"id\", void 0);\n\n    _defineProperty(this, \"isSupported\", void 0);\n\n    _defineProperty(this, \"gl\", void 0);\n\n    _defineProperty(this, \"timeline\", void 0);\n\n    _defineProperty(this, \"transitions\", void 0);\n\n    _defineProperty(this, \"needsRedraw\", void 0);\n\n    _defineProperty(this, \"numInstances\", void 0);\n\n    this.id = id;\n    this.gl = gl;\n    this.timeline = timeline;\n    this.transitions = {};\n    this.needsRedraw = false;\n    this.numInstances = 1;\n    this.isSupported = Transform.isSupported(gl);\n  }\n\n  finalize() {\n    for (const attributeName in this.transitions) {\n      this._removeTransition(attributeName);\n    }\n  }\n\n  update({\n    attributes,\n    transitions,\n    numInstances\n  }) {\n    this.numInstances = numInstances || 1;\n\n    for (const attributeName in attributes) {\n      const attribute = attributes[attributeName];\n      const settings = attribute.getTransitionSetting(transitions);\n      if (!settings) continue;\n\n      this._updateAttribute(attributeName, attribute, settings);\n    }\n\n    for (const attributeName in this.transitions) {\n      const attribute = attributes[attributeName];\n\n      if (!attribute || !attribute.getTransitionSetting(transitions)) {\n        this._removeTransition(attributeName);\n      }\n    }\n  }\n\n  hasAttribute(attributeName) {\n    const transition = this.transitions[attributeName];\n    return transition && transition.inProgress;\n  }\n\n  getAttributes() {\n    const animatedAttributes = {};\n\n    for (const attributeName in this.transitions) {\n      const transition = this.transitions[attributeName];\n\n      if (transition.inProgress) {\n        animatedAttributes[attributeName] = transition.attributeInTransition;\n      }\n    }\n\n    return animatedAttributes;\n  }\n\n  run() {\n    if (!this.isSupported || this.numInstances === 0) {\n      return false;\n    }\n\n    for (const attributeName in this.transitions) {\n      const updated = this.transitions[attributeName].update();\n\n      if (updated) {\n        this.needsRedraw = true;\n      }\n    }\n\n    const needsRedraw = this.needsRedraw;\n    this.needsRedraw = false;\n    return needsRedraw;\n  }\n\n  _removeTransition(attributeName) {\n    this.transitions[attributeName].cancel();\n    delete this.transitions[attributeName];\n  }\n\n  _updateAttribute(attributeName, attribute, settings) {\n    const transition = this.transitions[attributeName];\n    let isNew = !transition || transition.type !== settings.type;\n\n    if (isNew) {\n      if (!this.isSupported) {\n        log.warn(\"WebGL2 not supported by this browser. Transition for \".concat(attributeName, \" is disabled.\"))();\n        return;\n      }\n\n      if (transition) {\n        this._removeTransition(attributeName);\n      }\n\n      const TransitionType = TRANSITION_TYPES[settings.type];\n\n      if (TransitionType) {\n        this.transitions[attributeName] = new TransitionType({\n          attribute,\n          timeline: this.timeline,\n          gl: this.gl\n        });\n      } else {\n        log.error(\"unsupported transition type '\".concat(settings.type, \"'\"))();\n        isNew = false;\n      }\n    }\n\n    if (isNew || attribute.needsRedraw()) {\n      this.needsRedraw = true;\n      this.transitions[attributeName].start(settings, this.numInstances);\n    }\n  }\n\n}\n//# sourceMappingURL=attribute-transition-manager.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport Attribute from './attribute';\nimport log from '../../utils/log';\nimport debug from '../../debug';\nimport AttributeTransitionManager from './attribute-transition-manager';\nconst TRACE_INVALIDATE = 'attributeManager.invalidate';\nconst TRACE_UPDATE_START = 'attributeManager.updateStart';\nconst TRACE_UPDATE_END = 'attributeManager.updateEnd';\nconst TRACE_ATTRIBUTE_UPDATE_START = 'attribute.updateStart';\nconst TRACE_ATTRIBUTE_ALLOCATE = 'attribute.allocate';\nconst TRACE_ATTRIBUTE_UPDATE_END = 'attribute.updateEnd';\nexport default class AttributeManager {\n  constructor(gl, {\n    id = 'attribute-manager',\n    stats,\n    timeline\n  } = {}) {\n    _defineProperty(this, \"id\", void 0);\n\n    _defineProperty(this, \"gl\", void 0);\n\n    _defineProperty(this, \"attributes\", void 0);\n\n    _defineProperty(this, \"updateTriggers\", void 0);\n\n    _defineProperty(this, \"needsRedraw\", void 0);\n\n    _defineProperty(this, \"userData\", void 0);\n\n    _defineProperty(this, \"stats\", void 0);\n\n    _defineProperty(this, \"attributeTransitionManager\", void 0);\n\n    this.id = id;\n    this.gl = gl;\n    this.attributes = {};\n    this.updateTriggers = {};\n    this.needsRedraw = true;\n    this.userData = {};\n    this.stats = stats;\n    this.attributeTransitionManager = new AttributeTransitionManager(gl, {\n      id: \"\".concat(id, \"-transitions\"),\n      timeline\n    });\n    Object.seal(this);\n  }\n\n  finalize() {\n    for (const attributeName in this.attributes) {\n      this.attributes[attributeName].delete();\n    }\n\n    this.attributeTransitionManager.finalize();\n  }\n\n  getNeedsRedraw(opts = {\n    clearRedrawFlags: false\n  }) {\n    const redraw = this.needsRedraw;\n    this.needsRedraw = this.needsRedraw && !opts.clearRedrawFlags;\n    return redraw && this.id;\n  }\n\n  setNeedsRedraw() {\n    this.needsRedraw = true;\n  }\n\n  add(attributes) {\n    this._add(attributes);\n  }\n\n  addInstanced(attributes) {\n    this._add(attributes, {\n      instanced: 1\n    });\n  }\n\n  remove(attributeNameArray) {\n    for (const name of attributeNameArray) {\n      if (this.attributes[name] !== undefined) {\n        this.attributes[name].delete();\n        delete this.attributes[name];\n      }\n    }\n  }\n\n  invalidate(triggerName, dataRange) {\n    const invalidatedAttributes = this._invalidateTrigger(triggerName, dataRange);\n\n    debug(TRACE_INVALIDATE, this, triggerName, invalidatedAttributes);\n  }\n\n  invalidateAll(dataRange) {\n    for (const attributeName in this.attributes) {\n      this.attributes[attributeName].setNeedsUpdate(attributeName, dataRange);\n    }\n\n    debug(TRACE_INVALIDATE, this, 'all');\n  }\n\n  update({\n    data,\n    numInstances,\n    startIndices = null,\n    transitions,\n    props = {},\n    buffers = {},\n    context = {}\n  }) {\n    let updated = false;\n    debug(TRACE_UPDATE_START, this);\n\n    if (this.stats) {\n      this.stats.get('Update Attributes').timeStart();\n    }\n\n    for (const attributeName in this.attributes) {\n      const attribute = this.attributes[attributeName];\n      const accessorName = attribute.settings.accessor;\n      attribute.startIndices = startIndices;\n      attribute.numInstances = numInstances;\n\n      if (props[attributeName]) {\n        log.removed(\"props.\".concat(attributeName), \"data.attributes.\".concat(attributeName))();\n      }\n\n      if (attribute.setExternalBuffer(buffers[attributeName])) {} else if (attribute.setBinaryValue(typeof accessorName === 'string' ? buffers[accessorName] : undefined, data.startIndices)) {} else if (typeof accessorName === 'string' && !buffers[accessorName] && attribute.setConstantValue(props[accessorName])) {} else if (attribute.needsUpdate()) {\n        updated = true;\n\n        this._updateAttribute({\n          attribute,\n          numInstances,\n          data,\n          props,\n          context\n        });\n      }\n\n      this.needsRedraw = this.needsRedraw || attribute.needsRedraw();\n    }\n\n    if (updated) {\n      debug(TRACE_UPDATE_END, this, numInstances);\n    }\n\n    if (this.stats) {\n      this.stats.get('Update Attributes').timeEnd();\n    }\n\n    this.attributeTransitionManager.update({\n      attributes: this.attributes,\n      numInstances,\n      transitions\n    });\n  }\n\n  updateTransition() {\n    const {\n      attributeTransitionManager\n    } = this;\n    const transitionUpdated = attributeTransitionManager.run();\n    this.needsRedraw = this.needsRedraw || transitionUpdated;\n    return transitionUpdated;\n  }\n\n  getAttributes() {\n    return this.attributes;\n  }\n\n  getChangedAttributes(opts = {\n    clearChangedFlags: false\n  }) {\n    const {\n      attributes,\n      attributeTransitionManager\n    } = this;\n    const changedAttributes = { ...attributeTransitionManager.getAttributes()\n    };\n\n    for (const attributeName in attributes) {\n      const attribute = attributes[attributeName];\n\n      if (attribute.needsRedraw(opts) && !attributeTransitionManager.hasAttribute(attributeName)) {\n        changedAttributes[attributeName] = attribute;\n      }\n    }\n\n    return changedAttributes;\n  }\n\n  getShaderAttributes(attributes, excludeAttributes = {}) {\n    if (!attributes) {\n      attributes = this.getAttributes();\n    }\n\n    const shaderAttributes = {};\n\n    for (const attributeName in attributes) {\n      if (!excludeAttributes[attributeName]) {\n        Object.assign(shaderAttributes, attributes[attributeName].getShaderAttributes());\n      }\n    }\n\n    return shaderAttributes;\n  }\n\n  _add(attributes, extraProps = {}) {\n    for (const attributeName in attributes) {\n      const attribute = attributes[attributeName];\n      this.attributes[attributeName] = this._createAttribute(attributeName, attribute, extraProps);\n    }\n\n    this._mapUpdateTriggersToAttributes();\n  }\n\n  _createAttribute(name, attribute, extraProps) {\n    const props = { ...attribute,\n      id: name,\n      size: attribute.isIndexed && 1 || attribute.size || 1,\n      divisor: extraProps.instanced ? 1 : attribute.divisor || 0\n    };\n    return new Attribute(this.gl, props);\n  }\n\n  _mapUpdateTriggersToAttributes() {\n    const triggers = {};\n\n    for (const attributeName in this.attributes) {\n      const attribute = this.attributes[attributeName];\n      attribute.getUpdateTriggers().forEach(triggerName => {\n        if (!triggers[triggerName]) {\n          triggers[triggerName] = [];\n        }\n\n        triggers[triggerName].push(attributeName);\n      });\n    }\n\n    this.updateTriggers = triggers;\n  }\n\n  _invalidateTrigger(triggerName, dataRange) {\n    const {\n      attributes,\n      updateTriggers\n    } = this;\n    const invalidatedAttributes = updateTriggers[triggerName];\n\n    if (invalidatedAttributes) {\n      invalidatedAttributes.forEach(name => {\n        const attribute = attributes[name];\n\n        if (attribute) {\n          attribute.setNeedsUpdate(attribute.id, dataRange);\n        }\n      });\n    }\n\n    return invalidatedAttributes;\n  }\n\n  _updateAttribute(opts) {\n    const {\n      attribute,\n      numInstances\n    } = opts;\n    debug(TRACE_ATTRIBUTE_UPDATE_START, attribute);\n\n    if (attribute.constant) {\n      attribute.setConstantValue(attribute.value);\n      return;\n    }\n\n    if (attribute.allocate(numInstances)) {\n      debug(TRACE_ATTRIBUTE_ALLOCATE, attribute, numInstances);\n    }\n\n    const updated = attribute.updateBuffer(opts);\n\n    if (updated) {\n      this.needsRedraw = true;\n      debug(TRACE_ATTRIBUTE_UPDATE_END, attribute, numInstances);\n    }\n  }\n\n}\n//# sourceMappingURL=attribute-manager.js.map","import { lerp } from '@math.gl/core';\nimport Transition from './transition';\nexport default class CPUInterpolationTransition extends Transition {\n  get value() {\n    return this._value;\n  }\n\n  _onUpdate() {\n    const {\n      time,\n      settings: {\n        fromValue,\n        toValue,\n        duration,\n        easing\n      }\n    } = this;\n    const t = easing(time / duration);\n    this._value = lerp(fromValue, toValue, t);\n  }\n\n}\n//# sourceMappingURL=cpu-interpolation-transition.js.map","import Transition from './transition';\nconst EPSILON = 1e-5;\n\nfunction updateSpringElement(prev, cur, dest, damping, stiffness) {\n  const velocity = cur - prev;\n  const delta = dest - cur;\n  const spring = delta * stiffness;\n  const damper = -velocity * damping;\n  return spring + damper + velocity + cur;\n}\n\nfunction updateSpring(prev, cur, dest, damping, stiffness) {\n  if (Array.isArray(dest)) {\n    const next = [];\n\n    for (let i = 0; i < dest.length; i++) {\n      next[i] = updateSpringElement(prev[i], cur[i], dest[i], damping, stiffness);\n    }\n\n    return next;\n  }\n\n  return updateSpringElement(prev, cur, dest, damping, stiffness);\n}\n\nfunction distance(value1, value2) {\n  if (Array.isArray(value1)) {\n    let distanceSquare = 0;\n\n    for (let i = 0; i < value1.length; i++) {\n      const d = value1[i] - value2[i];\n      distanceSquare += d * d;\n    }\n\n    return Math.sqrt(distanceSquare);\n  }\n\n  return Math.abs(value1 - value2);\n}\n\nexport default class CPUSpringTransition extends Transition {\n  get value() {\n    return this._currValue;\n  }\n\n  _onUpdate() {\n    const {\n      fromValue,\n      toValue,\n      damping,\n      stiffness\n    } = this.settings;\n    const {\n      _prevValue = fromValue,\n      _currValue = fromValue\n    } = this;\n    let nextValue = updateSpring(_prevValue, _currValue, toValue, damping, stiffness);\n    const delta = distance(nextValue, toValue);\n    const velocity = distance(nextValue, _currValue);\n\n    if (delta < EPSILON && velocity < EPSILON) {\n      nextValue = toValue;\n      this.end();\n    }\n\n    this._prevValue = _currValue;\n    this._currValue = nextValue;\n  }\n\n}\n//# sourceMappingURL=cpu-spring-transition.js.map","import { normalizeTransitionSettings } from './attribute/attribute-transition-utils';\nimport CPUInterpolationTransition from '../transitions/cpu-interpolation-transition';\nimport CPUSpringTransition from '../transitions/cpu-spring-transition';\nimport log from '../utils/log';\nconst TRANSITION_TYPES = {\n  interpolation: CPUInterpolationTransition,\n  spring: CPUSpringTransition\n};\nexport default class UniformTransitionManager {\n  constructor(timeline) {\n    this.transitions = new Map();\n    this.timeline = timeline;\n  }\n\n  get active() {\n    return this.transitions.size > 0;\n  }\n\n  add(key, fromValue, toValue, settings) {\n    const {\n      transitions\n    } = this;\n\n    if (transitions.has(key)) {\n      const transition = transitions.get(key);\n      const {\n        value = transition.settings.fromValue\n      } = transition;\n      fromValue = value;\n      this.remove(key);\n    }\n\n    settings = normalizeTransitionSettings(settings);\n\n    if (!settings) {\n      return;\n    }\n\n    const TransitionType = TRANSITION_TYPES[settings.type];\n\n    if (!TransitionType) {\n      log.error(\"unsupported transition type '\".concat(settings.type, \"'\"))();\n      return;\n    }\n\n    const transition = new TransitionType(this.timeline);\n    transition.start({ ...settings,\n      fromValue,\n      toValue\n    });\n    transitions.set(key, transition);\n  }\n\n  remove(key) {\n    const {\n      transitions\n    } = this;\n\n    if (transitions.has(key)) {\n      transitions.get(key).cancel();\n      transitions.delete(key);\n    }\n  }\n\n  update() {\n    const propsInTransition = {};\n\n    for (const [key, transition] of this.transitions) {\n      transition.update();\n      propsInTransition[key] = transition.value;\n\n      if (!transition.inProgress) {\n        this.remove(key);\n      }\n    }\n\n    return propsInTransition;\n  }\n\n  clear() {\n    for (const key of this.transitions.keys()) {\n      this.remove(key);\n    }\n  }\n\n}\n//# sourceMappingURL=uniform-transition-manager.js.map","import { COMPONENT_SYMBOL } from './constants';\nexport function validateProps(props) {\n  const propTypes = getPropTypes(props);\n\n  for (const propName in propTypes) {\n    const propType = propTypes[propName];\n    const {\n      validate\n    } = propType;\n\n    if (validate && !validate(props[propName], propType)) {\n      throw new Error(\"Invalid prop \".concat(propName, \": \").concat(props[propName]));\n    }\n  }\n}\nexport function diffProps(props, oldProps) {\n  const propsChangedReason = compareProps({\n    newProps: props,\n    oldProps,\n    propTypes: getPropTypes(props),\n    ignoreProps: {\n      data: null,\n      updateTriggers: null,\n      extensions: null,\n      transitions: null\n    }\n  });\n  const dataChangedReason = diffDataProps(props, oldProps);\n  let updateTriggersChangedReason = false;\n\n  if (!dataChangedReason) {\n    updateTriggersChangedReason = diffUpdateTriggers(props, oldProps);\n  }\n\n  return {\n    dataChanged: dataChangedReason,\n    propsChanged: propsChangedReason,\n    updateTriggersChanged: updateTriggersChangedReason,\n    extensionsChanged: diffExtensions(props, oldProps),\n    transitionsChanged: diffTransitions(props, oldProps)\n  };\n}\n\nfunction diffTransitions(props, oldProps) {\n  if (!props.transitions) {\n    return false;\n  }\n\n  const result = {};\n  const propTypes = getPropTypes(props);\n  let changed = false;\n\n  for (const key in props.transitions) {\n    const propType = propTypes[key];\n    const type = propType && propType.type;\n    const isTransitionable = type === 'number' || type === 'color' || type === 'array';\n\n    if (isTransitionable && comparePropValues(props[key], oldProps[key], propType)) {\n      result[key] = true;\n      changed = true;\n    }\n  }\n\n  return changed ? result : false;\n}\n\nexport function compareProps({\n  newProps,\n  oldProps,\n  ignoreProps = {},\n  propTypes = {},\n  triggerName = 'props'\n}) {\n  if (oldProps === newProps) {\n    return false;\n  }\n\n  if (typeof newProps !== 'object' || newProps === null) {\n    return \"\".concat(triggerName, \" changed shallowly\");\n  }\n\n  if (typeof oldProps !== 'object' || oldProps === null) {\n    return \"\".concat(triggerName, \" changed shallowly\");\n  }\n\n  for (const key of Object.keys(newProps)) {\n    if (!(key in ignoreProps)) {\n      if (!(key in oldProps)) {\n        return \"\".concat(triggerName, \".\").concat(key, \" added\");\n      }\n\n      const changed = comparePropValues(newProps[key], oldProps[key], propTypes[key]);\n\n      if (changed) {\n        return \"\".concat(triggerName, \".\").concat(key, \" \").concat(changed);\n      }\n    }\n  }\n\n  for (const key of Object.keys(oldProps)) {\n    if (!(key in ignoreProps)) {\n      if (!(key in newProps)) {\n        return \"\".concat(triggerName, \".\").concat(key, \" dropped\");\n      }\n\n      if (!Object.hasOwnProperty.call(newProps, key)) {\n        const changed = comparePropValues(newProps[key], oldProps[key], propTypes[key]);\n\n        if (changed) {\n          return \"\".concat(triggerName, \".\").concat(key, \" \").concat(changed);\n        }\n      }\n    }\n  }\n\n  return false;\n}\n\nfunction comparePropValues(newProp, oldProp, propType) {\n  let equal = propType && propType.equal;\n\n  if (equal && !equal(newProp, oldProp, propType)) {\n    return 'changed deeply';\n  }\n\n  if (!equal) {\n    equal = newProp && oldProp && newProp.equals;\n\n    if (equal && !equal.call(newProp, oldProp)) {\n      return 'changed deeply';\n    }\n  }\n\n  if (!equal && oldProp !== newProp) {\n    return 'changed shallowly';\n  }\n\n  return null;\n}\n\nfunction diffDataProps(props, oldProps) {\n  if (oldProps === null) {\n    return 'oldProps is null, initial diff';\n  }\n\n  let dataChanged = false;\n  const {\n    dataComparator,\n    _dataDiff\n  } = props;\n\n  if (dataComparator) {\n    if (!dataComparator(props.data, oldProps.data)) {\n      dataChanged = 'Data comparator detected a change';\n    }\n  } else if (props.data !== oldProps.data) {\n    dataChanged = 'A new data container was supplied';\n  }\n\n  if (dataChanged && _dataDiff) {\n    dataChanged = _dataDiff(props.data, oldProps.data) || dataChanged;\n  }\n\n  return dataChanged;\n}\n\nfunction diffUpdateTriggers(props, oldProps) {\n  if (oldProps === null) {\n    return {\n      all: true\n    };\n  }\n\n  if ('all' in props.updateTriggers) {\n    const diffReason = diffUpdateTrigger(props, oldProps, 'all');\n\n    if (diffReason) {\n      return {\n        all: true\n      };\n    }\n  }\n\n  const reason = {};\n  let changed = false;\n\n  for (const triggerName in props.updateTriggers) {\n    if (triggerName !== 'all') {\n      const diffReason = diffUpdateTrigger(props, oldProps, triggerName);\n\n      if (diffReason) {\n        reason[triggerName] = true;\n        changed = true;\n      }\n    }\n  }\n\n  return changed ? reason : false;\n}\n\nfunction diffExtensions(props, oldProps) {\n  if (oldProps === null) {\n    return true;\n  }\n\n  const oldExtensions = oldProps.extensions;\n  const {\n    extensions\n  } = props;\n\n  if (extensions === oldExtensions) {\n    return false;\n  }\n\n  if (!oldExtensions || !extensions) {\n    return true;\n  }\n\n  if (extensions.length !== oldExtensions.length) {\n    return true;\n  }\n\n  for (let i = 0; i < extensions.length; i++) {\n    if (!extensions[i].equals(oldExtensions[i])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction diffUpdateTrigger(props, oldProps, triggerName) {\n  let newTriggers = props.updateTriggers[triggerName];\n  newTriggers = newTriggers === undefined || newTriggers === null ? {} : newTriggers;\n  let oldTriggers = oldProps.updateTriggers[triggerName];\n  oldTriggers = oldTriggers === undefined || oldTriggers === null ? {} : oldTriggers;\n  const diffReason = compareProps({\n    oldProps: oldTriggers,\n    newProps: newTriggers,\n    triggerName\n  });\n  return diffReason;\n}\n\nfunction getPropTypes(props) {\n  const layer = props[COMPONENT_SYMBOL];\n  const LayerType = layer && layer.constructor;\n  return LayerType ? LayerType._propTypes : {};\n}\n//# sourceMappingURL=props.js.map","const ERR_NOT_OBJECT = 'count(): argument not an object';\nconst ERR_NOT_CONTAINER = 'count(): argument not a container';\nexport function count(container) {\n  if (!isObject(container)) {\n    throw new Error(ERR_NOT_OBJECT);\n  }\n\n  if (typeof container.count === 'function') {\n    return container.count();\n  }\n\n  if (Number.isFinite(container.size)) {\n    return container.size;\n  }\n\n  if (Number.isFinite(container.length)) {\n    return container.length;\n  }\n\n  if (isPlainObject(container)) {\n    return Object.keys(container).length;\n  }\n\n  throw new Error(ERR_NOT_CONTAINER);\n}\n\nfunction isPlainObject(value) {\n  return value !== null && typeof value === 'object' && value.constructor === Object;\n}\n\nfunction isObject(value) {\n  return value !== null && typeof value === 'object';\n}\n//# sourceMappingURL=count.js.map","export function mergeShaders(target, source) {\n  if (!source) {\n    return target;\n  }\n\n  const result = { ...target,\n    ...source\n  };\n\n  if ('defines' in source) {\n    result.defines = { ...target.defines,\n      ...source.defines\n    };\n  }\n\n  if ('modules' in source) {\n    result.modules = (target.modules || []).concat(source.modules);\n\n    if (source.modules.some(module => module.name === 'project64')) {\n      const index = result.modules.findIndex(module => module.name === 'project32');\n\n      if (index >= 0) {\n        result.modules.splice(index, 1);\n      }\n    }\n  }\n\n  if ('inject' in source) {\n    if (!target.inject) {\n      result.inject = source.inject;\n    } else {\n      const mergedInjection = { ...target.inject\n      };\n\n      for (const key in source.inject) {\n        mergedInjection[key] = (mergedInjection[key] || '') + source.inject[key];\n      }\n\n      result.inject = mergedInjection;\n    }\n  }\n\n  return result;\n}\n//# sourceMappingURL=shader.js.map","import { Texture2D } from '@luma.gl/core';\nconst DEFAULT_TEXTURE_PARAMETERS = {\n  [10241]: 9987,\n  [10240]: 9729,\n  [10242]: 33071,\n  [10243]: 33071\n};\nconst internalTextures = {};\nexport function createTexture(layer, image) {\n  const gl = layer.context && layer.context.gl;\n\n  if (!gl || !image) {\n    return null;\n  }\n\n  if (image instanceof Texture2D) {\n    return image;\n  } else if (image.constructor && image.constructor.name !== 'Object') {\n    image = {\n      data: image\n    };\n  }\n\n  let specialTextureParameters = null;\n\n  if (image.compressed) {\n    specialTextureParameters = {\n      [10241]: image.data.length > 1 ? 9985 : 9729\n    };\n  }\n\n  const texture = new Texture2D(gl, { ...image,\n    parameters: { ...DEFAULT_TEXTURE_PARAMETERS,\n      ...specialTextureParameters,\n      ...layer.props.textureParameters\n    }\n  });\n  internalTextures[texture.id] = true;\n  return texture;\n}\nexport function destroyTexture(texture) {\n  if (!texture || !(texture instanceof Texture2D)) {\n    return;\n  }\n\n  if (internalTextures[texture.id]) {\n    texture.delete();\n    delete internalTextures[texture.id];\n  }\n}\n//# sourceMappingURL=texture.js.map","import { createTexture, destroyTexture } from '../utils/texture';\nimport { deepEqual } from '../utils/deep-equal';\nconst TYPE_DEFINITIONS = {\n  boolean: {\n    validate(value, propType) {\n      return true;\n    },\n\n    equal(value1, value2, propType) {\n      return Boolean(value1) === Boolean(value2);\n    }\n\n  },\n  number: {\n    validate(value, propType) {\n      return Number.isFinite(value) && (!('max' in propType) || value <= propType.max) && (!('min' in propType) || value >= propType.min);\n    }\n\n  },\n  color: {\n    validate(value, propType) {\n      return propType.optional && !value || isArray(value) && (value.length === 3 || value.length === 4);\n    },\n\n    equal(value1, value2, propType) {\n      return arrayEqual(value1, value2);\n    }\n\n  },\n  accessor: {\n    validate(value, propType) {\n      const valueType = getTypeOf(value);\n      return valueType === 'function' || valueType === getTypeOf(propType.value);\n    },\n\n    equal(value1, value2, propType) {\n      if (typeof value2 === 'function') {\n        return true;\n      }\n\n      return arrayEqual(value1, value2);\n    }\n\n  },\n  array: {\n    validate(value, propType) {\n      return propType.optional && !value || isArray(value);\n    },\n\n    equal(value1, value2, propType) {\n      return propType.compare ? arrayEqual(value1, value2) : value1 === value2;\n    }\n\n  },\n  object: {\n    equal(value1, value2, propType) {\n      return propType.compare ? deepEqual(value1, value2) : value1 === value2;\n    }\n\n  },\n  function: {\n    validate(value, propType) {\n      return propType.optional && !value || typeof value === 'function';\n    },\n\n    equal(value1, value2, propType) {\n      return !propType.compare || value1 === value2;\n    }\n\n  },\n  data: {\n    transform: (value, propType, component) => {\n      const {\n        dataTransform\n      } = component.props;\n      return dataTransform && value ? dataTransform(value) : value;\n    }\n  },\n  image: {\n    transform: (value, propType, component) => {\n      return createTexture(component, value);\n    },\n    release: value => {\n      destroyTexture(value);\n    }\n  }\n};\n\nfunction arrayEqual(array1, array2) {\n  if (array1 === array2) {\n    return true;\n  }\n\n  if (!isArray(array1) || !isArray(array2)) {\n    return false;\n  }\n\n  const len = array1.length;\n\n  if (len !== array2.length) {\n    return false;\n  }\n\n  for (let i = 0; i < len; i++) {\n    if (array1[i] !== array2[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function parsePropTypes(propDefs) {\n  const propTypes = {};\n  const defaultProps = {};\n  const deprecatedProps = {};\n\n  for (const [propName, propDef] of Object.entries(propDefs)) {\n    const deprecated = propDef === null || propDef === void 0 ? void 0 : propDef.deprecatedFor;\n\n    if (deprecated) {\n      deprecatedProps[propName] = Array.isArray(deprecated) ? deprecated : [deprecated];\n    } else {\n      const propType = parsePropType(propName, propDef);\n      propTypes[propName] = propType;\n      defaultProps[propName] = propType.value;\n    }\n  }\n\n  return {\n    propTypes,\n    defaultProps,\n    deprecatedProps\n  };\n}\n\nfunction parsePropType(name, propDef) {\n  switch (getTypeOf(propDef)) {\n    case 'object':\n      return normalizePropDefinition(name, propDef);\n\n    case 'array':\n      return normalizePropDefinition(name, {\n        type: 'array',\n        value: propDef,\n        compare: false\n      });\n\n    case 'boolean':\n      return normalizePropDefinition(name, {\n        type: 'boolean',\n        value: propDef\n      });\n\n    case 'number':\n      return normalizePropDefinition(name, {\n        type: 'number',\n        value: propDef\n      });\n\n    case 'function':\n      return normalizePropDefinition(name, {\n        type: 'function',\n        value: propDef,\n        compare: true\n      });\n\n    default:\n      return {\n        name,\n        type: 'unknown',\n        value: propDef\n      };\n  }\n}\n\nfunction normalizePropDefinition(name, propDef) {\n  if (!('type' in propDef)) {\n    if (!('value' in propDef)) {\n      return {\n        name,\n        type: 'object',\n        value: propDef\n      };\n    }\n\n    return {\n      name,\n      type: getTypeOf(propDef.value),\n      ...propDef\n    };\n  }\n\n  return {\n    name,\n    ...TYPE_DEFINITIONS[propDef.type],\n    ...propDef\n  };\n}\n\nfunction isArray(value) {\n  return Array.isArray(value) || ArrayBuffer.isView(value);\n}\n\nfunction getTypeOf(value) {\n  if (isArray(value)) {\n    return 'array';\n  }\n\n  if (value === null) {\n    return 'null';\n  }\n\n  return typeof value;\n}\n//# sourceMappingURL=prop-types.js.map","import log from '../utils/log';\nimport { isAsyncIterable } from '../utils/iterable-utils';\nimport { parsePropTypes } from './prop-types';\nimport { COMPONENT_SYMBOL, ASYNC_ORIGINAL_SYMBOL, ASYNC_RESOLVED_SYMBOL, ASYNC_DEFAULTS_SYMBOL } from './constants';\nexport function createProps(component, propObjects) {\n  const propsPrototype = getPropsPrototype(component.constructor);\n  const propsInstance = Object.create(propsPrototype);\n  propsInstance[COMPONENT_SYMBOL] = component;\n  propsInstance[ASYNC_ORIGINAL_SYMBOL] = {};\n  propsInstance[ASYNC_RESOLVED_SYMBOL] = {};\n\n  for (let i = 0; i < propObjects.length; ++i) {\n    const props = propObjects[i];\n\n    for (const key in props) {\n      propsInstance[key] = props[key];\n    }\n  }\n\n  Object.freeze(propsInstance);\n  return propsInstance;\n}\n\nfunction getPropsPrototype(componentClass) {\n  const defaultProps = getOwnProperty(componentClass, '_mergedDefaultProps');\n\n  if (!defaultProps) {\n    createPropsPrototypeAndTypes(componentClass);\n    return componentClass._mergedDefaultProps;\n  }\n\n  return defaultProps;\n}\n\nfunction createPropsPrototypeAndTypes(componentClass) {\n  const parent = componentClass.prototype;\n\n  if (!parent) {\n    return;\n  }\n\n  const parentClass = Object.getPrototypeOf(componentClass);\n  const parentDefaultProps = getPropsPrototype(parentClass);\n  const componentDefaultProps = getOwnProperty(componentClass, 'defaultProps') || {};\n  const componentPropDefs = parsePropTypes(componentDefaultProps);\n  const defaultProps = createPropsPrototype(componentPropDefs.defaultProps, parentDefaultProps, componentClass);\n  const propTypes = { ...parentClass._propTypes,\n    ...componentPropDefs.propTypes\n  };\n  addAsyncPropsToPropPrototype(defaultProps, propTypes);\n  const deprecatedProps = { ...parentClass._deprecatedProps,\n    ...componentPropDefs.deprecatedProps\n  };\n  addDeprecatedPropsToPropPrototype(defaultProps, deprecatedProps);\n  componentClass._mergedDefaultProps = defaultProps;\n  componentClass._propTypes = propTypes;\n  componentClass._deprecatedProps = deprecatedProps;\n}\n\nfunction createPropsPrototype(props, parentProps, componentClass) {\n  const defaultProps = Object.create(null);\n  Object.assign(defaultProps, parentProps, props);\n  const id = getComponentName(componentClass);\n  delete props.id;\n  Object.defineProperties(defaultProps, {\n    id: {\n      writable: true,\n      value: id\n    }\n  });\n  return defaultProps;\n}\n\nfunction addDeprecatedPropsToPropPrototype(defaultProps, deprecatedProps) {\n  for (const propName in deprecatedProps) {\n    Object.defineProperty(defaultProps, propName, {\n      enumerable: false,\n\n      set(newValue) {\n        const nameStr = \"\".concat(this.id, \": \").concat(propName);\n\n        for (const newPropName of deprecatedProps[propName]) {\n          if (!hasOwnProperty(this, newPropName)) {\n            this[newPropName] = newValue;\n          }\n        }\n\n        log.deprecated(nameStr, deprecatedProps[propName].join('/'))();\n      }\n\n    });\n  }\n}\n\nfunction addAsyncPropsToPropPrototype(defaultProps, propTypes) {\n  const defaultValues = {};\n  const descriptors = {};\n\n  for (const propName in propTypes) {\n    const propType = propTypes[propName];\n    const {\n      name,\n      value\n    } = propType;\n\n    if (propType.async) {\n      defaultValues[name] = value;\n      descriptors[name] = getDescriptorForAsyncProp(name);\n    }\n  }\n\n  defaultProps[ASYNC_DEFAULTS_SYMBOL] = defaultValues;\n  defaultProps[ASYNC_ORIGINAL_SYMBOL] = {};\n  Object.defineProperties(defaultProps, descriptors);\n}\n\nfunction getDescriptorForAsyncProp(name) {\n  return {\n    enumerable: true,\n\n    set(newValue) {\n      if (typeof newValue === 'string' || newValue instanceof Promise || isAsyncIterable(newValue)) {\n        this[ASYNC_ORIGINAL_SYMBOL][name] = newValue;\n      } else {\n        this[ASYNC_RESOLVED_SYMBOL][name] = newValue;\n      }\n    },\n\n    get() {\n      if (this[ASYNC_RESOLVED_SYMBOL]) {\n        if (name in this[ASYNC_RESOLVED_SYMBOL]) {\n          const value = this[ASYNC_RESOLVED_SYMBOL][name];\n          return value || this[ASYNC_DEFAULTS_SYMBOL][name];\n        }\n\n        if (name in this[ASYNC_ORIGINAL_SYMBOL]) {\n          const state = this[COMPONENT_SYMBOL] && this[COMPONENT_SYMBOL].internalState;\n\n          if (state && state.hasAsyncProp(name)) {\n            return state.getAsyncProp(name) || this[ASYNC_DEFAULTS_SYMBOL][name];\n          }\n        }\n      }\n\n      return this[ASYNC_DEFAULTS_SYMBOL][name];\n    }\n\n  };\n}\n\nfunction hasOwnProperty(object, prop) {\n  return Object.prototype.hasOwnProperty.call(object, prop);\n}\n\nfunction getOwnProperty(object, prop) {\n  return hasOwnProperty(object, prop) && object[prop];\n}\n\nfunction getComponentName(componentClass) {\n  const componentName = getOwnProperty(componentClass, 'layerName') || getOwnProperty(componentClass, 'componentName');\n\n  if (!componentName) {\n    log.once(0, \"\".concat(componentClass.name, \".componentName not specified\"))();\n  }\n\n  return componentName || componentClass.name;\n}\n//# sourceMappingURL=create-props.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { COMPONENT_SYMBOL, ASYNC_ORIGINAL_SYMBOL, ASYNC_RESOLVED_SYMBOL, ASYNC_DEFAULTS_SYMBOL } from './constants';\nimport { createProps } from './create-props';\nlet counter = 0;\nexport default class Component {\n  constructor(...propObjects) {\n    _defineProperty(this, \"id\", void 0);\n\n    _defineProperty(this, \"props\", void 0);\n\n    _defineProperty(this, \"count\", void 0);\n\n    this.props = createProps(this, propObjects);\n    this.id = this.props.id;\n    this.count = counter++;\n  }\n\n  clone(newProps) {\n    const {\n      props\n    } = this;\n    const asyncProps = {};\n\n    for (const key in props[ASYNC_DEFAULTS_SYMBOL]) {\n      if (key in props[ASYNC_RESOLVED_SYMBOL]) {\n        asyncProps[key] = props[ASYNC_RESOLVED_SYMBOL][key];\n      } else if (key in props[ASYNC_ORIGINAL_SYMBOL]) {\n        asyncProps[key] = props[ASYNC_ORIGINAL_SYMBOL][key];\n      }\n    }\n\n    return new this.constructor({ ...props,\n      ...asyncProps,\n      ...newProps\n    });\n  }\n\n}\n\n_defineProperty(Component, \"componentName\", 'Component');\n\n_defineProperty(Component, \"defaultProps\", {});\n//# sourceMappingURL=component.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { isAsyncIterable } from '../utils/iterable-utils';\nimport { ASYNC_ORIGINAL_SYMBOL, ASYNC_RESOLVED_SYMBOL, ASYNC_DEFAULTS_SYMBOL } from './constants';\nconst EMPTY_PROPS = Object.freeze({});\nexport default class ComponentState {\n  constructor(component) {\n    _defineProperty(this, \"component\", void 0);\n\n    _defineProperty(this, \"onAsyncPropUpdated\", void 0);\n\n    _defineProperty(this, \"asyncProps\", void 0);\n\n    _defineProperty(this, \"oldProps\", void 0);\n\n    _defineProperty(this, \"oldAsyncProps\", void 0);\n\n    this.component = component;\n    this.asyncProps = {};\n\n    this.onAsyncPropUpdated = () => {};\n\n    this.oldProps = null;\n    this.oldAsyncProps = null;\n  }\n\n  finalize() {\n    for (const propName in this.asyncProps) {\n      const asyncProp = this.asyncProps[propName];\n\n      if (asyncProp && asyncProp.type && asyncProp.type.release) {\n        asyncProp.type.release(asyncProp.resolvedValue, asyncProp.type, this.component);\n      }\n    }\n  }\n\n  getOldProps() {\n    return this.oldAsyncProps || this.oldProps || EMPTY_PROPS;\n  }\n\n  resetOldProps() {\n    this.oldAsyncProps = null;\n    this.oldProps = this.component.props;\n  }\n\n  hasAsyncProp(propName) {\n    return propName in this.asyncProps;\n  }\n\n  getAsyncProp(propName) {\n    const asyncProp = this.asyncProps[propName];\n    return asyncProp && asyncProp.resolvedValue;\n  }\n\n  isAsyncPropLoading(propName) {\n    if (propName) {\n      const asyncProp = this.asyncProps[propName];\n      return Boolean(asyncProp && asyncProp.pendingLoadCount > 0 && asyncProp.pendingLoadCount !== asyncProp.resolvedLoadCount);\n    }\n\n    for (const key in this.asyncProps) {\n      if (this.isAsyncPropLoading(key)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  reloadAsyncProp(propName, value) {\n    this._watchPromise(propName, Promise.resolve(value));\n  }\n\n  setAsyncProps(props) {\n    const resolvedValues = props[ASYNC_RESOLVED_SYMBOL] || {};\n    const originalValues = props[ASYNC_ORIGINAL_SYMBOL] || props;\n    const defaultValues = props[ASYNC_DEFAULTS_SYMBOL] || {};\n\n    for (const propName in resolvedValues) {\n      const value = resolvedValues[propName];\n\n      this._createAsyncPropData(propName, defaultValues[propName]);\n\n      this._updateAsyncProp(propName, value);\n\n      resolvedValues[propName] = this.getAsyncProp(propName);\n    }\n\n    for (const propName in originalValues) {\n      const value = originalValues[propName];\n\n      this._createAsyncPropData(propName, defaultValues[propName]);\n\n      this._updateAsyncProp(propName, value);\n    }\n  }\n\n  _fetch(propName, url) {\n    return null;\n  }\n\n  _onResolve(propName, value) {}\n\n  _onError(propName, error) {}\n\n  _updateAsyncProp(propName, value) {\n    if (!this._didAsyncInputValueChange(propName, value)) {\n      return;\n    }\n\n    if (typeof value === 'string') {\n      value = this._fetch(propName, value);\n    }\n\n    if (value instanceof Promise) {\n      this._watchPromise(propName, value);\n\n      return;\n    }\n\n    if (isAsyncIterable(value)) {\n      this._resolveAsyncIterable(propName, value);\n\n      return;\n    }\n\n    this._setPropValue(propName, value);\n  }\n\n  _freezeAsyncOldProps() {\n    if (!this.oldAsyncProps && this.oldProps) {\n      this.oldAsyncProps = Object.create(this.oldProps);\n\n      for (const propName in this.asyncProps) {\n        Object.defineProperty(this.oldAsyncProps, propName, {\n          enumerable: true,\n          value: this.oldProps[propName]\n        });\n      }\n    }\n  }\n\n  _didAsyncInputValueChange(propName, value) {\n    const asyncProp = this.asyncProps[propName];\n\n    if (value === asyncProp.resolvedValue || value === asyncProp.lastValue) {\n      return false;\n    }\n\n    asyncProp.lastValue = value;\n    return true;\n  }\n\n  _setPropValue(propName, value) {\n    this._freezeAsyncOldProps();\n\n    const asyncProp = this.asyncProps[propName];\n\n    if (asyncProp) {\n      value = this._postProcessValue(asyncProp, value);\n      asyncProp.resolvedValue = value;\n      asyncProp.pendingLoadCount++;\n      asyncProp.resolvedLoadCount = asyncProp.pendingLoadCount;\n    }\n  }\n\n  _setAsyncPropValue(propName, value, loadCount) {\n    const asyncProp = this.asyncProps[propName];\n\n    if (asyncProp && loadCount >= asyncProp.resolvedLoadCount && value !== undefined) {\n      this._freezeAsyncOldProps();\n\n      asyncProp.resolvedValue = value;\n      asyncProp.resolvedLoadCount = loadCount;\n      this.onAsyncPropUpdated(propName, value);\n    }\n  }\n\n  _watchPromise(propName, promise) {\n    const asyncProp = this.asyncProps[propName];\n\n    if (asyncProp) {\n      asyncProp.pendingLoadCount++;\n      const loadCount = asyncProp.pendingLoadCount;\n      promise.then(data => {\n        data = this._postProcessValue(asyncProp, data);\n\n        this._setAsyncPropValue(propName, data, loadCount);\n\n        this._onResolve(propName, data);\n      }).catch(error => {\n        this._onError(propName, error);\n      });\n    }\n  }\n\n  async _resolveAsyncIterable(propName, iterable) {\n    if (propName !== 'data') {\n      this._setPropValue(propName, iterable);\n\n      return;\n    }\n\n    const asyncProp = this.asyncProps[propName];\n\n    if (!asyncProp) {\n      return;\n    }\n\n    asyncProp.pendingLoadCount++;\n    const loadCount = asyncProp.pendingLoadCount;\n    let data = [];\n    let count = 0;\n\n    for await (const chunk of iterable) {\n      const {\n        dataTransform\n      } = this.component.props;\n\n      if (dataTransform) {\n        data = dataTransform(chunk, data);\n      } else {\n        data = data.concat(chunk);\n      }\n\n      Object.defineProperty(data, '__diff', {\n        enumerable: false,\n        value: [{\n          startRow: count,\n          endRow: data.length\n        }]\n      });\n      count = data.length;\n\n      this._setAsyncPropValue(propName, data, loadCount);\n    }\n\n    this._onResolve(propName, data);\n  }\n\n  _postProcessValue(asyncProp, value) {\n    const propType = asyncProp.type;\n\n    if (propType) {\n      if (propType.release) {\n        propType.release(asyncProp.resolvedValue, propType, this.component);\n      }\n\n      if (propType.transform) {\n        return propType.transform(value, propType, this.component);\n      }\n    }\n\n    return value;\n  }\n\n  _createAsyncPropData(propName, defaultValue) {\n    const asyncProp = this.asyncProps[propName];\n\n    if (!asyncProp) {\n      const propTypes = this.component && this.component.constructor._propTypes;\n      this.asyncProps[propName] = {\n        type: propTypes && propTypes[propName],\n        lastValue: null,\n        resolvedValue: defaultValue,\n        pendingLoadCount: 0,\n        resolvedLoadCount: 0\n      };\n    }\n  }\n\n}\n//# sourceMappingURL=component-state.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport ComponentState from '../lifecycle/component-state';\nexport default class LayerState extends ComponentState {\n  constructor({\n    attributeManager,\n    layer\n  }) {\n    super(layer);\n\n    _defineProperty(this, \"attributeManager\", void 0);\n\n    _defineProperty(this, \"needsRedraw\", void 0);\n\n    _defineProperty(this, \"needsUpdate\", void 0);\n\n    _defineProperty(this, \"subLayers\", void 0);\n\n    _defineProperty(this, \"usesPickingColorCache\", void 0);\n\n    _defineProperty(this, \"changeFlags\", void 0);\n\n    _defineProperty(this, \"viewport\", void 0);\n\n    _defineProperty(this, \"uniformTransitions\", void 0);\n\n    _defineProperty(this, \"propsInTransition\", void 0);\n\n    this.attributeManager = attributeManager;\n    this.needsRedraw = true;\n    this.needsUpdate = true;\n    this.subLayers = null;\n    this.usesPickingColorCache = false;\n  }\n\n  get layer() {\n    return this.component;\n  }\n\n  set layer(layer) {\n    this.component = layer;\n  }\n\n  _fetch(propName, url) {\n    const fetch = this.component.props.fetch;\n\n    if (fetch) {\n      return fetch(url, {\n        propName,\n        layer: this.layer\n      });\n    }\n\n    return super._fetch(propName, url);\n  }\n\n  _onResolve(propName, value) {\n    const onDataLoad = this.component.props.onDataLoad;\n\n    if (propName === 'data' && onDataLoad) {\n      onDataLoad(value, {\n        propName,\n        layer: this.layer\n      });\n    }\n  }\n\n  _onError(propName, error) {\n    this.layer.raiseError(error, \"loading \".concat(propName, \" of \").concat(this.layer));\n  }\n\n}\n//# sourceMappingURL=layer-state.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { COORDINATE_SYSTEM, OPERATION } from './constants';\nimport AttributeManager from './attribute/attribute-manager';\nimport UniformTransitionManager from './uniform-transition-manager';\nimport { diffProps, validateProps } from '../lifecycle/props';\nimport { LIFECYCLE } from '../lifecycle/constants';\nimport { count } from '../utils/count';\nimport log from '../utils/log';\nimport debug from '../debug';\nimport { withParameters, setParameters } from '@luma.gl/core';\nimport assert from '../utils/assert';\nimport memoize from '../utils/memoize';\nimport { mergeShaders } from '../utils/shader';\nimport { projectPosition, getWorldPosition } from '../shaderlib/project/project-functions';\nimport typedArrayManager from '../utils/typed-array-manager';\nimport Component from '../lifecycle/component';\nimport LayerState from './layer-state';\nimport { worldToPixels } from '@math.gl/web-mercator';\nimport { load } from '@loaders.gl/core';\nconst TRACE_CHANGE_FLAG = 'layer.changeFlag';\nconst TRACE_INITIALIZE = 'layer.initialize';\nconst TRACE_UPDATE = 'layer.update';\nconst TRACE_FINALIZE = 'layer.finalize';\nconst TRACE_MATCHED = 'layer.matched';\nconst MAX_PICKING_COLOR_CACHE_SIZE = 2 ** 24 - 1;\nconst EMPTY_ARRAY = Object.freeze([]);\nconst areViewportsEqual = memoize(({\n  oldViewport,\n  viewport\n}) => {\n  return oldViewport.equals(viewport);\n});\nlet pickingColorCache = new Uint8ClampedArray(0);\nconst defaultProps = {\n  data: {\n    type: 'data',\n    value: EMPTY_ARRAY,\n    async: true\n  },\n  dataComparator: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  _dataDiff: {\n    type: 'function',\n    value: data => data && data.__diff,\n    compare: false,\n    optional: true\n  },\n  dataTransform: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onDataLoad: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onError: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  fetch: {\n    type: 'function',\n    value: (url, {\n      propName,\n      layer,\n      loaders,\n      loadOptions,\n      signal\n    }) => {\n      const {\n        resourceManager\n      } = layer.context;\n      loadOptions = loadOptions || layer.getLoadOptions();\n      loaders = loaders || layer.props.loaders;\n\n      if (signal) {\n        var _loadOptions;\n\n        loadOptions = { ...loadOptions,\n          fetch: { ...((_loadOptions = loadOptions) === null || _loadOptions === void 0 ? void 0 : _loadOptions.fetch),\n            signal\n          }\n        };\n      }\n\n      let inResourceManager = resourceManager.contains(url);\n\n      if (!inResourceManager && !loadOptions) {\n        resourceManager.add({\n          resourceId: url,\n          data: load(url, loaders),\n          persistent: false\n        });\n        inResourceManager = true;\n      }\n\n      if (inResourceManager) {\n        return resourceManager.subscribe({\n          resourceId: url,\n          onChange: data => {\n            var _layer$internalState;\n\n            return (_layer$internalState = layer.internalState) === null || _layer$internalState === void 0 ? void 0 : _layer$internalState.reloadAsyncProp(propName, data);\n          },\n          consumerId: layer.id,\n          requestId: propName\n        });\n      }\n\n      return load(url, loaders, loadOptions);\n    },\n    compare: false\n  },\n  updateTriggers: {},\n  visible: true,\n  pickable: false,\n  opacity: {\n    type: 'number',\n    min: 0,\n    max: 1,\n    value: 1\n  },\n  operation: OPERATION.DRAW,\n  onHover: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onClick: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onDragStart: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onDrag: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onDragEnd: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  coordinateSystem: COORDINATE_SYSTEM.DEFAULT,\n  coordinateOrigin: {\n    type: 'array',\n    value: [0, 0, 0],\n    compare: true\n  },\n  modelMatrix: {\n    type: 'array',\n    value: null,\n    compare: true,\n    optional: true\n  },\n  wrapLongitude: false,\n  positionFormat: 'XYZ',\n  colorFormat: 'RGBA',\n  parameters: {\n    type: 'object',\n    value: {},\n    optional: true,\n    compare: true\n  },\n  transitions: null,\n  extensions: [],\n  loaders: {\n    type: 'array',\n    value: [],\n    optional: true,\n    compare: true\n  },\n  getPolygonOffset: {\n    type: 'function',\n    value: ({\n      layerIndex\n    }) => [0, -layerIndex * 100],\n    compare: false\n  },\n  highlightedObjectIndex: null,\n  autoHighlight: false,\n  highlightColor: {\n    type: 'accessor',\n    value: [0, 0, 128, 128]\n  }\n};\nexport default class Layer extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"internalState\", null);\n\n    _defineProperty(this, \"lifecycle\", LIFECYCLE.NO_STATE);\n\n    _defineProperty(this, \"context\", void 0);\n\n    _defineProperty(this, \"state\", void 0);\n\n    _defineProperty(this, \"parent\", null);\n  }\n\n  get root() {\n    let layer = this;\n\n    while (layer.parent) {\n      layer = layer.parent;\n    }\n\n    return layer;\n  }\n\n  toString() {\n    const className = this.constructor.layerName || this.constructor.name;\n    return \"\".concat(className, \"({id: '\").concat(this.props.id, \"'})\");\n  }\n\n  project(xyz) {\n    assert(this.internalState);\n    const viewport = this.internalState.viewport || this.context.viewport;\n    const worldPosition = getWorldPosition(xyz, {\n      viewport,\n      modelMatrix: this.props.modelMatrix,\n      coordinateOrigin: this.props.coordinateOrigin,\n      coordinateSystem: this.props.coordinateSystem\n    });\n    const [x, y, z] = worldToPixels(worldPosition, viewport.pixelProjectionMatrix);\n    return xyz.length === 2 ? [x, y] : [x, y, z];\n  }\n\n  unproject(xy) {\n    assert(this.internalState);\n    const viewport = this.internalState.viewport || this.context.viewport;\n    return viewport.unproject(xy);\n  }\n\n  projectPosition(xyz, params) {\n    assert(this.internalState);\n    const viewport = this.internalState.viewport || this.context.viewport;\n    return projectPosition(xyz, {\n      viewport,\n      modelMatrix: this.props.modelMatrix,\n      coordinateOrigin: this.props.coordinateOrigin,\n      coordinateSystem: this.props.coordinateSystem,\n      ...params\n    });\n  }\n\n  get isComposite() {\n    return false;\n  }\n\n  setState(partialState) {\n    this.setChangeFlags({\n      stateChanged: true\n    });\n    Object.assign(this.state, partialState);\n    this.setNeedsRedraw();\n  }\n\n  setNeedsRedraw() {\n    if (this.internalState) {\n      this.internalState.needsRedraw = true;\n    }\n  }\n\n  setNeedsUpdate() {\n    if (this.internalState) {\n      this.context.layerManager.setNeedsUpdate(String(this));\n      this.internalState.needsUpdate = true;\n    }\n  }\n\n  get isLoaded() {\n    return this.internalState ? !this.internalState.isAsyncPropLoading() : false;\n  }\n\n  get wrapLongitude() {\n    return this.props.wrapLongitude;\n  }\n\n  isPickable() {\n    return this.props.pickable && this.props.visible;\n  }\n\n  getModels() {\n    return this.state && (this.state.models || this.state.model && [this.state.model]) || [];\n  }\n\n  setModuleParameters(moduleParameters) {\n    for (const model of this.getModels()) {\n      model.updateModuleSettings(moduleParameters);\n    }\n  }\n\n  getAttributeManager() {\n    return this.internalState && this.internalState.attributeManager;\n  }\n\n  getCurrentLayer() {\n    return this.internalState && this.internalState.layer;\n  }\n\n  getLoadOptions() {\n    return this.props.loadOptions;\n  }\n\n  use64bitPositions() {\n    const {\n      coordinateSystem\n    } = this.props;\n    return coordinateSystem === COORDINATE_SYSTEM.DEFAULT || coordinateSystem === COORDINATE_SYSTEM.LNGLAT || coordinateSystem === COORDINATE_SYSTEM.CARTESIAN;\n  }\n\n  onHover(info, pickingEvent) {\n    if (this.props.onHover) {\n      return this.props.onHover(info, pickingEvent) || false;\n    }\n\n    return false;\n  }\n\n  onClick(info, pickingEvent) {\n    if (this.props.onClick) {\n      return this.props.onClick(info, pickingEvent) || false;\n    }\n\n    return false;\n  }\n\n  nullPickingColor() {\n    return [0, 0, 0];\n  }\n\n  encodePickingColor(i, target = []) {\n    target[0] = i + 1 & 255;\n    target[1] = i + 1 >> 8 & 255;\n    target[2] = i + 1 >> 8 >> 8 & 255;\n    return target;\n  }\n\n  decodePickingColor(color) {\n    assert(color instanceof Uint8Array);\n    const [i1, i2, i3] = color;\n    const index = i1 + i2 * 256 + i3 * 65536 - 1;\n    return index;\n  }\n\n  getNumInstances() {\n    if (Number.isFinite(this.props.numInstances)) {\n      return this.props.numInstances;\n    }\n\n    if (this.state && this.state.numInstances !== undefined) {\n      return this.state.numInstances;\n    }\n\n    return count(this.props.data);\n  }\n\n  getStartIndices() {\n    if (this.props.startIndices) {\n      return this.props.startIndices;\n    }\n\n    if (this.state && this.state.startIndices) {\n      return this.state.startIndices;\n    }\n\n    return null;\n  }\n\n  getBounds() {\n    var _ref;\n\n    const attributeManager = this.getAttributeManager();\n    if (!attributeManager) return null;\n    const {\n      positions,\n      instancePositions\n    } = attributeManager.attributes;\n    return (_ref = positions || instancePositions) === null || _ref === void 0 ? void 0 : _ref.getBounds();\n  }\n\n  getShaders(shaders) {\n    for (const extension of this.props.extensions) {\n      shaders = mergeShaders(shaders, extension.getShaders.call(this, extension));\n    }\n\n    return shaders;\n  }\n\n  shouldUpdateState(params) {\n    return params.changeFlags.propsOrDataChanged;\n  }\n\n  updateState(params) {\n    const attributeManager = this.getAttributeManager();\n    const {\n      dataChanged\n    } = params.changeFlags;\n\n    if (dataChanged && attributeManager) {\n      if (Array.isArray(dataChanged)) {\n        for (const dataRange of dataChanged) {\n          attributeManager.invalidateAll(dataRange);\n        }\n      } else {\n        attributeManager.invalidateAll();\n      }\n    }\n\n    const {\n      props,\n      oldProps\n    } = params;\n    const neededPickingBuffer = Number.isInteger(oldProps.highlightedObjectIndex) || oldProps.pickable;\n    const needPickingBuffer = Number.isInteger(props.highlightedObjectIndex) || props.pickable;\n\n    if (neededPickingBuffer !== needPickingBuffer && attributeManager) {\n      const {\n        pickingColors,\n        instancePickingColors\n      } = attributeManager.attributes;\n      const pickingColorsAttribute = pickingColors || instancePickingColors;\n\n      if (pickingColorsAttribute) {\n        if (needPickingBuffer && pickingColorsAttribute.constant) {\n          pickingColorsAttribute.constant = false;\n          attributeManager.invalidate(pickingColorsAttribute.id);\n        }\n\n        if (!pickingColorsAttribute.value && !needPickingBuffer) {\n          pickingColorsAttribute.constant = true;\n          pickingColorsAttribute.value = [0, 0, 0];\n        }\n      }\n    }\n  }\n\n  finalizeState(context) {\n    for (const model of this.getModels()) {\n      model.delete();\n    }\n\n    const attributeManager = this.getAttributeManager();\n\n    if (attributeManager) {\n      attributeManager.finalize();\n    }\n\n    if (this.context) {\n      this.context.resourceManager.unsubscribe({\n        consumerId: this.id\n      });\n    }\n\n    if (this.internalState) {\n      this.internalState.uniformTransitions.clear();\n      this.internalState.finalize();\n    }\n  }\n\n  draw(opts) {\n    for (const model of this.getModels()) {\n      model.draw(opts);\n    }\n  }\n\n  getPickingInfo({\n    info,\n    mode,\n    sourceLayer\n  }) {\n    const {\n      index\n    } = info;\n\n    if (index >= 0) {\n      if (Array.isArray(this.props.data)) {\n        info.object = this.props.data[index];\n      }\n    }\n\n    return info;\n  }\n\n  raiseError(error, message) {\n    var _this$props$onError, _this$props;\n\n    if (message) {\n      error.message = \"\".concat(message, \": \").concat(error.message);\n    }\n\n    if (!((_this$props$onError = (_this$props = this.props).onError) !== null && _this$props$onError !== void 0 && _this$props$onError.call(_this$props, error))) {\n      var _this$context, _this$context$onError;\n\n      (_this$context = this.context) === null || _this$context === void 0 ? void 0 : (_this$context$onError = _this$context.onError) === null || _this$context$onError === void 0 ? void 0 : _this$context$onError.call(_this$context, error, this);\n    }\n  }\n\n  getNeedsRedraw(opts = {\n    clearRedrawFlags: false\n  }) {\n    return this._getNeedsRedraw(opts);\n  }\n\n  needsUpdate() {\n    if (!this.internalState) {\n      return false;\n    }\n\n    return this.internalState.needsUpdate || this.hasUniformTransition() || this.shouldUpdateState(this._getUpdateParams());\n  }\n\n  hasUniformTransition() {\n    var _this$internalState;\n\n    return ((_this$internalState = this.internalState) === null || _this$internalState === void 0 ? void 0 : _this$internalState.uniformTransitions.active) || false;\n  }\n\n  activateViewport(viewport) {\n    if (!this.internalState) {\n      return;\n    }\n\n    const oldViewport = this.internalState.viewport;\n    this.internalState.viewport = viewport;\n\n    if (!oldViewport || !areViewportsEqual({\n      oldViewport,\n      viewport\n    })) {\n      this.setChangeFlags({\n        viewportChanged: true\n      });\n\n      if (this.isComposite) {\n        if (this.needsUpdate()) {\n          this.setNeedsUpdate();\n        }\n      } else {\n        this._update();\n      }\n    }\n  }\n\n  invalidateAttribute(name = 'all') {\n    const attributeManager = this.getAttributeManager();\n\n    if (!attributeManager) {\n      return;\n    }\n\n    if (name === 'all') {\n      attributeManager.invalidateAll();\n    } else {\n      attributeManager.invalidate(name);\n    }\n  }\n\n  updateAttributes(changedAttributes) {\n    for (const model of this.getModels()) {\n      this._setModelAttributes(model, changedAttributes);\n    }\n  }\n\n  _updateAttributes() {\n    const attributeManager = this.getAttributeManager();\n\n    if (!attributeManager) {\n      return;\n    }\n\n    const props = this.props;\n    const numInstances = this.getNumInstances();\n    const startIndices = this.getStartIndices();\n    attributeManager.update({\n      data: props.data,\n      numInstances,\n      startIndices,\n      props,\n      transitions: props.transitions,\n      buffers: props.data.attributes,\n      context: this\n    });\n    const changedAttributes = attributeManager.getChangedAttributes({\n      clearChangedFlags: true\n    });\n    this.updateAttributes(changedAttributes);\n  }\n\n  _updateAttributeTransition() {\n    const attributeManager = this.getAttributeManager();\n\n    if (attributeManager) {\n      attributeManager.updateTransition();\n    }\n  }\n\n  _updateUniformTransition() {\n    const {\n      uniformTransitions\n    } = this.internalState;\n\n    if (uniformTransitions.active) {\n      const propsInTransition = uniformTransitions.update();\n      const props = Object.create(this.props);\n\n      for (const key in propsInTransition) {\n        Object.defineProperty(props, key, {\n          value: propsInTransition[key]\n        });\n      }\n\n      return props;\n    }\n\n    return this.props;\n  }\n\n  calculateInstancePickingColors(attribute, {\n    numInstances\n  }) {\n    if (attribute.constant) {\n      return;\n    }\n\n    const cacheSize = Math.floor(pickingColorCache.length / 3);\n    this.internalState.usesPickingColorCache = true;\n\n    if (cacheSize < numInstances) {\n      if (numInstances > MAX_PICKING_COLOR_CACHE_SIZE) {\n        log.warn('Layer has too many data objects. Picking might not be able to distinguish all objects.')();\n      }\n\n      pickingColorCache = typedArrayManager.allocate(pickingColorCache, numInstances, {\n        size: 3,\n        copy: true,\n        maxCount: Math.max(numInstances, MAX_PICKING_COLOR_CACHE_SIZE)\n      });\n      const newCacheSize = Math.floor(pickingColorCache.length / 3);\n      const pickingColor = [];\n\n      for (let i = cacheSize; i < newCacheSize; i++) {\n        this.encodePickingColor(i, pickingColor);\n        pickingColorCache[i * 3 + 0] = pickingColor[0];\n        pickingColorCache[i * 3 + 1] = pickingColor[1];\n        pickingColorCache[i * 3 + 2] = pickingColor[2];\n      }\n    }\n\n    attribute.value = pickingColorCache.subarray(0, numInstances * 3);\n  }\n\n  _setModelAttributes(model, changedAttributes) {\n    const attributeManager = this.getAttributeManager();\n    const excludeAttributes = model.userData.excludeAttributes || {};\n    const shaderAttributes = attributeManager.getShaderAttributes(changedAttributes, excludeAttributes);\n    model.setAttributes(shaderAttributes);\n  }\n\n  disablePickingIndex(objectIndex) {\n    this._disablePickingIndex(objectIndex);\n  }\n\n  _disablePickingIndex(objectIndex) {\n    const {\n      pickingColors,\n      instancePickingColors\n    } = this.getAttributeManager().attributes;\n    const colors = pickingColors || instancePickingColors;\n\n    if (!colors) {\n      return;\n    }\n\n    const start = colors.getVertexOffset(objectIndex);\n    const end = colors.getVertexOffset(objectIndex + 1);\n    colors.buffer.subData({\n      data: new Uint8Array(end - start),\n      offset: start\n    });\n  }\n\n  restorePickingColors() {\n    const {\n      pickingColors,\n      instancePickingColors\n    } = this.getAttributeManager().attributes;\n    const colors = pickingColors || instancePickingColors;\n\n    if (!colors) {\n      return;\n    }\n\n    if (this.internalState.usesPickingColorCache && colors.value.buffer !== pickingColorCache.buffer) {\n      colors.value = pickingColorCache.subarray(0, colors.value.length);\n    }\n\n    colors.updateSubBuffer({\n      startOffset: 0\n    });\n  }\n\n  _initialize() {\n    assert(!this.internalState);\n    assert(Number.isFinite(this.props.coordinateSystem));\n    debug(TRACE_INITIALIZE, this);\n\n    const attributeManager = this._getAttributeManager();\n\n    if (attributeManager) {\n      attributeManager.addInstanced({\n        instancePickingColors: {\n          type: 5121,\n          size: 3,\n          noAlloc: true,\n          update: this.calculateInstancePickingColors\n        }\n      });\n    }\n\n    this.internalState = new LayerState({\n      attributeManager,\n      layer: this\n    });\n\n    this._clearChangeFlags();\n\n    this.state = {};\n    Object.defineProperty(this.state, 'attributeManager', {\n      get: () => {\n        log.deprecated('layer.state.attributeManager', 'layer.getAttributeManager()')();\n        return attributeManager;\n      }\n    });\n    this.internalState.layer = this;\n    this.internalState.uniformTransitions = new UniformTransitionManager(this.context.timeline);\n    this.internalState.onAsyncPropUpdated = this._onAsyncPropUpdated.bind(this);\n    this.internalState.setAsyncProps(this.props);\n    this.initializeState(this.context);\n\n    for (const extension of this.props.extensions) {\n      extension.initializeState.call(this, this.context, extension);\n    }\n\n    this.setChangeFlags({\n      dataChanged: 'init',\n      propsChanged: 'init',\n      viewportChanged: true,\n      extensionsChanged: true\n    });\n\n    this._update();\n  }\n\n  _transferState(oldLayer) {\n    debug(TRACE_MATCHED, this, this === oldLayer);\n    const {\n      state,\n      internalState\n    } = oldLayer;\n\n    if (this === oldLayer) {\n      return;\n    }\n\n    this.internalState = internalState;\n    this.internalState.layer = this;\n    this.state = state;\n    this.internalState.setAsyncProps(this.props);\n\n    this._diffProps(this.props, this.internalState.getOldProps());\n  }\n\n  _update() {\n    const stateNeedsUpdate = this.needsUpdate();\n    debug(TRACE_UPDATE, this, stateNeedsUpdate);\n\n    if (!stateNeedsUpdate) {\n      return;\n    }\n\n    const currentProps = this.props;\n    const context = this.context;\n    const internalState = this.internalState;\n    const currentViewport = context.viewport;\n\n    const propsInTransition = this._updateUniformTransition();\n\n    internalState.propsInTransition = propsInTransition;\n    context.viewport = internalState.viewport || currentViewport;\n    this.props = propsInTransition;\n\n    try {\n      const updateParams = this._getUpdateParams();\n\n      const oldModels = this.getModels();\n\n      if (context.gl) {\n        this.updateState(updateParams);\n      } else {\n        try {\n          this.updateState(updateParams);\n        } catch (error) {}\n      }\n\n      for (const extension of this.props.extensions) {\n        extension.updateState.call(this, updateParams, extension);\n      }\n\n      const modelChanged = this.getModels()[0] !== oldModels[0];\n\n      this._postUpdate(updateParams, modelChanged);\n    } finally {\n      context.viewport = currentViewport;\n      this.props = currentProps;\n\n      this._clearChangeFlags();\n\n      internalState.needsUpdate = false;\n      internalState.resetOldProps();\n    }\n  }\n\n  _finalize() {\n    debug(TRACE_FINALIZE, this);\n    this.finalizeState(this.context);\n\n    for (const extension of this.props.extensions) {\n      extension.finalizeState.call(this, extension);\n    }\n  }\n\n  _drawLayer({\n    moduleParameters = null,\n    uniforms = {},\n    parameters = {}\n  }) {\n    this._updateAttributeTransition();\n\n    const currentProps = this.props;\n    const context = this.context;\n    this.props = this.internalState.propsInTransition || currentProps;\n    const opacity = this.props.opacity;\n    uniforms.opacity = Math.pow(opacity, 1 / 2.2);\n\n    try {\n      if (moduleParameters) {\n        this.setModuleParameters(moduleParameters);\n      }\n\n      const {\n        getPolygonOffset\n      } = this.props;\n      const offsets = getPolygonOffset && getPolygonOffset(uniforms) || [0, 0];\n      setParameters(context.gl, {\n        polygonOffset: offsets\n      });\n      withParameters(context.gl, parameters, () => {\n        const opts = {\n          moduleParameters,\n          uniforms,\n          parameters,\n          context\n        };\n\n        for (const extension of this.props.extensions) {\n          extension.draw.call(this, opts, extension);\n        }\n\n        this.draw(opts);\n      });\n    } finally {\n      this.props = currentProps;\n    }\n  }\n\n  getChangeFlags() {\n    var _this$internalState2;\n\n    return (_this$internalState2 = this.internalState) === null || _this$internalState2 === void 0 ? void 0 : _this$internalState2.changeFlags;\n  }\n\n  setChangeFlags(flags) {\n    if (!this.internalState) {\n      return;\n    }\n\n    const {\n      changeFlags\n    } = this.internalState;\n\n    for (const key in flags) {\n      if (flags[key]) {\n        let flagChanged = false;\n\n        switch (key) {\n          case 'dataChanged':\n            const dataChangedReason = flags[key];\n            const prevDataChangedReason = changeFlags[key];\n\n            if (dataChangedReason && Array.isArray(prevDataChangedReason)) {\n              changeFlags.dataChanged = Array.isArray(dataChangedReason) ? prevDataChangedReason.concat(dataChangedReason) : dataChangedReason;\n              flagChanged = true;\n            }\n\n          default:\n            if (!changeFlags[key]) {\n              changeFlags[key] = flags[key];\n              flagChanged = true;\n            }\n\n        }\n\n        if (flagChanged) {\n          debug(TRACE_CHANGE_FLAG, this, key, flags);\n        }\n      }\n    }\n\n    const propsOrDataChanged = Boolean(changeFlags.dataChanged || changeFlags.updateTriggersChanged || changeFlags.propsChanged || changeFlags.extensionsChanged);\n    changeFlags.propsOrDataChanged = propsOrDataChanged;\n    changeFlags.somethingChanged = propsOrDataChanged || changeFlags.viewportChanged || changeFlags.stateChanged;\n  }\n\n  _clearChangeFlags() {\n    this.internalState.changeFlags = {\n      dataChanged: false,\n      propsChanged: false,\n      updateTriggersChanged: false,\n      viewportChanged: false,\n      stateChanged: false,\n      extensionsChanged: false,\n      propsOrDataChanged: false,\n      somethingChanged: false\n    };\n  }\n\n  _diffProps(newProps, oldProps) {\n    const changeFlags = diffProps(newProps, oldProps);\n\n    if (changeFlags.updateTriggersChanged) {\n      for (const key in changeFlags.updateTriggersChanged) {\n        if (changeFlags.updateTriggersChanged[key]) {\n          this.invalidateAttribute(key);\n        }\n      }\n    }\n\n    if (changeFlags.transitionsChanged) {\n      for (const key in changeFlags.transitionsChanged) {\n        var _newProps$transitions;\n\n        this.internalState.uniformTransitions.add(key, oldProps[key], newProps[key], (_newProps$transitions = newProps.transitions) === null || _newProps$transitions === void 0 ? void 0 : _newProps$transitions[key]);\n      }\n    }\n\n    return this.setChangeFlags(changeFlags);\n  }\n\n  validateProps() {\n    validateProps(this.props);\n  }\n\n  updateAutoHighlight(info) {\n    if (this.props.autoHighlight && !Number.isInteger(this.props.highlightedObjectIndex)) {\n      this._updateAutoHighlight(info);\n    }\n  }\n\n  _updateAutoHighlight(info) {\n    const pickingModuleParameters = {\n      pickingSelectedColor: info.picked ? info.color : null\n    };\n    const {\n      highlightColor\n    } = this.props;\n\n    if (info.picked && typeof highlightColor === 'function') {\n      pickingModuleParameters.pickingHighlightColor = highlightColor(info);\n    }\n\n    this.setModuleParameters(pickingModuleParameters);\n    this.setNeedsRedraw();\n  }\n\n  _getAttributeManager() {\n    const context = this.context;\n    return new AttributeManager(context.gl, {\n      id: this.props.id,\n      stats: context.stats,\n      timeline: context.timeline\n    });\n  }\n\n  _postUpdate(updateParams, forceUpdate) {\n    const {\n      props,\n      oldProps\n    } = updateParams;\n    this.setNeedsRedraw();\n\n    this._updateAttributes();\n\n    const {\n      model\n    } = this.state;\n    model === null || model === void 0 ? void 0 : model.setInstanceCount(this.getNumInstances());\n    const {\n      autoHighlight,\n      highlightedObjectIndex,\n      highlightColor\n    } = props;\n\n    if (forceUpdate || oldProps.autoHighlight !== autoHighlight || oldProps.highlightedObjectIndex !== highlightedObjectIndex || oldProps.highlightColor !== highlightColor) {\n      const parameters = {};\n\n      if (!autoHighlight) {\n        parameters.pickingSelectedColor = null;\n      }\n\n      if (Array.isArray(highlightColor)) {\n        parameters.pickingHighlightColor = highlightColor;\n      }\n\n      if (Number.isInteger(highlightedObjectIndex)) {\n        parameters.pickingSelectedColor = Number.isFinite(highlightedObjectIndex) && highlightedObjectIndex >= 0 ? this.encodePickingColor(highlightedObjectIndex) : null;\n      }\n\n      this.setModuleParameters(parameters);\n    }\n  }\n\n  _getUpdateParams() {\n    return {\n      props: this.props,\n      oldProps: this.internalState.getOldProps(),\n      context: this.context,\n      changeFlags: this.internalState.changeFlags\n    };\n  }\n\n  _getNeedsRedraw(opts) {\n    if (!this.internalState) {\n      return false;\n    }\n\n    let redraw = false;\n    redraw = redraw || this.internalState.needsRedraw && this.id;\n    this.internalState.needsRedraw = this.internalState.needsRedraw && !opts.clearRedrawFlags;\n    const attributeManager = this.getAttributeManager();\n    const attributeManagerNeedsRedraw = attributeManager ? attributeManager.getNeedsRedraw(opts) : false;\n    redraw = redraw || attributeManagerNeedsRedraw;\n    return redraw;\n  }\n\n  _onAsyncPropUpdated() {\n    this._diffProps(this.props, this.internalState.getOldProps());\n\n    this.setNeedsUpdate();\n  }\n\n}\n\n_defineProperty(Layer, \"defaultProps\", defaultProps);\n\n_defineProperty(Layer, \"layerName\", 'Layer');\n//# sourceMappingURL=layer.js.map"],"names":["_defineProperty","obj","key","value","EPSILON","ARRAY_TYPE","y","i","create","out","glMatrix.ARRAY_TYPE","scale","a","b","transformMat4","m","x","z","w","vec","stride","offset","count","fn","arg","l","createMat4","transformVector","matrix","vector","result","mod","divisor","modulus","lerp","start","end","step","clamp","min","max","ieLog2","log2","identity","transpose","a01","a02","a03","a12","a13","a23","invert","a00","a10","a11","a20","a21","a22","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","determinant","multiply","b0","b1","b2","b3","translate","v","rotate","rad","axis","len","s","c","t","b12","b20","b21","b22","glMatrix.EPSILON","rotateX","rotateY","rotateZ","fromQuat","q","x2","y2","z2","xx","yx","yy","zx","zy","zz","wx","wy","wz","frustum","left","right","bottom","top","near","far","rl","tb","nf","perspectiveNO","fovy","aspect","f","perspective","orthoNO","lr","bt","ortho","lookAt","eye","center","up","x0","x1","y0","y1","z0","z1","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","equals","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","a14","a15","b4","b5","b6","b7","b8","b9","b13","b14","b15","add","subtract","length","negate","ax","ay","sub","distance","dot","cross","az","bx","by","bz","transformMat3","transformQuat","qx","qy","qz","qw","uvx","uvy","uvz","uuvx","uuvy","uuvz","w2","p","r","angle","mag1","mag2","mag","cosine","mul","dist","assert","condition","message","PI","PI_4","DEGREES_TO_RADIANS","RADIANS_TO_DEGREES","TILE_SIZE","EARTH_CIRCUMFERENCE","MAX_LATITUDE","DEFAULT_ALTITUDE","zoomToScale","zoom","scaleToZoom","lngLatToWorld","lngLat","lng","lat","lambda2","phi2","worldToLngLat","xy","getMeterZoom","options","latitude","latCosine","getDistanceScales","longitude","highPrecision","worldSize","unitsPerDegreeX","unitsPerDegreeY","altUnitsPerMeter","latCosine2","unitsPerDegreeY2","altUnitsPerDegree2","altUnitsPerMeter2","addMetersToLngLat","lngLatZ","xyz","unitsPerMeter","unitsPerMeter2","worldspace","newLngLat","newZ","getViewMatrix","height","pitch","bearing","altitude","vm","mat4.translate","mat4.rotateX","mat4.rotateZ","relativeScale","mat4.scale","vec3.negate","getProjectionParameters","width","nearZMultiplier","farZMultiplier","altitudeToFovy","fovRadians","pitchRadians","focalDistance","fovyToAltitude","cameraToSeaLevelDistance","fovAboveCenter","topHalfSurfaceDistance","furthestDistance","horizonDistance","farZ","getProjectionMatrix","fov","mat4.perspective","worldToPixels","pixelProjectionMatrix","pixelsToWorld","pixelUnprojectionMatrix","targetZ","coord0","coord1","vec2.lerp","fitBounds","bounds","minExtent","maxZoom","west","south","east","north","padding","getPaddingObject","nw","se","size","targetSize","scaleX","scaleY","offsetX","offsetY","centerLngLat","getBounds","viewport","unproject","unprojectOps","bottomLeft","bottomRight","topLeft","topRight","halfFov","angleToGround","unprojectOnFarPlane","coord","normalizeViewportProps","props","minZoom","halfHeightPixels","minLatitude","maxLatitude","window","document","exportName","undefined","VENDOR_PREFIXES","TEST_ELEMENT","TYPE_FUNCTION","round","abs","now","setTimeoutContext","timeout","context","bindFn","invokeArrayArg","each","iterator","deprecate","method","name","deprecationMessage","e","stack","log","assign","target","output","index","source","nextKey","extend","dest","src","merge","keys","inherit","child","base","properties","baseP","childP","boolOrFn","val","args","ifUndefined","val1","val2","addEventListeners","types","handler","splitStr","type","removeEventListeners","hasParent","node","parent","inStr","str","find","inArray","findByKey","toArray","uniqueArray","sort","results","values","prefixed","property","prefix","prop","camelProp","_uniqueId","uniqueId","getWindowForElement","element","doc","MOBILE_REGEX","SUPPORT_TOUCH","SUPPORT_POINTER_EVENTS","SUPPORT_ONLY_TOUCH","INPUT_TYPE_TOUCH","INPUT_TYPE_PEN","INPUT_TYPE_MOUSE","INPUT_TYPE_KINECT","COMPUTE_INTERVAL","INPUT_START","INPUT_MOVE","INPUT_END","INPUT_CANCEL","DIRECTION_NONE","DIRECTION_LEFT","DIRECTION_RIGHT","DIRECTION_UP","DIRECTION_DOWN","DIRECTION_HORIZONTAL","DIRECTION_VERTICAL","DIRECTION_ALL","PROPS_XY","PROPS_CLIENT_XY","Input","manager","callback","self","ev","createInputInstance","Type","inputClass","PointerEventInput","TouchInput","TouchMouseInput","MouseInput","inputHandler","eventType","input","pointersLen","changedPointersLen","isFirst","isFinal","computeInputData","session","pointers","pointersLength","simpleCloneInputData","firstInput","firstMultiple","offsetCenter","getCenter","getAngle","getDistance","computeDeltaXY","getDirection","overallVelocity","getVelocity","getScale","getRotation","computeIntervalInputData","prevDelta","prevInput","last","deltaTime","velocity","velocityX","velocityY","direction","deltaX","deltaY","p1","p2","MOUSE_INPUT_MAP","MOUSE_ELEMENT_EVENTS","MOUSE_WINDOW_EVENTS","POINTER_INPUT_MAP","IE10_POINTER_TYPE_ENUM","POINTER_ELEMENT_EVENTS","POINTER_WINDOW_EVENTS","store","removePointer","eventTypeNormalized","pointerType","isTouch","storeIndex","SINGLE_TOUCH_INPUT_MAP","SINGLE_TOUCH_TARGET_EVENTS","SINGLE_TOUCH_WINDOW_EVENTS","SingleTouchInput","touches","normalizeSingleTouches","all","changed","TOUCH_INPUT_MAP","TOUCH_TARGET_EVENTS","getTouches","allTouches","targetIds","targetTouches","changedTouches","changedTargetTouches","touch","DEDUP_TIMEOUT","DEDUP_DISTANCE","inputEvent","inputData","isMouse","recordTouches","isSyntheticEvent","eventData","setLastTouch","lastTouch","lts","removeLastTouch","dx","dy","PREFIXED_TOUCH_ACTION","NATIVE_TOUCH_ACTION","TOUCH_ACTION_COMPUTE","TOUCH_ACTION_AUTO","TOUCH_ACTION_MANIPULATION","TOUCH_ACTION_NONE","TOUCH_ACTION_PAN_X","TOUCH_ACTION_PAN_Y","TOUCH_ACTION_MAP","getTouchActionProps","TouchAction","actions","recognizer","cleanTouchActions","srcEvent","hasNone","hasPanY","hasPanX","isTapPointer","isTapMovement","isTapTouchTime","touchMap","cssSupports","STATE_POSSIBLE","STATE_BEGAN","STATE_CHANGED","STATE_ENDED","STATE_RECOGNIZED","STATE_CANCELLED","STATE_FAILED","Recognizer","otherRecognizer","simultaneous","getRecognizerByNameIfManager","requireFail","state","emit","event","stateStr","inputDataClone","directionStr","AttrRecognizer","optionPointers","isRecognized","isValid","PanRecognizer","hasMoved","PinchRecognizer","inOut","PressRecognizer","validPointers","validMovement","validTime","RotateRecognizer","SwipeRecognizer","TapRecognizer","validTouchTime","validInterval","validMultiTap","tapCount","Hammer","Manager","STOP","FORCED_STOP","toggleCssProps","item","force","recognizers","curRecognizer","existing","events","handlers","data","triggerDomEvent","gestureEvent","freeGlobal","define","module","some","array","predict","enhancePointerEventInput","oldHandler","enhanceMouseInput","hammerjs.PointerEventInput","hammerjs.MouseInput","hammerjs.Manager","RECOGNIZERS","RECOGNIZER_COMPATIBLE_MAP","RECOGNIZER_FALLBACK_MAP","BASIC_EVENT_ALIASES","INPUT_EVENT_TYPES","EVENT_RECOGNIZER_MAP","GESTURE_EVENT_ALIASES","userAgent","window_","passiveSupported","firefox","WHEEL_EVENTS","EVENT_TYPE","WHEEL_DELTA_MAGIC_SCALER","WHEEL_DELTA_PER_LINE","SHIFT_MULTIPLIER","WheelInput","enabled","MOUSE_EVENTS","MOVE_EVENT_TYPE","OVER_EVENT_TYPE","OUT_EVENT_TYPE","ENTER_EVENT_TYPE","LEAVE_EVENT_TYPE","MoveInput","enable","KEY_EVENTS","DOWN_EVENT_TYPE","UP_EVENT_TYPE","KeyInput","targetElement","ContextmenuInput","DOWN_EVENT","MOVE_EVENT","UP_EVENT","MOUSE_EVENT_WHICH_LEFT","MOUSE_EVENT_WHICH_MIDDLE","MOUSE_EVENT_WHICH_RIGHT","MOUSE_EVENT_BUTTON_LEFT","MOUSE_EVENT_BUTTON_MIDDLE","MOUSE_EVENT_BUTTON_RIGHT","MOUSE_EVENT_BUTTONS_LEFT_MASK","MOUSE_EVENT_BUTTONS_RIGHT_MASK","MOUSE_EVENT_BUTTONS_MIDDLE_MASK","whichButtons","buttons","button","which","leftButton","middleButton","rightButton","getOffsetPosition","rootElement","rect","DEFAULT_OPTIONS","EventRegistrar","eventManager","mjolnirEvent","once","passive","handlersByElement","opts","entries","entry","insertPosition","srcElement","immediatePropagationStopped","stopPropagation","stopImmediatePropagation","entriesToRemove","EventManager","alias","ManagerClass","otherName","recognizerName","recognizerOption","eventAlias","eventRegistrar","fallbackRecognizers","eventName","isRecognizerUsed","eh","isBrowser","matches","VERSION","isMobile","WorkerJob","jobName","workerThread","resolve","reject","payload","error","Worker$1","workerURLCache","getLoadableWorkerURL","workerURL","getLoadableWorkerURLFromURL","getLoadableWorkerURLFromSource","url","workerSource","buildScriptSource","blob","workerUrl","getTransferList","object","recursive","transfers","transfersSet","isTransferable","NOOP","WorkerThread","NodeWorker","transferList","worker","code","WorkerPool","onMessage","job","onError","startPromise","onStart","queuedJob","DEFAULT_PROPS","WorkerFarm","workerPool","NPM_TAG","getWorkerURL","workerOptions","workerFile","version","versionTag","validateWorkerVersion","coreVersion","workerVersion","canParseWithWorker","loader","parseWithWorker","parseOnMainThread","id","isBuffer","bufferToArrayBuffer","buffer","toArrayBuffer","text","compareArrayBuffers","arrayBuffer1","arrayBuffer2","byteLength","array1","array2","concatenateArrayBuffers","sources","sourceArrays","source2","typedArray","sourceArray","concatenateArrayBuffersAsync","asyncIterator","arrayBuffers","chunk","getHiResTimestamp","timestamp","timeParts","Stat","samples","time","Stats","table","stat","pathPrefix","fileAliases","resolvePath","filename","replacement","slashIndex","isBoolean","isFunction","isObject","isPureObject","isIterable","isAsyncIterable","isResponse","isBlob","isReadableDOMStream","isReadableNodeStream","isReadableStream","DATA_URL_PATTERN","MIME_TYPE_PATTERN","parseMIMEType","mimeString","parseMIMETypeFromURL","QUERY_STRING_PATTERN","getResourceUrlAndType","resource","stripQueryString","contentTypeHeader","getResourceContentLength","makeResponse","headers","contentLength","initialDataUrl","getInitialDataUrl","response","checkResponse","getResponseError","contentType","blobSlice","reader","_event$target","slice","base64","arrayBufferToBase64","binary","bytes","fetchFile","fetchOptions","isElectron","mockUserAgent","realUserAgent","globals","process_","checkIfBrowser","getBrowser","isMSIE","isTrident","getStorage","storage","LocalStorage","defaultSettings","configuration","serialized","serializedConfiguration","formatTime","ms","formatted","leftPad","string","padLength","formatImage","image","maxWidth","imageUrl","style","COLOR","getColor","color","addColor","background","autobind","predefined","proto","propNames","_window$performance","_window$performance$n","process","_process$hrtime","originalConsole","DEFAULT_SETTINGS","noop","cache","ONCE","Log","newLevel","newPriority","level","setting","oldUsage","newUsage","logLevel","_len","_key","columns","getTableHeader","_ref","priority","logImageInBrowser","logImageInNode","normalizeArguments","collapsed","func","normalizeLogLevel","tag","decorateMessage","resolvedLevel","messageType","_ref2","asciify.nodeAsciifyImage","_ref3","img","title","probeLog","NullLog","ConsoleLog","DEFAULT_LOADER_OPTIONS","REMOVED_LOADER_OPTIONS","getGlobalLoaderState","loaders","getGlobalLoaderOptions","normalizeOptions","validateOptions","normalizeOptionsInternal","getFetchFunction","globalOptions","validateOptionsObject","idOptions","loaderOptions","deprecatedOptions","defaultOptions","loaderName","isSubOptions","isBaseUriOption","isWorkerUrlOption","suggestion","findSimilarOption","optionKey","lowerCaseOptionKey","bestSuggestion","lowerCaseKey","mergedOptions","addUrlOptions","mergeNestedFields","isLoaderObject","_loader","normalizeLoader","_loader2","_loader3","getGlobalLoaderRegistry","registerLoaders","loaderRegistry","normalizedLoader","registeredLoader","getRegisteredLoaders","EXT_PATTERN","selectLoader","validHTTPResponse","selectLoaderSync","getNoValidLoaderMessage","candidateLoaders","normalizeLoaders","selectLoaderInternal","testUrl","reason","findLoaderByMIMEType","findLoaderByUrl","findLoaderByInitialBytes","getFirstCharacters","path.filename","firstCharacters","match","extension","findLoaderByExtension","loaderExtension","mimeType","testDataAgainstText","testDataAgainstBinary","test","byteOffset","testBinary","magic","getMagicString","arrayBuffer","dataView","DEFAULT_CHUNK_SIZE","makeStringIterator","chunkSize","textEncoder","chunkLength","makeArrayBufferIterator","chunkByteLength","makeBlobIterator","makeStreamIterator","stream","makeBrowserStreamIterator","makeNodeStreamIterator","nextBatchPromise","currentBatchPromise","done","makeIterator","ERR_DATA","getArrayBufferOrStringFromDataSync","getArrayBufferOrStringFromData","isArrayBuffer","getLoaderContext","previousContext","resolvedContext","getLoadersFromContext","contextLoaders","parse","parseWithLoader","ok","redirected","status","statusText","load","fetch","_parseImageNode","IMAGE_SUPPORTED","IMAGE_BITMAP_SUPPORTED","NODE_IMAGE_SUPPORTED","DATA_SUPPORTED","isImageTypeSupported","getDefaultImageType","getImageType","format","getImageTypeOrNull","getImageData","canvas","SVG_DATA_URL_PATTERN","SVG_URL_PATTERN","isSVG","getBlobOrSVGDataUrl","xmlText","getBlob","parseToImage","blobOrDataUrl","URL","objectUrl","loadToImage","err","EMPTY_OBJECT","imagebitmapOptionsSupported","parseToImageBitmap","imagebitmapOptions","safeCreateImageBitmap","isEmptyObject","BIG_ENDIAN","LITTLE_ENDIAN","getBinaryImageMetadata","binaryData","toDataView","getPngMetadata","getJpegMetadata","getGifMetadata","getBmpMetadata","tableMarkers","sofMarkers","getJpegMarkers","marker","parseToNodeImage","parseImage","imageType","loadType","getLoadableImageType","EXTENSIONS","MIME_TYPES","DEFAULT_IMAGE_LOADER_OPTIONS","ImageLoader","log$2","loggers","register","debug","arg1","arg2","arg3","deckLog","isJSON","firstChar","lastChar","jsonLoader","existingVersion","deckGlobal","ERR_CONTEXT","ERR_WEBGL2","isWebGL","gl","isWebGL2","getWebGL2Context","assertWebGLContext","assertWebGL2Context","glErrorShadow","msg","synthesizeGLError","opt_msg","wrapGLError","WebGLVertexArrayObjectOES","ext","n","attrib","OESVertexArrayObject","original","pname","vao","indx","normalized","ii","arrayObject","oldVAO","newVAO","currentBinding","maxAttrib","oldAttrib","bufferChanged","polyfillVertexArrayObject","original_getSupportedExtensions","list","original_getExtension","OES_element_index","WEBGL_draw_buffers","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_texture_filter_anisotropic","WEBGL_debug_renderer_info","GL_FRAGMENT_SHADER_DERIVATIVE_HINT","GL_DONT_CARE","GL_GPU_DISJOINT_EXT","GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT","GL_UNMASKED_VENDOR_WEBGL","GL_UNMASKED_RENDERER_WEBGL","getWebGL2ValueOrZero","WEBGL_PARAMETERS","getParameter","getParameterPolyfill","originalGetParameter","limit","OES_vertex_array_object","ANGLE_instanced_arrays","ERR_VAO_NOT_SUPPORTED","getExtensionData","WEBGL2_CONTEXT_POLYFILLS","location","handle","WEBGL2_CONTEXT_OVERRIDES","originalFunc","attachment","webgl2","program","extensions","polyfillContext","luma","initializeExtensions","installPolyfills","installOverrides","target2","polyfill","polyfills","polyfillExtension","defaults","meta","suffix","extKey","GL_PARAMETER_DEFAULTS","hint","pixelStorei","drawFramebuffer","readFramebuffer","isArray","GL_PARAMETER_SETTERS","framebuffer","mask","backMask","ref","backFunc","backRef","sfail","dpfail","dppass","backSfail","backDpfail","backDppass","getValue","glEnum","GL_COMPOSITE_PARAMETER_SETTERS","GL_HOOKED_SETTERS","update","capability","g","mode","modeRGB","modeAlpha","dst","srcRGB","dstRGB","srcAlpha","dstAlpha","depth","zNear","zFar","face","factor","units","fail","zfail","zpass","isEnabled","GL_PARAMETER_GETTERS","isObjectEmpty","deepArrayEqual","isArrayX","isArrayY","installGetterOverride","functionName","originalGetterFunc","installSetterSpy","setter","originalSetterFunc","params","valueChanged","oldValue","installProgramSpy","originalUseProgram","GLState","copyState","getParameters","oldValues","setParameters","cached","trackContextState","pushContextState","popContextState","compositeSetters","glConstant","compositeSetter","parameters","getter","parameterKeys","resetParameters","withParameters","nocatch","cssToDeviceRatio","clientWidth","cssToDevicePixels","cssPixel","yInvert","ratio","scalePixels","getDevicePixelRatio","useDevicePixels","windowRatio","pixel","xHigh","yHigh","getIsBrowser","isPage","CONTEXT_DEFAULTS","createGLContext","targetCanvas","getCanvas","createBrowserContext","instrumentGLContext","logInfo","getVersion","manageState","getContextDebugInfo","vendorMasked","rendererMasked","vendorUnmasked","rendererUnmasked","resizeGLContext","devicePixelRatio","setDevicePixelRatio","errorMessage","onCreateError","webgl1","webGL","info","driver","clientHeight","cachedSize","clampedPixelRatio","canvasWidth","canvasHeight","STARTUP_MESSAGE","StatsManager","lumaStats","requestAnimationFrame","cancelAnimationFrame","timerId","getKeyValue","number","getKey","uidCounters","uid","isPowerOfTwo","isEmpty","stubRemovedMethods","instance","className","methodNames","upgradeMessage","prototype","methodName","ERR_RESOURCE_METHOD_UNDEFINED","Resource$1","userData","deleteChildren","children","funcOrHandle","parameter","isWebgl2","webgl1Default","webgl2Default","PARAMETERS","stats","ERR_TYPE_DEDUCTION","getGLTypeFromTypedArray","arrayOrType","getTypedArrayFromGLType","glType","clamped","flipRows","bytesPerPixel","temp","bytesPerRow","topOffset","bottomOffset","newWidth","newHeight","newData","checkProps","propChecks","removedProps","deprecatedProps","replacedProps","propName","replacementProp","newProps","DEFAULT_ACCESSOR_VALUES","PROP_CHECKS","Accessor","accessor","accessors","_len2","_key2","DEBUG_DATA_LENGTH","DEPRECATED_PROPS","PROP_CHECKS_INITIALIZE","PROP_CHECKS_SET_PROPS","Buffer","Resource","srcOffset","sourceBuffer","readOffset","writeOffset","dstData","srcByteOffset","dstOffset","ArrayType","sourceAvailableElementCount","dstElementOffset","dstAvailableElementCount","dstElementCount","copyElementCount","usage","sourceElementOffset","TEXTURE_FORMATS","DATA_FORMAT_CHANNELS","TYPE_SIZES","isFormatSupported","isLinearFilteringSupported","NPOT_MIN_FILTERS","WebGLBuffer","Texture","linearFiltering","supported","resolvedImageData","isVideo","pixels","border","recreate","pixelStore","textureUnit","dataFormat","compressed","mipmaps","video","lastTime","dataType","gl2","compressedTextureSize","levelIndex","levelData","channels","channelSize","ndarray","textureFormat","param","loadImage","Texture2D","FACES","TextureCube","mipmapLevel","imageDataMap","resolvedFaces","facePixels","lodLevel","imageData","Texture3D","EXT_FLOAT_WEBGL2","RENDERBUFFER_FORMATS","formats","Renderbuffer","GL_DEPTH_BUFFER_BIT","GL_STENCIL_BUFFER_BIT","GL_COLOR_BUFFER_BIT","GL_COLOR","GL_DEPTH","GL_STENCIL","GL_DEPTH_STENCIL","ERR_ARGUMENTS","clear","stencil","clearFlags","clearBuffer","drawBuffer","glFormatToComponents","readPixelsToArray","sourceX","sourceY","sourceFormat","sourceAttachment","sourceWidth","sourceHeight","sourceType","deleteFramebuffer","getFramebuffer","attachments","getPixelArray","prevHandle","copyToDataUrl","targetMaxHeight","copyToTexture","targetMipmaplevel","targetInternalFormat","targetX","targetY","isSubCopy","texture","Framebuffer","toFramebuffer","pixelArray","components","FEATURES","checkFloat32ColorAttachment","testTexture","testFb","WEBGL_FEATURES$1","LOG_UNSUPPORTED_FEATURE","hasFeature","feature","hasFeatures","features","isFeatureSupported","getFeatures","cap","WEBGL_FEATURES","queryFeature","isSupported","featureDefinition","ERR_MULTIPLE_RENDERTARGETS","colorBufferFloat","colorBufferHalfFloat","check","readBuffer","drawBuffers","clearAttachments","resizeAttachments","attachmentPoint","newAttachments","descriptor","layer","_getFrameBufferStatus","attachmentName","defaultAttachments","oldAttachment","_ref4","renderbuffer","_ref5","mapIndexToCubeMapFace","caps","FRAMEBUFFER_ATTACHMENT_PARAMETERS","cloneTextureFrom","refTexture","overrides","TextureType","textureOptions","getShaderName","shader","defaultName","SHADER_NAME_REGEXP","GL_FRAGMENT_SHADER","GL_VERTEX_SHADER","getShaderTypeName","parseGLSLCompilerError","errLog","shaderType","shaderName","errorStrings","errors","warnings","shaderDescription","errorString","segments","line","lines","addLineNumbers","formatErrors","column","padLeft","delim","maxDigits","lineNumber","digits","getShaderVersion","words","ERR_SOURCE","Shader","infoLog","VertexShader","FragmentShader","UNIFORM_SETTERS","getArraySetter","toFloatArray","setVectorUniform","toIntArray","setMatrixUniform","getSamplerSetter","toUIntArray","FLOAT_ARRAY","INT_ARRAY","UINT_ARRAY","toTypedArray","uniformLength","getUniformSetter","parseUniformName","UNIFORM_NAME_REGEXP","checkUniformValues","uniforms","uniformMap","uniformName","checkUniformValue","checkUniformArray","copyUniform","checkLength","uniformSetter","cacheLength","arrayValue","GL_BYTE","GL_UNSIGNED_BYTE","GL_SHORT","GL_UNSIGNED_SHORT","GL_POINTS","GL_LINES","GL_LINE_LOOP","GL_LINE_STRIP","GL_TRIANGLES","GL_TRIANGLE_STRIP","GL_TRIANGLE_FAN","GL_FLOAT","GL_FLOAT_VEC2","GL_FLOAT_VEC3","GL_FLOAT_VEC4","GL_INT","GL_INT_VEC2","GL_INT_VEC3","GL_INT_VEC4","GL_UNSIGNED_INT","GL_UNSIGNED_INT_VEC2","GL_UNSIGNED_INT_VEC3","GL_UNSIGNED_INT_VEC4","GL_BOOL","GL_BOOL_VEC2","GL_BOOL_VEC3","GL_BOOL_VEC4","GL_FLOAT_MAT2","GL_FLOAT_MAT3","GL_FLOAT_MAT4","GL_FLOAT_MAT2x3","GL_FLOAT_MAT2x4","GL_FLOAT_MAT3x2","GL_FLOAT_MAT3x4","GL_FLOAT_MAT4x2","GL_FLOAT_MAT4x3","COMPOSITE_GL_TYPES","getPrimitiveDrawMode","drawMode","decomposeCompositeGLType","compositeGLType","typeAndSize","getCompositeGLType","compType","compComponents","ProgramConfiguration","locationOrName","attributeInfo","varying","compositeType","LOG_PROGRAM_PERF_PRIORITY","GL_SEPARATE_ATTRIBS","V6_DEPRECATED_METHODS","Program","hash","vs","fs","varyings","bufferMode","logPriority","vertexCount","isIndexed","indexType","instanceCount","isInstanced","vertexArray","transformFeedback","samplers","fb","primitiveMode","uniform","textureUpdate","textureIndex","texturesRenderable","shaderHandles","shaderHandle","programName","uniformIndices","blockName","blockIndex","blockBinding","GL_QUERY_RESULT","GL_QUERY_RESULT_AVAILABLE","GL_TIME_ELAPSED_EXT","GL_TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN","GL_ANY_SAMPLES_PASSED","GL_ANY_SAMPLES_PASSED_CONSERVATIVE","Query","hasTimerQuery","conservative","resultAvailable","counter","poll","TransformFeedback","buffers","bufferName","bufferOrParams","byteSize","bufferIndex","getScratchArrayBuffer","getScratchArray","scratchArrayBuffer","fillArray","total","copied","ERR_ELEMENTS","VertexArrayObject","elementBuffer","integer","elementCount","constantValue","updateNeeded","v1","v2","ERR_ATTRIBUTE_TYPE","MULTI_LOCATION_ATTRIBUTE_REGEXP","DEPRECATIONS_V6","VertexArray","MAX_ATTRIBUTES","attributes","appAccessor","valueAccessor","INVALID_RESULT","accessInfo","currentAccessor","attributeName","multiLocation","locationOffset","constant","drawParams","formatArrayValue","maxElts","formatValue","terminator","isInteger","getDebugTableForUniforms","header","undefinedOnly","SHADER_MODULE_UNIFORM_REGEXP","PROJECT_MODULE_UNIFORM_REGEXP","uniformLocations","uniformNames","addUniformToTable","unusedCount","unusedTable","isDefined","isUniformDefined","getDebugTableForVertexArray","getDebugTableRow","attributeLocation","rowHeader","getGLSLDeclaration","attribute","verts","instanced","typeAndName","getDebugTableForProgramConfiguration","config","glslDeclaration","varyingInfo","statIdCounter","AnimationLoop","onCreateContext","onAddHTML","onInitialize","onRender","onFinalize","glOptions","createFramebuffer","autoResizeViewport","autoResizeDrawingBuffer","appContext","timeline","defaultValue","renderFrame","display","animationFrameId","renderFrameCallback","wrapperDiv","div","html","VERTEX_SHADER","FRAGMENT_SHADER","TYPE_DEFINITIONS","propType","parsePropTypes","propDefs","propTypes","propDef","parsePropType","getTypeOf","ShaderModule","dependencies","getUniforms","deprecations","defines","inject","vertexShader","fragmentShader","normalizeInjections","moduleSource","shaderSource","def","injections","hook","injection","stage","resolveModules","modules","getShaderDependencies","instantiateModules","moduleMap","moduleDepth","getDependencyGraph","seen","isOldIE","navigator","GL_VENDOR","GL_RENDERER","GL_VERSION","GL_SHADING_LANGUAGE_VERSION","getContextInfo","vendor","renderer","identifyGPUVendor","compiledGlslExtensions","canCompileGLGSExtension","extensionName","behavior","canCompile","getFeature","getPlatformShaderDefines","getVersionDefines","glslVersion","isFragment","versionDefines","MODULE_INJECTORS_VS","MODULE_INJECTORS_FS","MODULE_INJECTORS","DECLARATION_INJECT_MARKER","REGEX_START_OF_MAIN","REGEX_END_OF_MAIN","fragments","injectShader","injectStandardStubs","isVertex","fragmentData","fragmentString","combineInjects","injects","testVariable","qualifier","ES300_REPLACEMENTS","ES300_VERTEX_REPLACEMENTS","ES300_FRAGMENT_REPLACEMENTS","ES100_REPLACEMENTS","ES100_VERTEX_REPLACEMENTS","ES100_FRAGMENT_REPLACEMENTS","ES100_FRAGMENT_OUTPUT_NAME","ES300_FRAGMENT_OUTPUT_REGEX","transpileShader","targetGLSLVersion","convertShader","convertFragmentShaderTo300","convertFragmentShaderTo100","replacements","pattern","outputMatch","outputName","INJECT_SHADER_DECLARATIONS","SHADER_TYPE","FRAGMENT_SHADER_PROLOGUE","assembleShaders","assembleShader","assembleGetUniforms","hookFunctions","transpileToGLSL100","prologue","sourceLines","versionLine","coreSource","allDefines","assembledSource","getShaderType","getApplicationDefines","hookFunctionMap","normalizeHookFunctions","hookInjections","declInjections","mainInjections","injectionType","getHookFunctions","moduleUniforms","sourceText","hookName","hookFunction","signature","FS100","FS_GLES","FS300","getQualifierDetails","qualifiers","definition","getPassthroughFS","inputType","outputValue","convertToVec4","typeToChannelSuffix","typeToChannelCount","variable","fp32shader","fp32","precision","map","ai","epsilon","oldEpsilon","duplicateArray","_extendableBuiltin","cls","ExtendableBuiltin","MathArray","targetArray","arrayOrObject","minVector","maxVector","vectors","scalar","valid","validateVector","checkNumber","checkVector","callerName","Vector","mathArray","product","vec2_transformMat4AsVector","vec3_transformMat4AsVector","vec3_transformMat2","ORIGIN","ZERO","Vector3","vec3.angle","vec3.cross","radians","origin","vec3.rotateX","vec3.rotateY","vec3.rotateZ","matrix4","vec3.transformMat4","matrix3","vec3.transformMat3","matrix2","quaternion","vec3.transformQuat","Matrix","row","col","columnIndex","firstIndex","columnVector","INDICES","DEFAULT_FOVY","DEFAULT_ASPECT","DEFAULT_NEAR","DEFAULT_FAR","IDENTITY_MATRIX","Matrix4","getIdentityMatrix","getZeroMatrix","m00","m10","m20","m30","m01","m11","m21","m31","m02","m12","m22","m32","m03","m13","m23","m33","mat4.fromQuat","view","computeInfinitePerspectiveOffCenter","mat4.frustum","mat4.lookAt","mat4.ortho","checkRadians","halfY","mat4.determinant","scaleResult","inverseScale0","inverseScale1","inverseScale2","mat4.transpose","mat4.invert","mat4.multiply","mat4.rotateY","angleXYZ","mat4.rotate","vec4.transformMat4","vec2.transformMat4","IDENTITY","possiblyDegrees","column0Row0","column1Row1","column2Row0","column2Row1","column2Row2","column2Row3","column3Row2","DEFAULT_HIGHLIGHT_COLOR","DEFAULT_MODULE_OPTIONS","selectedColor","picking","transform","ProgramManager","moduleName","vsHash","fsHash","moduleHashes","varyingHashes","defineKeys","injectKeys","defineHashes","injectHashes","assembled","appModules","GLTF_TO_LUMA_ATTRIBUTE_MAP","getBuffersFromGeometry","geometry","indices","remappedName","mapAttributeName","inferAttributeAccessor","attributeMap","category","LOG_DRAW_PRIORITY","LOG_DRAW_TIMEOUT","ERR_MODEL_PARAMS","DRAW_PARAMS","Model","normalizedAttributes","moduleSettings","indexOffset","vertexArrayInstanced","onBeforeRender","onAfterRender","didDraw","discard","feedbackBuffers","unbindModels","model","animationProps","logDrawTimeout","attributeTable","uniformTable","missingTable","missingCount","configTable","BufferTransform","binding","sourceBuffers","varyingName","sourceName","feedbackName","bufferOrRef","nextIndex","srcName","dstName","SAMPLER_UNIFORM_PREFIX","SIZE_UNIFORM_PREFIX","VS_POS_VARIABLE","updateForTextures","sourceTextureMap","targetTextureVarying","targetTexture","sourceCount","targetTextureType","samplerTextureMap","updatedVs","finalInject","vsLines","updateVsLines","updated","processAttributeDefinition","updatedLine","getVaryingType","sizeName","uniformDeclaration","posInstructions","getSizeUniforms","textureName","getAttributeDefinition","getSamplerDeclerations","samplerName","uniformDeclerations","qualaiferDetails","textureMap","attributeData","sampleInstruction","SRC_TEX_PARAMETER_OVERRIDES","FS_OUTPUT_VARIABLE","TextureTransform","updatedModelProps","sourceTextures","sampler","sizeUniforms","packed","channelCount","packedPixels","packCount","j","_targetTextureVarying","_swapTexture","textureOrReference","_sourceTextures","_targetTexture","elementIds","_","combinedInject","transformModule","Transform","bufferTransform","textureTransform","clearRenderTarget","updatedOpts","swapped","resourceTransforms","resourceTransform","updatedProps","canCreateBufferTransform","canCreateTextureTransform","DRAW_MODE","Geometry","channelHandles","animationHandles","Timeline","delay","duration","rate","repeat","channel","animationHandle","animation","animations","animationData","channelHandle","engineTime","offsetTime","totalDuration","COORDINATE_SYSTEM","PROJECTION_MODE","UNIT","EVENTS","OPERATION","COORDINATE_SYSTEM_GLSL_CONSTANTS","PROJECTION_MODE_GLSL_CONSTANTS","UNIT_GLSL_CONSTANTS","projectShader","isEqual","memoize","compute","cachedArgs","cachedResult","ZERO_VECTOR","VECTOR_TO_POINT_MATRIX","DEFAULT_PIXELS_PER_UNIT2","DEFAULT_COORDINATE_ORIGIN","getMemoizedViewportUniforms","calculateViewportUniforms","getOffsetOrigin","coordinateSystem","coordinateOrigin","shaderCoordinateOrigin","geospatialOrigin","offsetMode","calculateMatrixAndOffset","viewMatrixUncentered","projectionMatrix","viewMatrix","viewProjectionMatrix","projectionCenter","originCommon","cameraPosCommon","getUniformsFromViewport","modelMatrix","autoWrapLongitude","distanceScales","viewportSize","distanceScalesAtOrigin","INITIAL_MODULE_OPTIONS","project","project32","getMemoizedViewportCenterPosition","getViewportCenterPosition","getMemoizedViewProjectionMatrices","getViewProjectionMatrices","DEFAULT_SHADOW_COLOR","screenToCommonSpace","shadowMatrices","projectionMatrices","corners","shadowMatrix","positions","corner","position","createShadowUniforms","shadowEnabled","projectCenters","viewProjectionMatrices","viewProjectionMatrixCentered","shadow","DEFAULT_MODULES","SHADER_HOOKS","createProgramManager","programManager","shaderModule","shaderHook","DEFAULT_LIGHT_COLOR","DEFAULT_LIGHT_INTENSITY","idCount","AmbientLight","intensity","DEFAULT_LIGHT_DIRECTION","DirectionalLight","_shadow","Pass","LayersPass","moduleParameters","viewports","views","onViewportActive","clearStack","clearCanvas","clearGLCanvas","renderStats","drawLayerParams","subViewports","subViewport","layers","pass","layerFilter","cullRect","effects","indexResolver","layerIndexResolver","drawContext","layerFilterCache","layerIndex","shouldDrawLayer","layerParam","globalModuleParameters","glViewport","getGLViewport","clearOpts","renderStatus","layerRenderIndex","layerParameters","rootLayerId","_layer$internalState","effect","_effect$getModulePara","startIndex","layerIndices","resolvers","resolveLayerIndex","isDrawn","indexOverride","layerId","parentId","resolver","useTarget","pixelRatio","dimensions","ShadowPass","DEFAULT_AMBIENT_LIGHT_PROPS","DEFAULT_DIRECTIONAL_LIGHT_PROPS","LightingEffect","lightSource","light","directionalLight","pointLight","shadowPass","lightMatrices","ambientLight","pointLights","directionalLights","TypedArrayManager","copy","initialize","maxCount","newSize","maxSize","newArray","sizeToAllocate","pool","defaultTypedArrayManager","getCameraPosition","viewMatrixInverse","getFrustumPlanes","getFrustumPlane","scratchVector","d","L","fp64LowPart","scratchArray","toDoublePrecisionArray","endIndex","typedArrayManager","sourceIndex","targetIndex","DEFAULT_DISTANCE_SCALES","createProjectionMatrix","orthographic","fovyRadians","Viewport","worldPosition","targetZWorld","X","Y","Z","unprojectOption","coords","meterOffset","vpm","viewportMatrix","WebMercatorViewport","worldOffset","legacyMeterSizes","projectionParameters","minOffset","maxOffset","offsetViewport","fromLocation","toLocation","vec2.add","vec2.negate","newCenter","lngLatZToWorldPosition","normalizeParameters","fromCoordinateSystem","fromCoordinateOrigin","getWorldPosition","projectPosition","positionCommonSpace","vec3.sub","LIFECYCLE","COMPONENT_SYMBOL","ASYNC_DEFAULTS_SYMBOL","ASYNC_ORIGINAL_SYMBOL","ASYNC_RESOLVED_SYMBOL","flatten","filter","flattenArray","consumer","forceUpdate","loadCount","subscriber","ResourceManager","protocol","resourceId","persistent","res","consumerId","requestId","request","onChange","resources","consumers","oldResource","TRACE_SET_LAYERS","TRACE_ACTIVATE_VIEWPORT","LayerManager","deck","_viewport","redraw","layerNeedsRedraw","layerIds","newLayers","flatLayers","oldLayers","oldLayerMap","oldLayer","generatedLayers","needsUpdate","newLayer","sublayers","deepEqual","aValue","bValue","ViewManager","controller","viewId","viewMap","viewOrViewId","viewState","Controller","_this$getView","controllerProps","resolvedProps","oldControllers","invalidateControllers","oldController","hasController","newViews","oldViews","PERCENT_OR_PIXELS_REGEX","parsePosition","relative","getPosition","extent","View","viewportInstance","viewportDimensions","newViewState","Transition","settings","_this$settings$onStar","_this$settings","_this$settings$onEnd","_this$settings2","_this$settings$onInte","_this$settings3","_this$settings$onUpda","_this$settings4","TRANSITION_EVENTS","DEFAULT_EASING","DEFAULT_INTERRUPTION","TransitionManager","transition","interpolator","startProps","endProps","easing","nextProps","transitionTriggered","currentProps","interruption","transitionDuration","transitionInterpolator","startViewstate","endViewStateProps","initialProps","transitionSettings","TransitionInterpolator","compare","extract","required","startViewStateProps","DEFAULT_REQUIRED_PROPS","LinearInterpolator","transitionProps","normalizedOpts","makeViewport","around","startViewport","endViewport","aroundPosition","propsInTransition","NO_TRANSITION_PROPS","DEFAULT_INERTIA","INERTIA_EASING","EVENT_TYPES","pinchEventWorkaround","customEvents","_this$eventManager","eventStartBlocked","pos","inside","timer","inertia","scrollZoom","dragPan","dragRotate","doubleClickZoom","touchZoom","touchRotate","keyboard","isInteractive","eventNames","newControllerState","extraProps","interactionState","oldViewState","newStates","alternateMode","endPos","speed","smooth","delta","rotation","_lastPinchEvent","velocityZ","endScale","isZoomOut","funcKey","zoomSpeed","moveSpeed","rotateSpeedX","rotateSpeedY","controllerState","ViewState","PITCH_MOUSE_THRESHOLD","PITCH_ACCEL","MapState","maxPitch","minPitch","startPanLngLat","startZoomLngLat","startRotatePos","startBearing","startPitch","startZoom","normalize","startPos","deltaAngleX","deltaAngleY","newRotation","zoomedViewport","fromProps","centerY","startY","deltaScaleX","deltaScaleY","MapController","oldProps","MapView","MaskPass","mapSize","colorMask","OrthographicViewport","flipY","zoomX","zoomY","zoom_","metersPerUnit","OrbitState","rotationX","rotationOrbit","minRotationX","maxRotationX","startPanPosition","startRotationX","startRotationOrbit","startZoomPosition","startPosition","newZoom","OrthographicState","deltaZoom","newZoomX","newZoomY","OrthographicController","OrthographicView","getMaskBounds","subLayerBounds","viewportBounds","paddedBounds","_doubleBounds","getMaskViewport","MaskEffect","maskLayers","channelMap","viewportChanged","maskId","channelInfo","oldChannelInfo","maskChanged","maskPass","maskMap","maskViewport","DEFAULT_LIGHTING_EFFECT","EffectManager","DrawLayersPass","PICKING_PARAMETERS","PickLayersPass","pickingFBO","pickZ","encodedColors","decodeColor","pickParameters","encodeColor","encoded","byLayer","byAlpha","pickedColor","TRACE_RENDER_LAYERS","DeckRenderer","layerPass","outputBuffer","renderBuffers","lastPostProcessEffect","NO_PICKED_OBJECT","getClosestObject","pickedColors","decodePickingColor","deviceX","deviceY","deviceRadius","deviceRect","minSquareDistanceToCenter","closestPixelIndex","dy2","d2","pickedObject","getUniqueObjects","uniqueColors","colorKey","getEmptyPickingInfo","pickInfo","pickedViewport","getViewportFromCoordinates","coordinate","point","processPickInfo","lastPickedInfo","pickedLayer","pickedObjectIndex","affectedLayers","lastPickedPixelIndex","lastPickedLayerId","pickedLayerId","lastPickedLayer","baseInfo","infos","getLayerPickingInfo","rootLayer","sourceLayer","DeckPicker","lastPickedViewportId","_this$pickingFBO","_this$depthFBO","depthFBO","pickableLayers","radius","unproject3D","devicePixelRange","devicePixel","pickedResult","maxObjects","leftTop","deviceLeft","deviceTop","rightBottom","deviceRight","deviceBottom","pickInfos","uniqueInfos","isMaxObjects","deviceWidth","deviceHeight","defaultStyle","Tooltip","canvasParent","displayInfo","el","getCursor","isDragging","defaultProps","Deck","_pickRequest","eventOptions","layerHandler","rootHandler","handled","pickedInfo","_this$layerManager","_this$viewManager","_this$effectManager","_this$deckRenderer","_this$deckPicker","_this$tooltip","_this$canvas$parentEl","viewManagerNeedsRedraw","layerManagerNeedsRedraw","effectManagerNeedsRedraw","deckRendererNeedsRedraw","redrawReason","resourceIds","statKey","cssWidth","_props$style","cssHeight","_this$viewManager2","emptyInfo","_info$layer","container","renderOptions","animationLoopStats","metrics","memoryStats","ShaderAttribute","dataColumn","glArrayFromType","getStride","resolveShaderAttribute","baseAccessor","shaderAttributeOptions","vertexOffset","elementOffset","resolveDoublePrecisionShaderAttributes","resolvedOptions","DataColumn","logicalType","doublePrecision","bufferType","defaultType","shaderAttributes","isBuffer64Bit","doubleShaderAttributeDefs","shaderAttributeDef","numInstances","requiredBufferSize","startOffset","endOffset","illegalArrayType","value1","value2","EMPTY_ARRAY","placeholderArray","createIterable","startRow","endRow","iterable","objectInfo","getAccessorFromBuffer","startIndices","nested","bytesPerElement","elementStride","EMPTY","FULL","rangeList","range","newRangeList","range0","padArrayChunk","getData","sourceLength","targetLength","datum","padArray","sourceStartIndices","targetStartIndices","getChunkData","nextSourceIndex","nextTargetIndex","DEFAULT_TRANSITION_SETTINGS","normalizeTransitionSettings","userSettings","layerSettings","getSourceBufferAttribute","getAttributeTypeFromSize","cycleBuffers","getAttributeBufferLength","multiplier","padBuffer","fromLength","fromStartIndices","precisionMultiplier","toStartIndices","hasStartIndices","toLength","isConstant","toData","getMissingData","Attribute","range.FULL","layout","clearChangedFlags","needsRedraw","dataRange","range.add","range.EMPTY","updateRanges","noAlloc","binaryValue","needsNormalize","shaderAttributeDefs","shaderAttributeName","accessorFunc","objectValue","numVertices","GPUInterpolationTransition","getTransform","bufferOpts","padBufferOpts","attributeType","GPUSpringTransition","getTexture","TRANSITION_TYPES","AttributeTransitionManager","transitions","animatedAttributes","isNew","TransitionType","TRACE_INVALIDATE","TRACE_UPDATE_START","TRACE_UPDATE_END","TRACE_ATTRIBUTE_UPDATE_START","TRACE_ATTRIBUTE_ALLOCATE","TRACE_ATTRIBUTE_UPDATE_END","AttributeManager","attributeNameArray","triggerName","invalidatedAttributes","accessorName","attributeTransitionManager","transitionUpdated","changedAttributes","excludeAttributes","triggers","updateTriggers","CPUInterpolationTransition","fromValue","toValue","updateSpringElement","prev","cur","damping","stiffness","spring","damper","updateSpring","next","distanceSquare","CPUSpringTransition","_prevValue","_currValue","nextValue","UniformTransitionManager","validateProps","getPropTypes","validate","diffProps","propsChangedReason","compareProps","dataChangedReason","diffDataProps","updateTriggersChangedReason","diffUpdateTriggers","diffExtensions","diffTransitions","comparePropValues","ignoreProps","newProp","oldProp","equal","dataChanged","dataComparator","_dataDiff","diffUpdateTrigger","oldExtensions","newTriggers","oldTriggers","LayerType","ERR_NOT_OBJECT","ERR_NOT_CONTAINER","isPlainObject","mergeShaders","mergedInjection","DEFAULT_TEXTURE_PARAMETERS","internalTextures","createTexture","specialTextureParameters","destroyTexture","arrayEqual","valueType","component","dataTransform","deprecated","normalizePropDefinition","createProps","propObjects","propsPrototype","getPropsPrototype","propsInstance","componentClass","getOwnProperty","createPropsPrototypeAndTypes","parentClass","parentDefaultProps","componentDefaultProps","componentPropDefs","createPropsPrototype","addAsyncPropsToPropPrototype","addDeprecatedPropsToPropPrototype","parentProps","getComponentName","newValue","nameStr","newPropName","hasOwnProperty","defaultValues","descriptors","getDescriptorForAsyncProp","componentName","Component","asyncProps","EMPTY_PROPS","ComponentState","asyncProp","resolvedValues","originalValues","promise","LayerState","attributeManager","onDataLoad","TRACE_CHANGE_FLAG","TRACE_INITIALIZE","TRACE_UPDATE","TRACE_FINALIZE","TRACE_MATCHED","MAX_PICKING_COLOR_CACHE_SIZE","areViewportsEqual","oldViewport","pickingColorCache","loadOptions","signal","resourceManager","_loadOptions","inResourceManager","Layer","partialState","pickingEvent","i1","i2","i3","instancePositions","shaders","neededPickingBuffer","needPickingBuffer","pickingColors","instancePickingColors","pickingColorsAttribute","_this$props$onError","_this$props","_this$context","_this$context$onError","_this$internalState","uniformTransitions","cacheSize","newCacheSize","pickingColor","objectIndex","colors","internalState","stateNeedsUpdate","currentViewport","updateParams","oldModels","modelChanged","opacity","getPolygonOffset","offsets","_this$internalState2","flags","changeFlags","flagChanged","prevDataChangedReason","propsOrDataChanged","_newProps$transitions","pickingModuleParameters","highlightColor","autoHighlight","highlightedObjectIndex","attributeManagerNeedsRedraw"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268]}